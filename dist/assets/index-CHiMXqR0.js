function MN(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Da=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function q5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function pc(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var V5={exports:{}},ah={},$5={exports:{}},yt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mc=Symbol.for("react.element"),DN=Symbol.for("react.portal"),FN=Symbol.for("react.fragment"),ON=Symbol.for("react.strict_mode"),jN=Symbol.for("react.profiler"),UN=Symbol.for("react.provider"),BN=Symbol.for("react.context"),qN=Symbol.for("react.forward_ref"),VN=Symbol.for("react.suspense"),$N=Symbol.for("react.memo"),HN=Symbol.for("react.lazy"),t1=Symbol.iterator;function zN(t){return t===null||typeof t!="object"?null:(t=t1&&t[t1]||t["@@iterator"],typeof t=="function"?t:null)}var H5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z5=Object.assign,G5={};function Rl(t,e,n){this.props=t,this.context=e,this.refs=G5,this.updater=n||H5}Rl.prototype.isReactComponent={};Rl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Rl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function W5(){}W5.prototype=Rl.prototype;function lg(t,e,n){this.props=t,this.context=e,this.refs=G5,this.updater=n||H5}var ug=lg.prototype=new W5;ug.constructor=lg;z5(ug,Rl.prototype);ug.isPureReactComponent=!0;var n1=Array.isArray,J5=Object.prototype.hasOwnProperty,cg={current:null},K5={key:!0,ref:!0,__self:!0,__source:!0};function Y5(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)J5.call(e,r)&&!K5.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:mc,type:t,key:s,ref:o,props:i,_owner:cg.current}}function GN(t,e){return{$$typeof:mc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function dg(t){return typeof t=="object"&&t!==null&&t.$$typeof===mc}function WN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var r1=/\/+/g;function kp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?WN(""+t.key):e.toString(36)}function Wd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case mc:case DN:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+kp(o,0):r,n1(i)?(n="",t!=null&&(n=t.replace(r1,"$&/")+"/"),Wd(i,e,n,"",function(u){return u})):i!=null&&(dg(i)&&(i=GN(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(r1,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",n1(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+kp(s,a);o+=Wd(s,e,n,l,i)}else if(l=zN(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+kp(s,a++),o+=Wd(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function fd(t,e,n){if(t==null)return t;var r=[],i=0;return Wd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function JN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var or={current:null},Jd={transition:null},KN={ReactCurrentDispatcher:or,ReactCurrentBatchConfig:Jd,ReactCurrentOwner:cg};function X5(){throw Error("act(...) is not supported in production builds of React.")}yt.Children={map:fd,forEach:function(t,e,n){fd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return fd(t,function(){e++}),e},toArray:function(t){return fd(t,function(e){return e})||[]},only:function(t){if(!dg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};yt.Component=Rl;yt.Fragment=FN;yt.Profiler=jN;yt.PureComponent=lg;yt.StrictMode=ON;yt.Suspense=VN;yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KN;yt.act=X5;yt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=z5({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=cg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)J5.call(e,l)&&!K5.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:mc,type:t.type,key:i,ref:s,props:r,_owner:o}};yt.createContext=function(t){return t={$$typeof:BN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:UN,_context:t},t.Consumer=t};yt.createElement=Y5;yt.createFactory=function(t){var e=Y5.bind(null,t);return e.type=t,e};yt.createRef=function(){return{current:null}};yt.forwardRef=function(t){return{$$typeof:qN,render:t}};yt.isValidElement=dg;yt.lazy=function(t){return{$$typeof:HN,_payload:{_status:-1,_result:t},_init:JN}};yt.memo=function(t,e){return{$$typeof:$N,type:t,compare:e===void 0?null:e}};yt.startTransition=function(t){var e=Jd.transition;Jd.transition={};try{t()}finally{Jd.transition=e}};yt.unstable_act=X5;yt.useCallback=function(t,e){return or.current.useCallback(t,e)};yt.useContext=function(t){return or.current.useContext(t)};yt.useDebugValue=function(){};yt.useDeferredValue=function(t){return or.current.useDeferredValue(t)};yt.useEffect=function(t,e){return or.current.useEffect(t,e)};yt.useId=function(){return or.current.useId()};yt.useImperativeHandle=function(t,e,n){return or.current.useImperativeHandle(t,e,n)};yt.useInsertionEffect=function(t,e){return or.current.useInsertionEffect(t,e)};yt.useLayoutEffect=function(t,e){return or.current.useLayoutEffect(t,e)};yt.useMemo=function(t,e){return or.current.useMemo(t,e)};yt.useReducer=function(t,e,n){return or.current.useReducer(t,e,n)};yt.useRef=function(t){return or.current.useRef(t)};yt.useState=function(t){return or.current.useState(t)};yt.useSyncExternalStore=function(t,e,n){return or.current.useSyncExternalStore(t,e,n)};yt.useTransition=function(){return or.current.useTransition()};yt.version="18.3.1";$5.exports=yt;var He=$5.exports;const YN=q5(He);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XN=He,QN=Symbol.for("react.element"),ZN=Symbol.for("react.fragment"),eA=Object.prototype.hasOwnProperty,tA=XN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nA={key:!0,ref:!0,__self:!0,__source:!0};function Q5(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)eA.call(e,r)&&!nA.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:QN,type:t,key:s,ref:o,props:i,_owner:tA.current}}ah.Fragment=ZN;ah.jsx=Q5;ah.jsxs=Q5;V5.exports=ah;var y=V5.exports,E0={},Z5={exports:{}},Or={},ew={exports:{}},tw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(X,ae){var fe=X.length;X.push(ae);e:for(;0<fe;){var Ce=fe-1>>>1,P=X[Ce];if(0<i(P,ae))X[Ce]=ae,X[fe]=P,fe=Ce;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ae=X[0],fe=X.pop();if(fe!==ae){X[0]=fe;e:for(var Ce=0,P=X.length,q=P>>>1;Ce<q;){var z=2*(Ce+1)-1,Q=X[z],re=z+1,ce=X[re];if(0>i(Q,fe))re<P&&0>i(ce,Q)?(X[Ce]=ce,X[re]=fe,Ce=re):(X[Ce]=Q,X[z]=fe,Ce=z);else if(re<P&&0>i(ce,fe))X[Ce]=ce,X[re]=fe,Ce=re;else break e}}return ae}function i(X,ae){var fe=X.sortIndex-ae.sortIndex;return fe!==0?fe:X.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],f=1,p=null,m=3,g=!1,S=!1,_=!1,E=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(X){for(var ae=n(u);ae!==null;){if(ae.callback===null)r(u);else if(ae.startTime<=X)r(u),ae.sortIndex=ae.expirationTime,e(l,ae);else break;ae=n(u)}}function M(X){if(_=!1,T(X),!S)if(n(l)!==null)S=!0,le(U);else{var ae=n(u);ae!==null&&we(M,ae.startTime-X)}}function U(X,ae){S=!1,_&&(_=!1,b(B),B=-1),g=!0;var fe=m;try{for(T(ae),p=n(l);p!==null&&(!(p.expirationTime>ae)||X&&!D());){var Ce=p.callback;if(typeof Ce=="function"){p.callback=null,m=p.priorityLevel;var P=Ce(p.expirationTime<=ae);ae=t.unstable_now(),typeof P=="function"?p.callback=P:p===n(l)&&r(l),T(ae)}else r(l);p=n(l)}if(p!==null)var q=!0;else{var z=n(u);z!==null&&we(M,z.startTime-ae),q=!1}return q}finally{p=null,m=fe,g=!1}}var Y=!1,H=null,B=-1,W=5,ne=-1;function D(){return!(t.unstable_now()-ne<W)}function j(){if(H!==null){var X=t.unstable_now();ne=X;var ae=!0;try{ae=H(!0,X)}finally{ae?O():(Y=!1,H=null)}}else Y=!1}var O;if(typeof N=="function")O=function(){N(j)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,he=V.port2;V.port1.onmessage=j,O=function(){he.postMessage(null)}}else O=function(){E(j,0)};function le(X){H=X,Y||(Y=!0,O())}function we(X,ae){B=E(function(){X(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){S||g||(S=!0,le(U))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(X){switch(m){case 1:case 2:case 3:var ae=3;break;default:ae=m}var fe=m;m=ae;try{return X()}finally{m=fe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,ae){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var fe=m;m=X;try{return ae()}finally{m=fe}},t.unstable_scheduleCallback=function(X,ae,fe){var Ce=t.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Ce+fe:Ce):fe=Ce,X){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=fe+P,X={id:f++,callback:ae,priorityLevel:X,startTime:fe,expirationTime:P,sortIndex:-1},fe>Ce?(X.sortIndex=fe,e(u,X),n(l)===null&&X===n(u)&&(_?(b(B),B=-1):_=!0,we(M,fe-Ce))):(X.sortIndex=P,e(l,X),S||g||(S=!0,le(U))),X},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(X){var ae=m;return function(){var fe=m;m=ae;try{return X.apply(this,arguments)}finally{m=fe}}}})(tw);ew.exports=tw;var rA=ew.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iA=He,Fr=rA;function Fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nw=new Set,Ju={};function na(t,e){Sl(t,e),Sl(t+"Capture",e)}function Sl(t,e){for(Ju[t]=e,t=0;t<e.length;t++)nw.add(e[t])}var vs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),T0=Object.prototype.hasOwnProperty,sA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,i1={},s1={};function oA(t){return T0.call(s1,t)?!0:T0.call(i1,t)?!1:sA.test(t)?s1[t]=!0:(i1[t]=!0,!1)}function aA(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lA(t,e,n,r){if(e===null||typeof e>"u"||aA(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ar(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Un={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Un[t]=new ar(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Un[e]=new ar(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Un[t]=new ar(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Un[t]=new ar(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Un[t]=new ar(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Un[t]=new ar(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Un[t]=new ar(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Un[t]=new ar(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Un[t]=new ar(t,5,!1,t.toLowerCase(),null,!1,!1)});var fg=/[\-:]([a-z])/g;function hg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(fg,hg);Un[e]=new ar(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(fg,hg);Un[e]=new ar(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(fg,hg);Un[e]=new ar(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Un[t]=new ar(t,1,!1,t.toLowerCase(),null,!1,!1)});Un.xlinkHref=new ar("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Un[t]=new ar(t,1,!1,t.toLowerCase(),null,!0,!0)});function pg(t,e,n,r){var i=Un.hasOwnProperty(e)?Un[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lA(e,n,i,r)&&(n=null),r||i===null?oA(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var _s=iA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hd=Symbol.for("react.element"),Ja=Symbol.for("react.portal"),Ka=Symbol.for("react.fragment"),mg=Symbol.for("react.strict_mode"),C0=Symbol.for("react.profiler"),rw=Symbol.for("react.provider"),iw=Symbol.for("react.context"),gg=Symbol.for("react.forward_ref"),k0=Symbol.for("react.suspense"),P0=Symbol.for("react.suspense_list"),vg=Symbol.for("react.memo"),$s=Symbol.for("react.lazy"),sw=Symbol.for("react.offscreen"),o1=Symbol.iterator;function vu(t){return t===null||typeof t!="object"?null:(t=o1&&t[o1]||t["@@iterator"],typeof t=="function"?t:null)}var Yt=Object.assign,Pp;function ku(t){if(Pp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Pp=e&&e[1]||""}return`
`+Pp+t}var Ip=!1;function Rp(t,e){if(!t||Ip)return"";Ip=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ip=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ku(t):""}function uA(t){switch(t.tag){case 5:return ku(t.type);case 16:return ku("Lazy");case 13:return ku("Suspense");case 19:return ku("SuspenseList");case 0:case 2:case 15:return t=Rp(t.type,!1),t;case 11:return t=Rp(t.type.render,!1),t;case 1:return t=Rp(t.type,!0),t;default:return""}}function I0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ka:return"Fragment";case Ja:return"Portal";case C0:return"Profiler";case mg:return"StrictMode";case k0:return"Suspense";case P0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case iw:return(t.displayName||"Context")+".Consumer";case rw:return(t._context.displayName||"Context")+".Provider";case gg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case vg:return e=t.displayName||null,e!==null?e:I0(t.type)||"Memo";case $s:e=t._payload,t=t._init;try{return I0(t(e))}catch{}}return null}function cA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return I0(e);case 8:return e===mg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function lo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ow(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dA(t){var e=ow(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function pd(t){t._valueTracker||(t._valueTracker=dA(t))}function aw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ow(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function gf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function R0(t,e){var n=e.checked;return Yt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function a1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=lo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lw(t,e){e=e.checked,e!=null&&pg(t,"checked",e,!1)}function L0(t,e){lw(t,e);var n=lo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?M0(t,e.type,n):e.hasOwnProperty("defaultValue")&&M0(t,e.type,lo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function l1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function M0(t,e,n){(e!=="number"||gf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Pu=Array.isArray;function ul(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+lo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function D0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return Yt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function u1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Fe(92));if(Pu(n)){if(1<n.length)throw Error(Fe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:lo(n)}}function uw(t,e){var n=lo(e.value),r=lo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function c1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function cw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function F0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?cw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var md,dw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(md=md||document.createElement("div"),md.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=md.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ku(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ou={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fA=["Webkit","ms","Moz","O"];Object.keys(Ou).forEach(function(t){fA.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ou[e]=Ou[t]})});function fw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ou.hasOwnProperty(t)&&Ou[t]?(""+e).trim():e+"px"}function hw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=fw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var hA=Yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function O0(t,e){if(e){if(hA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Fe(62))}}function j0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var U0=null;function yg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var B0=null,cl=null,dl=null;function d1(t){if(t=yc(t)){if(typeof B0!="function")throw Error(Fe(280));var e=t.stateNode;e&&(e=fh(e),B0(t.stateNode,t.type,e))}}function pw(t){cl?dl?dl.push(t):dl=[t]:cl=t}function mw(){if(cl){var t=cl,e=dl;if(dl=cl=null,d1(t),e)for(t=0;t<e.length;t++)d1(e[t])}}function gw(t,e){return t(e)}function vw(){}var Lp=!1;function yw(t,e,n){if(Lp)return t(e,n);Lp=!0;try{return gw(t,e,n)}finally{Lp=!1,(cl!==null||dl!==null)&&(vw(),mw())}}function Yu(t,e){var n=t.stateNode;if(n===null)return null;var r=fh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Fe(231,e,typeof n));return n}var q0=!1;if(vs)try{var yu={};Object.defineProperty(yu,"passive",{get:function(){q0=!0}}),window.addEventListener("test",yu,yu),window.removeEventListener("test",yu,yu)}catch{q0=!1}function pA(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(f){this.onError(f)}}var ju=!1,vf=null,yf=!1,V0=null,mA={onError:function(t){ju=!0,vf=t}};function gA(t,e,n,r,i,s,o,a,l){ju=!1,vf=null,pA.apply(mA,arguments)}function vA(t,e,n,r,i,s,o,a,l){if(gA.apply(this,arguments),ju){if(ju){var u=vf;ju=!1,vf=null}else throw Error(Fe(198));yf||(yf=!0,V0=u)}}function ra(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ww(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function f1(t){if(ra(t)!==t)throw Error(Fe(188))}function yA(t){var e=t.alternate;if(!e){if(e=ra(t),e===null)throw Error(Fe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return f1(i),t;if(s===r)return f1(i),e;s=s.sibling}throw Error(Fe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Fe(189))}}if(n.alternate!==r)throw Error(Fe(190))}if(n.tag!==3)throw Error(Fe(188));return n.stateNode.current===n?t:e}function xw(t){return t=yA(t),t!==null?bw(t):null}function bw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bw(t);if(e!==null)return e;t=t.sibling}return null}var _w=Fr.unstable_scheduleCallback,h1=Fr.unstable_cancelCallback,wA=Fr.unstable_shouldYield,xA=Fr.unstable_requestPaint,un=Fr.unstable_now,bA=Fr.unstable_getCurrentPriorityLevel,wg=Fr.unstable_ImmediatePriority,Sw=Fr.unstable_UserBlockingPriority,wf=Fr.unstable_NormalPriority,_A=Fr.unstable_LowPriority,Nw=Fr.unstable_IdlePriority,lh=null,Ji=null;function SA(t){if(Ji&&typeof Ji.onCommitFiberRoot=="function")try{Ji.onCommitFiberRoot(lh,t,void 0,(t.current.flags&128)===128)}catch{}}var Si=Math.clz32?Math.clz32:EA,NA=Math.log,AA=Math.LN2;function EA(t){return t>>>=0,t===0?32:31-(NA(t)/AA|0)|0}var gd=64,vd=4194304;function Iu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Iu(a):(s&=o,s!==0&&(r=Iu(s)))}else o=n&~i,o!==0?r=Iu(o):s!==0&&(r=Iu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Si(e),i=1<<n,r|=t[n],e&=~i;return r}function TA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Si(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=TA(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function $0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Aw(){var t=gd;return gd<<=1,!(gd&4194240)&&(gd=64),t}function Mp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Si(e),t[e]=n}function kA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Si(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function xg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Si(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Rt=0;function Ew(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Tw,bg,Cw,kw,Pw,H0=!1,yd=[],eo=null,to=null,no=null,Xu=new Map,Qu=new Map,Gs=[],PA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function p1(t,e){switch(t){case"focusin":case"focusout":eo=null;break;case"dragenter":case"dragleave":to=null;break;case"mouseover":case"mouseout":no=null;break;case"pointerover":case"pointerout":Xu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qu.delete(e.pointerId)}}function wu(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=yc(e),e!==null&&bg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function IA(t,e,n,r,i){switch(e){case"focusin":return eo=wu(eo,t,e,n,r,i),!0;case"dragenter":return to=wu(to,t,e,n,r,i),!0;case"mouseover":return no=wu(no,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Xu.set(s,wu(Xu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Qu.set(s,wu(Qu.get(s)||null,t,e,n,r,i)),!0}return!1}function Iw(t){var e=Ho(t.target);if(e!==null){var n=ra(e);if(n!==null){if(e=n.tag,e===13){if(e=ww(n),e!==null){t.blockedOn=e,Pw(t.priority,function(){Cw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Kd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=z0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);U0=r,n.target.dispatchEvent(r),U0=null}else return e=yc(n),e!==null&&bg(e),t.blockedOn=n,!1;e.shift()}return!0}function m1(t,e,n){Kd(t)&&n.delete(e)}function RA(){H0=!1,eo!==null&&Kd(eo)&&(eo=null),to!==null&&Kd(to)&&(to=null),no!==null&&Kd(no)&&(no=null),Xu.forEach(m1),Qu.forEach(m1)}function xu(t,e){t.blockedOn===e&&(t.blockedOn=null,H0||(H0=!0,Fr.unstable_scheduleCallback(Fr.unstable_NormalPriority,RA)))}function Zu(t){function e(i){return xu(i,t)}if(0<yd.length){xu(yd[0],t);for(var n=1;n<yd.length;n++){var r=yd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(eo!==null&&xu(eo,t),to!==null&&xu(to,t),no!==null&&xu(no,t),Xu.forEach(e),Qu.forEach(e),n=0;n<Gs.length;n++)r=Gs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Gs.length&&(n=Gs[0],n.blockedOn===null);)Iw(n),n.blockedOn===null&&Gs.shift()}var fl=_s.ReactCurrentBatchConfig,bf=!0;function LA(t,e,n,r){var i=Rt,s=fl.transition;fl.transition=null;try{Rt=1,_g(t,e,n,r)}finally{Rt=i,fl.transition=s}}function MA(t,e,n,r){var i=Rt,s=fl.transition;fl.transition=null;try{Rt=4,_g(t,e,n,r)}finally{Rt=i,fl.transition=s}}function _g(t,e,n,r){if(bf){var i=z0(t,e,n,r);if(i===null)Hp(t,e,r,_f,n),p1(t,r);else if(IA(i,t,e,n,r))r.stopPropagation();else if(p1(t,r),e&4&&-1<PA.indexOf(t)){for(;i!==null;){var s=yc(i);if(s!==null&&Tw(s),s=z0(t,e,n,r),s===null&&Hp(t,e,r,_f,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Hp(t,e,r,null,n)}}var _f=null;function z0(t,e,n,r){if(_f=null,t=yg(r),t=Ho(t),t!==null)if(e=ra(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ww(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _f=t,null}function Rw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bA()){case wg:return 1;case Sw:return 4;case wf:case _A:return 16;case Nw:return 536870912;default:return 16}default:return 16}}var Ys=null,Sg=null,Yd=null;function Lw(){if(Yd)return Yd;var t,e=Sg,n=e.length,r,i="value"in Ys?Ys.value:Ys.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Yd=i.slice(t,1<r?1-r:void 0)}function Xd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function wd(){return!0}function g1(){return!1}function jr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?wd:g1,this.isPropagationStopped=g1,this}return Yt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wd)},persist:function(){},isPersistent:wd}),e}var Ll={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ng=jr(Ll),vc=Yt({},Ll,{view:0,detail:0}),DA=jr(vc),Dp,Fp,bu,uh=Yt({},vc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ag,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bu&&(bu&&t.type==="mousemove"?(Dp=t.screenX-bu.screenX,Fp=t.screenY-bu.screenY):Fp=Dp=0,bu=t),Dp)},movementY:function(t){return"movementY"in t?t.movementY:Fp}}),v1=jr(uh),FA=Yt({},uh,{dataTransfer:0}),OA=jr(FA),jA=Yt({},vc,{relatedTarget:0}),Op=jr(jA),UA=Yt({},Ll,{animationName:0,elapsedTime:0,pseudoElement:0}),BA=jr(UA),qA=Yt({},Ll,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),VA=jr(qA),$A=Yt({},Ll,{data:0}),y1=jr($A),HA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=GA[t])?!!e[t]:!1}function Ag(){return WA}var JA=Yt({},vc,{key:function(t){if(t.key){var e=HA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ag,charCode:function(t){return t.type==="keypress"?Xd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),KA=jr(JA),YA=Yt({},uh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w1=jr(YA),XA=Yt({},vc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ag}),QA=jr(XA),ZA=Yt({},Ll,{propertyName:0,elapsedTime:0,pseudoElement:0}),eE=jr(ZA),tE=Yt({},uh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),nE=jr(tE),rE=[9,13,27,32],Eg=vs&&"CompositionEvent"in window,Uu=null;vs&&"documentMode"in document&&(Uu=document.documentMode);var iE=vs&&"TextEvent"in window&&!Uu,Mw=vs&&(!Eg||Uu&&8<Uu&&11>=Uu),x1=" ",b1=!1;function Dw(t,e){switch(t){case"keyup":return rE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ya=!1;function sE(t,e){switch(t){case"compositionend":return Fw(e);case"keypress":return e.which!==32?null:(b1=!0,x1);case"textInput":return t=e.data,t===x1&&b1?null:t;default:return null}}function oE(t,e){if(Ya)return t==="compositionend"||!Eg&&Dw(t,e)?(t=Lw(),Yd=Sg=Ys=null,Ya=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Mw&&e.locale!=="ko"?null:e.data;default:return null}}var aE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!aE[t.type]:e==="textarea"}function Ow(t,e,n,r){pw(r),e=Sf(e,"onChange"),0<e.length&&(n=new Ng("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Bu=null,ec=null;function lE(t){Jw(t,0)}function ch(t){var e=Za(t);if(aw(e))return t}function uE(t,e){if(t==="change")return e}var jw=!1;if(vs){var jp;if(vs){var Up="oninput"in document;if(!Up){var S1=document.createElement("div");S1.setAttribute("oninput","return;"),Up=typeof S1.oninput=="function"}jp=Up}else jp=!1;jw=jp&&(!document.documentMode||9<document.documentMode)}function N1(){Bu&&(Bu.detachEvent("onpropertychange",Uw),ec=Bu=null)}function Uw(t){if(t.propertyName==="value"&&ch(ec)){var e=[];Ow(e,ec,t,yg(t)),yw(lE,e)}}function cE(t,e,n){t==="focusin"?(N1(),Bu=e,ec=n,Bu.attachEvent("onpropertychange",Uw)):t==="focusout"&&N1()}function dE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ch(ec)}function fE(t,e){if(t==="click")return ch(e)}function hE(t,e){if(t==="input"||t==="change")return ch(e)}function pE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ti=typeof Object.is=="function"?Object.is:pE;function tc(t,e){if(Ti(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!T0.call(e,i)||!Ti(t[i],e[i]))return!1}return!0}function A1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function E1(t,e){var n=A1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=A1(n)}}function Bw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Bw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function qw(){for(var t=window,e=gf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=gf(t.document)}return e}function Tg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mE(t){var e=qw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Bw(n.ownerDocument.documentElement,n)){if(r!==null&&Tg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=E1(n,s);var o=E1(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gE=vs&&"documentMode"in document&&11>=document.documentMode,Xa=null,G0=null,qu=null,W0=!1;function T1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;W0||Xa==null||Xa!==gf(r)||(r=Xa,"selectionStart"in r&&Tg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qu&&tc(qu,r)||(qu=r,r=Sf(G0,"onSelect"),0<r.length&&(e=new Ng("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xa)))}function xd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qa={animationend:xd("Animation","AnimationEnd"),animationiteration:xd("Animation","AnimationIteration"),animationstart:xd("Animation","AnimationStart"),transitionend:xd("Transition","TransitionEnd")},Bp={},Vw={};vs&&(Vw=document.createElement("div").style,"AnimationEvent"in window||(delete Qa.animationend.animation,delete Qa.animationiteration.animation,delete Qa.animationstart.animation),"TransitionEvent"in window||delete Qa.transitionend.transition);function dh(t){if(Bp[t])return Bp[t];if(!Qa[t])return t;var e=Qa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Vw)return Bp[t]=e[n];return t}var $w=dh("animationend"),Hw=dh("animationiteration"),zw=dh("animationstart"),Gw=dh("transitionend"),Ww=new Map,C1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function po(t,e){Ww.set(t,e),na(e,[t])}for(var qp=0;qp<C1.length;qp++){var Vp=C1[qp],vE=Vp.toLowerCase(),yE=Vp[0].toUpperCase()+Vp.slice(1);po(vE,"on"+yE)}po($w,"onAnimationEnd");po(Hw,"onAnimationIteration");po(zw,"onAnimationStart");po("dblclick","onDoubleClick");po("focusin","onFocus");po("focusout","onBlur");po(Gw,"onTransitionEnd");Sl("onMouseEnter",["mouseout","mouseover"]);Sl("onMouseLeave",["mouseout","mouseover"]);Sl("onPointerEnter",["pointerout","pointerover"]);Sl("onPointerLeave",["pointerout","pointerover"]);na("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));na("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));na("onBeforeInput",["compositionend","keypress","textInput","paste"]);na("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));na("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));na("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ru));function k1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,vA(r,e,void 0,t),t.currentTarget=null}function Jw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;k1(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;k1(i,a,u),s=l}}}if(yf)throw t=V0,yf=!1,V0=null,t}function qt(t,e){var n=e[Q0];n===void 0&&(n=e[Q0]=new Set);var r=t+"__bubble";n.has(r)||(Kw(e,t,2,!1),n.add(r))}function $p(t,e,n){var r=0;e&&(r|=4),Kw(n,t,r,e)}var bd="_reactListening"+Math.random().toString(36).slice(2);function nc(t){if(!t[bd]){t[bd]=!0,nw.forEach(function(n){n!=="selectionchange"&&(wE.has(n)||$p(n,!1,t),$p(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bd]||(e[bd]=!0,$p("selectionchange",!1,e))}}function Kw(t,e,n,r){switch(Rw(e)){case 1:var i=LA;break;case 4:i=MA;break;default:i=_g}n=i.bind(null,e,n,t),i=void 0,!q0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Hp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ho(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}yw(function(){var u=s,f=yg(n),p=[];e:{var m=Ww.get(t);if(m!==void 0){var g=Ng,S=t;switch(t){case"keypress":if(Xd(n)===0)break e;case"keydown":case"keyup":g=KA;break;case"focusin":S="focus",g=Op;break;case"focusout":S="blur",g=Op;break;case"beforeblur":case"afterblur":g=Op;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=v1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=OA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=QA;break;case $w:case Hw:case zw:g=BA;break;case Gw:g=eE;break;case"scroll":g=DA;break;case"wheel":g=nE;break;case"copy":case"cut":case"paste":g=VA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=w1}var _=(e&4)!==0,E=!_&&t==="scroll",b=_?m!==null?m+"Capture":null:m;_=[];for(var N=u,T;N!==null;){T=N;var M=T.stateNode;if(T.tag===5&&M!==null&&(T=M,b!==null&&(M=Yu(N,b),M!=null&&_.push(rc(N,M,T)))),E)break;N=N.return}0<_.length&&(m=new g(m,S,null,n,f),p.push({event:m,listeners:_}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==U0&&(S=n.relatedTarget||n.fromElement)&&(Ho(S)||S[ys]))break e;if((g||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,g?(S=n.relatedTarget||n.toElement,g=u,S=S?Ho(S):null,S!==null&&(E=ra(S),S!==E||S.tag!==5&&S.tag!==6)&&(S=null)):(g=null,S=u),g!==S)){if(_=v1,M="onMouseLeave",b="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(_=w1,M="onPointerLeave",b="onPointerEnter",N="pointer"),E=g==null?m:Za(g),T=S==null?m:Za(S),m=new _(M,N+"leave",g,n,f),m.target=E,m.relatedTarget=T,M=null,Ho(f)===u&&(_=new _(b,N+"enter",S,n,f),_.target=T,_.relatedTarget=E,M=_),E=M,g&&S)t:{for(_=g,b=S,N=0,T=_;T;T=Fa(T))N++;for(T=0,M=b;M;M=Fa(M))T++;for(;0<N-T;)_=Fa(_),N--;for(;0<T-N;)b=Fa(b),T--;for(;N--;){if(_===b||b!==null&&_===b.alternate)break t;_=Fa(_),b=Fa(b)}_=null}else _=null;g!==null&&P1(p,m,g,_,!1),S!==null&&E!==null&&P1(p,E,S,_,!0)}}e:{if(m=u?Za(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var U=uE;else if(_1(m))if(jw)U=hE;else{U=dE;var Y=cE}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(U=fE);if(U&&(U=U(t,u))){Ow(p,U,n,f);break e}Y&&Y(t,m,u),t==="focusout"&&(Y=m._wrapperState)&&Y.controlled&&m.type==="number"&&M0(m,"number",m.value)}switch(Y=u?Za(u):window,t){case"focusin":(_1(Y)||Y.contentEditable==="true")&&(Xa=Y,G0=u,qu=null);break;case"focusout":qu=G0=Xa=null;break;case"mousedown":W0=!0;break;case"contextmenu":case"mouseup":case"dragend":W0=!1,T1(p,n,f);break;case"selectionchange":if(gE)break;case"keydown":case"keyup":T1(p,n,f)}var H;if(Eg)e:{switch(t){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else Ya?Dw(t,n)&&(B="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(B="onCompositionStart");B&&(Mw&&n.locale!=="ko"&&(Ya||B!=="onCompositionStart"?B==="onCompositionEnd"&&Ya&&(H=Lw()):(Ys=f,Sg="value"in Ys?Ys.value:Ys.textContent,Ya=!0)),Y=Sf(u,B),0<Y.length&&(B=new y1(B,t,null,n,f),p.push({event:B,listeners:Y}),H?B.data=H:(H=Fw(n),H!==null&&(B.data=H)))),(H=iE?sE(t,n):oE(t,n))&&(u=Sf(u,"onBeforeInput"),0<u.length&&(f=new y1("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:u}),f.data=H))}Jw(p,e)})}function rc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Yu(t,n),s!=null&&r.unshift(rc(t,s,i)),s=Yu(t,e),s!=null&&r.push(rc(t,s,i))),t=t.return}return r}function Fa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function P1(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Yu(n,s),l!=null&&o.unshift(rc(n,l,a))):i||(l=Yu(n,s),l!=null&&o.push(rc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var xE=/\r\n?/g,bE=/\u0000|\uFFFD/g;function I1(t){return(typeof t=="string"?t:""+t).replace(xE,`
`).replace(bE,"")}function _d(t,e,n){if(e=I1(e),I1(t)!==e&&n)throw Error(Fe(425))}function Nf(){}var J0=null,K0=null;function Y0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var X0=typeof setTimeout=="function"?setTimeout:void 0,_E=typeof clearTimeout=="function"?clearTimeout:void 0,R1=typeof Promise=="function"?Promise:void 0,SE=typeof queueMicrotask=="function"?queueMicrotask:typeof R1<"u"?function(t){return R1.resolve(null).then(t).catch(NE)}:X0;function NE(t){setTimeout(function(){throw t})}function zp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Zu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Zu(e)}function ro(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function L1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ml=Math.random().toString(36).slice(2),Gi="__reactFiber$"+Ml,ic="__reactProps$"+Ml,ys="__reactContainer$"+Ml,Q0="__reactEvents$"+Ml,AE="__reactListeners$"+Ml,EE="__reactHandles$"+Ml;function Ho(t){var e=t[Gi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ys]||n[Gi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=L1(t);t!==null;){if(n=t[Gi])return n;t=L1(t)}return e}t=n,n=t.parentNode}return null}function yc(t){return t=t[Gi]||t[ys],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Za(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Fe(33))}function fh(t){return t[ic]||null}var Z0=[],el=-1;function mo(t){return{current:t}}function $t(t){0>el||(t.current=Z0[el],Z0[el]=null,el--)}function Bt(t,e){el++,Z0[el]=t.current,t.current=e}var uo={},Qn=mo(uo),wr=mo(!1),Xo=uo;function Nl(t,e){var n=t.type.contextTypes;if(!n)return uo;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function xr(t){return t=t.childContextTypes,t!=null}function Af(){$t(wr),$t(Qn)}function M1(t,e,n){if(Qn.current!==uo)throw Error(Fe(168));Bt(Qn,e),Bt(wr,n)}function Yw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Fe(108,cA(t)||"Unknown",i));return Yt({},n,r)}function Ef(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||uo,Xo=Qn.current,Bt(Qn,t),Bt(wr,wr.current),!0}function D1(t,e,n){var r=t.stateNode;if(!r)throw Error(Fe(169));n?(t=Yw(t,e,Xo),r.__reactInternalMemoizedMergedChildContext=t,$t(wr),$t(Qn),Bt(Qn,t)):$t(wr),Bt(wr,n)}var fs=null,hh=!1,Gp=!1;function Xw(t){fs===null?fs=[t]:fs.push(t)}function TE(t){hh=!0,Xw(t)}function go(){if(!Gp&&fs!==null){Gp=!0;var t=0,e=Rt;try{var n=fs;for(Rt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}fs=null,hh=!1}catch(i){throw fs!==null&&(fs=fs.slice(t+1)),_w(wg,go),i}finally{Rt=e,Gp=!1}}return null}var tl=[],nl=0,Tf=null,Cf=0,Jr=[],Kr=0,Qo=null,ps=1,ms="";function Lo(t,e){tl[nl++]=Cf,tl[nl++]=Tf,Tf=t,Cf=e}function Qw(t,e,n){Jr[Kr++]=ps,Jr[Kr++]=ms,Jr[Kr++]=Qo,Qo=t;var r=ps;t=ms;var i=32-Si(r)-1;r&=~(1<<i),n+=1;var s=32-Si(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ps=1<<32-Si(e)+i|n<<i|r,ms=s+t}else ps=1<<s|n<<i|r,ms=t}function Cg(t){t.return!==null&&(Lo(t,1),Qw(t,1,0))}function kg(t){for(;t===Tf;)Tf=tl[--nl],tl[nl]=null,Cf=tl[--nl],tl[nl]=null;for(;t===Qo;)Qo=Jr[--Kr],Jr[Kr]=null,ms=Jr[--Kr],Jr[Kr]=null,ps=Jr[--Kr],Jr[Kr]=null}var Dr=null,Lr=null,zt=!1,bi=null;function Zw(t,e){var n=Yr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function F1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dr=t,Lr=ro(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dr=t,Lr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Qo!==null?{id:ps,overflow:ms}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dr=t,Lr=null,!0):!1;default:return!1}}function em(t){return(t.mode&1)!==0&&(t.flags&128)===0}function tm(t){if(zt){var e=Lr;if(e){var n=e;if(!F1(t,e)){if(em(t))throw Error(Fe(418));e=ro(n.nextSibling);var r=Dr;e&&F1(t,e)?Zw(r,n):(t.flags=t.flags&-4097|2,zt=!1,Dr=t)}}else{if(em(t))throw Error(Fe(418));t.flags=t.flags&-4097|2,zt=!1,Dr=t}}}function O1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dr=t}function Sd(t){if(t!==Dr)return!1;if(!zt)return O1(t),zt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Y0(t.type,t.memoizedProps)),e&&(e=Lr)){if(em(t))throw ex(),Error(Fe(418));for(;e;)Zw(t,e),e=ro(e.nextSibling)}if(O1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Lr=ro(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Lr=null}}else Lr=Dr?ro(t.stateNode.nextSibling):null;return!0}function ex(){for(var t=Lr;t;)t=ro(t.nextSibling)}function Al(){Lr=Dr=null,zt=!1}function Pg(t){bi===null?bi=[t]:bi.push(t)}var CE=_s.ReactCurrentBatchConfig;function _u(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Fe(309));var r=n.stateNode}if(!r)throw Error(Fe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Fe(284));if(!n._owner)throw Error(Fe(290,t))}return t}function Nd(t,e){throw t=Object.prototype.toString.call(e),Error(Fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function j1(t){var e=t._init;return e(t._payload)}function tx(t){function e(b,N){if(t){var T=b.deletions;T===null?(b.deletions=[N],b.flags|=16):T.push(N)}}function n(b,N){if(!t)return null;for(;N!==null;)e(b,N),N=N.sibling;return null}function r(b,N){for(b=new Map;N!==null;)N.key!==null?b.set(N.key,N):b.set(N.index,N),N=N.sibling;return b}function i(b,N){return b=ao(b,N),b.index=0,b.sibling=null,b}function s(b,N,T){return b.index=T,t?(T=b.alternate,T!==null?(T=T.index,T<N?(b.flags|=2,N):T):(b.flags|=2,N)):(b.flags|=1048576,N)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function a(b,N,T,M){return N===null||N.tag!==6?(N=Zp(T,b.mode,M),N.return=b,N):(N=i(N,T),N.return=b,N)}function l(b,N,T,M){var U=T.type;return U===Ka?f(b,N,T.props.children,M,T.key):N!==null&&(N.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===$s&&j1(U)===N.type)?(M=i(N,T.props),M.ref=_u(b,N,T),M.return=b,M):(M=sf(T.type,T.key,T.props,null,b.mode,M),M.ref=_u(b,N,T),M.return=b,M)}function u(b,N,T,M){return N===null||N.tag!==4||N.stateNode.containerInfo!==T.containerInfo||N.stateNode.implementation!==T.implementation?(N=e0(T,b.mode,M),N.return=b,N):(N=i(N,T.children||[]),N.return=b,N)}function f(b,N,T,M,U){return N===null||N.tag!==7?(N=Ko(T,b.mode,M,U),N.return=b,N):(N=i(N,T),N.return=b,N)}function p(b,N,T){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Zp(""+N,b.mode,T),N.return=b,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case hd:return T=sf(N.type,N.key,N.props,null,b.mode,T),T.ref=_u(b,null,N),T.return=b,T;case Ja:return N=e0(N,b.mode,T),N.return=b,N;case $s:var M=N._init;return p(b,M(N._payload),T)}if(Pu(N)||vu(N))return N=Ko(N,b.mode,T,null),N.return=b,N;Nd(b,N)}return null}function m(b,N,T,M){var U=N!==null?N.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return U!==null?null:a(b,N,""+T,M);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case hd:return T.key===U?l(b,N,T,M):null;case Ja:return T.key===U?u(b,N,T,M):null;case $s:return U=T._init,m(b,N,U(T._payload),M)}if(Pu(T)||vu(T))return U!==null?null:f(b,N,T,M,null);Nd(b,T)}return null}function g(b,N,T,M,U){if(typeof M=="string"&&M!==""||typeof M=="number")return b=b.get(T)||null,a(N,b,""+M,U);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case hd:return b=b.get(M.key===null?T:M.key)||null,l(N,b,M,U);case Ja:return b=b.get(M.key===null?T:M.key)||null,u(N,b,M,U);case $s:var Y=M._init;return g(b,N,T,Y(M._payload),U)}if(Pu(M)||vu(M))return b=b.get(T)||null,f(N,b,M,U,null);Nd(N,M)}return null}function S(b,N,T,M){for(var U=null,Y=null,H=N,B=N=0,W=null;H!==null&&B<T.length;B++){H.index>B?(W=H,H=null):W=H.sibling;var ne=m(b,H,T[B],M);if(ne===null){H===null&&(H=W);break}t&&H&&ne.alternate===null&&e(b,H),N=s(ne,N,B),Y===null?U=ne:Y.sibling=ne,Y=ne,H=W}if(B===T.length)return n(b,H),zt&&Lo(b,B),U;if(H===null){for(;B<T.length;B++)H=p(b,T[B],M),H!==null&&(N=s(H,N,B),Y===null?U=H:Y.sibling=H,Y=H);return zt&&Lo(b,B),U}for(H=r(b,H);B<T.length;B++)W=g(H,b,B,T[B],M),W!==null&&(t&&W.alternate!==null&&H.delete(W.key===null?B:W.key),N=s(W,N,B),Y===null?U=W:Y.sibling=W,Y=W);return t&&H.forEach(function(D){return e(b,D)}),zt&&Lo(b,B),U}function _(b,N,T,M){var U=vu(T);if(typeof U!="function")throw Error(Fe(150));if(T=U.call(T),T==null)throw Error(Fe(151));for(var Y=U=null,H=N,B=N=0,W=null,ne=T.next();H!==null&&!ne.done;B++,ne=T.next()){H.index>B?(W=H,H=null):W=H.sibling;var D=m(b,H,ne.value,M);if(D===null){H===null&&(H=W);break}t&&H&&D.alternate===null&&e(b,H),N=s(D,N,B),Y===null?U=D:Y.sibling=D,Y=D,H=W}if(ne.done)return n(b,H),zt&&Lo(b,B),U;if(H===null){for(;!ne.done;B++,ne=T.next())ne=p(b,ne.value,M),ne!==null&&(N=s(ne,N,B),Y===null?U=ne:Y.sibling=ne,Y=ne);return zt&&Lo(b,B),U}for(H=r(b,H);!ne.done;B++,ne=T.next())ne=g(H,b,B,ne.value,M),ne!==null&&(t&&ne.alternate!==null&&H.delete(ne.key===null?B:ne.key),N=s(ne,N,B),Y===null?U=ne:Y.sibling=ne,Y=ne);return t&&H.forEach(function(j){return e(b,j)}),zt&&Lo(b,B),U}function E(b,N,T,M){if(typeof T=="object"&&T!==null&&T.type===Ka&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case hd:e:{for(var U=T.key,Y=N;Y!==null;){if(Y.key===U){if(U=T.type,U===Ka){if(Y.tag===7){n(b,Y.sibling),N=i(Y,T.props.children),N.return=b,b=N;break e}}else if(Y.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===$s&&j1(U)===Y.type){n(b,Y.sibling),N=i(Y,T.props),N.ref=_u(b,Y,T),N.return=b,b=N;break e}n(b,Y);break}else e(b,Y);Y=Y.sibling}T.type===Ka?(N=Ko(T.props.children,b.mode,M,T.key),N.return=b,b=N):(M=sf(T.type,T.key,T.props,null,b.mode,M),M.ref=_u(b,N,T),M.return=b,b=M)}return o(b);case Ja:e:{for(Y=T.key;N!==null;){if(N.key===Y)if(N.tag===4&&N.stateNode.containerInfo===T.containerInfo&&N.stateNode.implementation===T.implementation){n(b,N.sibling),N=i(N,T.children||[]),N.return=b,b=N;break e}else{n(b,N);break}else e(b,N);N=N.sibling}N=e0(T,b.mode,M),N.return=b,b=N}return o(b);case $s:return Y=T._init,E(b,N,Y(T._payload),M)}if(Pu(T))return S(b,N,T,M);if(vu(T))return _(b,N,T,M);Nd(b,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,N!==null&&N.tag===6?(n(b,N.sibling),N=i(N,T),N.return=b,b=N):(n(b,N),N=Zp(T,b.mode,M),N.return=b,b=N),o(b)):n(b,N)}return E}var El=tx(!0),nx=tx(!1),kf=mo(null),Pf=null,rl=null,Ig=null;function Rg(){Ig=rl=Pf=null}function Lg(t){var e=kf.current;$t(kf),t._currentValue=e}function nm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function hl(t,e){Pf=t,Ig=rl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(yr=!0),t.firstContext=null)}function Zr(t){var e=t._currentValue;if(Ig!==t)if(t={context:t,memoizedValue:e,next:null},rl===null){if(Pf===null)throw Error(Fe(308));rl=t,Pf.dependencies={lanes:0,firstContext:t}}else rl=rl.next=t;return e}var zo=null;function Mg(t){zo===null?zo=[t]:zo.push(t)}function rx(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Mg(e)):(n.next=i.next,i.next=n),e.interleaved=n,ws(t,r)}function ws(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Hs=!1;function Dg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ix(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function io(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,St&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ws(t,n)}return i=r.interleaved,i===null?(e.next=e,Mg(r)):(e.next=i.next,i.next=e),r.interleaved=e,ws(t,n)}function Qd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xg(t,n)}}function U1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function If(t,e,n,r){var i=t.updateQueue;Hs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=u:a.next=u,f.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;o=0,f=u=l=null,a=s;do{var m=a.lane,g=a.eventTime;if((r&m)===m){f!==null&&(f=f.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=t,_=a;switch(m=e,g=n,_.tag){case 1:if(S=_.payload,typeof S=="function"){p=S.call(g,p,m);break e}p=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=_.payload,m=typeof S=="function"?S.call(g,p,m):S,m==null)break e;p=Yt({},p,m);break e;case 2:Hs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(u=f=g,l=p):f=f.next=g,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(f===null&&(l=p),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ea|=o,t.lanes=o,t.memoizedState=p}}function B1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Fe(191,i));i.call(r)}}}var wc={},Ki=mo(wc),sc=mo(wc),oc=mo(wc);function Go(t){if(t===wc)throw Error(Fe(174));return t}function Fg(t,e){switch(Bt(oc,e),Bt(sc,t),Bt(Ki,wc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:F0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=F0(e,t)}$t(Ki),Bt(Ki,e)}function Tl(){$t(Ki),$t(sc),$t(oc)}function sx(t){Go(oc.current);var e=Go(Ki.current),n=F0(e,t.type);e!==n&&(Bt(sc,t),Bt(Ki,n))}function Og(t){sc.current===t&&($t(Ki),$t(sc))}var Jt=mo(0);function Rf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wp=[];function jg(){for(var t=0;t<Wp.length;t++)Wp[t]._workInProgressVersionPrimary=null;Wp.length=0}var Zd=_s.ReactCurrentDispatcher,Jp=_s.ReactCurrentBatchConfig,Zo=0,Kt=null,Sn=null,Cn=null,Lf=!1,Vu=!1,ac=0,kE=0;function Vn(){throw Error(Fe(321))}function Ug(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ti(t[n],e[n]))return!1;return!0}function Bg(t,e,n,r,i,s){if(Zo=s,Kt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zd.current=t===null||t.memoizedState===null?LE:ME,t=n(r,i),Vu){s=0;do{if(Vu=!1,ac=0,25<=s)throw Error(Fe(301));s+=1,Cn=Sn=null,e.updateQueue=null,Zd.current=DE,t=n(r,i)}while(Vu)}if(Zd.current=Mf,e=Sn!==null&&Sn.next!==null,Zo=0,Cn=Sn=Kt=null,Lf=!1,e)throw Error(Fe(300));return t}function qg(){var t=ac!==0;return ac=0,t}function $i(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?Kt.memoizedState=Cn=t:Cn=Cn.next=t,Cn}function ei(){if(Sn===null){var t=Kt.alternate;t=t!==null?t.memoizedState:null}else t=Sn.next;var e=Cn===null?Kt.memoizedState:Cn.next;if(e!==null)Cn=e,Sn=t;else{if(t===null)throw Error(Fe(310));Sn=t,t={memoizedState:Sn.memoizedState,baseState:Sn.baseState,baseQueue:Sn.baseQueue,queue:Sn.queue,next:null},Cn===null?Kt.memoizedState=Cn=t:Cn=Cn.next=t}return Cn}function lc(t,e){return typeof e=="function"?e(t):e}function Kp(t){var e=ei(),n=e.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=t;var r=Sn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var f=u.lane;if((Zo&f)===f)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=p,o=r):l=l.next=p,Kt.lanes|=f,ea|=f}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Ti(r,e.memoizedState)||(yr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Kt.lanes|=s,ea|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Yp(t){var e=ei(),n=e.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ti(s,e.memoizedState)||(yr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function ox(){}function ax(t,e){var n=Kt,r=ei(),i=e(),s=!Ti(r.memoizedState,i);if(s&&(r.memoizedState=i,yr=!0),r=r.queue,Vg(cx.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Cn!==null&&Cn.memoizedState.tag&1){if(n.flags|=2048,uc(9,ux.bind(null,n,r,i,e),void 0,null),Pn===null)throw Error(Fe(349));Zo&30||lx(n,e,i)}return i}function lx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Kt.updateQueue,e===null?(e={lastEffect:null,stores:null},Kt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ux(t,e,n,r){e.value=n,e.getSnapshot=r,dx(e)&&fx(t)}function cx(t,e,n){return n(function(){dx(e)&&fx(t)})}function dx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ti(t,n)}catch{return!0}}function fx(t){var e=ws(t,1);e!==null&&Ni(e,t,1,-1)}function q1(t){var e=$i();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lc,lastRenderedState:t},e.queue=t,t=t.dispatch=RE.bind(null,Kt,t),[e.memoizedState,t]}function uc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Kt.updateQueue,e===null?(e={lastEffect:null,stores:null},Kt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function hx(){return ei().memoizedState}function ef(t,e,n,r){var i=$i();Kt.flags|=t,i.memoizedState=uc(1|e,n,void 0,r===void 0?null:r)}function ph(t,e,n,r){var i=ei();r=r===void 0?null:r;var s=void 0;if(Sn!==null){var o=Sn.memoizedState;if(s=o.destroy,r!==null&&Ug(r,o.deps)){i.memoizedState=uc(e,n,s,r);return}}Kt.flags|=t,i.memoizedState=uc(1|e,n,s,r)}function V1(t,e){return ef(8390656,8,t,e)}function Vg(t,e){return ph(2048,8,t,e)}function px(t,e){return ph(4,2,t,e)}function mx(t,e){return ph(4,4,t,e)}function gx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function vx(t,e,n){return n=n!=null?n.concat([t]):null,ph(4,4,gx.bind(null,e,t),n)}function $g(){}function yx(t,e){var n=ei();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ug(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function wx(t,e){var n=ei();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ug(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function xx(t,e,n){return Zo&21?(Ti(n,e)||(n=Aw(),Kt.lanes|=n,ea|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,yr=!0),t.memoizedState=n)}function PE(t,e){var n=Rt;Rt=n!==0&&4>n?n:4,t(!0);var r=Jp.transition;Jp.transition={};try{t(!1),e()}finally{Rt=n,Jp.transition=r}}function bx(){return ei().memoizedState}function IE(t,e,n){var r=oo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},_x(t))Sx(e,n);else if(n=rx(t,e,n,r),n!==null){var i=ir();Ni(n,t,r,i),Nx(n,e,r)}}function RE(t,e,n){var r=oo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(_x(t))Sx(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ti(a,o)){var l=e.interleaved;l===null?(i.next=i,Mg(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=rx(t,e,i,r),n!==null&&(i=ir(),Ni(n,t,r,i),Nx(n,e,r))}}function _x(t){var e=t.alternate;return t===Kt||e!==null&&e===Kt}function Sx(t,e){Vu=Lf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Nx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xg(t,n)}}var Mf={readContext:Zr,useCallback:Vn,useContext:Vn,useEffect:Vn,useImperativeHandle:Vn,useInsertionEffect:Vn,useLayoutEffect:Vn,useMemo:Vn,useReducer:Vn,useRef:Vn,useState:Vn,useDebugValue:Vn,useDeferredValue:Vn,useTransition:Vn,useMutableSource:Vn,useSyncExternalStore:Vn,useId:Vn,unstable_isNewReconciler:!1},LE={readContext:Zr,useCallback:function(t,e){return $i().memoizedState=[t,e===void 0?null:e],t},useContext:Zr,useEffect:V1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ef(4194308,4,gx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ef(4194308,4,t,e)},useInsertionEffect:function(t,e){return ef(4,2,t,e)},useMemo:function(t,e){var n=$i();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=$i();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=IE.bind(null,Kt,t),[r.memoizedState,t]},useRef:function(t){var e=$i();return t={current:t},e.memoizedState=t},useState:q1,useDebugValue:$g,useDeferredValue:function(t){return $i().memoizedState=t},useTransition:function(){var t=q1(!1),e=t[0];return t=PE.bind(null,t[1]),$i().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Kt,i=$i();if(zt){if(n===void 0)throw Error(Fe(407));n=n()}else{if(n=e(),Pn===null)throw Error(Fe(349));Zo&30||lx(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,V1(cx.bind(null,r,s,t),[t]),r.flags|=2048,uc(9,ux.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=$i(),e=Pn.identifierPrefix;if(zt){var n=ms,r=ps;n=(r&~(1<<32-Si(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ac++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=kE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ME={readContext:Zr,useCallback:yx,useContext:Zr,useEffect:Vg,useImperativeHandle:vx,useInsertionEffect:px,useLayoutEffect:mx,useMemo:wx,useReducer:Kp,useRef:hx,useState:function(){return Kp(lc)},useDebugValue:$g,useDeferredValue:function(t){var e=ei();return xx(e,Sn.memoizedState,t)},useTransition:function(){var t=Kp(lc)[0],e=ei().memoizedState;return[t,e]},useMutableSource:ox,useSyncExternalStore:ax,useId:bx,unstable_isNewReconciler:!1},DE={readContext:Zr,useCallback:yx,useContext:Zr,useEffect:Vg,useImperativeHandle:vx,useInsertionEffect:px,useLayoutEffect:mx,useMemo:wx,useReducer:Yp,useRef:hx,useState:function(){return Yp(lc)},useDebugValue:$g,useDeferredValue:function(t){var e=ei();return Sn===null?e.memoizedState=t:xx(e,Sn.memoizedState,t)},useTransition:function(){var t=Yp(lc)[0],e=ei().memoizedState;return[t,e]},useMutableSource:ox,useSyncExternalStore:ax,useId:bx,unstable_isNewReconciler:!1};function gi(t,e){if(t&&t.defaultProps){e=Yt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function rm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Yt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var mh={isMounted:function(t){return(t=t._reactInternals)?ra(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ir(),i=oo(t),s=gs(r,i);s.payload=e,n!=null&&(s.callback=n),e=io(t,s,i),e!==null&&(Ni(e,t,i,r),Qd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ir(),i=oo(t),s=gs(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=io(t,s,i),e!==null&&(Ni(e,t,i,r),Qd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ir(),r=oo(t),i=gs(n,r);i.tag=2,e!=null&&(i.callback=e),e=io(t,i,r),e!==null&&(Ni(e,t,r,n),Qd(e,t,r))}};function $1(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!tc(n,r)||!tc(i,s):!0}function Ax(t,e,n){var r=!1,i=uo,s=e.contextType;return typeof s=="object"&&s!==null?s=Zr(s):(i=xr(e)?Xo:Qn.current,r=e.contextTypes,s=(r=r!=null)?Nl(t,i):uo),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=mh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function H1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&mh.enqueueReplaceState(e,e.state,null)}function im(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Dg(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Zr(s):(s=xr(e)?Xo:Qn.current,i.context=Nl(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(rm(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&mh.enqueueReplaceState(i,i.state,null),If(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Cl(t,e){try{var n="",r=e;do n+=uA(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Xp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function sm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var FE=typeof WeakMap=="function"?WeakMap:Map;function Ex(t,e,n){n=gs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ff||(Ff=!0,mm=r),sm(t,e)},n}function Tx(t,e,n){n=gs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){sm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){sm(t,e),typeof r!="function"&&(so===null?so=new Set([this]):so.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function z1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new FE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=YE.bind(null,t,e,n),e.then(t,t))}function G1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function W1(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=gs(-1,1),e.tag=2,io(n,e,1))),n.lanes|=1),t)}var OE=_s.ReactCurrentOwner,yr=!1;function rr(t,e,n,r){e.child=t===null?nx(e,null,n,r):El(e,t.child,n,r)}function J1(t,e,n,r,i){n=n.render;var s=e.ref;return hl(e,i),r=Bg(t,e,n,r,s,i),n=qg(),t!==null&&!yr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,xs(t,e,i)):(zt&&n&&Cg(e),e.flags|=1,rr(t,e,r,i),e.child)}function K1(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Xg(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Cx(t,e,s,r,i)):(t=sf(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:tc,n(o,r)&&t.ref===e.ref)return xs(t,e,i)}return e.flags|=1,t=ao(s,r),t.ref=e.ref,t.return=e,e.child=t}function Cx(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(tc(s,r)&&t.ref===e.ref)if(yr=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(yr=!0);else return e.lanes=t.lanes,xs(t,e,i)}return om(t,e,n,r,i)}function kx(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bt(sl,Ir),Ir|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Bt(sl,Ir),Ir|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Bt(sl,Ir),Ir|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Bt(sl,Ir),Ir|=r;return rr(t,e,i,n),e.child}function Px(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function om(t,e,n,r,i){var s=xr(n)?Xo:Qn.current;return s=Nl(e,s),hl(e,i),n=Bg(t,e,n,r,s,i),r=qg(),t!==null&&!yr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,xs(t,e,i)):(zt&&r&&Cg(e),e.flags|=1,rr(t,e,n,i),e.child)}function Y1(t,e,n,r,i){if(xr(n)){var s=!0;Ef(e)}else s=!1;if(hl(e,i),e.stateNode===null)tf(t,e),Ax(e,n,r),im(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Zr(u):(u=xr(n)?Xo:Qn.current,u=Nl(e,u));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&H1(e,o,r,u),Hs=!1;var m=e.memoizedState;o.state=m,If(e,r,o,i),l=e.memoizedState,a!==r||m!==l||wr.current||Hs?(typeof f=="function"&&(rm(e,n,f,r),l=e.memoizedState),(a=Hs||$1(e,n,a,r,m,l,u))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ix(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:gi(e.type,a),o.props=u,p=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Zr(l):(l=xr(n)?Xo:Qn.current,l=Nl(e,l));var g=n.getDerivedStateFromProps;(f=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||m!==l)&&H1(e,o,r,l),Hs=!1,m=e.memoizedState,o.state=m,If(e,r,o,i);var S=e.memoizedState;a!==p||m!==S||wr.current||Hs?(typeof g=="function"&&(rm(e,n,g,r),S=e.memoizedState),(u=Hs||$1(e,n,u,r,m,S,l)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return am(t,e,n,r,s,i)}function am(t,e,n,r,i,s){Px(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&D1(e,n,!1),xs(t,e,s);r=e.stateNode,OE.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=El(e,t.child,null,s),e.child=El(e,null,a,s)):rr(t,e,a,s),e.memoizedState=r.state,i&&D1(e,n,!0),e.child}function Ix(t){var e=t.stateNode;e.pendingContext?M1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&M1(t,e.context,!1),Fg(t,e.containerInfo)}function X1(t,e,n,r,i){return Al(),Pg(i),e.flags|=256,rr(t,e,n,r),e.child}var lm={dehydrated:null,treeContext:null,retryLane:0};function um(t){return{baseLanes:t,cachePool:null,transitions:null}}function Rx(t,e,n){var r=e.pendingProps,i=Jt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Bt(Jt,i&1),t===null)return tm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=yh(o,r,0,null),t=Ko(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=um(n),e.memoizedState=lm,t):Hg(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return jE(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ao(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ao(a,s):(s=Ko(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?um(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=lm,r}return s=t.child,t=s.sibling,r=ao(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Hg(t,e){return e=yh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ad(t,e,n,r){return r!==null&&Pg(r),El(e,t.child,null,n),t=Hg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jE(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Xp(Error(Fe(422))),Ad(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=yh({mode:"visible",children:r.children},i,0,null),s=Ko(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&El(e,t.child,null,o),e.child.memoizedState=um(o),e.memoizedState=lm,s);if(!(e.mode&1))return Ad(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Fe(419)),r=Xp(s,r,void 0),Ad(t,e,o,r)}if(a=(o&t.childLanes)!==0,yr||a){if(r=Pn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ws(t,i),Ni(r,t,i,-1))}return Yg(),r=Xp(Error(Fe(421))),Ad(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=XE.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Lr=ro(i.nextSibling),Dr=e,zt=!0,bi=null,t!==null&&(Jr[Kr++]=ps,Jr[Kr++]=ms,Jr[Kr++]=Qo,ps=t.id,ms=t.overflow,Qo=e),e=Hg(e,r.children),e.flags|=4096,e)}function Q1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),nm(t.return,e,n)}function Qp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Lx(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(rr(t,e,r.children,n),r=Jt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Q1(t,n,e);else if(t.tag===19)Q1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Bt(Jt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Rf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Qp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Rf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Qp(e,!0,n,null,s);break;case"together":Qp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function tf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function xs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ea|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Fe(153));if(e.child!==null){for(t=e.child,n=ao(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ao(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function UE(t,e,n){switch(e.tag){case 3:Ix(e),Al();break;case 5:sx(e);break;case 1:xr(e.type)&&Ef(e);break;case 4:Fg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Bt(kf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Bt(Jt,Jt.current&1),e.flags|=128,null):n&e.child.childLanes?Rx(t,e,n):(Bt(Jt,Jt.current&1),t=xs(t,e,n),t!==null?t.sibling:null);Bt(Jt,Jt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Lx(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Bt(Jt,Jt.current),r)break;return null;case 22:case 23:return e.lanes=0,kx(t,e,n)}return xs(t,e,n)}var Mx,cm,Dx,Fx;Mx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cm=function(){};Dx=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Go(Ki.current);var s=null;switch(n){case"input":i=R0(t,i),r=R0(t,r),s=[];break;case"select":i=Yt({},i,{value:void 0}),r=Yt({},r,{value:void 0}),s=[];break;case"textarea":i=D0(t,i),r=D0(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Nf)}O0(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ju.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ju.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&qt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Fx=function(t,e,n,r){n!==r&&(e.flags|=4)};function Su(t,e){if(!zt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function $n(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function BE(t,e,n){var r=e.pendingProps;switch(kg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $n(e),null;case 1:return xr(e.type)&&Af(),$n(e),null;case 3:return r=e.stateNode,Tl(),$t(wr),$t(Qn),jg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Sd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bi!==null&&(ym(bi),bi=null))),cm(t,e),$n(e),null;case 5:Og(e);var i=Go(oc.current);if(n=e.type,t!==null&&e.stateNode!=null)Dx(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Fe(166));return $n(e),null}if(t=Go(Ki.current),Sd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Gi]=e,r[ic]=s,t=(e.mode&1)!==0,n){case"dialog":qt("cancel",r),qt("close",r);break;case"iframe":case"object":case"embed":qt("load",r);break;case"video":case"audio":for(i=0;i<Ru.length;i++)qt(Ru[i],r);break;case"source":qt("error",r);break;case"img":case"image":case"link":qt("error",r),qt("load",r);break;case"details":qt("toggle",r);break;case"input":a1(r,s),qt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},qt("invalid",r);break;case"textarea":u1(r,s),qt("invalid",r)}O0(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&_d(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&_d(r.textContent,a,t),i=["children",""+a]):Ju.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&qt("scroll",r)}switch(n){case"input":pd(r),l1(r,s,!0);break;case"textarea":pd(r),c1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Nf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=cw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Gi]=e,t[ic]=r,Mx(t,e,!1,!1),e.stateNode=t;e:{switch(o=j0(n,r),n){case"dialog":qt("cancel",t),qt("close",t),i=r;break;case"iframe":case"object":case"embed":qt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ru.length;i++)qt(Ru[i],t);i=r;break;case"source":qt("error",t),i=r;break;case"img":case"image":case"link":qt("error",t),qt("load",t),i=r;break;case"details":qt("toggle",t),i=r;break;case"input":a1(t,r),i=R0(t,r),qt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Yt({},r,{value:void 0}),qt("invalid",t);break;case"textarea":u1(t,r),i=D0(t,r),qt("invalid",t);break;default:i=r}O0(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?hw(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&dw(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ku(t,l):typeof l=="number"&&Ku(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ju.hasOwnProperty(s)?l!=null&&s==="onScroll"&&qt("scroll",t):l!=null&&pg(t,s,l,o))}switch(n){case"input":pd(t),l1(t,r,!1);break;case"textarea":pd(t),c1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+lo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ul(t,!!r.multiple,s,!1):r.defaultValue!=null&&ul(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Nf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $n(e),null;case 6:if(t&&e.stateNode!=null)Fx(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Fe(166));if(n=Go(oc.current),Go(Ki.current),Sd(e)){if(r=e.stateNode,n=e.memoizedProps,r[Gi]=e,(s=r.nodeValue!==n)&&(t=Dr,t!==null))switch(t.tag){case 3:_d(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_d(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Gi]=e,e.stateNode=r}return $n(e),null;case 13:if($t(Jt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(zt&&Lr!==null&&e.mode&1&&!(e.flags&128))ex(),Al(),e.flags|=98560,s=!1;else if(s=Sd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Fe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Fe(317));s[Gi]=e}else Al(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$n(e),s=!1}else bi!==null&&(ym(bi),bi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Jt.current&1?Nn===0&&(Nn=3):Yg())),e.updateQueue!==null&&(e.flags|=4),$n(e),null);case 4:return Tl(),cm(t,e),t===null&&nc(e.stateNode.containerInfo),$n(e),null;case 10:return Lg(e.type._context),$n(e),null;case 17:return xr(e.type)&&Af(),$n(e),null;case 19:if($t(Jt),s=e.memoizedState,s===null)return $n(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Su(s,!1);else{if(Nn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Rf(t),o!==null){for(e.flags|=128,Su(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Bt(Jt,Jt.current&1|2),e.child}t=t.sibling}s.tail!==null&&un()>kl&&(e.flags|=128,r=!0,Su(s,!1),e.lanes=4194304)}else{if(!r)if(t=Rf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Su(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!zt)return $n(e),null}else 2*un()-s.renderingStartTime>kl&&n!==1073741824&&(e.flags|=128,r=!0,Su(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=un(),e.sibling=null,n=Jt.current,Bt(Jt,r?n&1|2:n&1),e):($n(e),null);case 22:case 23:return Kg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ir&1073741824&&($n(e),e.subtreeFlags&6&&(e.flags|=8192)):$n(e),null;case 24:return null;case 25:return null}throw Error(Fe(156,e.tag))}function qE(t,e){switch(kg(e),e.tag){case 1:return xr(e.type)&&Af(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Tl(),$t(wr),$t(Qn),jg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Og(e),null;case 13:if($t(Jt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Fe(340));Al()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $t(Jt),null;case 4:return Tl(),null;case 10:return Lg(e.type._context),null;case 22:case 23:return Kg(),null;case 24:return null;default:return null}}var Ed=!1,Jn=!1,VE=typeof WeakSet=="function"?WeakSet:Set,Je=null;function il(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){sn(t,e,r)}else n.current=null}function dm(t,e,n){try{n()}catch(r){sn(t,e,r)}}var Z1=!1;function $E(t,e){if(J0=bf,t=qw(),Tg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,f=0,p=t,m=null;t:for(;;){for(var g;p!==n||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(g=p.firstChild)!==null;)m=p,p=g;for(;;){if(p===t)break t;if(m===n&&++u===i&&(a=o),m===s&&++f===r&&(l=o),(g=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(K0={focusedElem:t,selectionRange:n},bf=!1,Je=e;Je!==null;)if(e=Je,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Je=t;else for(;Je!==null;){e=Je;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var _=S.memoizedProps,E=S.memoizedState,b=e.stateNode,N=b.getSnapshotBeforeUpdate(e.elementType===e.type?_:gi(e.type,_),E);b.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(M){sn(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,Je=t;break}Je=e.return}return S=Z1,Z1=!1,S}function $u(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&dm(e,n,s)}i=i.next}while(i!==r)}}function gh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function fm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ox(t){var e=t.alternate;e!==null&&(t.alternate=null,Ox(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Gi],delete e[ic],delete e[Q0],delete e[AE],delete e[EE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function jx(t){return t.tag===5||t.tag===3||t.tag===4}function ey(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||jx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Nf));else if(r!==4&&(t=t.child,t!==null))for(hm(t,e,n),t=t.sibling;t!==null;)hm(t,e,n),t=t.sibling}function pm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(pm(t,e,n),t=t.sibling;t!==null;)pm(t,e,n),t=t.sibling}var On=null,wi=!1;function Bs(t,e,n){for(n=n.child;n!==null;)Ux(t,e,n),n=n.sibling}function Ux(t,e,n){if(Ji&&typeof Ji.onCommitFiberUnmount=="function")try{Ji.onCommitFiberUnmount(lh,n)}catch{}switch(n.tag){case 5:Jn||il(n,e);case 6:var r=On,i=wi;On=null,Bs(t,e,n),On=r,wi=i,On!==null&&(wi?(t=On,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):On.removeChild(n.stateNode));break;case 18:On!==null&&(wi?(t=On,n=n.stateNode,t.nodeType===8?zp(t.parentNode,n):t.nodeType===1&&zp(t,n),Zu(t)):zp(On,n.stateNode));break;case 4:r=On,i=wi,On=n.stateNode.containerInfo,wi=!0,Bs(t,e,n),On=r,wi=i;break;case 0:case 11:case 14:case 15:if(!Jn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&dm(n,e,o),i=i.next}while(i!==r)}Bs(t,e,n);break;case 1:if(!Jn&&(il(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){sn(n,e,a)}Bs(t,e,n);break;case 21:Bs(t,e,n);break;case 22:n.mode&1?(Jn=(r=Jn)||n.memoizedState!==null,Bs(t,e,n),Jn=r):Bs(t,e,n);break;default:Bs(t,e,n)}}function ty(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new VE),e.forEach(function(r){var i=QE.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function fi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:On=a.stateNode,wi=!1;break e;case 3:On=a.stateNode.containerInfo,wi=!0;break e;case 4:On=a.stateNode.containerInfo,wi=!0;break e}a=a.return}if(On===null)throw Error(Fe(160));Ux(s,o,i),On=null,wi=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){sn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Bx(e,t),e=e.sibling}function Bx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fi(e,t),Bi(t),r&4){try{$u(3,t,t.return),gh(3,t)}catch(_){sn(t,t.return,_)}try{$u(5,t,t.return)}catch(_){sn(t,t.return,_)}}break;case 1:fi(e,t),Bi(t),r&512&&n!==null&&il(n,n.return);break;case 5:if(fi(e,t),Bi(t),r&512&&n!==null&&il(n,n.return),t.flags&32){var i=t.stateNode;try{Ku(i,"")}catch(_){sn(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&lw(i,s),j0(a,o);var u=j0(a,s);for(o=0;o<l.length;o+=2){var f=l[o],p=l[o+1];f==="style"?hw(i,p):f==="dangerouslySetInnerHTML"?dw(i,p):f==="children"?Ku(i,p):pg(i,f,p,u)}switch(a){case"input":L0(i,s);break;case"textarea":uw(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?ul(i,!!s.multiple,g,!1):m!==!!s.multiple&&(s.defaultValue!=null?ul(i,!!s.multiple,s.defaultValue,!0):ul(i,!!s.multiple,s.multiple?[]:"",!1))}i[ic]=s}catch(_){sn(t,t.return,_)}}break;case 6:if(fi(e,t),Bi(t),r&4){if(t.stateNode===null)throw Error(Fe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(_){sn(t,t.return,_)}}break;case 3:if(fi(e,t),Bi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Zu(e.containerInfo)}catch(_){sn(t,t.return,_)}break;case 4:fi(e,t),Bi(t);break;case 13:fi(e,t),Bi(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Wg=un())),r&4&&ty(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Jn=(u=Jn)||f,fi(e,t),Jn=u):fi(e,t),Bi(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(Je=t,f=t.child;f!==null;){for(p=Je=f;Je!==null;){switch(m=Je,g=m.child,m.tag){case 0:case 11:case 14:case 15:$u(4,m,m.return);break;case 1:il(m,m.return);var S=m.stateNode;if(typeof S.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(_){sn(r,n,_)}}break;case 5:il(m,m.return);break;case 22:if(m.memoizedState!==null){ry(p);continue}}g!==null?(g.return=m,Je=g):ry(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{i=p.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=fw("display",o))}catch(_){sn(t,t.return,_)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(_){sn(t,t.return,_)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:fi(e,t),Bi(t),r&4&&ty(t);break;case 21:break;default:fi(e,t),Bi(t)}}function Bi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(jx(n)){var r=n;break e}n=n.return}throw Error(Fe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ku(i,""),r.flags&=-33);var s=ey(t);pm(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ey(t);hm(t,a,o);break;default:throw Error(Fe(161))}}catch(l){sn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function HE(t,e,n){Je=t,qx(t)}function qx(t,e,n){for(var r=(t.mode&1)!==0;Je!==null;){var i=Je,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ed;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Jn;a=Ed;var u=Jn;if(Ed=o,(Jn=l)&&!u)for(Je=i;Je!==null;)o=Je,l=o.child,o.tag===22&&o.memoizedState!==null?iy(i):l!==null?(l.return=o,Je=l):iy(i);for(;s!==null;)Je=s,qx(s),s=s.sibling;Je=i,Ed=a,Jn=u}ny(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Je=s):ny(t)}}function ny(t){for(;Je!==null;){var e=Je;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Jn||gh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Jn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:gi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&B1(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}B1(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&Zu(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}Jn||e.flags&512&&fm(e)}catch(m){sn(e,e.return,m)}}if(e===t){Je=null;break}if(n=e.sibling,n!==null){n.return=e.return,Je=n;break}Je=e.return}}function ry(t){for(;Je!==null;){var e=Je;if(e===t){Je=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Je=n;break}Je=e.return}}function iy(t){for(;Je!==null;){var e=Je;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{gh(4,e)}catch(l){sn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){sn(e,i,l)}}var s=e.return;try{fm(e)}catch(l){sn(e,s,l)}break;case 5:var o=e.return;try{fm(e)}catch(l){sn(e,o,l)}}}catch(l){sn(e,e.return,l)}if(e===t){Je=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Je=a;break}Je=e.return}}var zE=Math.ceil,Df=_s.ReactCurrentDispatcher,zg=_s.ReactCurrentOwner,Xr=_s.ReactCurrentBatchConfig,St=0,Pn=null,xn=null,jn=0,Ir=0,sl=mo(0),Nn=0,cc=null,ea=0,vh=0,Gg=0,Hu=null,gr=null,Wg=0,kl=1/0,ds=null,Ff=!1,mm=null,so=null,Td=!1,Xs=null,Of=0,zu=0,gm=null,nf=-1,rf=0;function ir(){return St&6?un():nf!==-1?nf:nf=un()}function oo(t){return t.mode&1?St&2&&jn!==0?jn&-jn:CE.transition!==null?(rf===0&&(rf=Aw()),rf):(t=Rt,t!==0||(t=window.event,t=t===void 0?16:Rw(t.type)),t):1}function Ni(t,e,n,r){if(50<zu)throw zu=0,gm=null,Error(Fe(185));gc(t,n,r),(!(St&2)||t!==Pn)&&(t===Pn&&(!(St&2)&&(vh|=n),Nn===4&&Ws(t,jn)),br(t,r),n===1&&St===0&&!(e.mode&1)&&(kl=un()+500,hh&&go()))}function br(t,e){var n=t.callbackNode;CA(t,e);var r=xf(t,t===Pn?jn:0);if(r===0)n!==null&&h1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&h1(n),e===1)t.tag===0?TE(sy.bind(null,t)):Xw(sy.bind(null,t)),SE(function(){!(St&6)&&go()}),n=null;else{switch(Ew(r)){case 1:n=wg;break;case 4:n=Sw;break;case 16:n=wf;break;case 536870912:n=Nw;break;default:n=wf}n=Kx(n,Vx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Vx(t,e){if(nf=-1,rf=0,St&6)throw Error(Fe(327));var n=t.callbackNode;if(pl()&&t.callbackNode!==n)return null;var r=xf(t,t===Pn?jn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=jf(t,r);else{e=r;var i=St;St|=2;var s=Hx();(Pn!==t||jn!==e)&&(ds=null,kl=un()+500,Jo(t,e));do try{JE();break}catch(a){$x(t,a)}while(!0);Rg(),Df.current=s,St=i,xn!==null?e=0:(Pn=null,jn=0,e=Nn)}if(e!==0){if(e===2&&(i=$0(t),i!==0&&(r=i,e=vm(t,i))),e===1)throw n=cc,Jo(t,0),Ws(t,r),br(t,un()),n;if(e===6)Ws(t,r);else{if(i=t.current.alternate,!(r&30)&&!GE(i)&&(e=jf(t,r),e===2&&(s=$0(t),s!==0&&(r=s,e=vm(t,s))),e===1))throw n=cc,Jo(t,0),Ws(t,r),br(t,un()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Fe(345));case 2:Mo(t,gr,ds);break;case 3:if(Ws(t,r),(r&130023424)===r&&(e=Wg+500-un(),10<e)){if(xf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ir(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=X0(Mo.bind(null,t,gr,ds),e);break}Mo(t,gr,ds);break;case 4:if(Ws(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Si(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=un()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zE(r/1960))-r,10<r){t.timeoutHandle=X0(Mo.bind(null,t,gr,ds),r);break}Mo(t,gr,ds);break;case 5:Mo(t,gr,ds);break;default:throw Error(Fe(329))}}}return br(t,un()),t.callbackNode===n?Vx.bind(null,t):null}function vm(t,e){var n=Hu;return t.current.memoizedState.isDehydrated&&(Jo(t,e).flags|=256),t=jf(t,e),t!==2&&(e=gr,gr=n,e!==null&&ym(e)),t}function ym(t){gr===null?gr=t:gr.push.apply(gr,t)}function GE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ti(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ws(t,e){for(e&=~Gg,e&=~vh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Si(e),r=1<<n;t[n]=-1,e&=~r}}function sy(t){if(St&6)throw Error(Fe(327));pl();var e=xf(t,0);if(!(e&1))return br(t,un()),null;var n=jf(t,e);if(t.tag!==0&&n===2){var r=$0(t);r!==0&&(e=r,n=vm(t,r))}if(n===1)throw n=cc,Jo(t,0),Ws(t,e),br(t,un()),n;if(n===6)throw Error(Fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Mo(t,gr,ds),br(t,un()),null}function Jg(t,e){var n=St;St|=1;try{return t(e)}finally{St=n,St===0&&(kl=un()+500,hh&&go())}}function ta(t){Xs!==null&&Xs.tag===0&&!(St&6)&&pl();var e=St;St|=1;var n=Xr.transition,r=Rt;try{if(Xr.transition=null,Rt=1,t)return t()}finally{Rt=r,Xr.transition=n,St=e,!(St&6)&&go()}}function Kg(){Ir=sl.current,$t(sl)}function Jo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_E(n)),xn!==null)for(n=xn.return;n!==null;){var r=n;switch(kg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Af();break;case 3:Tl(),$t(wr),$t(Qn),jg();break;case 5:Og(r);break;case 4:Tl();break;case 13:$t(Jt);break;case 19:$t(Jt);break;case 10:Lg(r.type._context);break;case 22:case 23:Kg()}n=n.return}if(Pn=t,xn=t=ao(t.current,null),jn=Ir=e,Nn=0,cc=null,Gg=vh=ea=0,gr=Hu=null,zo!==null){for(e=0;e<zo.length;e++)if(n=zo[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}zo=null}return t}function $x(t,e){do{var n=xn;try{if(Rg(),Zd.current=Mf,Lf){for(var r=Kt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Lf=!1}if(Zo=0,Cn=Sn=Kt=null,Vu=!1,ac=0,zg.current=null,n===null||n.return===null){Nn=1,cc=e,xn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=jn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,f=a,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=G1(o);if(g!==null){g.flags&=-257,W1(g,o,a,s,e),g.mode&1&&z1(s,u,e),e=g,l=u;var S=e.updateQueue;if(S===null){var _=new Set;_.add(l),e.updateQueue=_}else S.add(l);break e}else{if(!(e&1)){z1(s,u,e),Yg();break e}l=Error(Fe(426))}}else if(zt&&a.mode&1){var E=G1(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),W1(E,o,a,s,e),Pg(Cl(l,a));break e}}s=l=Cl(l,a),Nn!==4&&(Nn=2),Hu===null?Hu=[s]:Hu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var b=Ex(s,l,e);U1(s,b);break e;case 1:a=l;var N=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof N.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(so===null||!so.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=Tx(s,a,e);U1(s,M);break e}}s=s.return}while(s!==null)}Gx(n)}catch(U){e=U,xn===n&&n!==null&&(xn=n=n.return);continue}break}while(!0)}function Hx(){var t=Df.current;return Df.current=Mf,t===null?Mf:t}function Yg(){(Nn===0||Nn===3||Nn===2)&&(Nn=4),Pn===null||!(ea&268435455)&&!(vh&268435455)||Ws(Pn,jn)}function jf(t,e){var n=St;St|=2;var r=Hx();(Pn!==t||jn!==e)&&(ds=null,Jo(t,e));do try{WE();break}catch(i){$x(t,i)}while(!0);if(Rg(),St=n,Df.current=r,xn!==null)throw Error(Fe(261));return Pn=null,jn=0,Nn}function WE(){for(;xn!==null;)zx(xn)}function JE(){for(;xn!==null&&!wA();)zx(xn)}function zx(t){var e=Jx(t.alternate,t,Ir);t.memoizedProps=t.pendingProps,e===null?Gx(t):xn=e,zg.current=null}function Gx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qE(n,e),n!==null){n.flags&=32767,xn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Nn=6,xn=null;return}}else if(n=BE(n,e,Ir),n!==null){xn=n;return}if(e=e.sibling,e!==null){xn=e;return}xn=e=t}while(e!==null);Nn===0&&(Nn=5)}function Mo(t,e,n){var r=Rt,i=Xr.transition;try{Xr.transition=null,Rt=1,KE(t,e,n,r)}finally{Xr.transition=i,Rt=r}return null}function KE(t,e,n,r){do pl();while(Xs!==null);if(St&6)throw Error(Fe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Fe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(kA(t,s),t===Pn&&(xn=Pn=null,jn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Td||(Td=!0,Kx(wf,function(){return pl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Xr.transition,Xr.transition=null;var o=Rt;Rt=1;var a=St;St|=4,zg.current=null,$E(t,n),Bx(n,t),mE(K0),bf=!!J0,K0=J0=null,t.current=n,HE(n),xA(),St=a,Rt=o,Xr.transition=s}else t.current=n;if(Td&&(Td=!1,Xs=t,Of=i),s=t.pendingLanes,s===0&&(so=null),SA(n.stateNode),br(t,un()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ff)throw Ff=!1,t=mm,mm=null,t;return Of&1&&t.tag!==0&&pl(),s=t.pendingLanes,s&1?t===gm?zu++:(zu=0,gm=t):zu=0,go(),null}function pl(){if(Xs!==null){var t=Ew(Of),e=Xr.transition,n=Rt;try{if(Xr.transition=null,Rt=16>t?16:t,Xs===null)var r=!1;else{if(t=Xs,Xs=null,Of=0,St&6)throw Error(Fe(331));var i=St;for(St|=4,Je=t.current;Je!==null;){var s=Je,o=s.child;if(Je.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Je=u;Je!==null;){var f=Je;switch(f.tag){case 0:case 11:case 15:$u(8,f,s)}var p=f.child;if(p!==null)p.return=f,Je=p;else for(;Je!==null;){f=Je;var m=f.sibling,g=f.return;if(Ox(f),f===u){Je=null;break}if(m!==null){m.return=g,Je=m;break}Je=g}}}var S=s.alternate;if(S!==null){var _=S.child;if(_!==null){S.child=null;do{var E=_.sibling;_.sibling=null,_=E}while(_!==null)}}Je=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Je=o;else e:for(;Je!==null;){if(s=Je,s.flags&2048)switch(s.tag){case 0:case 11:case 15:$u(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,Je=b;break e}Je=s.return}}var N=t.current;for(Je=N;Je!==null;){o=Je;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,Je=T;else e:for(o=N;Je!==null;){if(a=Je,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:gh(9,a)}}catch(U){sn(a,a.return,U)}if(a===o){Je=null;break e}var M=a.sibling;if(M!==null){M.return=a.return,Je=M;break e}Je=a.return}}if(St=i,go(),Ji&&typeof Ji.onPostCommitFiberRoot=="function")try{Ji.onPostCommitFiberRoot(lh,t)}catch{}r=!0}return r}finally{Rt=n,Xr.transition=e}}return!1}function oy(t,e,n){e=Cl(n,e),e=Ex(t,e,1),t=io(t,e,1),e=ir(),t!==null&&(gc(t,1,e),br(t,e))}function sn(t,e,n){if(t.tag===3)oy(t,t,n);else for(;e!==null;){if(e.tag===3){oy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(so===null||!so.has(r))){t=Cl(n,t),t=Tx(e,t,1),e=io(e,t,1),t=ir(),e!==null&&(gc(e,1,t),br(e,t));break}}e=e.return}}function YE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ir(),t.pingedLanes|=t.suspendedLanes&n,Pn===t&&(jn&n)===n&&(Nn===4||Nn===3&&(jn&130023424)===jn&&500>un()-Wg?Jo(t,0):Gg|=n),br(t,e)}function Wx(t,e){e===0&&(t.mode&1?(e=vd,vd<<=1,!(vd&130023424)&&(vd=4194304)):e=1);var n=ir();t=ws(t,e),t!==null&&(gc(t,e,n),br(t,n))}function XE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Wx(t,n)}function QE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Fe(314))}r!==null&&r.delete(e),Wx(t,n)}var Jx;Jx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wr.current)yr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return yr=!1,UE(t,e,n);yr=!!(t.flags&131072)}else yr=!1,zt&&e.flags&1048576&&Qw(e,Cf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;tf(t,e),t=e.pendingProps;var i=Nl(e,Qn.current);hl(e,n),i=Bg(null,e,r,t,i,n);var s=qg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xr(r)?(s=!0,Ef(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Dg(e),i.updater=mh,e.stateNode=i,i._reactInternals=e,im(e,r,t,n),e=am(null,e,r,!0,s,n)):(e.tag=0,zt&&s&&Cg(e),rr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(tf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=eT(r),t=gi(r,t),i){case 0:e=om(null,e,r,t,n);break e;case 1:e=Y1(null,e,r,t,n);break e;case 11:e=J1(null,e,r,t,n);break e;case 14:e=K1(null,e,r,gi(r.type,t),n);break e}throw Error(Fe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gi(r,i),om(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gi(r,i),Y1(t,e,r,i,n);case 3:e:{if(Ix(e),t===null)throw Error(Fe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,ix(t,e),If(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Cl(Error(Fe(423)),e),e=X1(t,e,r,n,i);break e}else if(r!==i){i=Cl(Error(Fe(424)),e),e=X1(t,e,r,n,i);break e}else for(Lr=ro(e.stateNode.containerInfo.firstChild),Dr=e,zt=!0,bi=null,n=nx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Al(),r===i){e=xs(t,e,n);break e}rr(t,e,r,n)}e=e.child}return e;case 5:return sx(e),t===null&&tm(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Y0(r,i)?o=null:s!==null&&Y0(r,s)&&(e.flags|=32),Px(t,e),rr(t,e,o,n),e.child;case 6:return t===null&&tm(e),null;case 13:return Rx(t,e,n);case 4:return Fg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=El(e,null,r,n):rr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gi(r,i),J1(t,e,r,i,n);case 7:return rr(t,e,e.pendingProps,n),e.child;case 8:return rr(t,e,e.pendingProps.children,n),e.child;case 12:return rr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Bt(kf,r._currentValue),r._currentValue=o,s!==null)if(Ti(s.value,o)){if(s.children===i.children&&!wr.current){e=xs(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=gs(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?l.next=l:(l.next=f.next,f.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),nm(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Fe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),nm(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}rr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,hl(e,n),i=Zr(i),r=r(i),e.flags|=1,rr(t,e,r,n),e.child;case 14:return r=e.type,i=gi(r,e.pendingProps),i=gi(r.type,i),K1(t,e,r,i,n);case 15:return Cx(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gi(r,i),tf(t,e),e.tag=1,xr(r)?(t=!0,Ef(e)):t=!1,hl(e,n),Ax(e,r,i),im(e,r,i,n),am(null,e,r,!0,t,n);case 19:return Lx(t,e,n);case 22:return kx(t,e,n)}throw Error(Fe(156,e.tag))};function Kx(t,e){return _w(t,e)}function ZE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yr(t,e,n,r){return new ZE(t,e,n,r)}function Xg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function eT(t){if(typeof t=="function")return Xg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gg)return 11;if(t===vg)return 14}return 2}function ao(t,e){var n=t.alternate;return n===null?(n=Yr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function sf(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Xg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ka:return Ko(n.children,i,s,e);case mg:o=8,i|=8;break;case C0:return t=Yr(12,n,e,i|2),t.elementType=C0,t.lanes=s,t;case k0:return t=Yr(13,n,e,i),t.elementType=k0,t.lanes=s,t;case P0:return t=Yr(19,n,e,i),t.elementType=P0,t.lanes=s,t;case sw:return yh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case rw:o=10;break e;case iw:o=9;break e;case gg:o=11;break e;case vg:o=14;break e;case $s:o=16,r=null;break e}throw Error(Fe(130,t==null?t:typeof t,""))}return e=Yr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ko(t,e,n,r){return t=Yr(7,t,r,e),t.lanes=n,t}function yh(t,e,n,r){return t=Yr(22,t,r,e),t.elementType=sw,t.lanes=n,t.stateNode={isHidden:!1},t}function Zp(t,e,n){return t=Yr(6,t,null,e),t.lanes=n,t}function e0(t,e,n){return e=Yr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function tT(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mp(0),this.expirationTimes=Mp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Qg(t,e,n,r,i,s,o,a,l){return t=new tT(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Yr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dg(s),t}function nT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ja,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Yx(t){if(!t)return uo;t=t._reactInternals;e:{if(ra(t)!==t||t.tag!==1)throw Error(Fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Fe(171))}if(t.tag===1){var n=t.type;if(xr(n))return Yw(t,n,e)}return e}function Xx(t,e,n,r,i,s,o,a,l){return t=Qg(n,r,!0,t,i,s,o,a,l),t.context=Yx(null),n=t.current,r=ir(),i=oo(n),s=gs(r,i),s.callback=e??null,io(n,s,i),t.current.lanes=i,gc(t,i,r),br(t,r),t}function wh(t,e,n,r){var i=e.current,s=ir(),o=oo(i);return n=Yx(n),e.context===null?e.context=n:e.pendingContext=n,e=gs(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=io(i,e,o),t!==null&&(Ni(t,i,o,s),Qd(t,i,o)),o}function Uf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ay(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Zg(t,e){ay(t,e),(t=t.alternate)&&ay(t,e)}function rT(){return null}var Qx=typeof reportError=="function"?reportError:function(t){console.error(t)};function ev(t){this._internalRoot=t}xh.prototype.render=ev.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Fe(409));wh(t,e,null,null)};xh.prototype.unmount=ev.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ta(function(){wh(null,t,null,null)}),e[ys]=null}};function xh(t){this._internalRoot=t}xh.prototype.unstable_scheduleHydration=function(t){if(t){var e=kw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Gs.length&&e!==0&&e<Gs[n].priority;n++);Gs.splice(n,0,t),n===0&&Iw(t)}};function tv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function bh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ly(){}function iT(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Uf(o);s.call(u)}}var o=Xx(e,r,t,0,null,!1,!1,"",ly);return t._reactRootContainer=o,t[ys]=o.current,nc(t.nodeType===8?t.parentNode:t),ta(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Uf(l);a.call(u)}}var l=Qg(t,0,!1,null,null,!1,!1,"",ly);return t._reactRootContainer=l,t[ys]=l.current,nc(t.nodeType===8?t.parentNode:t),ta(function(){wh(e,l,n,r)}),l}function _h(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Uf(o);a.call(l)}}wh(e,o,t,i)}else o=iT(n,e,t,i,r);return Uf(o)}Tw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Iu(e.pendingLanes);n!==0&&(xg(e,n|1),br(e,un()),!(St&6)&&(kl=un()+500,go()))}break;case 13:ta(function(){var r=ws(t,1);if(r!==null){var i=ir();Ni(r,t,1,i)}}),Zg(t,1)}};bg=function(t){if(t.tag===13){var e=ws(t,134217728);if(e!==null){var n=ir();Ni(e,t,134217728,n)}Zg(t,134217728)}};Cw=function(t){if(t.tag===13){var e=oo(t),n=ws(t,e);if(n!==null){var r=ir();Ni(n,t,e,r)}Zg(t,e)}};kw=function(){return Rt};Pw=function(t,e){var n=Rt;try{return Rt=t,e()}finally{Rt=n}};B0=function(t,e,n){switch(e){case"input":if(L0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=fh(r);if(!i)throw Error(Fe(90));aw(r),L0(r,i)}}}break;case"textarea":uw(t,n);break;case"select":e=n.value,e!=null&&ul(t,!!n.multiple,e,!1)}};gw=Jg;vw=ta;var sT={usingClientEntryPoint:!1,Events:[yc,Za,fh,pw,mw,Jg]},Nu={findFiberByHostInstance:Ho,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oT={bundleType:Nu.bundleType,version:Nu.version,rendererPackageName:Nu.rendererPackageName,rendererConfig:Nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_s.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=xw(t),t===null?null:t.stateNode},findFiberByHostInstance:Nu.findFiberByHostInstance||rT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cd.isDisabled&&Cd.supportsFiber)try{lh=Cd.inject(oT),Ji=Cd}catch{}}Or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sT;Or.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tv(e))throw Error(Fe(200));return nT(t,e,null,n)};Or.createRoot=function(t,e){if(!tv(t))throw Error(Fe(299));var n=!1,r="",i=Qx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Qg(t,1,!1,null,null,n,!1,r,i),t[ys]=e.current,nc(t.nodeType===8?t.parentNode:t),new ev(e)};Or.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Fe(188)):(t=Object.keys(t).join(","),Error(Fe(268,t)));return t=xw(e),t=t===null?null:t.stateNode,t};Or.flushSync=function(t){return ta(t)};Or.hydrate=function(t,e,n){if(!bh(e))throw Error(Fe(200));return _h(null,t,e,!0,n)};Or.hydrateRoot=function(t,e,n){if(!tv(t))throw Error(Fe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Qx;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Xx(e,null,t,1,n??null,i,!1,s,o),t[ys]=e.current,nc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new xh(e)};Or.render=function(t,e,n){if(!bh(e))throw Error(Fe(200));return _h(null,t,e,!1,n)};Or.unmountComponentAtNode=function(t){if(!bh(t))throw Error(Fe(40));return t._reactRootContainer?(ta(function(){_h(null,null,t,!1,function(){t._reactRootContainer=null,t[ys]=null})}),!0):!1};Or.unstable_batchedUpdates=Jg;Or.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!bh(n))throw Error(Fe(200));if(t==null||t._reactInternals===void 0)throw Error(Fe(38));return _h(t,e,n,!1,r)};Or.version="18.3.1-next-f1338f8080-20240426";function Zx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zx)}catch(t){console.error(t)}}Zx(),Z5.exports=Or;var aT=Z5.exports,uy=aT;E0.createRoot=uy.createRoot,E0.hydrateRoot=uy.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),dt=(t,e)=>{const n=He.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...u},f)=>He.createElement("svg",{ref:f,...lT,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${uT(t)}`,a].join(" "),...u},[...e.map(([p,m])=>He.createElement(p,m)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=dt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sh=dt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cT=dt("ArrowDownAZ",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=dt("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=dt("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=dt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=dt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=dt("ArrowUpZA",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M15 4h5l-5 6h5",key:"8asdl1"}],["path",{d:"M15 20v-3.5a2.5 2.5 0 0 1 5 0V20",key:"r6l5cz"}],["path",{d:"M20 18h-5",key:"18j1r2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=dt("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=dt("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=dt("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tb=dt("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=dt("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=dt("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=dt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=dt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rb=dt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=dt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=dt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=dt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=dt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=dt("FileBadge",[["path",{d:"M12 22h6a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"12ixgl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M5 17a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",key:"u0c8gj"}],["path",{d:"M7 16.5 8 22l-3-1-3 1 1-5.5",key:"5gm2nr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=dt("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=dt("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=dt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=dt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=dt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=dt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=dt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=dt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=dt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qf=dt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=dt("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=dt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=dt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=dt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=dt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=dt("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=dt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=dt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=dt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=dt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=dt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=dt("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vf=dt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),nn=({value:t,onChangeValue:e,isCurrency:n,className:r,...i})=>{const[s,o]=He.useState(""),[a,l]=He.useState(!1);He.useEffect(()=>{a||o(t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))},[t,a]);const u=g=>{const S=g.target.value,_=S.replace(/[^0-9.]/g,"");if((_.match(/\./g)||[]).length>1)return;o(S);const E=parseFloat(_);isNaN(E)?e(0):e(E)},f=()=>{l(!1);const g=parseFloat(s.replace(/,/g,""));isNaN(g)?o("0.00"):o(g.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))},p=()=>{l(!0),o(s.replace(/,/g,""))},m=g=>{g.currentTarget.blur()};return y.jsx("input",{type:"text",value:s,onChange:u,onBlur:f,onFocus:p,onWheel:m,className:`bg-transparent outline-none w-full placeholder-slate-300 ${r}`,...i})},_i=({value:t,onChange:e,className:n,step:r="0.01",placeholder:i,precision:s=3})=>{const[o,a]=He.useState(t.toString()),[l,u]=He.useState(!1);He.useEffect(()=>{l||a(t.toFixed(s))},[t,l,s]);const f=p=>{const m=p.target.value;a(m);const g=parseFloat(m);isNaN(g)||e(g)};return y.jsx("input",{type:"number",step:r,value:o,onChange:f,onFocus:()=>u(!0),onBlur:()=>u(!1),onWheel:p=>p.currentTarget.blur(),className:`bg-transparent outline-none w-full placeholder-slate-300 ${n}`,placeholder:i})},Au=({checked:t,onChange:e,label:n,warning:r,className:i})=>y.jsxs("div",{className:`flex flex-col ${i}`,children:[y.jsxs("div",{onClick:()=>e(!t),className:"flex items-center gap-2.5 cursor-pointer group select-none",children:[y.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center transition-all border shadow-sm ${t?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300 group-hover:border-indigo-400"}`,children:t&&y.jsx(rb,{size:14,className:"text-white",strokeWidth:3})}),n&&y.jsx("span",{className:`text-sm font-semibold tracking-tight ${t?"text-slate-900":"text-slate-500 group-hover:text-slate-700"}`,children:n})]}),r&&t&&y.jsx("p",{className:"text-[10px] text-amber-700 font-medium mt-1.5 ml-8 bg-amber-50 p-2 rounded border border-amber-100",children:r})]}),hs=({isOpen:t,onClose:e,title:n,subtitle:r,children:i,maxWidth:s="max-w-lg",noPadding:o=!1})=>t?y.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-[100] flex items-center justify-center p-4 backdrop-blur-sm animate-fadeIn",children:y.jsxs("div",{className:`bg-white rounded-xl shadow-2xl w-full ${s} overflow-hidden transform transition-all border border-slate-100 flex flex-col max-h-[90vh]`,onClick:a=>a.stopPropagation(),children:[y.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-white shrink-0",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"font-bold text-slate-900 text-lg flex items-center gap-2",children:n}),r&&y.jsx("p",{className:"text-xs text-slate-500 mt-0.5 font-medium",children:r})]}),y.jsx("button",{onClick:e,className:"text-slate-400 hover:text-slate-600 p-2 hover:bg-slate-50 rounded-full transition-colors",children:y.jsx(Vf,{size:20})})]}),y.jsx("div",{className:`overflow-y-auto ${o?"":"p-6"}`,children:i})]})}):null;var iv={},$f={},wm=function(t,e){return wm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},wm(t,e)};function sb(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");wm(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Hf=function(){return Hf=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Hf.apply(this,arguments)};function Dl(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ob(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function ab(t,e){return function(n,r){e(n,r,t)}}function lb(t,e,n,r,i,s){function o(b){if(b!==void 0&&typeof b!="function")throw new TypeError("Function expected");return b}for(var a=r.kind,l=a==="getter"?"get":a==="setter"?"set":"value",u=!e&&t?r.static?t:t.prototype:null,f=e||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),p,m=!1,g=n.length-1;g>=0;g--){var S={};for(var _ in r)S[_]=_==="access"?{}:r[_];for(var _ in r.access)S.access[_]=r.access[_];S.addInitializer=function(b){if(m)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(b||null))};var E=(0,n[g])(a==="accessor"?{get:f.get,set:f.set}:f[l],S);if(a==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(p=o(E.get))&&(f.get=p),(p=o(E.set))&&(f.set=p),(p=o(E.init))&&i.unshift(p)}else(p=o(E))&&(a==="field"?i.unshift(p):f[l]=p)}u&&Object.defineProperty(u,r.name,f),m=!0}function ub(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function cb(t){return typeof t=="symbol"?t:"".concat(t)}function db(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function fb(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Ke(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(f){try{u(r.next(f))}catch(p){o(p)}}function l(f){try{u(r.throw(f))}catch(p){o(p)}}function u(f){f.done?s(f.value):i(f.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}function hb(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(f){return l([u,f])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(n=0)),n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(f){u=[6,f],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Nh=Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]};function pb(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Nh(e,t,n)}function zf(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function sv(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function mb(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(sv(arguments[e]));return t}function gb(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function vb(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function Pl(t){return this instanceof Pl?(this.v=t,this):new Pl(t)}function yb(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(S){return Promise.resolve(S).then(g,p)}}function a(g,S){r[g]&&(i[g]=function(_){return new Promise(function(E,b){s.push([g,_,E,b])>1||l(g,_)})},S&&(i[g]=S(i[g])))}function l(g,S){try{u(r[g](S))}catch(_){m(s[0][3],_)}}function u(g){g.value instanceof Pl?Promise.resolve(g.value.v).then(f,p):m(s[0][2],g)}function f(g){l("next",g)}function p(g){l("throw",g)}function m(g,S){g(S),s.shift(),s.length&&l(s[0][0],s[0][1])}}function wb(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(o){return(n=!n)?{value:Pl(t[i](o)),done:!1}:s?s(o):o}:s}}function xb(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof zf=="function"?zf(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}function bb(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var UT=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},xm=function(t){return xm=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},xm(t)};function _b(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=xm(t),r=0;r<n.length;r++)n[r]!=="default"&&Nh(e,t,n[r]);return UT(e,t),e}function Sb(t){return t&&t.__esModule?t:{default:t}}function Nb(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function Ab(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}function Eb(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Tb(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var BT=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function Cb(t){function e(s){t.error=t.hasError?new BT(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var n,r=0;function i(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(i);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(s).then(i,function(o){return e(o),i()})}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function kb(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,s,o){return r?e?".jsx":".js":i&&(!s||!o)?n:i+s+"."+o.toLowerCase()+"js"}):t}const qT={__extends:sb,__assign:Hf,__rest:Dl,__decorate:ob,__param:ab,__esDecorate:lb,__runInitializers:ub,__propKey:cb,__setFunctionName:db,__metadata:fb,__awaiter:Ke,__generator:hb,__createBinding:Nh,__exportStar:pb,__values:zf,__read:sv,__spread:mb,__spreadArrays:gb,__spreadArray:vb,__await:Pl,__asyncGenerator:yb,__asyncDelegator:wb,__asyncValues:xb,__makeTemplateObject:bb,__importStar:_b,__importDefault:Sb,__classPrivateFieldGet:Nb,__classPrivateFieldSet:Ab,__classPrivateFieldIn:Eb,__addDisposableResource:Tb,__disposeResources:Cb,__rewriteRelativeImportExtension:kb},VT=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Tb,get __assign(){return Hf},__asyncDelegator:wb,__asyncGenerator:yb,__asyncValues:xb,__await:Pl,__awaiter:Ke,__classPrivateFieldGet:Nb,__classPrivateFieldIn:Eb,__classPrivateFieldSet:Ab,__createBinding:Nh,__decorate:ob,__disposeResources:Cb,__esDecorate:lb,__exportStar:pb,__extends:sb,__generator:hb,__importDefault:Sb,__importStar:_b,__makeTemplateObject:bb,__metadata:fb,__param:ab,__propKey:cb,__read:sv,__rest:Dl,__rewriteRelativeImportExtension:kb,__runInitializers:ub,__setFunctionName:db,__spread:mb,__spreadArray:vb,__spreadArrays:gb,__values:zf,default:qT},Symbol.toStringTag,{value:"Module"})),$T=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);let Ah=class extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}},Pb=class extends Ah{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},bm=class extends Ah{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},_m=class extends Ah{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var Gf;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Gf||(Gf={}));class HT{constructor(e,{headers:n={},customFetch:r,region:i=Gf.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=$T(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Ke(this,arguments,void 0,function*(n,r={}){var i;let s,o;try{const{headers:a,method:l,body:u,signal:f,timeout:p}=r;let m={},{region:g}=r;g||(g=this.region);const S=new URL(`${this.url}/${n}`);g&&g!=="any"&&(m["x-region"]=g,S.searchParams.set("forceFunctionRegion",g));let _;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",_=u):typeof u=="string"?(m["Content-Type"]="text/plain",_=u):typeof FormData<"u"&&u instanceof FormData?_=u:(m["Content-Type"]="application/json",_=JSON.stringify(u)):_=u;let E=f;p&&(o=new AbortController,s=setTimeout(()=>o.abort(),p),f?(E=o.signal,f.addEventListener("abort",()=>o.abort())):E=o.signal);const b=yield this.fetch(S.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),a),body:_,signal:E}).catch(U=>{throw new Pb(U)}),N=b.headers.get("x-relay-error");if(N&&N==="true")throw new bm(b);if(!b.ok)throw new _m(b);let T=((i=b.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),M;return T==="application/json"?M=yield b.json():T==="application/octet-stream"||T==="application/pdf"?M=yield b.blob():T==="text/event-stream"?M=b:T==="multipart/form-data"?M=yield b.formData():M=yield b.text(),{data:M,error:null,response:b}}catch(a){return{data:null,error:a,response:a instanceof _m||a instanceof bm?a.context:void 0}}finally{s&&clearTimeout(s)}})}}const zT=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Gf},FunctionsClient:HT,FunctionsError:Ah,FunctionsFetchError:Pb,FunctionsHttpError:_m,FunctionsRelayError:bm},Symbol.toStringTag,{value:"Module"})),Ib=pc(zT);var Kn={};const Fl=pc(VT);var kd={},Pd={},Id={},Rd={},Ld={},Md={},py;function Rb(){if(py)return Md;py=1,Object.defineProperty(Md,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Md.default=t,Md}var my;function Lb(){if(my)return Ld;my=1,Object.defineProperty(Ld,"__esModule",{value:!0});const e=Fl.__importDefault(Rb());let n=class{constructor(i){var s,o;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(s=i.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=i.signal,this.isMaybeSingle=(o=i.isMaybeSingle)!==null&&o!==void 0?o:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,s){return this.headers=new Headers(this.headers),this.headers.set(i,s),this}then(i,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var u,f,p,m;let g=null,S=null,_=null,E=l.status,b=l.statusText;if(l.ok){if(this.method!=="HEAD"){const U=await l.text();U===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?S=U:S=JSON.parse(U))}const T=(f=this.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),M=(p=l.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");T&&M&&M.length>1&&(_=parseInt(M[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(g={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,_=null,E=406,b="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const T=await l.text();try{g=JSON.parse(T),Array.isArray(g)&&l.status===404&&(S=[],g=null,E=200,b="OK")}catch{l.status===404&&T===""?(E=204,b="No Content"):g={message:T}}if(g&&this.isMaybeSingle&&(!((m=g==null?void 0:g.details)===null||m===void 0)&&m.includes("0 rows"))&&(g=null,E=200,b="OK"),g&&this.shouldThrowOnError)throw new e.default(g)}return{error:g,data:S,count:_,status:E,statusText:b}});return this.shouldThrowOnError||(a=a.catch(l=>{var u,f,p,m,g,S;let _="";const E=l==null?void 0:l.cause;if(E){const b=(u=E==null?void 0:E.message)!==null&&u!==void 0?u:"",N=(f=E==null?void 0:E.code)!==null&&f!==void 0?f:"";_=`${(p=l==null?void 0:l.name)!==null&&p!==void 0?p:"FetchError"}: ${l==null?void 0:l.message}`,_+=`

Caused by: ${(m=E==null?void 0:E.name)!==null&&m!==void 0?m:"Error"}: ${b}`,N&&(_+=` (${N})`),E!=null&&E.stack&&(_+=`
${E.stack}`)}else _=(g=l==null?void 0:l.stack)!==null&&g!==void 0?g:"";return{error:{message:`${(S=l==null?void 0:l.name)!==null&&S!==void 0?S:"FetchError"}: ${l==null?void 0:l.message}`,details:_,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(i,s)}returns(){return this}overrideTypes(){return this}};return Ld.default=n,Ld}var gy;function Mb(){if(gy)return Rd;gy=1,Object.defineProperty(Rd,"__esModule",{value:!0});const e=Fl.__importDefault(Lb());let n=class extends e.default{select(i){let s=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.order`:"order",f=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${f?`${f},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(u,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:u="text"}={}){var f;const p=[i?"analyze":null,s?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),m=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${m}"; options=${p};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}};return Rd.default=n,Rd}var vy;function ov(){if(vy)return Id;vy=1,Object.defineProperty(Id,"__esModule",{value:!0});const e=Fl.__importDefault(Mb()),n=new RegExp("[,()]");let r=class extends e.default{eq(s,o){return this.url.searchParams.append(s,`eq.${o}`),this}neq(s,o){return this.url.searchParams.append(s,`neq.${o}`),this}gt(s,o){return this.url.searchParams.append(s,`gt.${o}`),this}gte(s,o){return this.url.searchParams.append(s,`gte.${o}`),this}lt(s,o){return this.url.searchParams.append(s,`lt.${o}`),this}lte(s,o){return this.url.searchParams.append(s,`lte.${o}`),this}like(s,o){return this.url.searchParams.append(s,`like.${o}`),this}likeAllOf(s,o){return this.url.searchParams.append(s,`like(all).{${o.join(",")}}`),this}likeAnyOf(s,o){return this.url.searchParams.append(s,`like(any).{${o.join(",")}}`),this}ilike(s,o){return this.url.searchParams.append(s,`ilike.${o}`),this}ilikeAllOf(s,o){return this.url.searchParams.append(s,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(s,o){return this.url.searchParams.append(s,`ilike(any).{${o.join(",")}}`),this}regexMatch(s,o){return this.url.searchParams.append(s,`match.${o}`),this}regexIMatch(s,o){return this.url.searchParams.append(s,`imatch.${o}`),this}is(s,o){return this.url.searchParams.append(s,`is.${o}`),this}isDistinct(s,o){return this.url.searchParams.append(s,`isdistinct.${o}`),this}in(s,o){const a=Array.from(new Set(o)).map(l=>typeof l=="string"&&n.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`in.(${a})`),this}contains(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cs.{${o.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(o)}`),this}containedBy(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cd.{${o.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(o)}`),this}rangeGt(s,o){return this.url.searchParams.append(s,`sr.${o}`),this}rangeGte(s,o){return this.url.searchParams.append(s,`nxl.${o}`),this}rangeLt(s,o){return this.url.searchParams.append(s,`sl.${o}`),this}rangeLte(s,o){return this.url.searchParams.append(s,`nxr.${o}`),this}rangeAdjacent(s,o){return this.url.searchParams.append(s,`adj.${o}`),this}overlaps(s,o){return typeof o=="string"?this.url.searchParams.append(s,`ov.${o}`):this.url.searchParams.append(s,`ov.{${o.join(",")}}`),this}textSearch(s,o,{config:a,type:l}={}){let u="";l==="plain"?u="pl":l==="phrase"?u="ph":l==="websearch"&&(u="w");const f=a===void 0?"":`(${a})`;return this.url.searchParams.append(s,`${u}fts${f}.${o}`),this}match(s){return Object.entries(s).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(s,o,a){return this.url.searchParams.append(s,`not.${o}.${a}`),this}or(s,{foreignTable:o,referencedTable:a=o}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${s})`),this}filter(s,o,a){return this.url.searchParams.append(s,`${o}.${a}`),this}};return Id.default=r,Id}var yy;function Db(){if(yy)return Pd;yy=1,Object.defineProperty(Pd,"__esModule",{value:!0});const e=Fl.__importDefault(ov());let n=class{constructor(i,{headers:s={},schema:o,fetch:a}){this.url=i,this.headers=new Headers(s),this.schema=o,this.fetch=a}select(i,s){const{head:o=!1,count:a}=s??{},l=o?"HEAD":"GET";let u=!1;const f=(i??"*").split("").map(p=>/\s/.test(p)&&!u?"":(p==='"'&&(u=!u),p)).join("");return this.url.searchParams.set("select",f),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:o=!0}={}){var a;const l="POST";if(s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const u=i.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(u.length>0){const f=[...new Set(u)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var u;const f="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(p.length>0){const m=[...new Set(p)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(i,{count:s}={}){var o;const a="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var s;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};return Pd.default=n,Pd}var wy;function GT(){if(wy)return kd;wy=1,Object.defineProperty(kd,"__esModule",{value:!0});const t=Fl,e=t.__importDefault(Db()),n=t.__importDefault(ov());let r=class Fb{constructor(s,{headers:o={},schema:a,fetch:l}={}){this.url=s,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(s){if(!s||typeof s!="string"||s.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${s}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new Fb(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,o={},{head:a=!1,get:l=!1,count:u}={}){var f;let p;const m=new URL(`${this.url}/rpc/${s}`);let g;a||l?(p=a?"HEAD":"GET",Object.entries(o).filter(([_,E])=>E!==void 0).map(([_,E])=>[_,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([_,E])=>{m.searchParams.append(_,E)})):(p="POST",g=o);const S=new Headers(this.headers);return u&&S.set("Prefer",`count=${u}`),new n.default({method:p,url:m,headers:S,schema:this.schemaName,body:g,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}};return kd.default=r,kd}Object.defineProperty(Kn,"__esModule",{value:!0});Kn.PostgrestError=Kn.PostgrestBuilder=Kn.PostgrestTransformBuilder=Kn.PostgrestFilterBuilder=Kn.PostgrestQueryBuilder=Kn.PostgrestClient=void 0;const Ol=Fl,Ob=Ol.__importDefault(GT());Kn.PostgrestClient=Ob.default;const jb=Ol.__importDefault(Db());Kn.PostgrestQueryBuilder=jb.default;const Ub=Ol.__importDefault(ov());Kn.PostgrestFilterBuilder=Ub.default;const Bb=Ol.__importDefault(Mb());Kn.PostgrestTransformBuilder=Bb.default;const qb=Ol.__importDefault(Lb());Kn.PostgrestBuilder=qb.default;const Vb=Ol.__importDefault(Rb());Kn.PostgrestError=Vb.default;Kn.default={PostgrestClient:Ob.default,PostgrestQueryBuilder:jb.default,PostgrestFilterBuilder:Ub.default,PostgrestTransformBuilder:Bb.default,PostgrestBuilder:qb.default,PostgrestError:Vb.default};class $b{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const WT="2.87.1",JT=`realtime-js/${WT}`,Hb="1.0.0",KT="2.0.0",xy=Hb,Sm=1e4,YT=1e3,XT=100;var qo;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(qo||(qo={}));var yn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(yn||(yn={}));var xi;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(xi||(xi={}));var Nm;(function(t){t.websocket="websocket"})(Nm||(Nm={}));var Vo;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Vo||(Vo={}));class QT{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,r){var i,s;const o=e.topic,a=(i=e.ref)!==null&&i!==void 0?i:"",l=(s=e.join_ref)!==null&&s!==void 0?s:"",u=e.payload.event,f=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},p=Object.keys(f).length===0?"":JSON.stringify(f);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`metadata length ${p.length} exceeds maximum of 255`);const m=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+u.length+p.length,g=new ArrayBuffer(this.HEADER_LENGTH+m);let S=new DataView(g),_=0;S.setUint8(_++,this.KINDS.userBroadcastPush),S.setUint8(_++,l.length),S.setUint8(_++,a.length),S.setUint8(_++,o.length),S.setUint8(_++,u.length),S.setUint8(_++,p.length),S.setUint8(_++,n),Array.from(l,b=>S.setUint8(_++,b.charCodeAt(0))),Array.from(a,b=>S.setUint8(_++,b.charCodeAt(0))),Array.from(o,b=>S.setUint8(_++,b.charCodeAt(0))),Array.from(u,b=>S.setUint8(_++,b.charCodeAt(0))),Array.from(p,b=>S.setUint8(_++,b.charCodeAt(0)));var E=new Uint8Array(g.byteLength+r.byteLength);return E.set(new Uint8Array(g),0),E.set(new Uint8Array(r),g.byteLength),E.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,s,o,a,l]=r;return n({join_ref:i,ref:s,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const u=r.decode(e.slice(l,l+i));l=l+i;const f=r.decode(e.slice(l,l+s));l=l+s;const p=r.decode(e.slice(l,l+o));l=l+o;const m=e.slice(l,e.byteLength),g=a===this.JSON_ENCODING?JSON.parse(r.decode(m)):m,S={type:this.BROADCAST_EVENT,event:f,payload:g};return o>0&&(S.meta=JSON.parse(p)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class zb{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ut;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ut||(Ut={}));const by=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=ZT(o,t,e,i),s),{}):{}},ZT=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?Gb(s,o):Am(o)},Gb=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return rC(e,n)}switch(t){case Ut.bool:return eC(e);case Ut.float4:case Ut.float8:case Ut.int2:case Ut.int4:case Ut.int8:case Ut.numeric:case Ut.oid:return tC(e);case Ut.json:case Ut.jsonb:return nC(e);case Ut.timestamp:return iC(e);case Ut.abstime:case Ut.date:case Ut.daterange:case Ut.int4range:case Ut.int8range:case Ut.money:case Ut.reltime:case Ut.text:case Ut.time:case Ut.timestamptz:case Ut.timetz:case Ut.tsrange:case Ut.tstzrange:return Am(e);default:return Am(e)}},Am=t=>t,eC=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},tC=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},nC=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},rC=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>Gb(e,a))}return t},iC=t=>typeof t=="string"?t.replace(" ","T"):t,Wb=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class n0{constructor(e,n,r={},i=Sm){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Em;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Em||(Em={}));let Jb=class of{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=of.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=of.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=of.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(u,f)=>{o[u]||(l[u]=f)}),this.map(o,(u,f)=>{const p=s[u];if(p){const m=f.map(E=>E.presence_ref),g=p.map(E=>E.presence_ref),S=f.filter(E=>g.indexOf(E.presence_ref)<0),_=p.filter(E=>m.indexOf(E.presence_ref)<0);S.length>0&&(a[u]=S),_.length>0&&(l[u]=_)}else a[u]=f}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var u;const f=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),f.length>0){const p=e[a].map(g=>g.presence_ref),m=f.filter(g=>p.indexOf(g.presence_ref)<0);e[a].unshift(...m)}r(a,f,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const f=l.map(p=>p.presence_ref);u=u.filter(p=>f.indexOf(p.presence_ref)<0),e[a]=u,i(a,u,l),u.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Tm;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Tm||(Tm={}));var ml;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ml||(ml={}));var zi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(zi||(zi={}));const sC=yn;let Kb=class Lu{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=yn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new n0(this,xi.join,this.params,this.timeout),this.rejoinTimer=new zb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=yn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=yn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=yn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=yn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=yn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(xi.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Jb(this),this.broadcastEndpointURL=Wb(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==yn.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&i!==void 0?i:[],f=!!this.bindings[ml.PRESENCE]&&this.bindings[ml.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,p={},m={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:f}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(zi.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(zi.CLOSED)),this.updateJoinPayload(Object.assign({config:m},p)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){e==null||e(zi.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,E=(S=_==null?void 0:_.length)!==null&&S!==void 0?S:0,b=[];for(let N=0;N<E;N++){const T=_[N],{filter:{event:M,schema:U,table:Y,filter:H}}=T,B=g&&g[N];if(B&&B.event===M&&Lu.isFilterValueEqual(B.schema,U)&&Lu.isFilterValueEqual(B.table,Y)&&Lu.isFilterValueEqual(B.filter,H))b.push(Object.assign(Object.assign({},T),{id:B.id}));else{this.unsubscribe(),this.state=yn.errored,e==null||e(zi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(zi.SUBSCRIBED);return}}).receive("error",g=>{this.state=yn.errored,e==null||e(zi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(zi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===yn.joined&&e===ml.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const u=await a.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=yn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(xi.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new n0(this,xi.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=yn.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new n0(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>XT){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:f}=xi;if(r&&[a,l,u,f].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var S,_,E;return((S=g.filter)===null||S===void 0?void 0:S.event)==="*"||((E=(_=g.filter)===null||_===void 0?void 0:_.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===o}).map(g=>g.callback(m,r)):(s=this.bindings[o])===null||s===void 0||s.filter(g=>{var S,_,E,b,N,T;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const M=g.id,U=(S=g.filter)===null||S===void 0?void 0:S.event;return M&&((_=n.ids)===null||_===void 0?void 0:_.includes(M))&&(U==="*"||(U==null?void 0:U.toLocaleLowerCase())===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const M=(N=(b=g==null?void 0:g.filter)===null||b===void 0?void 0:b.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return M==="*"||M===((T=n==null?void 0:n.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof m=="object"&&"ids"in m){const S=m.data,{schema:_,table:E,commit_timestamp:b,type:N,errors:T}=S;m=Object.assign(Object.assign({},{schema:_,table:E,commit_timestamp:b,eventType:N,new:{},old:{},errors:T}),this._getPayloadRecords(S))}g.callback(m,r)})}_isClosed(){return this.state===yn.closed}_isJoined(){return this.state===yn.joined}_isJoining(){return this.state===yn.joining}_isLeaving(){return this.state===yn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&Lu.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(xi.close,{},e)}_onError(e){this._on(xi.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=yn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=by(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=by(e.columns,e.old_record)),n}};const r0=()=>{},Dd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},oC=[1e3,2e3,5e3,1e4],aC=1e4,lC=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let uC=class{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Sm,this.transport=null,this.heartbeatIntervalMs=Dd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=r0,this.ref=0,this.reconnectTimer=null,this.vsn=xy,this.logger=r0,this.conn=null,this.sendBuffer=[],this.serializer=new QT,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Nm.websocket}`,this.httpEndpoint=Wb(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=$b.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case qo.connecting:return Vo.Connecting;case qo.open:return Vo.Open;case qo.closing:return Vo.Closing;default:return Vo.Closed}}isConnected(){return this.connectionState()===Vo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new Kb(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(YT,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Dd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:o}=n,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),s),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(i,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===qo.open||this.conn.readyState===qo.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(xi.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([lC],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const s={access_token:n,version:JT};n&&i.updateJoinPayload(s),i.joinedOnce&&i._isJoined()&&i._push(xi.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new zb(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Dd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,o,a,l,u,f,p,m,g;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Sm,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Dd.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:r0,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:xy,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:S=>oC[S-1]||aC,this.vsn){case Hb:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:(S,_)=>_(JSON.stringify(S)),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:(S,_)=>_(JSON.parse(S));break;case KT:this.encode=(m=e==null?void 0:e.encode)!==null&&m!==void 0?m:this.serializer.encode.bind(this.serializer),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}};const cC=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:sC,get REALTIME_LISTEN_TYPES(){return ml},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return Tm},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Em},get REALTIME_SUBSCRIBE_STATES(){return zi},RealtimeChannel:Kb,RealtimeClient:uC,RealtimePresence:Jb,WebSocketFactory:$b},Symbol.toStringTag,{value:"Module"})),Yb=pc(cC);class xc extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ht(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Xb extends xc{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Wf extends xc{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const av=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),dC=()=>Response,Cm=t=>{if(Array.isArray(t))return t.map(n=>Cm(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Cm(r)}),e},fC=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},hC=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),i0=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},pC=(t,e,n)=>Ke(void 0,void 0,void 0,function*(){const r=yield dC();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{const s=t.status||500,o=(i==null?void 0:i.statusCode)||s+"";e(new Xb(i0(i),s,o))}).catch(i=>{e(new Wf(i0(i),i))}):e(new Wf(i0(t),t))}),mC=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(fC(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function bc(t,e,n,r,i,s){return Ke(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,mC(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>pC(l,a,r))})})}function dc(t,e,n,r){return Ke(this,void 0,void 0,function*(){return bc(t,"GET",e,n,r)})}function vi(t,e,n,r,i){return Ke(this,void 0,void 0,function*(){return bc(t,"POST",e,r,i,n)})}function km(t,e,n,r,i){return Ke(this,void 0,void 0,function*(){return bc(t,"PUT",e,r,i,n)})}function gC(t,e,n,r){return Ke(this,void 0,void 0,function*(){return bc(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function lv(t,e,n,r,i){return Ke(this,void 0,void 0,function*(){return bc(t,"DELETE",e,r,i,n)})}class vC{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return Ke(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ht(e))return{data:null,error:e};throw e}})}}var Qb;class yC{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[Qb]="BlobDownloadBuilder",this.promise=null}asStream(){return new vC(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ke(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ht(e))return{data:null,error:e};throw e}})}}Qb=Symbol.toStringTag;const wC={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_y={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class xC{constructor(e,n={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=av(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,i){return Ke(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},_y),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),l&&!s.has("metadata")&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(n),f=this._getFinalPath(u),p=yield(e=="PUT"?km:vi)(this.fetch,`${this.url}/object/${f}`,s,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:p.Id,fullPath:p.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ht(s))return{data:null,error:s};throw s}})}upload(e,n,r){return Ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return Ke(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:_y.upsert},i),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType);const p=yield km(this.fetch,a.toString(),l,{headers:f});return{data:{path:s,fullPath:p.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ht(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Ke(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield vi(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new xc("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ht(r))return{data:null,error:r};throw r}})}update(e,n,r){return Ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Ke(this,void 0,void 0,function*(){try{return{data:yield vi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}copy(e,n,r){return Ke(this,void 0,void 0,function*(){try{return{data:{path:(yield vi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return Ke(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield vi(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return Ke(this,void 0,void 0,function*(){try{const i=yield vi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}download(e,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"",a=this._getFinalPath(e),l=()=>dc(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new yC(l,this.shouldThrowOnError)}info(e){return Ke(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield dc(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Cm(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ht(r))return{data:null,error:r};throw r}})}exists(e){return Ke(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield gC(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ht(r)&&r instanceof Wf){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return Ke(this,void 0,void 0,function*(){try{return{data:yield lv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ht(n))return{data:null,error:n};throw n}})}list(e,n,r){return Ke(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},wC),n),{prefix:e||""});return{data:yield vi(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}listV2(e,n){return Ke(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield vi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ht(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Zb="2.87.1",e_={"X-Client-Info":`storage-js/${Zb}`};class bC{constructor(e,n={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},e_),n),this.fetch=av(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return Ke(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield dc(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ht(n))return{data:null,error:n};throw n}})}getBucket(e){return Ke(this,void 0,void 0,function*(){try{return{data:yield dc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ht(n))return{data:null,error:n};throw n}})}createBucket(e){return Ke(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield vi(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ht(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return Ke(this,void 0,void 0,function*(){try{return{data:yield km(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ht(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ke(this,void 0,void 0,function*(){try{return{data:yield vi(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ht(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ke(this,void 0,void 0,function*(){try{return{data:yield lv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ht(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var fc=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function _C(t,e,n){const r=new URL(e,t);if(n)for(const[i,s]of Object.entries(n))s!==void 0&&r.searchParams.set(i,s);return r.toString()}async function SC(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function NC(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:s,headers:o}){const a=_C(t.baseUrl,r,i),l=await SC(t.auth),u=await e(a,{method:n,headers:{...s?{"Content-Type":"application/json"}:{},...l,...o},body:s?JSON.stringify(s):void 0}),f=await u.text(),p=(u.headers.get("content-type")||"").includes("application/json"),m=p&&f?JSON.parse(f):f;if(!u.ok){const g=p?m:void 0,S=g==null?void 0:g.error;throw new fc((S==null?void 0:S.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:S==null?void 0:S.type,icebergCode:S==null?void 0:S.code,details:g})}return{status:u.status,headers:u.headers,data:m}}}}function Fd(t){return t.join("")}var AC=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Fd(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Fd(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fd(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Fd(t.namespace)}`}),!0}catch(e){if(e instanceof fc&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof fc&&n.status===409)return;throw n}}};function Oa(t){return t.join("")}var EC=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Oa(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Oa(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Oa(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Oa(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Oa(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Oa(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof fc&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof fc&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},TC=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=NC({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new AC(this.client,e),this.tableOps=new EC(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class t_{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},e_),n),this.fetch=av(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Ke(this,void 0,void 0,function*(){try{return{data:yield vi(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ht(n))return{data:null,error:n};throw n}})}listBuckets(e){return Ke(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield dc(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ht(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ke(this,void 0,void 0,function*(){try{return{data:yield lv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ht(n))return{data:null,error:n};throw n}})}from(e){if(!hC(e))throw new xc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new TC({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>Ke(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,o){const a=s[o];return typeof a!="function"?a:(...l)=>Ke(this,void 0,void 0,function*(){try{return{data:yield a.apply(s,l),error:null}}catch(u){if(r)throw u;return{data:null,error:u}}})}})}}const uv={"X-Client-Info":`storage-js/${Zb}`,"Content-Type":"application/json"};class cv extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function vr(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class af extends cv{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class n_ extends cv{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var Pm;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Pm||(Pm={}));const Eh=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),CC=()=>Response,r_=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},kC=t=>Array.from(new Float32Array(t)),PC=(t,e)=>{if(e!==void 0&&t.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${t.float32.length}`)},Sy=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),IC=(t,e,n)=>Ke(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const i=t.status||500,s=t;if(typeof s.json=="function")s.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";e(new af(Sy(o),i,a))}).catch(()=>{const o=i+"",a=s.statusText||`HTTP ${i} error`;e(new af(a,i,o))});else{const o=i+"",a=s.statusText||`HTTP ${i} error`;e(new af(a,i,o))}}else e(new n_(Sy(t),t))}),RC=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(r_(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n)):i};function LC(t,e,n,r,i,s){return Ke(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,RC(e,r,i,s)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>IC(l,a,r))})})}function Rr(t,e,n,r,i){return Ke(this,void 0,void 0,function*(){return LC(t,"POST",e,r,i,n)})}class i_{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uv),n),this.fetch=Eh(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return Ke(this,void 0,void 0,function*(){try{return{data:(yield Rr(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vr(n))return{data:null,error:n};throw n}})}getIndex(e,n){return Ke(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vr(r))return{data:null,error:r};throw r}})}listIndexes(e){return Ke(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vr(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return Ke(this,void 0,void 0,function*(){try{return{data:(yield Rr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(vr(r))return{data:null,error:r};throw r}})}}class s_{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uv),n),this.fetch=Eh(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return Ke(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Rr(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vr(n))return{data:null,error:n};throw n}})}getVectors(e){return Ke(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vr(n))return{data:null,error:n};throw n}})}listVectors(e){return Ke(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Rr(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vr(n))return{data:null,error:n};throw n}})}queryVectors(e){return Ke(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vr(n))return{data:null,error:n};throw n}})}deleteVectors(e){return Ke(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Rr(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vr(n))return{data:null,error:n};throw n}})}}class o_{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uv),n),this.fetch=Eh(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return Ke(this,void 0,void 0,function*(){try{return{data:(yield Rr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vr(n))return{data:null,error:n};throw n}})}getBucket(e){return Ke(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vr(n))return{data:null,error:n};throw n}})}listBuckets(){return Ke(this,arguments,void 0,function*(e={}){try{return{data:yield Rr(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vr(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ke(this,void 0,void 0,function*(){try{return{data:(yield Rr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(vr(n))return{data:null,error:n};throw n}})}}class a_ extends o_{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new l_(this.url,this.headers,e,this.fetch)}createBucket(e){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Ke(this,void 0,void 0,function*(){return n.createBucket.call(this,e)})}getBucket(e){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Ke(this,void 0,void 0,function*(){return n.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Ke(this,arguments,void 0,function*(n={}){return e.listBuckets.call(this,n)})}deleteBucket(e){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Ke(this,void 0,void 0,function*(){return n.deleteBucket.call(this,e)})}}class l_ extends i_{constructor(e,n,r,i){super(e,n,i),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ke(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ke(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ke(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ke(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new u_(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class u_ extends s_{constructor(e,n,r,i,s){super(e,n,s),this.vectorBucketName=r,this.indexName=i}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ke(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ke(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ke(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ke(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ke(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class MC extends bC{constructor(e,n={},r,i){super(e,n,r,i)}from(e){return new xC(this.url,this.headers,e,this.fetch)}get vectors(){return new a_(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new t_(this.url+"/iceberg",this.headers,this.fetch)}}const DC=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:t_,StorageApiError:Xb,StorageClient:MC,StorageError:xc,StorageUnknownError:Wf,StorageVectorsApiError:af,StorageVectorsClient:a_,StorageVectorsError:cv,get StorageVectorsErrorCode(){return Pm},StorageVectorsUnknownError:n_,VectorBucketApi:o_,VectorBucketScope:l_,VectorDataApi:s_,VectorIndexApi:i_,VectorIndexScope:u_,isPlainObject:r_,isStorageError:Ht,isStorageVectorsError:vr,normalizeToFloat32:kC,resolveFetch:Eh,resolveResponse:CC,validateVectorDimension:PC},Symbol.toStringTag,{value:"Module"})),FC=pc(DC);var c_={},Th={};Object.defineProperty(Th,"__esModule",{value:!0});Th.version=void 0;Th.version="2.87.1";(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_REALTIME_OPTIONS=t.DEFAULT_AUTH_OPTIONS=t.DEFAULT_DB_OPTIONS=t.DEFAULT_GLOBAL_OPTIONS=t.DEFAULT_HEADERS=void 0;const e=Th;let n="";typeof Deno<"u"?n="deno":typeof document<"u"?n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?n="react-native":n="node",t.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${n}/${e.version}`},t.DEFAULT_GLOBAL_OPTIONS={headers:t.DEFAULT_HEADERS},t.DEFAULT_DB_OPTIONS={schema:"public"},t.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},t.DEFAULT_REALTIME_OPTIONS={}})(c_);var d_={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchWithAuth=t.resolveHeadersConstructor=t.resolveFetch=void 0;const e=i=>i?(...s)=>i(...s):(...s)=>fetch(...s);t.resolveFetch=e;const n=()=>Headers;t.resolveHeadersConstructor=n;const r=(i,s,o)=>{const a=(0,t.resolveFetch)(o),l=(0,t.resolveHeadersConstructor)();return async(u,f)=>{var p;const m=(p=await s())!==null&&p!==void 0?p:i;let g=new l(f==null?void 0:f.headers);return g.has("apikey")||g.set("apikey",i),g.has("Authorization")||g.set("Authorization",`Bearer ${m}`),a(u,Object.assign(Object.assign({},f),{headers:g}))}};t.fetchWithAuth=r})(d_);var vo={};Object.defineProperty(vo,"__esModule",{value:!0});vo.isBrowser=void 0;vo.uuid=OC;vo.ensureTrailingSlash=f_;vo.applySettingDefaults=UC;vo.validateSupabaseUrl=BC;function OC(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,n=t=="x"?e:e&3|8;return n.toString(16)})}function f_(t){return t.endsWith("/")?t:t+"/"}const jC=()=>typeof window<"u";vo.isBrowser=jC;function UC(t,e){var n,r;const{db:i,auth:s,realtime:o,global:a}=t,{db:l,auth:u,realtime:f,global:p}=e,m={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},f),o),storage:{},global:Object.assign(Object.assign(Object.assign({},p),a),{headers:Object.assign(Object.assign({},(n=p==null?void 0:p.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}function BC(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(f_(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Ch={};const h_="2.87.1",$a=30*1e3,Im=3,s0=Im*$a,qC="http://localhost:9999",VC="supabase.auth.token",$C={"X-Client-Info":`gotrue-js/${h_}`},Rm="X-Supabase-Api-Version",p_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},HC=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,zC=10*60*1e3;let Il=class extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function Xe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}let m_=class extends Il{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function g_(t){return Xe(t)&&t.name==="AuthApiError"}let Js=class extends Il{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}},Ss=class extends Il{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}},mr=class extends Ss{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function v_(t){return Xe(t)&&t.name==="AuthSessionMissingError"}let Do=class extends Ss{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Mu=class extends Ss{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},Du=class extends Ss{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function y_(t){return Xe(t)&&t.name==="AuthImplicitGrantRedirectError"}let Lm=class extends Ss{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Jf=class extends Ss{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}};function lf(t){return Xe(t)&&t.name==="AuthRetryableFetchError"}let Mm=class extends Ss{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};function GC(t){return Xe(t)&&t.name==="AuthWeakPasswordError"}let Kf=class extends Ss{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const Yf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ny=` 	
\r=`.split(""),WC=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Ny.length;e+=1)t[Ny[e].charCodeAt(0)]=-2;for(let e=0;e<Yf.length;e+=1)t[Yf[e].charCodeAt(0)]=e;return t})();function Ay(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Yf[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Yf[r]),e.queuedBits-=6}}function w_(t,e,n){const r=WC[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Ey(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{YC(o,r,n)};for(let o=0;o<t.length;o+=1)w_(t.charCodeAt(o),i,s);return e.join("")}function JC(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function KC(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}JC(r,e)}}function YC(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function gl(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)w_(t.charCodeAt(i),n,r);return new Uint8Array(e)}function XC(t){const e=[];return KC(t,n=>e.push(n)),new Uint8Array(e)}function Wo(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>Ay(i,n,r)),Ay(null,n,r),e.join("")}function QC(t){return Math.round(Date.now()/1e3)+t}function ZC(){return Symbol("auth-callback")}const Fn=()=>typeof window<"u"&&typeof document<"u",Io={tested:!1,writable:!1},x_=()=>{if(!Fn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Io.tested)return Io.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Io.tested=!0,Io.writable=!0}catch{Io.tested=!0,Io.writable=!1}return Io.writable};function e4(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const b_=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),t4=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ha=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Ro=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Dn=async(t,e)=>{await t.removeItem(e)};class kh{constructor(){this.promise=new kh.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}kh.promiseConstructor=Promise;function o0(t){const e=t.split(".");if(e.length!==3)throw new Kf("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!HC.test(e[r]))throw new Kf("JWT not in base64url format");return{header:JSON.parse(Ey(e[0])),payload:JSON.parse(Ey(e[1])),signature:gl(e[2]),raw:{header:e[0],payload:e[1]}}}async function n4(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function r4(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function i4(t){return("0"+t.toString(16)).substr(-2)}function s4(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,i4).join("")}async function o4(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function a4(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await o4(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ja(t,e,n=!1){const r=s4();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Ha(t,`${e}-code-verifier`,i);const s=await a4(r);return[s,r===s?"plain":"s256"]}const l4=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function u4(t){const e=t.headers.get(Rm);if(!e||!e.match(l4))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function c4(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function d4(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const f4=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ua(t){if(!f4.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function a0(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function h4(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function Ty(t){return JSON.parse(JSON.stringify(t))}const Fo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),p4=[502,503,504];async function Cy(t){var e;if(!t4(t))throw new Jf(Fo(t),0);if(p4.includes(t.status))throw new Jf(Fo(t),t.status);let n;try{n=await t.json()}catch(s){throw new Js(Fo(s),s)}let r;const i=u4(t);if(i&&i.getTime()>=p_["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Mm(Fo(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new mr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new Mm(Fo(n),t.status,n.weak_password.reasons);throw new m_(Fo(n),t.status||500,r)}const m4=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function rt(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[Rm]||(s[Rm]=p_["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await g4(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function g4(t,e,n,r,i,s){const o=m4(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new Jf(Fo(l),0)}if(a.ok||await Cy(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Cy(l)}}function mi(t){var e;let n=null;w4(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=QC(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function ky(t){const e=mi(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ks(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function v4(t){return{data:t,error:null}}function y4(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=Dl(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Py(t){return t}function w4(t){return t.access_token&&t.refresh_token&&t.expires_in}const uf=["global","local","others"];let dv=class{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=b_(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=uf[0]){if(uf.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${uf.join(", ")}`);try{return await rt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Xe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await rt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ks})}catch(r){if(Xe(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Dl(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await rt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:y4,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Xe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await rt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ks})}catch(n){if(Xe(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},f=await rt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Py});if(f.error)throw f.error;const p=await f.json(),m=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=f.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(S=>{const _=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(S.split(";")[1].split("=")[1]);u[`${E}Page`]=_}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},p),u),error:null}}catch(u){if(Xe(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Ua(e);try{return await rt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ks})}catch(n){if(Xe(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Ua(e);try{return await rt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ks})}catch(r){if(Xe(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Ua(e);try{return await rt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ks})}catch(r){if(Xe(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Ua(e.userId);try{const{data:n,error:r}=await rt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Ua(e.userId),Ua(e.id);try{return{data:await rt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},f=await rt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Py});if(f.error)throw f.error;const p=await f.json(),m=(o=f.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=f.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(S=>{const _=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(S.split(";")[1].split("=")[1]);u[`${E}Page`]=_}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},p),u),error:null}}catch(u){if(Xe(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await rt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await rt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await rt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Xe(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await rt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Xe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await rt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Xe(n))return{data:null,error:n};throw n}}};function Iy(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Oo={debug:!!(globalThis&&x_()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class fv extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let __=class extends fv{};class x4 extends fv{}async function S_(t,e,n){Oo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Oo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Oo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Oo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Oo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new __(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Oo.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const Ry={};async function b4(t,e,n){var r;const i=(r=Ry[t])!==null&&r!==void 0?r:Promise.resolve(),s=Promise.race([i.catch(()=>null),e>=0?new Promise((o,a)=>{setTimeout(()=>{a(new x4(`Acquring process lock with name "${t}" timed out`))},e)}):null].filter(o=>o)).catch(o=>{if(o&&o.isAcquireTimeout)throw o;return null}).then(async()=>await n());return Ry[t]=s.catch(async o=>{if(o&&o.isAcquireTimeout)return await i,null;throw o}),await s}function _4(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function N_(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function S4(t){return parseInt(t,16)}function N4(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function A4(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:f,uri:p,version:m}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const g=N_(t.address),S=f?`${f}://${r}`:r,_=t.statement?`${t.statement}
`:"",E=`${S} wants you to sign in with your Ethereum account:
${g}

${_}`;let b=`URI: ${p}
Version: ${m}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(b+=`
Expiration Time: ${i.toISOString()}`),a&&(b+=`
Not Before: ${a.toISOString()}`),l&&(b+=`
Request ID: ${l}`),u){let N=`
Resources:`;for(const T of u){if(!T||typeof T!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${T}`);N+=`
- ${T}`}b+=N}return`${E}
${b}`}class wn extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class Xf extends wn{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function E4({error:t,options:e}){var n,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new wn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new wn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new wn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new wn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new wn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new wn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new wn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new wn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(A_(o)){if(s.rp.id!==o)return new wn({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new wn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new wn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new wn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new wn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function T4({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new wn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new wn({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(A_(r)){if(n.rpId!==r)return new wn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new wn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new wn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new wn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class C4{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const k4=new C4;function P4(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=Dl(t,["challenge","user","excludeCredentials"]),s=gl(e).buffer,o=Object.assign(Object.assign({},n),{id:gl(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:gl(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function I4(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=Dl(t,["challenge","allowCredentials"]),i=gl(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:gl(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function R4(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Wo(new Uint8Array(t.response.attestationObject)),clientDataJSON:Wo(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function L4(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Wo(new Uint8Array(i.authenticatorData)),clientDataJSON:Wo(new Uint8Array(i.clientDataJSON)),signature:Wo(new Uint8Array(i.signature)),userHandle:i.userHandle?Wo(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function A_(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Ly(){var t,e;return!!(Fn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function M4(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Xf("Browser returned unexpected credential type",e)}:{data:null,error:new Xf("Empty credential response",e)}}catch(e){return{data:null,error:E4({error:e,options:t})}}}async function D4(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Xf("Browser returned unexpected credential type",e)}:{data:null,error:new Xf("Empty credential response",e)}}catch(e){return{data:null,error:T4({error:e,options:t})}}}const F4={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},O4={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Qf(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(n(o))r[s]=o;else if(e(o)){const a=r[s];e(a)?r[s]=Qf(a,o):r[s]=Qf(o)}else r[s]=o}return r}function j4(t,e){return Qf(F4,t,e||{})}function U4(t,e){return Qf(O4,t,e||{})}class B4{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const l=i??k4.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=j4(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:f,error:p}=await M4({publicKey:u,signal:l});return f?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const u=U4(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:f,error:p}=await D4(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:l}));return f?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(o){return Xe(o)?{data:null,error:o}:{data:null,error:new Js("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new Il("rpId is required for WebAuthn authentication")};try{if(!Ly())return{data:null,error:new Js("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return Xe(o)?{data:null,error:o}:{data:null,error:new Js("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new Il("rpId is required for WebAuthn registration")};try{if(!Ly())return{data:null,error:new Js("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(f=>{var p;return(p=f.data)===null||p===void 0?void 0:p.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===e&&m.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return Xe(o)?{data:null,error:o}:{data:null,error:new Js("Unexpected error in register",o)}}}}_4();const q4={url:qC,storageKey:VC,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:$C,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function My(t,e,n){return await n()}const Ba={};let hv=class Dm{get jwks(){var e,n;return(n=(e=Ba[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Ba[this.storageKey]=Object.assign(Object.assign({},Ba[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Ba[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ba[this.storageKey]=Object.assign(Object.assign({},Ba[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},q4),e);if(this.storageKey=s.storageKey,this.instanceID=(n=Dm.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Dm.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Fn()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new dv({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=b_(s.fetch),this.lock=s.lock||My,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:this.persistSession&&Fn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=S_:this.lock=My,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new B4(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:x_()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Iy(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Iy(this.memoryStorage)),Fn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${h_}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(Fn()&&(n=e4(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),Fn()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),y_(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Xe(n)?this._returnResult({error:n}):this._returnResult({error:new Js("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:mi}),{data:o,error:a}=s;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(Xe(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:f,password:p,options:m}=e;let g=null,S=null;this.flowType==="pkce"&&([g,S]=await ja(this.storage,this.storageKey)),s=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:f,password:p,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:g,code_challenge_method:S},xform:mi})}else if("phone"in e){const{phone:f,password:p,options:m}=e;s=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:p,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(i=m==null?void 0:m.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:mi})}else throw new Mu("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return await Dn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(await Dn(this.storage,`${this.storageKey}-code-verifier`),Xe(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await rt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ky})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await rt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ky})}else throw new Mu("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new Do;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,s,o,a,l,u,f,p,m;let g,S;if("message"in e)g=e.message,S=e.signature;else{const{chain:_,wallet:E,statement:b,options:N}=e;let T;if(Fn())if(typeof E=="object")T=E;else{const W=window;if("ethereum"in W&&typeof W.ethereum=="object"&&"request"in W.ethereum&&typeof W.ethereum.request=="function")T=W.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=E}const M=new URL((n=N==null?void 0:N.url)!==null&&n!==void 0?n:window.location.href),U=await T.request({method:"eth_requestAccounts"}).then(W=>W).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!U||U.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Y=N_(U[0]);let H=(r=N==null?void 0:N.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!H){const W=await T.request({method:"eth_chainId"});H=S4(W)}const B={domain:M.host,address:Y,statement:b,uri:M.href,version:"1",chainId:H,nonce:(i=N==null?void 0:N.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=N==null?void 0:N.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=N==null?void 0:N.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=N==null?void 0:N.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=N==null?void 0:N.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(f=N==null?void 0:N.signInWithEthereum)===null||f===void 0?void 0:f.resources};g=A4(B),S=await T.request({method:"personal_sign",params:[N4(g),Y]})}try{const{data:_,error:E}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:S},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:mi});if(E)throw E;if(!_||!_.session||!_.user){const b=new Do;return this._returnResult({data:{user:null,session:null},error:b})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:E})}catch(_){if(Xe(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async signInWithSolana(e){var n,r,i,s,o,a,l,u,f,p,m,g;let S,_;if("message"in e)S=e.message,_=e.signature;else{const{chain:E,wallet:b,statement:N,options:T}=e;let M;if(Fn())if(typeof b=="object")M=b;else{const Y=window;if("solana"in Y&&typeof Y.solana=="object"&&("signIn"in Y.solana&&typeof Y.solana.signIn=="function"||"signMessage"in Y.solana&&typeof Y.solana.signMessage=="function"))M=Y.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(T!=null&&T.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=b}const U=new URL((n=T==null?void 0:T.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in M&&M.signIn){const Y=await M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T==null?void 0:T.signInWithSolana),{version:"1",domain:U.host,uri:U.href}),N?{statement:N}:null));let H;if(Array.isArray(Y)&&Y[0]&&typeof Y[0]=="object")H=Y[0];else if(Y&&typeof Y=="object"&&"signedMessage"in Y&&"signature"in Y)H=Y;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in H&&"signature"in H&&(typeof H.signedMessage=="string"||H.signedMessage instanceof Uint8Array)&&H.signature instanceof Uint8Array)S=typeof H.signedMessage=="string"?H.signedMessage:new TextDecoder().decode(H.signedMessage),_=H.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${U.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${U.href}`,`Issued At: ${(i=(r=T==null?void 0:T.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=T==null?void 0:T.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((o=T==null?void 0:T.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((a=T==null?void 0:T.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((l=T==null?void 0:T.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((u=T==null?void 0:T.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((p=(f=T==null?void 0:T.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||p===void 0)&&p.length?["Resources",...T.signInWithSolana.resources.map(H=>`- ${H}`)]:[]].join(`
`);const Y=await M.signMessage(new TextEncoder().encode(S),"utf8");if(!Y||!(Y instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=Y}}try{const{data:E,error:b}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:Wo(_)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:mi});if(b)throw b;if(!E||!E.session||!E.user){const N=new Do;return this._returnResult({data:{user:null,session:null},error:N})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:b})}catch(E){if(Xe(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(e){const n=await Ro(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:o}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:mi});if(await Dn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!s||!s.session||!s.user){const a=new Do;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(await Dn(this.storage,`${this.storageKey}-code-verifier`),Xe(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await rt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:mi}),{data:l,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const f=new Do;return this._returnResult({data:{user:null,session:null},error:f})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(n){if(Xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,f=null;this.flowType==="pkce"&&([u,f]=await ja(this.storage,this.storageKey));const{error:p}=await rt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:f},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:f}=await rt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f})}throw new Mu("You must provide either an email or phone number.")}catch(a){if(await Dn(this.storage,`${this.storageKey}-code-verifier`),Xe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await rt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:mi});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(Xe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,s,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await ja(this.storage,this.storageKey));const u=await rt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:v4});return!((s=u.data)===null||s===void 0)&&s.url&&Fn()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(a){if(await Dn(this.storage,`${this.storageKey}-code-verifier`),Xe(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new mr;const{error:i}=await rt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(Xe(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await rt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await rt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new Mu("You must provide either an email or phone number and a type")}catch(n){if(Xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Ro(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<s0:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Ro(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=a0()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=h4(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await rt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ks}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new mr}:await rt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Ks})})}catch(n){if(Xe(n))return v_(n)&&(await this._removeSession(),await Dn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new mr;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await ja(this.storage,this.storageKey));const{data:u,error:f}=await rt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Ks});if(f)throw f;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await Dn(this.storage,`${this.storageKey}-code-verifier`),Xe(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new mr;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=o0(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(Xe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new mr;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Xe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Fn())throw new Du("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Du(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Lm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Du("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Lm("No code detected.");const{data:N,error:T}=await this._exchangeCodeForSession(e.code);if(T)throw T;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!s||!a||!o||!u)throw new Du("No session defined in URL");const f=Math.round(Date.now()/1e3),p=parseInt(a);let m=f+p;l&&(m=parseInt(l));const g=m-f;g*1e3<=$a&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${p}s`);const S=m-p;f-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,m,f):f-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,m,f);const{data:_,error:E}=await this._getUser(s);if(E)throw E;const b={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:p,expires_at:m,refresh_token:o,token_type:u,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:b,redirectType:e.type},error:null})}catch(r){if(Xe(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Ro(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({error:s});const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(g_(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await Dn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=ZC(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await ja(this.storage,this.storageKey,!0));try{return await rt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(await Dn(this.storage,`${this.storageKey}-code-verifier`),Xe(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Xe(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,u,f;const{data:p,error:m}=s;if(m)throw m;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await rt(this.fetch,"GET",g,{headers:this.headers,jwt:(f=(u=p.session)===null||u===void 0?void 0:u.access_token)!==null&&f!==void 0?f:void 0})});if(i)throw i;return Fn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Xe(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:o,provider:a,token:l,access_token:u,nonce:f}=e,p=await rt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:u,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:mi}),{data:m,error:g}=p;return g?this._returnResult({data:{user:null,session:null},error:g}):!m||!m.session||!m.user?this._returnResult({data:{user:null,session:null},error:new Do}):(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),this._returnResult({data:m,error:g}))}catch(i){if(await Dn(this.storage,`${this.storageKey}-code-verifier`),Xe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await rt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Xe(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await r4(async i=>(i>0&&await n4(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await rt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:mi})),(i,s)=>{const o=200*Math.pow(2,i);return s&&lf(s)&&Date.now()+o-r<$a})}catch(r){if(this._debug(n,"error",r),Xe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Fn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Ro(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Ro(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Ha(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:a0()}else if(i&&!i.user&&!i.user){const o=await Ro(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Dn(this.storage,this.storageKey+"-user"),await Ha(this.storage,this.storageKey,i)):i.user=a0()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<s0;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${s0}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),lf(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new mr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new kh;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new mr;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),Xe(s)){const o={data:null,error:s};return lf(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Dn(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Ha(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=Ty(i);await Ha(this.storage,this.storageKey,s)}else{const i=Ty(n);await Ha(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Dn(this.storage,this.storageKey),await Dn(this.storage,this.storageKey+"-code-verifier"),await Dn(this.storage,this.storageKey+"-user"),this.userStorage&&await Dn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Fn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),$a);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/$a);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${$a}ms, refresh threshold is ${Im} ticks`),i<=Im&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof fv)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Fn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await ja(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await rt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Xe(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await rt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(Xe(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?R4(e.webauthn.credential_response):L4(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await rt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(Xe(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=await rt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:P4(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:I4(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Xe(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=o0(r.access_token);let o=null;s.aal&&(o=s.aal);let a=o;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const u=s.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await rt(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new mr})})}catch(n){if(Xe(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new mr});const o=await rt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Fn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Xe(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new mr});const o=await rt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Fn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Xe(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await rt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new mr})})}catch(e){if(Xe(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await rt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new mr})})}catch(n){if(Xe(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+zC>i)return r;const{data:s,error:o}=await rt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:g,error:S}=await this.getSession();if(S||!g.session)return this._returnResult({data:null,error:S});r=g.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=o0(r);n!=null&&n.allowExpired||c4(s.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:s,header:i,signature:o},error:null}}const f=d4(i.alg),p=await crypto.subtle.importKey("jwk",u,f,!0,["verify"]);if(!await crypto.subtle.verify(f,p,o,XC(`${a}.${l}`)))throw new Kf("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(Xe(r))return this._returnResult({data:null,error:r});throw r}}};hv.nextInstanceID={};const V4=dv,$4=hv,H4=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:V4,AuthApiError:m_,AuthClient:$4,AuthError:Il,AuthImplicitGrantRedirectError:Du,AuthInvalidCredentialsError:Mu,AuthInvalidJwtError:Kf,AuthInvalidTokenResponseError:Do,AuthPKCEGrantCodeExchangeError:Lm,AuthRetryableFetchError:Jf,AuthSessionMissingError:mr,AuthUnknownError:Js,AuthWeakPasswordError:Mm,CustomAuthError:Ss,GoTrueAdminApi:dv,GoTrueClient:hv,NavigatorLockAcquireTimeoutError:__,SIGN_OUT_SCOPES:uf,isAuthApiError:g_,isAuthError:Xe,isAuthImplicitGrantRedirectError:y_,isAuthRetryableFetchError:lf,isAuthSessionMissingError:v_,isAuthWeakPasswordError:GC,lockInternals:Oo,navigatorLock:S_,processLock:b4},Symbol.toStringTag,{value:"Module"})),E_=pc(H4);Object.defineProperty(Ch,"__esModule",{value:!0});Ch.SupabaseAuthClient=void 0;const z4=E_;class G4 extends z4.AuthClient{constructor(e){super(e)}}Ch.SupabaseAuthClient=G4;Object.defineProperty($f,"__esModule",{value:!0});const W4=Ib,J4=Kn,K4=Yb,Y4=FC,Od=c_,X4=d_,Dy=vo,Q4=Ch;let Z4=class{constructor(e,n,r){var i,s,o;this.supabaseUrl=e,this.supabaseKey=n;const a=(0,Dy.validateSupabaseUrl)(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:Od.DEFAULT_DB_OPTIONS,realtime:Od.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},Od.DEFAULT_AUTH_OPTIONS),{storageKey:l}),global:Od.DEFAULT_GLOBAL_OPTIONS},f=(0,Dy.applySettingDefaults)(r??{},u);this.storageKey=(i=f.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=f.global.headers)!==null&&s!==void 0?s:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=(0,X4.fetchWithAuth)(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&this.accessToken().then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new J4.PostgrestClient(new URL("rest/v1",a).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new Y4.StorageClient(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new W4.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:o,flowType:a,lock:l,debug:u,throwOnError:f},p,m){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Q4.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),p),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,flowType:a,lock:l,debug:u,throwOnError:f,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new K4.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};$f.default=Z4;(function(t){var e=Da&&Da.__createBinding||(Object.create?function(f,p,m,g){g===void 0&&(g=m);var S=Object.getOwnPropertyDescriptor(p,m);(!S||("get"in S?!p.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return p[m]}}),Object.defineProperty(f,g,S)}:function(f,p,m,g){g===void 0&&(g=m),f[g]=p[m]}),n=Da&&Da.__exportStar||function(f,p){for(var m in f)m!=="default"&&!Object.prototype.hasOwnProperty.call(p,m)&&e(p,f,m)},r=Da&&Da.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.SupabaseClient=t.FunctionRegion=t.FunctionsError=t.FunctionsRelayError=t.FunctionsFetchError=t.FunctionsHttpError=t.PostgrestError=void 0;const i=r($f);n(E_,t);var s=Kn;Object.defineProperty(t,"PostgrestError",{enumerable:!0,get:function(){return s.PostgrestError}});var o=Ib;Object.defineProperty(t,"FunctionsHttpError",{enumerable:!0,get:function(){return o.FunctionsHttpError}}),Object.defineProperty(t,"FunctionsFetchError",{enumerable:!0,get:function(){return o.FunctionsFetchError}}),Object.defineProperty(t,"FunctionsRelayError",{enumerable:!0,get:function(){return o.FunctionsRelayError}}),Object.defineProperty(t,"FunctionsError",{enumerable:!0,get:function(){return o.FunctionsError}}),Object.defineProperty(t,"FunctionRegion",{enumerable:!0,get:function(){return o.FunctionRegion}}),n(Yb,t);var a=$f;Object.defineProperty(t,"SupabaseClient",{enumerable:!0,get:function(){return r(a).default}});const l=(f,p,m)=>new i.default(f,p,m);t.createClient=l;function u(){if(typeof window<"u"||typeof process>"u")return!1;const f=process.version;if(f==null)return!1;const p=f.match(/^v(\d+)\./);return p?parseInt(p[1],10)<=18:!1}u()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(iv);const T_=q5(iv),e3=MN({__proto__:null,default:T_},[iv]),{PostgrestError:c7,FunctionsHttpError:d7,FunctionsFetchError:f7,FunctionsRelayError:h7,FunctionsError:p7,FunctionRegion:m7,SupabaseClient:g7,createClient:t3,GoTrueAdminApi:v7,GoTrueClient:y7,AuthAdminApi:w7,AuthClient:x7,navigatorLock:b7,NavigatorLockAcquireTimeoutError:_7,lockInternals:S7,processLock:N7,SIGN_OUT_SCOPES:A7,AuthError:E7,AuthApiError:T7,AuthUnknownError:C7,CustomAuthError:k7,AuthSessionMissingError:P7,AuthInvalidTokenResponseError:I7,AuthInvalidCredentialsError:R7,AuthImplicitGrantRedirectError:L7,AuthPKCEGrantCodeExchangeError:M7,AuthRetryableFetchError:D7,AuthWeakPasswordError:F7,AuthInvalidJwtError:O7,isAuthError:j7,isAuthApiError:U7,isAuthSessionMissingError:B7,isAuthImplicitGrantRedirectError:q7,isAuthRetryableFetchError:V7,isAuthWeakPasswordError:$7,RealtimePresence:H7,RealtimeChannel:z7,RealtimeClient:G7,REALTIME_LISTEN_TYPES:W7,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:J7,REALTIME_PRESENCE_LISTEN_EVENTS:K7,REALTIME_SUBSCRIBE_STATES:Y7,REALTIME_CHANNEL_STATES:X7}=T_||e3,l0={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},C_=t=>{try{const e=l0==null?void 0:l0[t];return e?e.trim():""}catch{return""}},Gu=C_("VITE_SUPABASE_URL"),k_=C_("VITE_SUPABASE_ANON_KEY"),P_=t=>t?t.startsWith("http://")||t.startsWith("https://"):!1,n3=Gu&&P_(Gu)?Gu:"https://placeholder.supabase.co",r3=k_||"placeholder",co=()=>P_(Gu)&&k_.length>0&&Gu!=="https://placeholder.supabase.co",Yi=t3(n3,r3),i3=async(t,e)=>{var r,i,s,o,a;if(console.log(" NLP Parser Starting..."),console.log(" Input:",t),console.log(" API Key:",e?`${e.substring(0,10)}...`:"MISSING"),!e||e.trim()==="")return console.error(" No API key provided"),{confidence:0,clarifications:["ERROR: Gemini API key not configured. Add VITE_GEMINI_API_KEY to Vercel environment variables."]};const n=`Extract mortgage scenario data from this text. Return ONLY valid JSON, no markdown, no code blocks.

Input: "${t}"

Extract if present:
- purchasePrice (number)
- downPaymentPercent (number)  
- loanType ("Conventional"|"FHA"|"VA"|"Jumbo")
- clientName (string)
- propertyAddress (string)
- interestRate (number)
- creditScore (number)

Return this EXACT format:
{"purchasePrice":500000,"downPaymentPercent":10,"loanType":"FHA","clientName":"John Smith","confidence":90,"clarifications":["What interest rate?"]}

Now parse and return JSON only:`;try{console.log(" Calling Gemini API...");const l=await fetch(`https://generativelanguage.googleapis.com/v1/models/gemini-1.5-flash:generateContent?key=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:n}]}],generationConfig:{temperature:.1,maxOutputTokens:1024}})});if(console.log(" Response status:",l.status),!l.ok){const S=await l.text();return console.error(" API Error:",S),l.status===404?{confidence:0,clarifications:["ERROR 404: Invalid API endpoint. Check Gemini API configuration."]}:l.status===400?{confidence:0,clarifications:["ERROR 400: Invalid API request. Check your Gemini API key in Vercel settings."]}:l.status===403?{confidence:0,clarifications:["ERROR 403: API key rejected. Verify VITE_GEMINI_API_KEY in Vercel is correct."]}:{confidence:0,clarifications:[`ERROR ${l.status}: ${S.substring(0,100)}`]}}const u=await l.json();console.log(" Full response:",JSON.stringify(u,null,2));const f=(a=(o=(s=(i=(r=u.candidates)==null?void 0:r[0])==null?void 0:i.content)==null?void 0:s.parts)==null?void 0:o[0])==null?void 0:a.text;if(!f)return console.error(" No text in response"),{confidence:0,clarifications:["ERROR: No response from AI. Try rephrasing your input."]};console.log(" Raw AI response:",f);let p=f.trim();p=p.replace(/```json\n?/gi,""),p=p.replace(/```\n?/g,"");const m=p.match(/\{[\s\S]*\}/);m&&(p=m[0]),console.log(" Cleaned JSON:",p);const g=JSON.parse(p);return console.log(" Parsed successfully:",g),{purchasePrice:g.purchasePrice||void 0,downPaymentPercent:g.downPaymentPercent||void 0,downPaymentAmount:g.downPaymentAmount||void 0,loanType:g.loanType||void 0,clientName:g.clientName||void 0,propertyAddress:g.propertyAddress||void 0,interestRate:g.interestRate||void 0,creditScore:g.creditScore||void 0,propertyTaxYearly:g.propertyTaxYearly||void 0,hoaMonthly:g.hoaMonthly||void 0,confidence:g.confidence||50,clarifications:g.clarifications||[]}}catch(l){return console.error(" Parse Error:",l),l instanceof SyntaxError?{confidence:0,clarifications:['ERROR: Could not parse AI response. Try simpler phrasing like "300k house fha john smith".']}:{confidence:0,clarifications:[`ERROR: ${l instanceof Error?l.message:"Unknown error"}. Check console for details.`]}}},s3=({isOpen:t,onClose:e,onCreateScenario:n,defaultScenario:r,geminiApiKey:i})=>{const[s,o]=He.useState(""),[a,l]=He.useState(!1),[u,f]=He.useState(null),[p,m]=He.useState(!1),g=async()=>{if(s.trim()){l(!0);try{const b=await i3(s,i);f(b)}catch(b){console.error("Parse error:",b),f({confidence:0,clarifications:["An error occurred. Please try again."]})}finally{l(!1)}}},S=()=>{if(!("webkitSpeechRecognition"in window)){alert("Voice input not supported in this browser. Try Chrome.");return}const b=new window.webkitSpeechRecognition;b.continuous=!1,b.interimResults=!1,b.lang="en-US",b.onstart=()=>m(!0),b.onend=()=>m(!1),b.onresult=N=>{const T=N.results[0][0].transcript;o(T)},b.onerror=N=>{console.error("Speech recognition error:",N.error),m(!1)},b.start()},_=()=>{if(!u)return;let b=u.downPaymentAmount;!b&&u.downPaymentPercent&&u.purchasePrice&&(b=u.purchasePrice*u.downPaymentPercent/100);const N={...r,id:Math.random().toString(36).substring(7),name:`${u.clientName||"New Client"} - ${new Date().toLocaleDateString()}`,clientName:u.clientName||r.clientName,propertyAddress:u.propertyAddress||r.propertyAddress,isAddressTBD:!u.propertyAddress,purchasePrice:u.purchasePrice||r.purchasePrice,downPaymentPercent:u.downPaymentPercent||r.downPaymentPercent,downPaymentAmount:b||r.downPaymentAmount,loanType:u.loanType||r.loanType,interestRate:u.interestRate||r.interestRate,creditScore:u.creditScore||r.creditScore,propertyTaxYearly:u.propertyTaxYearly||r.propertyTaxYearly,hoaMonthly:u.hoaMonthly||r.hoaMonthly,dateCreated:new Date().toISOString(),lastUpdated:new Date().toISOString()};n(N),e(),o(""),f(null)},E=()=>{o(""),f(null),e()};return y.jsx(hs,{isOpen:t,onClose:E,title:"Create Scenario with AI",children:y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 p-4 rounded-lg border border-indigo-100",children:[y.jsxs("p",{className:"text-sm text-slate-700",children:[y.jsx("strong",{className:"text-indigo-700",children:" Describe your scenario naturally"})," and AI will extract the details!"]}),y.jsx("p",{className:"text-xs text-slate-600 mt-2",children:'Try: "500k house, 10% down, FHA for John Smith at 6.5% rate, credit 680"'})]}),y.jsxs("div",{className:"relative",children:[y.jsx("textarea",{value:s,onChange:b=>o(b.target.value),spellCheck:!1,autoCorrect:"off",autoCapitalize:"off",placeholder:"Example: Jane buying $750,000 home with 20% down, conventional loan, 7% interest...",className:"w-full h-32 p-4 pr-12 border-2 border-slate-300 rounded-lg text-sm resize-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all"}),y.jsx("button",{onClick:S,disabled:p,className:`absolute bottom-3 right-3 p-2.5 rounded-lg transition-all ${p?"bg-red-500 text-white animate-pulse":"bg-slate-100 text-slate-600 hover:bg-slate-200 hover:scale-105"}`,title:p?"Listening...":"Voice input (Chrome only)",children:y.jsx(IT,{size:18})})]}),y.jsx("button",{onClick:g,disabled:!s.trim()||a,className:"w-full flex items-center justify-center gap-2 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg font-semibold hover:from-indigo-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl",children:a?y.jsxs(y.Fragment,{children:[y.jsx(rv,{size:18,className:"animate-spin"}),"Parsing with AI..."]}):y.jsxs(y.Fragment,{children:[y.jsx(ib,{size:18}),"Parse with AI"]})}),u&&y.jsxs("div",{className:"bg-white p-5 rounded-xl border-2 border-slate-200 shadow-sm space-y-4 animate-fadeIn",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h4",{className:"font-bold text-slate-900 text-lg",children:"Extracted Data"}),y.jsxs("span",{className:`text-xs font-bold px-3 py-1.5 rounded-full ${u.confidence>80?"bg-emerald-100 text-emerald-700 border border-emerald-200":u.confidence>60?"bg-amber-100 text-amber-700 border border-amber-200":"bg-red-100 text-red-700 border border-red-200"}`,children:[u.confidence,"% Confidence"]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[u.clientName&&y.jsxs("div",{className:"bg-indigo-50 p-3 rounded-lg border border-indigo-100",children:[y.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"Client Name"}),y.jsx("span",{className:"font-semibold text-slate-900",children:u.clientName})]}),u.purchasePrice&&y.jsxs("div",{className:"bg-indigo-50 p-3 rounded-lg border border-indigo-100",children:[y.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"Purchase Price"}),y.jsxs("span",{className:"font-semibold text-slate-900",children:["$",u.purchasePrice.toLocaleString()]})]}),u.downPaymentPercent&&y.jsxs("div",{className:"bg-indigo-50 p-3 rounded-lg border border-indigo-100",children:[y.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"Down Payment"}),y.jsxs("span",{className:"font-semibold text-slate-900",children:[u.downPaymentPercent,"%"]})]}),u.loanType&&y.jsxs("div",{className:"bg-indigo-50 p-3 rounded-lg border border-indigo-100",children:[y.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"Loan Type"}),y.jsx("span",{className:"font-semibold text-slate-900",children:u.loanType})]}),u.interestRate&&y.jsxs("div",{className:"bg-indigo-50 p-3 rounded-lg border border-indigo-100",children:[y.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"Interest Rate"}),y.jsxs("span",{className:"font-semibold text-slate-900",children:[u.interestRate,"%"]})]}),u.creditScore&&y.jsxs("div",{className:"bg-indigo-50 p-3 rounded-lg border border-indigo-100",children:[y.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"Credit Score"}),y.jsx("span",{className:"font-semibold text-slate-900",children:u.creditScore})]}),u.propertyAddress&&y.jsxs("div",{className:"bg-indigo-50 p-3 rounded-lg border border-indigo-100 col-span-2",children:[y.jsx("span",{className:"text-slate-500 text-xs block mb-1",children:"Property Address"}),y.jsx("span",{className:"font-semibold text-slate-900",children:u.propertyAddress})]})]}),u.clarifications&&u.clarifications.length>0&&y.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg border-2 border-amber-200",children:[y.jsx("p",{className:"text-xs font-bold text-amber-900 mb-2",children:" Additional info needed:"}),y.jsx("ul",{className:"text-xs text-amber-800 space-y-1",children:u.clarifications.map((b,N)=>y.jsxs("li",{className:"flex items-start gap-2",children:[y.jsx("span",{className:"text-amber-600",children:""}),y.jsx("span",{children:b})]},N))}),y.jsx("p",{className:"text-xs text-amber-700 mt-2 italic",children:"Don't worry - you can fill these in after creating the scenario!"})]}),y.jsxs("div",{className:"flex gap-3 pt-2",children:[y.jsx("button",{onClick:E,className:"flex-1 py-2.5 bg-slate-100 text-slate-700 rounded-lg font-semibold hover:bg-slate-200 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:_,className:"flex-1 py-2.5 bg-gradient-to-r from-emerald-600 to-green-600 text-white rounded-lg font-semibold hover:from-emerald-700 hover:to-green-700 transition-all shadow-md hover:shadow-lg",children:"Create Scenario "})]})]})]})})};var Nt=(t=>(t.CONVENTIONAL="Conventional",t.FHA="FHA",t.VA="VA",t.JUMBO="Jumbo",t))(Nt||{});const jo=[{id:"discount-points",category:"Lender Fees",name:"Discount Points",amount:0,isFixed:!1},{id:"underwriting",category:"Lender Fees",name:"Underwriting Fee",amount:995,isFixed:!0},{id:"processing",category:"Lender Fees",name:"Administration Fee",amount:795,isFixed:!0},{id:"wire-transfer",category:"Lender Fees",name:"Wire Transfer Fee",amount:23,isFixed:!0},{id:"appraisal",category:"Third Party Fees",name:"Appraisal",amount:650,isFixed:!0},{id:"credit-report",category:"Third Party Fees",name:"Credit Report",amount:250,isFixed:!0},{id:"flood-cert",category:"Third Party Fees",name:"Flood Certification",amount:15,isFixed:!0},{id:"title-insurance",category:"Title & Government",name:"Title Insurance (Lender)",amount:.5,isFixed:!1},{id:"recording",category:"Title & Government",name:"Recording Fees",amount:150,isFixed:!0},{id:"settlement",category:"Title & Government",name:"Settlement / Closing Fee",amount:500,isFixed:!0},{id:"prepaid-interest",category:"Escrows/Prepaids",name:"Prepaid Interest",amount:0,isFixed:!0,days:15},{id:"prepaid-insurance",category:"Escrows/Prepaids",name:"Homeowners Insurance Premium",amount:0,isFixed:!0,months:12},{id:"tax-reserves",category:"Escrows/Prepaids",name:"Property Tax Reserves",amount:0,isFixed:!0,months:3},{id:"insurance-reserves",category:"Escrows/Prepaids",name:"Homeowners Insurance Reserves",amount:0,isFixed:!0,months:2},{id:"realtor-admin",category:"Other Fees",name:"Realtor Admin Fee",amount:495,isFixed:!0},{id:"hoa-transfer",category:"Other Fees",name:"HOA Transfer Fee",amount:0,isFixed:!0},{id:"hoa-prepay",category:"Other Fees",name:"HOA Monthly Dues (Prepay)",amount:0,isFixed:!0,months:1},{id:"misc-1",category:"Other Fees",name:"Other Fee 1",amount:0,isFixed:!0},{id:"misc-2",category:"Other Fees",name:"Other Fee 2",amount:0,isFixed:!0},{id:"misc-3",category:"Other Fees",name:"Other Fee 3",amount:0,isFixed:!0},{id:"misc-4",category:"Other Fees",name:"Other Fee 4",amount:0,isFixed:!0},{id:"misc-5",category:"Other Fees",name:"Other Fee 5",amount:0,isFixed:!0}],Pr={id:"",name:"New Scenario",clientName:"",transactionType:"Purchase",propertyAddress:"",isAddressTBD:!1,dateCreated:new Date().toISOString(),lastUpdated:new Date().toISOString(),history:[],preApprovals:[],purchasePrice:5e5,earnestMoney:0,sellerConcessions:0,showSellerConcessions:!1,lenderCredits:0,lenderCreditsMode:"fixed",showLenderCredits:!1,propertyTaxYearly:3e3,homeInsuranceYearly:1e3,hoaMonthly:0,loanType:Nt.CONVENTIONAL,occupancyType:"Primary Residence",numberOfUnits:1,downPaymentAmount:25e3,downPaymentPercent:5,interestRate:6.5,loanTermMonths:360,interestOnly:!1,creditScore:740,manualMI:null,ufmipRate:0,income:{borrower1:0,borrower2:0,rental:0,other:0},debts:{monthlyTotal:0},closingCosts:jo,notes:"",buydown:{active:!1,type:"2-1",cost:0},dpa:{active:!1,amount:1e4,percent:0,rate:7.5,termMonths:120,payment:0,isDeferred:!1}},o3={conventional:{conforming:766550,highBalance:1149825},fha:{floor:498257,ceiling:1149825},va:{noLimit:!0},jumbo:{minimum:766551}},a3={conventional:{minDownPayment:3,maxLTV:97,pmiRequired:80},fha:{minDownPayment:3.5,maxLTV:96.5},va:{minDownPayment:0,maxLTV:100},jumbo:{minDownPayment:10,maxLTV:90}},Hi={purchasePriceMin:5e4,interestRateMin:2,interestRateMax:12,dtiFrontEndWarning:43,dtiBackEndMax:50,creditScoreFhaMin:580,creditScoreConventionalMin:620},l3=(t,e,n=o3,r=a3,i=Hi)=>{const s=[];t.purchasePrice<=0&&s.push({field:"purchasePrice",message:"Purchase price must be greater than zero",severity:"error"}),t.purchasePrice<i.purchasePriceMin&&s.push({field:"purchasePrice",message:"Purchase price seems unusually low",severity:"warning"}),t.loanType===Nt.CONVENTIONAL&&t.purchasePrice>n.conventional.conforming&&s.push({field:"loanType",message:`Exceeds conforming limit ($${n.conventional.conforming.toLocaleString()}). Consider Jumbo loan.`,severity:"warning"}),t.loanType===Nt.FHA&&e.baseLoanAmount>n.fha.ceiling&&s.push({field:"purchasePrice",message:`Exceeds FHA loan limit ($${n.fha.ceiling.toLocaleString()})`,severity:"error"});const o=r[t.loanType.toLowerCase()];return o&&(t.downPaymentPercent<o.minDownPayment&&s.push({field:"downPaymentPercent",message:`${t.loanType} requires minimum ${o.minDownPayment}% down payment`,severity:"error"}),e.ltv>o.maxLTV&&s.push({field:"downPaymentPercent",message:`LTV (${e.ltv.toFixed(1)}%) exceeds maximum ${o.maxLTV}% for ${t.loanType}`,severity:"error"})),e.dti.frontEnd>i.dtiFrontEndWarning&&s.push({field:"income",message:`Front-end DTI (${e.dti.frontEnd.toFixed(1)}%) exceeds typical limit (${i.dtiFrontEndWarning}%)`,severity:"warning"}),e.dti.backEnd>i.dtiBackEndMax&&s.push({field:"income",message:`Back-end DTI (${e.dti.backEnd.toFixed(1)}%) exceeds typical limit (${i.dtiBackEndMax}%)`,severity:"error"}),t.loanType===Nt.FHA&&t.creditScore<i.creditScoreFhaMin&&s.push({field:"creditScore",message:`FHA requires minimum ${i.creditScoreFhaMin} credit score`,severity:"error"}),t.loanType===Nt.CONVENTIONAL&&t.creditScore<i.creditScoreConventionalMin&&s.push({field:"creditScore",message:`Conventional loans typically require ${i.creditScoreConventionalMin}+ credit score`,severity:"warning"}),t.interestRate>i.interestRateMax&&s.push({field:"interestRate",message:"Interest rate seems unusually high. Please verify.",severity:"warning"}),t.interestRate<i.interestRateMin&&s.push({field:"interestRate",message:"Interest rate seems unusually low. Please verify.",severity:"warning"}),s},u3=({scenarios:t,onCreateNew:e,onSelect:n,onDelete:r,onDeleteClient:i,onDuplicate:s,initialClient:o,userDefaults:a,onUpdateDefaults:l,onLogout:u,onSync:f,isSyncing:p,userEmail:m})=>{var Ie,je,Oe,Qe,be,J,qe;const[g,S]=He.useState(!1),[_,E]=He.useState(o||null),[b,N]=He.useState([]),[T,M]=He.useState(""),[U,Y]=He.useState("date"),[H,B]=He.useState("desc"),[W,ne]=He.useState(null),[D,j]=He.useState(!1),[O,V]=He.useState(null),[he,le]=He.useState(!1),we="",X=He.useMemo(()=>{const ge={};return t.forEach(ue=>{var ke;const Se=((ke=ue.clientName)==null?void 0:ke.trim())||"Unassigned";ge[Se]||(ge[Se]=[]),ge[Se].push(ue)}),ge},[t]),ae=ge=>{const ue=X[ge]||[];return ue.length===0?0:Math.max(...ue.map(Se=>new Date(Se.lastUpdated).getTime()))},fe=He.useMemo(()=>{let ge=Object.keys(X);return T&&(ge=ge.filter(ue=>ue.toLowerCase().includes(T.toLowerCase()))),ge.sort((ue,Se)=>{if(U==="name")return H==="asc"?ue.localeCompare(Se):Se.localeCompare(ue);const ke=ae(ue),Le=ae(Se);return H==="asc"?ke-Le:Le-ke}),ge},[X,T,U,H]),Ce=ge=>{U===ge?B(ue=>ue==="asc"?"desc":"asc"):(Y(ge),B(ge==="name"?"asc":"desc"))},P=ge=>{E(ge),S(!1),N([])},q=()=>{E(null),S(!1),N([])},z=()=>{_&&ne({isOpen:!0,type:"folder",id:_,name:_})},Q=(ge,ue)=>{ne({isOpen:!0,type:"scenario",id:ge,name:ue})},re=()=>{W&&(W.type==="folder"?(i(W.id),q()):r(W.id),ne(null))},ce=()=>{if(a){const ge={...a,validationThresholds:a.validationThresholds||Hi};V(ge),j(!0)}},ve=()=>{O&&l&&(l(O),j(!1))},ye=()=>{const ue=[...X[_]||[]].sort((Se,ke)=>new Date(ke.lastUpdated).getTime()-new Date(Se.lastUpdated).getTime());return y.jsx("div",{className:"animate-fadeIn p-8 max-w-[1600px] mx-auto",children:y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:ue.map(Se=>{const ke=b.includes(Se.id),Le=Se.purchasePrice>0?(1-Se.downPaymentAmount/Se.purchasePrice)*100:0;return y.jsxs("div",{className:`group bg-white rounded-xl border border-slate-300 shadow-md hover:shadow-xl hover:border-indigo-300 hover:-translate-y-1 transition-all cursor-pointer overflow-hidden flex flex-col relative ${ke?"ring-2 ring-indigo-500 border-indigo-500":""}`,onClick:()=>n(Se),children:[y.jsxs("div",{className:"p-6 flex-1",children:[y.jsxs("div",{className:"flex flex-col gap-2 mb-4",children:[y.jsxs("h3",{className:"font-bold text-lg text-slate-900 group-hover:text-indigo-600 transition-colors leading-tight",children:[y.jsx("span",{className:"font-normal text-slate-500 text-xs block mb-1 uppercase tracking-wider",children:Se.clientName}),Se.name||"Untitled Scenario"]}),y.jsx("div",{className:"flex items-center gap-2 mt-1",children:y.jsx("span",{className:`inline-block px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider rounded border ${Se.loanType==="FHA"?"bg-orange-50 text-orange-700 border-orange-100":Se.loanType==="VA"?"bg-blue-50 text-blue-700 border-blue-100":"bg-emerald-50 text-emerald-700 border-emerald-100"}`,children:Se.loanType})})]}),y.jsxs("div",{className:"space-y-3 text-sm text-slate-500 mb-4 pt-4 border-t border-slate-100",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(qf,{size:14,className:"text-slate-300 shrink-0"}),y.jsx("span",{className:"truncate text-xs font-medium",children:Se.isAddressTBD?"Address TBD":Se.propertyAddress||"No Address"})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(yT,{size:14,className:"text-slate-300 shrink-0"}),y.jsx("span",{className:"text-xs font-medium",children:new Date(Se.lastUpdated).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]}),y.jsxs("div",{className:"pt-4 border-t border-slate-100 grid grid-cols-3 gap-2",children:[y.jsxs("div",{children:[y.jsx("span",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1",children:"Price"}),y.jsxs("span",{className:"font-bold text-slate-900 truncate",children:["$",Se.purchasePrice.toLocaleString()]})]}),y.jsxs("div",{className:"text-center",children:[y.jsx("span",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1",children:"LTV"}),y.jsxs("span",{className:"font-bold text-slate-900",children:[parseFloat(Le.toFixed(2)),"%"]})]}),y.jsxs("div",{className:"text-right",children:[y.jsx("span",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1",children:"Rate"}),y.jsxs("span",{className:"font-bold text-slate-900",children:[Se.interestRate,"%"]})]})]})]}),y.jsxs("div",{className:"bg-slate-50 px-4 py-3 border-t border-slate-200 flex justify-between items-center group-hover:bg-indigo-50/50 transition-colors",children:[y.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-wider text-indigo-600 opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-1",children:["Open Scenario ",y.jsx(nv,{size:12})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("button",{onClick:Ge=>{Ge.stopPropagation(),s(Se.id)},className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-white rounded-lg transition-all",title:"Duplicate",children:y.jsx(xT,{size:16})}),y.jsx("button",{onClick:Ge=>{Ge.stopPropagation(),Q(Se.id,Se.name)},className:"p-2 text-slate-400 hover:text-red-500 hover:bg-white rounded-lg transition-all",title:"Delete",children:y.jsx(hy,{size:16})})]})]})]},Se.id)})})})},De=()=>y.jsxs("div",{className:"flex flex-col h-full bg-slate-50",children:[y.jsxs("header",{className:"bg-slate-950 border-b border-slate-800 h-28 px-8 flex items-center justify-between shrink-0 relative z-20 overflow-hidden group",children:[y.jsx("div",{className:"absolute right-32 top-1/2 -translate-y-1/2 text-slate-900/80 pointer-events-none transform group-hover:scale-105 transition-transform duration-1000",children:y.jsx(DT,{size:240,strokeWidth:.5})}),y.jsxs("div",{className:"flex items-center gap-6 relative z-10 h-full max-w-4xl flex-1",children:[y.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700 rounded-2xl flex items-center justify-center shadow-2xl shadow-black/50 shrink-0",children:y.jsx(ET,{size:32,className:"text-indigo-400"})}),y.jsx("div",{className:"flex flex-col justify-center h-full",children:y.jsx("h2",{className:"text-5xl font-black text-white tracking-tight leading-none shadow-sm pb-1",children:"Dashboard"})})]})]}),y.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center animate-fadeIn opacity-100",children:[y.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center mb-6 text-slate-200 shadow-sm border border-slate-100",children:y.jsx(dy,{size:48,strokeWidth:1.5})}),y.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Client Folder Organizer"}),y.jsx("p",{className:"text-slate-400 font-medium max-w-md",children:"Select a client folder from the sidebar to manage scenarios, or create a new client profile to get started."}),y.jsxs("button",{onClick:()=>e(),className:"mt-8 bg-emerald-600 hover:bg-emerald-500 text-white px-8 py-3 rounded-lg font-bold shadow-lg shadow-emerald-900/20 transition-transform transform hover:-translate-y-0.5 flex items-center gap-2 text-sm uppercase tracking-wide border border-emerald-500/50",children:[y.jsx(t0,{size:18})," Create First Client"]})]}),y.jsxs("footer",{className:"bg-white border-t border-slate-200 py-3 px-8 flex justify-between items-center shrink-0",children:[y.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-semibold",children:"MortgagePro  2025"}),y.jsx("p",{className:"text-[10px] text-slate-300 font-medium",children:"v1.0.5"})]})]});return y.jsxs("div",{className:"h-full flex bg-slate-50 overflow-hidden relative",children:[y.jsxs("div",{className:"w-72 bg-slate-950 border-r border-slate-900 flex flex-col h-full shrink-0 z-20 shadow-xl relative",children:[y.jsxs("div",{className:"p-5 border-b border-slate-900 space-y-5",children:[y.jsxs("div",{className:"flex items-center justify-between text-white font-bold text-xl mb-2 tracking-tight",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center shadow-lg shadow-indigo-900/50",children:y.jsx(mT,{size:18,className:"text-white"})}),"MortgagePro"]}),p&&y.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"})]}),y.jsxs("div",{className:"relative",children:[y.jsx(LT,{size:14,className:"absolute left-3 top-3.5 text-slate-500"}),y.jsx("input",{type:"text",placeholder:"Search clients...",value:T,onChange:ge=>M(ge.target.value),className:"w-full pl-9 pr-3 py-2.5 bg-slate-900 border border-slate-800 rounded-lg text-sm text-slate-300 outline-none focus:border-indigo-500 focus:bg-slate-900 transition-all placeholder-slate-600 font-medium"})]}),y.jsxs("div",{className:"flex bg-slate-900 p-1 rounded-lg border border-slate-800",children:[y.jsxs("button",{onClick:()=>Ce("date"),className:`flex-1 flex items-center justify-center gap-1.5 py-1.5 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all ${U==="date"?"bg-slate-800 text-white shadow ring-1 ring-slate-700":"text-slate-500 hover:text-white hover:bg-slate-800"}`,children:[U==="date"&&H==="desc"?y.jsx(dT,{size:12}):y.jsx(pT,{size:12}),"Recent"]}),y.jsxs("button",{onClick:()=>Ce("name"),className:`flex-1 flex items-center justify-center gap-1.5 py-1.5 rounded-md text-[10px] font-bold uppercase tracking-wider transition-all ${U==="name"?"bg-slate-800 text-white shadow ring-1 ring-slate-700":"text-slate-500 hover:text-white hover:bg-slate-800"}`,children:[U==="name"&&H==="desc"?y.jsx(hT,{size:12}):y.jsx(cT,{size:12}),"Name"]})]})]}),y.jsx("div",{className:"flex-1 overflow-y-auto p-3 scrollbar-hide space-y-1",children:fe.map(ge=>{const ue=ae(ge),Se=ue>0?new Date(ue).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"",ke=_===ge;return y.jsxs("button",{onClick:()=>P(ge),className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-all duration-200 group border mb-2 text-left ${ke?"bg-indigo-600 border-indigo-500 text-white shadow-lg shadow-indigo-900/20":"bg-slate-900/40 border-slate-800/60 text-slate-300 hover:bg-slate-800 hover:border-slate-700 hover:text-white hover:shadow-md"}`,children:[y.jsx("div",{className:`w-8 h-8 rounded-md flex items-center justify-center shrink-0 transition-colors ${ke?"bg-indigo-500/50 text-white":"bg-slate-950 border border-slate-800 text-slate-500 group-hover:text-indigo-400 group-hover:border-indigo-500/30"}`,children:y.jsx(dy,{size:16,fill:ke?"currentColor":"none"})}),y.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[y.jsx("span",{className:`truncate text-sm font-bold tracking-tight ${ke?"text-white":"text-slate-200 group-hover:text-white"}`,children:ge}),Se&&y.jsxs("span",{className:`text-[10px] font-medium truncate mt-0.5 ${ke?"text-indigo-200":"text-slate-500 group-hover:text-slate-400"}`,children:["Updated ",Se]})]}),y.jsx("span",{className:`text-[10px] font-bold h-5 min-w-[1.25rem] px-1 rounded flex items-center justify-center transition-colors shrink-0 ${ke?"bg-indigo-700 text-indigo-100":"bg-slate-950 text-slate-500 border border-slate-800 group-hover:border-slate-600 group-hover:text-slate-300"}`,children:X[ge].length})]},ge)})}),y.jsxs("div",{className:"p-4 border-t border-slate-900 bg-slate-950 mt-auto sticky bottom-0 z-30 flex flex-col gap-2",children:[y.jsxs("button",{onClick:()=>e(),className:"w-full flex items-center justify-center gap-2 h-12 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg shadow-lg shadow-emerald-900/20 transition-all font-bold text-xs uppercase tracking-wide border border-emerald-500/50",children:[y.jsx(t0,{size:16})," New Client"]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsxs("button",{onClick:ce,className:"flex-1 h-10 flex items-center justify-center gap-2 bg-slate-900 border border-slate-800 text-slate-400 rounded-lg hover:bg-slate-800 hover:text-white transition-all text-[10px] font-bold uppercase tracking-wider",children:[y.jsx(MT,{size:16})," Defaults"]}),co()&&y.jsx("button",{onClick:u,className:"w-10 h-10 flex items-center justify-center bg-slate-900 border border-slate-800 text-red-400 rounded-lg hover:bg-red-900/20 hover:text-red-300 hover:border-red-900/30 transition-all",title:"Sign Out",children:y.jsx(kT,{size:16})})]})]})]}),y.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-slate-50 relative",children:[_?y.jsxs(y.Fragment,{children:[y.jsxs("header",{className:"bg-slate-950 border-b border-slate-800 h-28 px-8 flex items-center justify-between shrink-0 relative z-20 overflow-hidden group",children:[y.jsx("div",{className:"absolute right-32 top-1/2 -translate-y-1/2 text-slate-900/80 pointer-events-none transform group-hover:scale-105 transition-transform duration-1000",children:y.jsx(NT,{size:240,strokeWidth:.5})}),y.jsxs("div",{className:"flex items-center gap-6 relative z-10 h-full max-w-4xl flex-1",children:[y.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-slate-800 to-slate-900 border border-slate-700 rounded-2xl flex items-center justify-center shadow-2xl shadow-black/50 shrink-0",children:y.jsx(tb,{size:32,className:"text-indigo-400"})}),y.jsx("div",{className:"flex flex-col justify-center h-full overflow-hidden",children:y.jsx("h2",{className:"text-5xl font-black text-white tracking-tight leading-none shadow-sm truncate pb-1",children:_})})]}),y.jsxs("div",{className:"flex items-center gap-4 relative z-10 shrink-0 ml-4 pl-8 border-l border-slate-800/50",children:[y.jsxs("button",{onClick:z,className:"flex items-center gap-2 px-4 py-3 text-slate-500 hover:text-red-400 hover:bg-slate-900 rounded-lg transition-colors text-xs font-bold uppercase tracking-wide group/del",children:[y.jsx(hy,{size:16,className:"text-slate-600 group-hover/del:text-red-500 transition-colors"}),y.jsx("span",{className:"hidden xl:inline",children:"Delete"})]}),y.jsxs("button",{onClick:()=>e(_),className:"flex items-center gap-3 px-6 py-4 bg-indigo-600 text-white rounded-xl hover:bg-indigo-500 shadow-lg shadow-indigo-900/40 hover:shadow-indigo-900/60 transition-all font-bold text-xs uppercase tracking-wide border border-indigo-500/50 transform hover:-translate-y-0.5",children:[y.jsx(t0,{size:18,strokeWidth:3})," New Scenario"]}),y.jsxs("button",{onClick:()=>le(!0),className:"flex items-center gap-3 px-6 py-4 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl hover:from-purple-500 hover:to-indigo-500 shadow-lg shadow-purple-900/40 hover:shadow-purple-900/60 transition-all font-bold text-xs uppercase tracking-wide border border-purple-500/50 transform hover:-translate-y-0.5",children:[y.jsx(ib,{size:18,strokeWidth:2.5})," Create with AI"]})]})]}),y.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-custom",children:g?y.jsx("div",{className:"p-8 text-center text-slate-400 italic",children:"Comparison View"}):ye()}),y.jsxs("footer",{className:"bg-white border-t border-slate-200 py-3 px-8 flex justify-between items-center shrink-0",children:[y.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-semibold",children:"MortgagePro  2025"}),y.jsx("p",{className:"text-[10px] text-slate-300 font-medium",children:"v1.0.5"})]})]}):De(),y.jsx(hs,{isOpen:!!W,onClose:()=>ne(null),title:(W==null?void 0:W.type)==="folder"?"Delete Folder?":"Delete Scenario?",maxWidth:"max-w-sm",children:y.jsxs("div",{className:"flex flex-col items-center text-center",children:[y.jsx("div",{className:"w-14 h-14 bg-red-50 text-red-600 rounded-full flex items-center justify-center mb-4 border border-red-100",children:y.jsx(Sh,{size:28})}),y.jsxs("p",{className:"text-sm text-slate-500 mb-6",children:["Are you sure you want to delete ",y.jsx("strong",{className:"text-slate-900",children:W==null?void 0:W.name}),"? This action cannot be undone."]}),y.jsxs("div",{className:"flex gap-3 w-full",children:[y.jsx("button",{onClick:()=>ne(null),className:"flex-1 h-10 border border-slate-200 text-slate-600 font-bold rounded-lg hover:bg-slate-50 transition-colors text-xs uppercase tracking-wide",children:"Cancel"}),y.jsx("button",{onClick:re,className:"flex-1 h-10 bg-red-600 text-white font-bold rounded-lg hover:bg-red-700 shadow-lg shadow-red-100 transition-colors text-xs uppercase tracking-wide",children:"Delete"})]})]})}),y.jsx(hs,{isOpen:D,onClose:()=>j(!1),title:"App Settings",subtitle:"Configure system defaults",children:O&&y.jsxs("div",{className:"space-y-6",children:[m&&y.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:[y.jsx("label",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2",children:"Signed in as"}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-full flex items-center justify-center text-white font-bold text-sm",children:m.charAt(0).toUpperCase()}),y.jsx("span",{className:"text-sm font-medium text-slate-700",children:m})]})]}),y.jsxs("div",{className:"pt-2",children:[y.jsx("h4",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-4 border-b border-slate-100 pb-2",children:"Default Assumptions"}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5 ml-0.5",children:"Purchase Price"}),y.jsxs("div",{className:"flex items-center w-full bg-white border border-slate-200 rounded-lg h-10 overflow-hidden focus-within:ring-1 focus-within:ring-indigo-500 focus-within:border-indigo-500 transition-all",children:[y.jsx("div",{className:"flex items-center justify-center h-full px-3 bg-slate-50 border-r border-slate-200 text-slate-500 text-sm font-semibold min-w-[2.5rem]",children:"$"}),y.jsx(nn,{value:O.purchasePrice,onChangeValue:ge=>V({...O,purchasePrice:ge}),className:"h-full px-3 text-sm text-slate-900 font-medium"})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5 ml-0.5",children:"Down Payment"}),y.jsxs("div",{className:"flex items-center w-full bg-white border border-slate-200 rounded-lg h-10 overflow-hidden focus-within:ring-1 focus-within:ring-indigo-500 focus-within:border-indigo-500 transition-all",children:[y.jsx(_i,{value:O.downPaymentPercent,onChange:ge=>V({...O,downPaymentPercent:ge}),step:"1",precision:2,className:"h-full pl-3 text-right text-sm text-slate-900 font-medium"}),y.jsx("div",{className:"flex items-center justify-center h-full px-3 bg-slate-50 border-l border-slate-200 text-slate-500 text-sm font-semibold min-w-[2.5rem]",children:"%"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5 ml-0.5",children:"Interest Rate"}),y.jsxs("div",{className:"flex items-center w-full bg-white border border-slate-200 rounded-lg h-10 overflow-hidden focus-within:ring-1 focus-within:ring-indigo-500 focus-within:border-indigo-500 transition-all",children:[y.jsx(_i,{value:O.interestRate,onChange:ge=>V({...O,interestRate:ge}),step:"0.125",precision:3,className:"h-full pl-3 text-right text-sm text-slate-900 font-medium"}),y.jsx("div",{className:"flex items-center justify-center h-full px-3 bg-slate-50 border-l border-slate-200 text-slate-500 text-sm font-semibold min-w-[2.5rem]",children:"%"})]})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5 ml-0.5",children:"Yearly Tax"}),y.jsxs("div",{className:"flex items-center w-full bg-white border border-slate-200 rounded-lg h-10 overflow-hidden focus-within:ring-1 focus-within:ring-indigo-500 focus-within:border-indigo-500 transition-all",children:[y.jsx("div",{className:"flex items-center justify-center h-full px-3 bg-slate-50 border-r border-slate-200 text-slate-500 text-sm font-semibold min-w-[2.5rem]",children:"$"}),y.jsx(nn,{value:O.propertyTaxYearly,onChangeValue:ge=>V({...O,propertyTaxYearly:ge}),className:"h-full px-3 text-sm text-slate-900 font-medium"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5 ml-0.5",children:"Yearly Insurance"}),y.jsxs("div",{className:"flex items-center w-full bg-white border border-slate-200 rounded-lg h-10 overflow-hidden focus-within:ring-1 focus-within:ring-indigo-500 focus-within:border-indigo-500 transition-all",children:[y.jsx("div",{className:"flex items-center justify-center h-full px-3 bg-slate-50 border-r border-slate-200 text-slate-500 text-sm font-semibold min-w-[2.5rem]",children:"$"}),y.jsx(nn,{value:O.homeInsuranceYearly,onChangeValue:ge=>V({...O,homeInsuranceYearly:ge}),className:"h-full px-3 text-sm text-slate-900 font-medium"})]})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5 ml-0.5",children:"Monthly HOA"}),y.jsxs("div",{className:"flex items-center w-full bg-white border border-slate-200 rounded-lg h-10 overflow-hidden focus-within:ring-1 focus-within:ring-indigo-500 focus-within:border-indigo-500 transition-all",children:[y.jsx("div",{className:"flex items-center justify-center h-full px-3 bg-slate-50 border-r border-slate-200 text-slate-500 text-sm font-semibold min-w-[2.5rem]",children:"$"}),y.jsx(nn,{value:O.hoaMonthly,onChangeValue:ge=>V({...O,hoaMonthly:ge}),className:"h-full px-3 text-sm text-slate-900 font-medium"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5 ml-0.5",children:"Default Credit Score"}),y.jsx("input",{type:"number",value:O.creditScore,onChange:ge=>V({...O,creditScore:parseInt(ge.target.value)||740}),className:"w-full px-3 h-10 bg-white border border-slate-200 rounded-lg text-sm text-slate-900 font-medium focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none"})]})]})]})]}),y.jsxs("div",{className:"pt-6 border-t border-slate-200",children:[y.jsx("h4",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-4 border-b border-slate-100 pb-2",children:"Validation Thresholds"}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5 ml-0.5",children:"Min Purchase Price (Warning)"}),y.jsxs("div",{className:"flex items-center w-full bg-white border border-slate-200 rounded-lg h-10 overflow-hidden focus-within:ring-1 focus-within:ring-indigo-500 focus-within:border-indigo-500 transition-all",children:[y.jsx("div",{className:"flex items-center justify-center h-full px-3 bg-slate-50 border-r border-slate-200 text-slate-500 text-sm font-semibold min-w-[2.5rem]",children:"$"}),y.jsx(nn,{value:((Ie=O.validationThresholds)==null?void 0:Ie.purchasePriceMin)||5e4,onChangeValue:ge=>V({...O,validationThresholds:{...O.validationThresholds||Hi,purchasePriceMin:ge}}),className:"h-full px-3 text-sm text-slate-900 font-medium"})]}),y.jsx("p",{className:"text-[9px] text-slate-400 mt-1 ml-0.5",children:"Warns if purchase price is below this amount"})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5 ml-0.5",children:"Min Interest Rate"}),y.jsxs("div",{className:"flex items-center w-full bg-white border border-slate-200 rounded-lg h-10 overflow-hidden focus-within:ring-1 focus-within:ring-indigo-500 focus-within:border-indigo-500 transition-all",children:[y.jsx(_i,{value:((je=O.validationThresholds)==null?void 0:je.interestRateMin)||2,onChange:ge=>V({...O,validationThresholds:{...O.validationThresholds||Hi,interestRateMin:ge}}),step:"0.125",precision:3,className:"h-full pl-3 text-right text-sm text-slate-900 font-medium"}),y.jsx("div",{className:"flex items-center justify-center h-full px-3 bg-slate-50 border-l border-slate-200 text-slate-500 text-sm font-semibold min-w-[2.5rem]",children:"%"})]}),y.jsx("p",{className:"text-[9px] text-slate-400 mt-1 ml-0.5",children:"Warns if unusually low"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5 ml-0.5",children:"Max Interest Rate"}),y.jsxs("div",{className:"flex items-center w-full bg-white border border-slate-200 rounded-lg h-10 overflow-hidden focus-within:ring-1 focus-within:ring-indigo-500 focus-within:border-indigo-500 transition-all",children:[y.jsx(_i,{value:((Oe=O.validationThresholds)==null?void 0:Oe.interestRateMax)||12,onChange:ge=>V({...O,validationThresholds:{...O.validationThresholds||Hi,interestRateMax:ge}}),step:"0.125",precision:3,className:"h-full pl-3 text-right text-sm text-slate-900 font-medium"}),y.jsx("div",{className:"flex items-center justify-center h-full px-3 bg-slate-50 border-l border-slate-200 text-slate-500 text-sm font-semibold min-w-[2.5rem]",children:"%"})]}),y.jsx("p",{className:"text-[9px] text-slate-400 mt-1 ml-0.5",children:"Warns if unusually high"})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5 ml-0.5",children:"Front-End DTI Warning"}),y.jsxs("div",{className:"flex items-center w-full bg-white border border-slate-200 rounded-lg h-10 overflow-hidden focus-within:ring-1 focus-within:ring-indigo-500 focus-within:border-indigo-500 transition-all",children:[y.jsx("input",{type:"number",value:((Qe=O.validationThresholds)==null?void 0:Qe.dtiFrontEndWarning)||43,onChange:ge=>V({...O,validationThresholds:{...O.validationThresholds||Hi,dtiFrontEndWarning:parseFloat(ge.target.value)||43}}),step:"1",className:"h-full pl-3 text-right text-sm text-slate-900 font-medium outline-none bg-transparent flex-1"}),y.jsx("div",{className:"flex items-center justify-center h-full px-3 bg-slate-50 border-l border-slate-200 text-slate-500 text-sm font-semibold min-w-[2.5rem]",children:"%"})]}),y.jsx("p",{className:"text-[9px] text-slate-400 mt-1 ml-0.5",children:"Housing DTI threshold"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5 ml-0.5",children:"Back-End DTI Max"}),y.jsxs("div",{className:"flex items-center w-full bg-white border border-slate-200 rounded-lg h-10 overflow-hidden focus-within:ring-1 focus-within:ring-indigo-500 focus-within:border-indigo-500 transition-all",children:[y.jsx("input",{type:"number",value:((be=O.validationThresholds)==null?void 0:be.dtiBackEndMax)||50,onChange:ge=>V({...O,validationThresholds:{...O.validationThresholds||Hi,dtiBackEndMax:parseFloat(ge.target.value)||50}}),step:"1",className:"h-full pl-3 text-right text-sm text-slate-900 font-medium outline-none bg-transparent flex-1"}),y.jsx("div",{className:"flex items-center justify-center h-full px-3 bg-slate-50 border-l border-slate-200 text-slate-500 text-sm font-semibold min-w-[2.5rem]",children:"%"})]}),y.jsx("p",{className:"text-[9px] text-slate-400 mt-1 ml-0.5",children:"Total DTI error threshold"})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5 ml-0.5",children:"FHA Min Credit Score"}),y.jsx("input",{type:"number",value:((J=O.validationThresholds)==null?void 0:J.creditScoreFhaMin)||580,onChange:ge=>V({...O,validationThresholds:{...O.validationThresholds||Hi,creditScoreFhaMin:parseInt(ge.target.value)||580}}),step:"10",className:"w-full px-3 h-10 bg-white border border-slate-200 rounded-lg text-sm text-slate-900 font-medium focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none"}),y.jsx("p",{className:"text-[9px] text-slate-400 mt-1 ml-0.5",children:"Minimum for FHA loans"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5 ml-0.5",children:"Conv Min Credit Score"}),y.jsx("input",{type:"number",value:((qe=O.validationThresholds)==null?void 0:qe.creditScoreConventionalMin)||620,onChange:ge=>V({...O,validationThresholds:{...O.validationThresholds||Hi,creditScoreConventionalMin:parseInt(ge.target.value)||620}}),step:"10",className:"w-full px-3 h-10 bg-white border border-slate-200 rounded-lg text-sm text-slate-900 font-medium focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 outline-none"}),y.jsx("p",{className:"text-[9px] text-slate-400 mt-1 ml-0.5",children:"Minimum for Conventional"})]})]})]})]}),y.jsx("div",{className:"flex gap-3",children:y.jsxs("button",{onClick:ve,className:"w-full h-11 bg-slate-900 text-white font-bold rounded-lg hover:bg-slate-800 transition-colors flex items-center justify-center gap-2 shadow-lg shadow-slate-200 text-xs uppercase tracking-wide",children:[y.jsx(RT,{size:16})," Save Changes"]})})]})}),y.jsx(s3,{isOpen:he,onClose:()=>le(!1),onCreateScenario:ge=>{e(ge.clientName||_),le(!1)},defaultScenario:a?{...Pr,...a}:Pr,geminiApiKey:we})]})]})},u0=(t,e,n)=>{if(t===0||e===0)return 0;const r=Math.pow(1+t,e),i=t*n*r/(r-1);return isNaN(i)?0:i},vn=t=>{const e=Number(t);return isNaN(e)?0:e},Fy=t=>{const e=vn(t.purchasePrice),n=vn(t.downPaymentAmount),r=vn(t.interestRate),i=vn(t.loanTermMonths)||360,s=vn(t.propertyTaxYearly),o=vn(t.homeInsuranceYearly),a=vn(t.hoaMonthly),l=vn(t.earnestMoney),u=t.showSellerConcessions?vn(t.sellerConcessions):0,f=t.dpa.active?vn(t.dpa.amount):0,p=Math.max(0,n-f);let m=e-p,g=0;t.loanType===Nt.FHA?g=.0175:t.loanType===Nt.VA&&(g=t.ufmipRate>0?t.ufmipRate/100:.0215);const S=t.loanType===Nt.FHA||t.loanType===Nt.VA?m*g:0,_=m+S,E=e>0?_/e*100:0,b=r/100/12;let N=0;t.interestOnly&&(t.loanType===Nt.CONVENTIONAL||t.loanType===Nt.JUMBO)?N=_*b:N=u0(b,i,_);let T=0,M=0;if(t.manualMI!==null&&t.manualMI!==void 0)T=vn(t.manualMI),M=_>0?T*12/_*100:0;else if(t.loanType===Nt.FHA){const qe=E>95?.0055:.005;M=qe*100,T=_*qe/12}else if(t.loanType===Nt.CONVENTIONAL&&E>80){let qe=0;E>95?qe=.0095:E>90?qe=.0075:E>85?qe=.0048:qe=.0028,M=qe*100,T=_*qe/12}let U=0;if(t.dpa.active&&f>0)if(t.dpa.isDeferred)U=0;else{const qe=vn(t.dpa.rate),ge=vn(t.dpa.termMonths)||120,ue=qe/100/12;U=u0(ue,ge,f)}const Y=s/12+o/12+T+a+U;let H=0;const B=[];if(t.buydown.active){let qe=3;t.buydown.type==="3-2-1"&&(qe=4),t.buydown.type==="1-0"&&(qe=2);for(let ge=1;ge<=qe;ge++){let ue=0;t.buydown.type==="2-1"?(ge===1&&(ue=2),ge===2&&(ue=1)):t.buydown.type==="1-0"?ge===1&&(ue=1):t.buydown.type==="1-1"?(ge===1||ge===2)&&(ue=1):t.buydown.type==="3-2-1"&&(ge===1&&(ue=3),ge===2&&(ue=2),ge===3&&(ue=1));let Se=r,ke=0,Le=N;if(ue>0){Se=r-ue;const Ge=Se/100/12;t.interestOnly&&(t.loanType===Nt.CONVENTIONAL||t.loanType===Nt.JUMBO)?Le=_*Ge:Le=u0(Ge,i,_),ke=N-Le,H+=ke*12}B.push({year:ge,rate:Se,payment:Le,subsidy:ke,fullPayment:Le+Y})}}const W=(t.closingCosts||[]).reduce((qe,ge)=>{if(ge.id==="prepaid-interest"){const ke=ge.days||0,Ze=_*(r/100)/365*ke;return qe+Ze}if(ge.id==="prepaid-insurance"||ge.id==="insurance-reserves"){const ke=ge.months||0,Le=o/12;return qe+Le*ke}if(ge.id==="tax-reserves"){const ke=ge.months||0,Le=s/12;return qe+Le*ke}if(ge.id==="hoa-prepay"){const ke=ge.months||0,Le=a>0?a*ke:0;return qe+Le}const ue=vn(ge.amount),Se=ge.isFixed?ue:_*(ue/100);return qe+Se},0)+H,ne=e>0?u/e*100:0,D=t.showLenderCredits?vn(t.lenderCredits):0;let j=0;t.lenderCreditsMode==="percent"?j=_*(D/100):j=D;let O=0;t.loanType===Nt.FHA?O=6:t.loanType===Nt.VA?O=4:t.loanType===Nt.CONVENTIONAL?E>90?O=3:E>75?O=6:O=9:O=0;const V=e*(O/100),he=j+u,le=he>W,we=W-he,X=Math.max(0,we),ae=we<0?Math.abs(we):0,fe=n+X-f,Ce=fe-l,P=f>n+Math.max(0,X),q=N+Y;let z=q;if(t.buydown.active&&B.length>0){const qe=B[0].subsidy;z=q-qe}const Q=t.income||{borrower1:0,borrower2:0,rental:0,other:0},re=vn(Q.rental)*.75,ce=vn(Q.borrower1)+vn(Q.borrower2)+re+vn(Q.other),ve=t.debts||{monthlyTotal:0},ye=vn(ve.monthlyTotal);let De=0,Ie=0;ce>0&&(De=q/ce*100,Ie=(q+ye)/ce*100);const je=(qe,ge)=>{if(ce<=0)return{maxHousingPayment:0,maxPrice:0,maxLoan:0,math:[]};const ue=ce*(qe/100),Se=ce*(ge/100),ke=Math.max(0,Se-ye),Le=Math.min(ue,ke),Ge=ue<ke?"Front-End":"Back-End";let Ze=0,ot=0,at=0;q>0&&e>0&&(at=Le/q,Ze=e*at,ot=Ze*(1-t.downPaymentPercent/100));const vt=[`Total Income: $${ce.toLocaleString()}`,"Max Housing Payment Logic:",`  Front-End Limit (${qe}%): $${ue.toLocaleString(void 0,{maximumFractionDigits:0})}`,`  Back-End Limit (${ge}%): $${(ce*(ge/100)).toLocaleString(void 0,{maximumFractionDigits:0})} - Debts ($${ye}) = $${ke.toLocaleString(void 0,{maximumFractionDigits:0})}`,`  Limiting Factor: ${Ge} (Lowest of above)`,`  Result: $${Le.toLocaleString(void 0,{maximumFractionDigits:0})} / month`,"Max Price Logic (Ratio Method):",`  Current Pmt: $${q.toLocaleString(void 0,{maximumFractionDigits:0})}`,`  Ratio (Max / Current): ${at.toFixed(4)}`,`  Max Price ($${e.toLocaleString()} * ${at.toFixed(4)}): $${Ze.toLocaleString(void 0,{maximumFractionDigits:0})}`,`  Max Loan ($${Ze.toLocaleString(void 0,{maximumFractionDigits:0})} - ${t.downPaymentPercent}% Down): $${ot.toLocaleString(void 0,{maximumFractionDigits:0})}`];return{maxHousingPayment:Le,maxPrice:Ze,maxLoan:ot,math:vt}},Oe=je(46.99,49.99),Qe=je(46.99,57),be=De<=46.99&&Ie<=49.99,J=De<=46.99&&Ie<=57;return{baseLoanAmount:m,financedMIP:S,totalLoanAmount:_,monthlyPrincipalAndInterest:N,monthlyTax:s/12,monthlyInsurance:o/12,monthlyMI:T,monthlyHOA:a,monthlyDPAPayment:U,totalMonthlyPayment:z,baseMonthlyPayment:q,totalClosingCosts:W,buydownCost:H,downPaymentRequired:n,earnestMoney:l,sellerConcessionsAmount:u,sellerConcessionsPercent:ne,isConcessionsExcessive:le,maxConcessionsAllowed:V,lenderCreditsAmount:j,cashToClose:Ce,buydownSchedule:t.buydown.active?B:void 0,ltv:E,miRatePercent:M,dti:{frontEnd:De,backEnd:Ie},affordability:{maxHousingPaymentConv:Oe.maxHousingPayment,maxPriceConv:Oe.maxPrice,maxLoanConv:Oe.maxLoan,maxHousingPaymentFHA:Qe.maxHousingPayment,maxPriceFHA:Qe.maxPrice,maxLoanFHA:Qe.maxLoan},mathBreakdown:{conv:Oe.math,fha:Qe.math,convPass:be,fhaPass:J},warnings:{excessConcessions:le,excessDPA:P},income:{effectiveRental:re,total:ce},netClosingCosts:X,unusedCredits:ae,totalFundsRequired:fe}};var c3={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let d3,f3;function h3(){return{geminiUrl:d3,vertexUrl:f3}}function p3(t,e,n,r){var i,s;if(!(t!=null&&t.baseUrl)){const o=h3();return e?(i=o.vertexUrl)!==null&&i!==void 0?i:n:(s=o.geminiUrl)!==null&&s!==void 0?s:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ns{}function Ve(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function h(t,e,n){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let u=0;u<l.length;u++){const f=l[u];h(f,e.slice(s+1),n[u])}else for(const u of l)h(u,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];h(l[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function c(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in t){const o=t[s];return Array.isArray(o)?o.map(a=>c(a,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function m3(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),s=r.split("."),o=new Set;let a=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){a=l;break}if(a!==-1&&s.length>a)for(let l=a;l<s.length;l++){const u=s[l];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&o.add(u)}Fm(t,i,s,0,o)}}function Fm(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const s=e[r];if(s.endsWith("[]")){const o=s.slice(0,-2),a=t;if(o in a&&Array.isArray(a[o]))for(const l of a[o])Fm(l,e,n,r+1,i)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,a=Object.keys(o).filter(u=>!u.startsWith("_")&&!i.has(u)),l={};for(const u of a)l[u]=o[u];for(const[u,f]of Object.entries(l)){const p=[];for(const m of n.slice(r))m==="*"?p.push(u):p.push(m);h(o,p,f)}for(const u of a)delete o[u]}}else{const o=t;s in o&&Fm(o[s],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pv(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g3(t){const e={},n=c(t,["operationName"]);n!=null&&h(e,["operationName"],n);const r=c(t,["resourceName"]);return r!=null&&h(e,["_url","resourceName"],r),e}function v3(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["metadata"]);r!=null&&h(e,["metadata"],r);const i=c(t,["done"]);i!=null&&h(e,["done"],i);const s=c(t,["error"]);s!=null&&h(e,["error"],s);const o=c(t,["response","generateVideoResponse"]);return o!=null&&h(e,["response"],w3(o)),e}function y3(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["metadata"]);r!=null&&h(e,["metadata"],r);const i=c(t,["done"]);i!=null&&h(e,["done"],i);const s=c(t,["error"]);s!=null&&h(e,["error"],s);const o=c(t,["response"]);return o!=null&&h(e,["response"],x3(o)),e}function w3(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>b3(o))),h(e,["generatedVideos"],s)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&h(e,["raiMediaFilteredCount"],r);const i=c(t,["raiMediaFilteredReasons"]);return i!=null&&h(e,["raiMediaFilteredReasons"],i),e}function x3(t){const e={},n=c(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>_3(o))),h(e,["generatedVideos"],s)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&h(e,["raiMediaFilteredCount"],r);const i=c(t,["raiMediaFilteredReasons"]);return i!=null&&h(e,["raiMediaFilteredReasons"],i),e}function b3(t){const e={},n=c(t,["video"]);return n!=null&&h(e,["video"],C3(n)),e}function _3(t){const e={},n=c(t,["_self"]);return n!=null&&h(e,["video"],k3(n)),e}function S3(t){const e={},n=c(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function N3(t){const e={},n=c(t,["operationName"]);return n!=null&&h(e,["_url","operationName"],n),e}function A3(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["metadata"]);r!=null&&h(e,["metadata"],r);const i=c(t,["done"]);i!=null&&h(e,["done"],i);const s=c(t,["error"]);s!=null&&h(e,["error"],s);const o=c(t,["response"]);return o!=null&&h(e,["response"],E3(o)),e}function E3(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["parent"]);r!=null&&h(e,["parent"],r);const i=c(t,["documentName"]);return i!=null&&h(e,["documentName"],i),e}function I_(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["metadata"]);r!=null&&h(e,["metadata"],r);const i=c(t,["done"]);i!=null&&h(e,["done"],i);const s=c(t,["error"]);s!=null&&h(e,["error"],s);const o=c(t,["response"]);return o!=null&&h(e,["response"],T3(o)),e}function T3(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["parent"]);r!=null&&h(e,["parent"],r);const i=c(t,["documentName"]);return i!=null&&h(e,["documentName"],i),e}function C3(t){const e={},n=c(t,["uri"]);n!=null&&h(e,["uri"],n);const r=c(t,["encodedVideo"]);r!=null&&h(e,["videoBytes"],pv(r));const i=c(t,["encoding"]);return i!=null&&h(e,["mimeType"],i),e}function k3(t){const e={},n=c(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const r=c(t,["bytesBase64Encoded"]);r!=null&&h(e,["videoBytes"],pv(r));const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Oy;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Oy||(Oy={}));var jy;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(jy||(jy={}));var Uy;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Uy||(Uy={}));var Qs;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Qs||(Qs={}));var By;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(By||(By={}));var qy;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(qy||(qy={}));var Vy;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Vy||(Vy={}));var $y;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})($y||($y={}));var Hy;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Hy||(Hy={}));var zy;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(zy||(zy={}));var Gy;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Gy||(Gy={}));var Wy;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Wy||(Wy={}));var Jy;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Jy||(Jy={}));var Ky;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(Ky||(Ky={}));var Yy;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Yy||(Yy={}));var Xy;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Xy||(Xy={}));var Qy;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Qy||(Qy={}));var Zy;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Zy||(Zy={}));var e2;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(e2||(e2={}));var Zf;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Zf||(Zf={}));var t2;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(t2||(t2={}));var n2;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(n2||(n2={}));var r2;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(r2||(r2={}));var Om;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Om||(Om={}));var i2;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(i2||(i2={}));var s2;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(s2||(s2={}));var o2;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(o2||(o2={}));var a2;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(a2||(a2={}));var l2;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(l2||(l2={}));var u2;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(u2||(u2={}));var c2;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(c2||(c2={}));var d2;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(d2||(d2={}));var f2;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(f2||(f2={}));var h2;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(h2||(h2={}));var p2;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(p2||(p2={}));var m2;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(m2||(m2={}));var g2;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(g2||(g2={}));var v2;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(v2||(v2={}));var y2;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(y2||(y2={}));var w2;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(w2||(w2={}));var x2;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(x2||(x2={}));var b2;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(b2||(b2={}));var _2;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(_2||(_2={}));var S2;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(S2||(S2={}));var N2;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(N2||(N2={}));var A2;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(A2||(A2={}));var E2;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(E2||(E2={}));var T2;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(T2||(T2={}));var C2;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(C2||(C2={}));var k2;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(k2||(k2={}));var P2;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(P2||(P2={}));var I2;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(I2||(I2={}));var R2;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(R2||(R2={}));var L2;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(L2||(L2={}));var M2;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(M2||(M2={}));var ol;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ol||(ol={}));class jm{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Eu{get text(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",f=!1;const p=[];for(const m of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,S]of Object.entries(m))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(S!==null||S!==void 0)&&p.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;f=!0,u+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?u:void 0}get data(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const f=[];for(const p of(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[m,g]of Object.entries(p))m!=="inlineData"&&(g!==null||g!==void 0)&&f.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(u+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,r,i,s,o,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,r,i,s,o,a,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,r,i,s,o,a,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(l=(a=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.output}}class D2{}class F2{}class P3{}class I3{}class R3{}class L3{}class O2{}class j2{}class U2{}class M3{}class eh{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new eh;let i;const s=e;return n?i=y3(s):i=v3(s),Object.assign(r,i),r}}class B2{}class q2{}class V2{}class $2{}class D3{}class F3{}class O3{}class mv{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new mv,s=A3(e);return Object.assign(r,s),r}}class j3{}class U3{}class B3{}class H2{}class q3{get text(){var e,n,r;let i="",s=!1;const o=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,u]of Object.entries(a))l!=="text"&&l!=="thought"&&u!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;s=!0,i+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,n,r;let i="";const s=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&s.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class V3{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class gv{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new gv,s=I_(e);return Object.assign(r,s),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function At(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function R_(t,e){const n=At(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function L_(t){return Array.isArray(t)?t.map(e=>th(e)):[th(t)]}function th(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function M_(t){const e=th(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function D_(t){const e=th(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function z2(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function F_(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>z2(e)):[z2(t)]}function Um(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function G2(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function W2(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Xn(t){if(t==null)throw new Error("ContentUnion is required");return Um(t)?t:{role:"user",parts:F_(t)}}function vv(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Xn(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Xn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Xn(n)):[Xn(e)]}function Qr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(G2(t)||W2(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Xn(t)]}const e=[],n=[],r=Um(t[0]);for(const i of t){const s=Um(i);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(i);else{if(G2(i)||W2(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:F_(n)}),e}function $3(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Qs).includes(n[0].toUpperCase())?n[0].toUpperCase():Qs.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Qs).includes(r.toUpperCase())?r.toUpperCase():Qs.TYPE_UNSPECIFIED})}}function vl(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&$3(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(Qs).includes(a.toUpperCase())?a.toUpperCase():Qs.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=vl(a);else if(r.includes(o)){const l=[];for(const u of a){if(u.type=="null"){e.nullable=!0;continue}l.push(vl(u))}e[o]=l}else if(i.includes(o)){const l={};for(const[u,f]of Object.entries(a))l[u]=vl(f);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function yv(t){return vl(t)}function wv(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function xv(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function jl(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=vl(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=vl(e.response));return t}function Ul(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function H3(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function As(t,e){if(typeof e!="string")throw new Error("name must be a string");return H3(t,e,"cachedContents")}function O_(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function yo(t){return pv(t)}function z3(t){return t!=null&&typeof t=="object"&&"name"in t}function G3(t){return t!=null&&typeof t=="object"&&"video"in t}function W3(t){return t!=null&&typeof t=="object"&&"uri"in t}function j_(t){var e;let n;if(z3(t)&&(n=t.name),!(W3(t)&&(n=t.uri,n===void 0))&&!(G3(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function U_(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function B_(t){for(const e of["models","tunedModels","publisherModels"])if(J3(t,e))return t[e];return[]}function J3(t,e){return t!==null&&typeof t=="object"&&e in t}function K3(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function Y3(t,e={}){const n=[],r=new Set;for(const i of t){const s=i.name;if(r.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);r.add(s);const o=K3(i,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function q_(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function X3(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function V_(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let s=!1;for(const o of i){if(typeof o!="object"||o===null)continue;const l=o.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Bl(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function $_(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Q3(t){const e={},n=c(t,["responsesFile"]);n!=null&&h(e,["fileName"],n);const r=c(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Rk(o))),h(e,["inlinedResponses"],s)}const i=c(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),h(e,["inlinedEmbedContentResponses"],s)}return e}function Z3(t){const e={},n=c(t,["predictionsFormat"]);n!=null&&h(e,["format"],n);const r=c(t,["gcsDestination","outputUriPrefix"]);r!=null&&h(e,["gcsUri"],r);const i=c(t,["bigqueryDestination","outputUri"]);return i!=null&&h(e,["bigqueryUri"],i),e}function ek(t){const e={},n=c(t,["format"]);n!=null&&h(e,["predictionsFormat"],n);const r=c(t,["gcsUri"]);r!=null&&h(e,["gcsDestination","outputUriPrefix"],r);const i=c(t,["bigqueryUri"]);if(i!=null&&h(e,["bigqueryDestination","outputUri"],i),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function cf(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["metadata","displayName"]);r!=null&&h(e,["displayName"],r);const i=c(t,["metadata","state"]);i!=null&&h(e,["state"],$_(i));const s=c(t,["metadata","createTime"]);s!=null&&h(e,["createTime"],s);const o=c(t,["metadata","endTime"]);o!=null&&h(e,["endTime"],o);const a=c(t,["metadata","updateTime"]);a!=null&&h(e,["updateTime"],a);const l=c(t,["metadata","model"]);l!=null&&h(e,["model"],l);const u=c(t,["metadata","output"]);return u!=null&&h(e,["dest"],Q3(V_(u))),e}function Bm(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["displayName"]);r!=null&&h(e,["displayName"],r);const i=c(t,["state"]);i!=null&&h(e,["state"],$_(i));const s=c(t,["error"]);s!=null&&h(e,["error"],s);const o=c(t,["createTime"]);o!=null&&h(e,["createTime"],o);const a=c(t,["startTime"]);a!=null&&h(e,["startTime"],a);const l=c(t,["endTime"]);l!=null&&h(e,["endTime"],l);const u=c(t,["updateTime"]);u!=null&&h(e,["updateTime"],u);const f=c(t,["model"]);f!=null&&h(e,["model"],f);const p=c(t,["inputConfig"]);p!=null&&h(e,["src"],tk(p));const m=c(t,["outputConfig"]);m!=null&&h(e,["dest"],Z3(V_(m)));const g=c(t,["completionStats"]);return g!=null&&h(e,["completionStats"],g),e}function tk(t){const e={},n=c(t,["instancesFormat"]);n!=null&&h(e,["format"],n);const r=c(t,["gcsSource","uris"]);r!=null&&h(e,["gcsUri"],r);const i=c(t,["bigquerySource","inputUri"]);return i!=null&&h(e,["bigqueryUri"],i),e}function nk(t,e){const n={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=c(e,["fileName"]);r!=null&&h(n,["fileName"],r);const i=c(e,["inlinedRequests"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Ik(t,o))),h(n,["requests","requests"],s)}return n}function rk(t){const e={},n=c(t,["format"]);n!=null&&h(e,["instancesFormat"],n);const r=c(t,["gcsUri"]);r!=null&&h(e,["gcsSource","uris"],r);const i=c(t,["bigqueryUri"]);if(i!=null&&h(e,["bigquerySource","inputUri"],i),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function ik(t){const e={},n=c(t,["data"]);if(n!=null&&h(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function sk(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Bl(t,r)),n}function ok(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Bl(t,r)),n}function ak(t){const e={},n=c(t,["content"]);n!=null&&h(e,["content"],n);const r=c(t,["citationMetadata"]);r!=null&&h(e,["citationMetadata"],lk(r));const i=c(t,["tokenCount"]);i!=null&&h(e,["tokenCount"],i);const s=c(t,["finishReason"]);s!=null&&h(e,["finishReason"],s);const o=c(t,["avgLogprobs"]);o!=null&&h(e,["avgLogprobs"],o);const a=c(t,["groundingMetadata"]);a!=null&&h(e,["groundingMetadata"],a);const l=c(t,["index"]);l!=null&&h(e,["index"],l);const u=c(t,["logprobsResult"]);u!=null&&h(e,["logprobsResult"],u);const f=c(t,["safetyRatings"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>g)),h(e,["safetyRatings"],m)}const p=c(t,["urlContextMetadata"]);return p!=null&&h(e,["urlContextMetadata"],p),e}function lk(t){const e={},n=c(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),h(e,["citations"],r)}return e}function H_(t){const e={},n=c(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Uk(s))),h(e,["parts"],i)}const r=c(t,["role"]);return r!=null&&h(e,["role"],r),e}function uk(t,e){const n={},r=c(t,["displayName"]);if(e!==void 0&&r!=null&&h(e,["batch","displayName"],r),c(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function ck(t,e){const n={},r=c(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const i=c(t,["dest"]);return e!==void 0&&i!=null&&h(e,["outputConfig"],ek(X3(i))),n}function J2(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],At(t,r));const i=c(e,["src"]);i!=null&&h(n,["batch","inputConfig"],nk(t,q_(t,i)));const s=c(e,["config"]);return s!=null&&uk(s,n),n}function dk(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["model"],At(t,r));const i=c(e,["src"]);i!=null&&h(n,["inputConfig"],rk(q_(t,i)));const s=c(e,["config"]);return s!=null&&ck(s,n),n}function fk(t,e){const n={},r=c(t,["displayName"]);return e!==void 0&&r!=null&&h(e,["batch","displayName"],r),n}function hk(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],At(t,r));const i=c(e,["src"]);i!=null&&h(n,["batch","inputConfig"],xk(t,i));const s=c(e,["config"]);return s!=null&&fk(s,n),n}function pk(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Bl(t,r)),n}function mk(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Bl(t,r)),n}function gk(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["name"]);r!=null&&h(e,["name"],r);const i=c(t,["done"]);i!=null&&h(e,["done"],i);const s=c(t,["error"]);return s!=null&&h(e,["error"],s),e}function vk(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["name"]);r!=null&&h(e,["name"],r);const i=c(t,["done"]);i!=null&&h(e,["done"],i);const s=c(t,["error"]);return s!=null&&h(e,["error"],s),e}function yk(t,e){const n={},r=c(e,["contents"]);if(r!=null){let s=vv(t,r);Array.isArray(s)&&(s=s.map(o=>o)),h(n,["requests[]","request","content"],s)}const i=c(e,["config"]);return i!=null&&(h(n,["_self"],wk(i,n)),m3(n,{"requests[].*":"requests[].request.*"})),n}function wk(t,e){const n={},r=c(t,["taskType"]);e!==void 0&&r!=null&&h(e,["requests[]","taskType"],r);const i=c(t,["title"]);e!==void 0&&i!=null&&h(e,["requests[]","title"],i);const s=c(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&h(e,["requests[]","outputDimensionality"],s),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function xk(t,e){const n={},r=c(e,["fileName"]);r!=null&&h(n,["file_name"],r);const i=c(e,["inlinedRequests"]);return i!=null&&h(n,["requests"],yk(t,i)),n}function bk(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function _k(t){const e={},n=c(t,["id"]);n!=null&&h(e,["id"],n);const r=c(t,["args"]);r!=null&&h(e,["args"],r);const i=c(t,["name"]);if(i!=null&&h(e,["name"],i),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Sk(t){const e={},n=c(t,["mode"]);n!=null&&h(e,["mode"],n);const r=c(t,["allowedFunctionNames"]);if(r!=null&&h(e,["allowedFunctionNames"],r),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Nk(t,e,n){const r={},i=c(e,["systemInstruction"]);n!==void 0&&i!=null&&h(n,["systemInstruction"],H_(Xn(i)));const s=c(e,["temperature"]);s!=null&&h(r,["temperature"],s);const o=c(e,["topP"]);o!=null&&h(r,["topP"],o);const a=c(e,["topK"]);a!=null&&h(r,["topK"],a);const l=c(e,["candidateCount"]);l!=null&&h(r,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&h(r,["maxOutputTokens"],u);const f=c(e,["stopSequences"]);f!=null&&h(r,["stopSequences"],f);const p=c(e,["responseLogprobs"]);p!=null&&h(r,["responseLogprobs"],p);const m=c(e,["logprobs"]);m!=null&&h(r,["logprobs"],m);const g=c(e,["presencePenalty"]);g!=null&&h(r,["presencePenalty"],g);const S=c(e,["frequencyPenalty"]);S!=null&&h(r,["frequencyPenalty"],S);const _=c(e,["seed"]);_!=null&&h(r,["seed"],_);const E=c(e,["responseMimeType"]);E!=null&&h(r,["responseMimeType"],E);const b=c(e,["responseSchema"]);b!=null&&h(r,["responseSchema"],yv(b));const N=c(e,["responseJsonSchema"]);if(N!=null&&h(r,["responseJsonSchema"],N),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=c(e,["safetySettings"]);if(n!==void 0&&T!=null){let O=T;Array.isArray(O)&&(O=O.map(V=>Bk(V))),h(n,["safetySettings"],O)}const M=c(e,["tools"]);if(n!==void 0&&M!=null){let O=Ul(M);Array.isArray(O)&&(O=O.map(V=>Vk(jl(V)))),h(n,["tools"],O)}const U=c(e,["toolConfig"]);if(n!==void 0&&U!=null&&h(n,["toolConfig"],qk(U)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=c(e,["cachedContent"]);n!==void 0&&Y!=null&&h(n,["cachedContent"],As(t,Y));const H=c(e,["responseModalities"]);H!=null&&h(r,["responseModalities"],H);const B=c(e,["mediaResolution"]);B!=null&&h(r,["mediaResolution"],B);const W=c(e,["speechConfig"]);if(W!=null&&h(r,["speechConfig"],wv(W)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ne=c(e,["thinkingConfig"]);ne!=null&&h(r,["thinkingConfig"],ne);const D=c(e,["imageConfig"]);D!=null&&h(r,["imageConfig"],Pk(D));const j=c(e,["enableEnhancedCivicAnswers"]);return j!=null&&h(r,["enableEnhancedCivicAnswers"],j),r}function Ak(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>ak(u))),h(e,["candidates"],l)}const i=c(t,["modelVersion"]);i!=null&&h(e,["modelVersion"],i);const s=c(t,["promptFeedback"]);s!=null&&h(e,["promptFeedback"],s);const o=c(t,["responseId"]);o!=null&&h(e,["responseId"],o);const a=c(t,["usageMetadata"]);return a!=null&&h(e,["usageMetadata"],a),e}function Ek(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Bl(t,r)),n}function Tk(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],Bl(t,r)),n}function Ck(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function kk(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function Pk(t){const e={},n=c(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const r=c(t,["imageSize"]);if(r!=null&&h(e,["imageSize"],r),c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Ik(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["request","model"],At(t,r));const i=c(e,["contents"]);if(i!=null){let a=Qr(i);Array.isArray(a)&&(a=a.map(l=>H_(l))),h(n,["request","contents"],a)}const s=c(e,["metadata"]);s!=null&&h(n,["metadata"],s);const o=c(e,["config"]);return o!=null&&h(n,["request","generationConfig"],Nk(t,o,c(n,["request"],{}))),n}function Rk(t){const e={},n=c(t,["response"]);n!=null&&h(e,["response"],Ak(n));const r=c(t,["error"]);return r!=null&&h(e,["error"],r),e}function Lk(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);if(e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),c(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Mk(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);e!==void 0&&i!=null&&h(e,["_query","pageToken"],i);const s=c(t,["filter"]);return e!==void 0&&s!=null&&h(e,["_query","filter"],s),n}function Dk(t){const e={},n=c(t,["config"]);return n!=null&&Lk(n,e),e}function Fk(t){const e={},n=c(t,["config"]);return n!=null&&Mk(n,e),e}function Ok(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=c(t,["operations"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>cf(o))),h(e,["batchJobs"],s)}return e}function jk(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=c(t,["batchPredictionJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Bm(o))),h(e,["batchJobs"],s)}return e}function Uk(t){const e={},n=c(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const r=c(t,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const i=c(t,["executableCode"]);i!=null&&h(e,["executableCode"],i);const s=c(t,["fileData"]);s!=null&&h(e,["fileData"],bk(s));const o=c(t,["functionCall"]);o!=null&&h(e,["functionCall"],_k(o));const a=c(t,["functionResponse"]);a!=null&&h(e,["functionResponse"],a);const l=c(t,["inlineData"]);l!=null&&h(e,["inlineData"],ik(l));const u=c(t,["text"]);u!=null&&h(e,["text"],u);const f=c(t,["thought"]);f!=null&&h(e,["thought"],f);const p=c(t,["thoughtSignature"]);p!=null&&h(e,["thoughtSignature"],p);const m=c(t,["videoMetadata"]);return m!=null&&h(e,["videoMetadata"],m),e}function Bk(t){const e={},n=c(t,["category"]);if(n!=null&&h(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=c(t,["threshold"]);return r!=null&&h(e,["threshold"],r),e}function qk(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&h(e,["functionCallingConfig"],Sk(n));const r=c(t,["retrievalConfig"]);return r!=null&&h(e,["retrievalConfig"],r),e}function Vk(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),h(e,["functionDeclarations"],f)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const i=c(t,["computerUse"]);i!=null&&h(e,["computerUse"],i);const s=c(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const o=c(t,["codeExecution"]);if(o!=null&&h(e,["codeExecution"],o),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(t,["googleMaps"]);a!=null&&h(e,["googleMaps"],Ck(a));const l=c(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],kk(l));const u=c(t,["urlContext"]);return u!=null&&h(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var bs;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(bs||(bs={}));class ia{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $k extends Ns{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ia(bs.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=J2(this.apiClient,e),r=n._url,i=Ve("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,u=[];for(const f of l){const p=Object.assign({},f);if(p.systemInstruction){const m=p.systemInstruction;delete p.systemInstruction;const g=p.request;g.systemInstruction=m,p.request=g}u.push(p)}return a.requests=u,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const s=this.getGcsUri(e),o=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?r.dest=`${s.slice(0,-6)}/dest`:r.dest=`${s}_dest_${i}`;else if(o)r.dest=`${o}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=dk(this.apiClient,e);return a=Ve("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>Bm(f))}else{const u=J2(this.apiClient,e);return a=Ve("{model}:batchGenerateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>cf(f))}}async createEmbeddingsInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=hk(this.apiClient,e);return s=Ve("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>cf(l))}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Tk(this.apiClient,e);return a=Ve("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>Bm(f))}else{const u=Ek(this.apiClient,e);return a=Ve("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>cf(f))}}async cancel(e){var n,r,i,s;let o="",a={};if(this.apiClient.isVertexAI()){const l=ok(this.apiClient,e);o=Ve("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=sk(this.apiClient,e);o=Ve("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Fk(e);return a=Ve("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=jk(f),m=new H2;return Object.assign(m,p),m})}else{const u=Dk(e);return a=Ve("batches",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=Ok(f),m=new H2;return Object.assign(m,p),m})}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=mk(this.apiClient,e);return a=Ve("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>vk(f))}else{const u=pk(this.apiClient,e);return a=Ve("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>gk(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hk(t){const e={},n=c(t,["data"]);if(n!=null&&h(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function K2(t){const e={},n=c(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>hP(s))),h(e,["parts"],i)}const r=c(t,["role"]);return r!=null&&h(e,["role"],r),e}function zk(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&h(e,["ttl"],r);const i=c(t,["expireTime"]);e!==void 0&&i!=null&&h(e,["expireTime"],i);const s=c(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const o=c(t,["contents"]);if(e!==void 0&&o!=null){let f=Qr(o);Array.isArray(f)&&(f=f.map(p=>K2(p))),h(e,["contents"],f)}const a=c(t,["systemInstruction"]);e!==void 0&&a!=null&&h(e,["systemInstruction"],K2(Xn(a)));const l=c(t,["tools"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(p=>mP(p))),h(e,["tools"],f)}const u=c(t,["toolConfig"]);if(e!==void 0&&u!=null&&h(e,["toolConfig"],pP(u)),c(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Gk(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&h(e,["ttl"],r);const i=c(t,["expireTime"]);e!==void 0&&i!=null&&h(e,["expireTime"],i);const s=c(t,["displayName"]);e!==void 0&&s!=null&&h(e,["displayName"],s);const o=c(t,["contents"]);if(e!==void 0&&o!=null){let p=Qr(o);Array.isArray(p)&&(p=p.map(m=>m)),h(e,["contents"],p)}const a=c(t,["systemInstruction"]);e!==void 0&&a!=null&&h(e,["systemInstruction"],Xn(a));const l=c(t,["tools"]);if(e!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(m=>gP(m))),h(e,["tools"],p)}const u=c(t,["toolConfig"]);e!==void 0&&u!=null&&h(e,["toolConfig"],u);const f=c(t,["kmsKeyName"]);return e!==void 0&&f!=null&&h(e,["encryption_spec","kmsKeyName"],f),n}function Wk(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["model"],R_(t,r));const i=c(e,["config"]);return i!=null&&zk(i,n),n}function Jk(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["model"],R_(t,r));const i=c(e,["config"]);return i!=null&&Gk(i,n),n}function Kk(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],As(t,r)),n}function Yk(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],As(t,r)),n}function Xk(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function Qk(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function Zk(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function eP(t){const e={},n=c(t,["id"]);n!=null&&h(e,["id"],n);const r=c(t,["args"]);r!=null&&h(e,["args"],r);const i=c(t,["name"]);if(i!=null&&h(e,["name"],i),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function tP(t){const e={},n=c(t,["mode"]);n!=null&&h(e,["mode"],n);const r=c(t,["allowedFunctionNames"]);if(r!=null&&h(e,["allowedFunctionNames"],r),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function nP(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&h(e,["description"],n);const r=c(t,["name"]);r!=null&&h(e,["name"],r);const i=c(t,["parameters"]);i!=null&&h(e,["parameters"],i);const s=c(t,["parametersJsonSchema"]);s!=null&&h(e,["parametersJsonSchema"],s);const o=c(t,["response"]);o!=null&&h(e,["response"],o);const a=c(t,["responseJsonSchema"]);return a!=null&&h(e,["responseJsonSchema"],a),e}function rP(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],As(t,r)),n}function iP(t,e){const n={},r=c(e,["name"]);return r!=null&&h(n,["_url","name"],As(t,r)),n}function sP(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function oP(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function aP(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),n}function lP(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),n}function uP(t){const e={},n=c(t,["config"]);return n!=null&&aP(n,e),e}function cP(t){const e={},n=c(t,["config"]);return n!=null&&lP(n,e),e}function dP(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=c(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),h(e,["cachedContents"],s)}return e}function fP(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=c(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),h(e,["cachedContents"],s)}return e}function hP(t){const e={},n=c(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const r=c(t,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const i=c(t,["executableCode"]);i!=null&&h(e,["executableCode"],i);const s=c(t,["fileData"]);s!=null&&h(e,["fileData"],Zk(s));const o=c(t,["functionCall"]);o!=null&&h(e,["functionCall"],eP(o));const a=c(t,["functionResponse"]);a!=null&&h(e,["functionResponse"],a);const l=c(t,["inlineData"]);l!=null&&h(e,["inlineData"],Hk(l));const u=c(t,["text"]);u!=null&&h(e,["text"],u);const f=c(t,["thought"]);f!=null&&h(e,["thought"],f);const p=c(t,["thoughtSignature"]);p!=null&&h(e,["thoughtSignature"],p);const m=c(t,["videoMetadata"]);return m!=null&&h(e,["videoMetadata"],m),e}function pP(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&h(e,["functionCallingConfig"],tP(n));const r=c(t,["retrievalConfig"]);return r!=null&&h(e,["retrievalConfig"],r),e}function mP(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),h(e,["functionDeclarations"],f)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const i=c(t,["computerUse"]);i!=null&&h(e,["computerUse"],i);const s=c(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const o=c(t,["codeExecution"]);if(o!=null&&h(e,["codeExecution"],o),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(t,["googleMaps"]);a!=null&&h(e,["googleMaps"],sP(a));const l=c(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],oP(l));const u=c(t,["urlContext"]);return u!=null&&h(e,["urlContext"],u),e}function gP(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>nP(m))),h(e,["functionDeclarations"],p)}const r=c(t,["retrieval"]);r!=null&&h(e,["retrieval"],r);const i=c(t,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const s=c(t,["computerUse"]);if(s!=null&&h(e,["computerUse"],s),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=c(t,["codeExecution"]);o!=null&&h(e,["codeExecution"],o);const a=c(t,["enterpriseWebSearch"]);a!=null&&h(e,["enterpriseWebSearch"],a);const l=c(t,["googleMaps"]);l!=null&&h(e,["googleMaps"],l);const u=c(t,["googleSearch"]);u!=null&&h(e,["googleSearch"],u);const f=c(t,["urlContext"]);return f!=null&&h(e,["urlContext"],f),e}function vP(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&h(e,["ttl"],r);const i=c(t,["expireTime"]);return e!==void 0&&i!=null&&h(e,["expireTime"],i),n}function yP(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&h(e,["ttl"],r);const i=c(t,["expireTime"]);return e!==void 0&&i!=null&&h(e,["expireTime"],i),n}function wP(t,e){const n={},r=c(e,["name"]);r!=null&&h(n,["_url","name"],As(t,r));const i=c(e,["config"]);return i!=null&&vP(i,n),n}function xP(t,e){const n={},r=c(e,["name"]);r!=null&&h(n,["_url","name"],As(t,r));const i=c(e,["config"]);return i!=null&&yP(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bP extends Ns{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ia(bs.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Jk(this.apiClient,e);return a=Ve("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>f)}else{const u=Wk(this.apiClient,e);return a=Ve("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=iP(this.apiClient,e);return a=Ve("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>f)}else{const u=rP(this.apiClient,e);return a=Ve("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Yk(this.apiClient,e);return a=Ve("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=Qk(f),m=new V2;return Object.assign(m,p),m})}else{const u=Kk(this.apiClient,e);return a=Ve("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=Xk(f),m=new V2;return Object.assign(m,p),m})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=xP(this.apiClient,e);return a=Ve("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>f)}else{const u=wP(this.apiClient,e);return a=Ve("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>f)}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=cP(e);return a=Ve("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=fP(f),m=new $2;return Object.assign(m,p),m})}else{const u=uP(e);return a=Ve("cachedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=dP(f),m=new $2;return Object.assign(m,p),m})}}}function nh(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Y2(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ct(t){return this instanceof ct?(this.v=t,this):new ct(t)}function Ai(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(S){return Promise.resolve(S).then(g,p)}}function a(g,S){r[g]&&(i[g]=function(_){return new Promise(function(E,b){s.push([g,_,E,b])>1||l(g,_)})},S&&(i[g]=S(i[g])))}function l(g,S){try{u(r[g](S))}catch(_){m(s[0][3],_)}}function u(g){g.value instanceof ct?Promise.resolve(g.value.v).then(f,p):m(s[0][2],g)}function f(g){l("next",g)}function p(g){l("throw",g)}function m(g,S){g(S),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Ei(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Y2=="function"?Y2(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _P(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:z_(n)}function z_(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function SP(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function X2(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let s=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),s&&!z_(t[r])&&(s=!1),r++;s?e.push(...i):e.pop()}return e}class NP{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new AP(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class AP{constructor(e,n,r,i={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),SP(s)}async sendMessage(e){var n;await this.sendPromise;const r=Xn(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o,a;const l=await i,u=(o=(s=l.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,f=l.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];f!=null&&(m=(a=f.slice(p))!==null&&a!==void 0?a:[]);const g=u?[u]:[];this.recordHistory(r,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=Xn(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const s=await i;return this.processStreamResponse(s,r)}getHistory(e=!1){const n=e?X2(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Ai(this,arguments,function*(){var i,s,o,a,l,u;const f=[];try{for(var p=!0,m=Ei(e),g;g=yield ct(m.next()),i=g.done,!i;p=!0){a=g.value,p=!1;const S=a;if(_P(S)){const _=(u=(l=S.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content;_!==void 0&&f.push(_)}yield yield ct(S)}}catch(S){s={error:S}}finally{try{!p&&!i&&(o=m.return)&&(yield ct(o.call(m)))}finally{if(s)throw s.error}}this.recordHistory(n,f)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(s=>s.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...X2(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ph extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ph.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EP(t){const e={},n=c(t,["file"]);return n!=null&&h(e,["file"],n),e}function TP(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function CP(t){const e={},n=c(t,["name"]);return n!=null&&h(e,["_url","file"],j_(n)),e}function kP(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function PP(t){const e={},n=c(t,["name"]);return n!=null&&h(e,["_url","file"],j_(n)),e}function IP(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),n}function RP(t){const e={},n=c(t,["config"]);return n!=null&&IP(n,e),e}function LP(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=c(t,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),h(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MP extends Ns{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ia(bs.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=RP(e);return s=Ve("files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:l.headers},f})),i.then(l=>{const u=LP(l),f=new j3;return Object.assign(f,u),f})}}async createInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=EP(e);return s=Ve("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=TP(l),f=new U3;return Object.assign(f,u),f})}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=PP(e);return s=Ve("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=CP(e);return s=Ve("files/{file}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:l.headers},f})),i.then(l=>{const u=kP(l),f=new B3;return Object.assign(f,u),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function df(t){const e={},n=c(t,["data"]);if(n!=null&&h(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function DP(t){const e={},n=c(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>XP(s))),h(e,["parts"],i)}const r=c(t,["role"]);return r!=null&&h(e,["role"],r),e}function FP(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function OP(t){const e={},n=c(t,["id"]);n!=null&&h(e,["id"],n);const r=c(t,["args"]);r!=null&&h(e,["args"],r);const i=c(t,["name"]);if(i!=null&&h(e,["name"],i),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function jP(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&h(e,["description"],n);const r=c(t,["name"]);r!=null&&h(e,["name"],r);const i=c(t,["parameters"]);i!=null&&h(e,["parameters"],i);const s=c(t,["parametersJsonSchema"]);s!=null&&h(e,["parametersJsonSchema"],s);const o=c(t,["response"]);o!=null&&h(e,["response"],o);const a=c(t,["responseJsonSchema"]);return a!=null&&h(e,["responseJsonSchema"],a),e}function UP(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const r=c(t,["responseJsonSchema"]);r!=null&&h(e,["responseJsonSchema"],r);const i=c(t,["audioTimestamp"]);i!=null&&h(e,["audioTimestamp"],i);const s=c(t,["candidateCount"]);s!=null&&h(e,["candidateCount"],s);const o=c(t,["enableAffectiveDialog"]);o!=null&&h(e,["enableAffectiveDialog"],o);const a=c(t,["frequencyPenalty"]);a!=null&&h(e,["frequencyPenalty"],a);const l=c(t,["logprobs"]);l!=null&&h(e,["logprobs"],l);const u=c(t,["maxOutputTokens"]);u!=null&&h(e,["maxOutputTokens"],u);const f=c(t,["mediaResolution"]);f!=null&&h(e,["mediaResolution"],f);const p=c(t,["presencePenalty"]);p!=null&&h(e,["presencePenalty"],p);const m=c(t,["responseLogprobs"]);m!=null&&h(e,["responseLogprobs"],m);const g=c(t,["responseMimeType"]);g!=null&&h(e,["responseMimeType"],g);const S=c(t,["responseModalities"]);S!=null&&h(e,["responseModalities"],S);const _=c(t,["responseSchema"]);_!=null&&h(e,["responseSchema"],_);const E=c(t,["routingConfig"]);E!=null&&h(e,["routingConfig"],E);const b=c(t,["seed"]);b!=null&&h(e,["seed"],b);const N=c(t,["speechConfig"]);N!=null&&h(e,["speechConfig"],G_(N));const T=c(t,["stopSequences"]);T!=null&&h(e,["stopSequences"],T);const M=c(t,["temperature"]);M!=null&&h(e,["temperature"],M);const U=c(t,["thinkingConfig"]);U!=null&&h(e,["thinkingConfig"],U);const Y=c(t,["topK"]);Y!=null&&h(e,["topK"],Y);const H=c(t,["topP"]);if(H!=null&&h(e,["topP"],H),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function BP(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function qP(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function VP(t,e){const n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig"],r);const i=c(t,["responseModalities"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","responseModalities"],i);const s=c(t,["temperature"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","temperature"],s);const o=c(t,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const a=c(t,["topK"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topK"],a);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","mediaResolution"],u);const f=c(t,["seed"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","seed"],f);const p=c(t,["speechConfig"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","speechConfig"],xv(p));const m=c(t,["thinkingConfig"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","thinkingConfig"],m);const g=c(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],g);const S=c(t,["systemInstruction"]);e!==void 0&&S!=null&&h(e,["setup","systemInstruction"],DP(Xn(S)));const _=c(t,["tools"]);if(e!==void 0&&_!=null){let Y=Ul(_);Array.isArray(Y)&&(Y=Y.map(H=>ZP(jl(H)))),h(e,["setup","tools"],Y)}const E=c(t,["sessionResumption"]);e!==void 0&&E!=null&&h(e,["setup","sessionResumption"],QP(E));const b=c(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&h(e,["setup","inputAudioTranscription"],b);const N=c(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&h(e,["setup","outputAudioTranscription"],N);const T=c(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&h(e,["setup","realtimeInputConfig"],T);const M=c(t,["contextWindowCompression"]);e!==void 0&&M!=null&&h(e,["setup","contextWindowCompression"],M);const U=c(t,["proactivity"]);if(e!==void 0&&U!=null&&h(e,["setup","proactivity"],U),c(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function $P(t,e){const n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig"],UP(r));const i=c(t,["responseModalities"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","responseModalities"],i);const s=c(t,["temperature"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","temperature"],s);const o=c(t,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const a=c(t,["topK"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topK"],a);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","mediaResolution"],u);const f=c(t,["seed"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","seed"],f);const p=c(t,["speechConfig"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","speechConfig"],G_(xv(p)));const m=c(t,["thinkingConfig"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","thinkingConfig"],m);const g=c(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],g);const S=c(t,["systemInstruction"]);e!==void 0&&S!=null&&h(e,["setup","systemInstruction"],Xn(S));const _=c(t,["tools"]);if(e!==void 0&&_!=null){let H=Ul(_);Array.isArray(H)&&(H=H.map(B=>eI(jl(B)))),h(e,["setup","tools"],H)}const E=c(t,["sessionResumption"]);e!==void 0&&E!=null&&h(e,["setup","sessionResumption"],E);const b=c(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&h(e,["setup","inputAudioTranscription"],b);const N=c(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&h(e,["setup","outputAudioTranscription"],N);const T=c(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&h(e,["setup","realtimeInputConfig"],T);const M=c(t,["contextWindowCompression"]);e!==void 0&&M!=null&&h(e,["setup","contextWindowCompression"],M);const U=c(t,["proactivity"]);e!==void 0&&U!=null&&h(e,["setup","proactivity"],U);const Y=c(t,["explicitVadSignal"]);return e!==void 0&&Y!=null&&h(e,["setup","explicitVadSignal"],Y),n}function HP(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["setup","model"],At(t,r));const i=c(e,["config"]);return i!=null&&h(n,["config"],VP(i,n)),n}function zP(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["setup","model"],At(t,r));const i=c(e,["config"]);return i!=null&&h(n,["config"],$P(i,n)),n}function GP(t){const e={},n=c(t,["musicGenerationConfig"]);return n!=null&&h(e,["musicGenerationConfig"],n),e}function WP(t){const e={},n=c(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),h(e,["weightedPrompts"],r)}return e}function JP(t){const e={},n=c(t,["media"]);if(n!=null){let u=L_(n);Array.isArray(u)&&(u=u.map(f=>df(f))),h(e,["mediaChunks"],u)}const r=c(t,["audio"]);r!=null&&h(e,["audio"],df(D_(r)));const i=c(t,["audioStreamEnd"]);i!=null&&h(e,["audioStreamEnd"],i);const s=c(t,["video"]);s!=null&&h(e,["video"],df(M_(s)));const o=c(t,["text"]);o!=null&&h(e,["text"],o);const a=c(t,["activityStart"]);a!=null&&h(e,["activityStart"],a);const l=c(t,["activityEnd"]);return l!=null&&h(e,["activityEnd"],l),e}function KP(t){const e={},n=c(t,["media"]);if(n!=null){let u=L_(n);Array.isArray(u)&&(u=u.map(f=>f)),h(e,["mediaChunks"],u)}const r=c(t,["audio"]);r!=null&&h(e,["audio"],D_(r));const i=c(t,["audioStreamEnd"]);i!=null&&h(e,["audioStreamEnd"],i);const s=c(t,["video"]);s!=null&&h(e,["video"],M_(s));const o=c(t,["text"]);o!=null&&h(e,["text"],o);const a=c(t,["activityStart"]);a!=null&&h(e,["activityStart"],a);const l=c(t,["activityEnd"]);return l!=null&&h(e,["activityEnd"],l),e}function YP(t){const e={},n=c(t,["setupComplete"]);n!=null&&h(e,["setupComplete"],n);const r=c(t,["serverContent"]);r!=null&&h(e,["serverContent"],r);const i=c(t,["toolCall"]);i!=null&&h(e,["toolCall"],i);const s=c(t,["toolCallCancellation"]);s!=null&&h(e,["toolCallCancellation"],s);const o=c(t,["usageMetadata"]);o!=null&&h(e,["usageMetadata"],tI(o));const a=c(t,["goAway"]);a!=null&&h(e,["goAway"],a);const l=c(t,["sessionResumptionUpdate"]);l!=null&&h(e,["sessionResumptionUpdate"],l);const u=c(t,["voiceActivityDetectionSignal"]);return u!=null&&h(e,["voiceActivityDetectionSignal"],u),e}function XP(t){const e={},n=c(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const r=c(t,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const i=c(t,["executableCode"]);i!=null&&h(e,["executableCode"],i);const s=c(t,["fileData"]);s!=null&&h(e,["fileData"],FP(s));const o=c(t,["functionCall"]);o!=null&&h(e,["functionCall"],OP(o));const a=c(t,["functionResponse"]);a!=null&&h(e,["functionResponse"],a);const l=c(t,["inlineData"]);l!=null&&h(e,["inlineData"],df(l));const u=c(t,["text"]);u!=null&&h(e,["text"],u);const f=c(t,["thought"]);f!=null&&h(e,["thought"],f);const p=c(t,["thoughtSignature"]);p!=null&&h(e,["thoughtSignature"],p);const m=c(t,["videoMetadata"]);return m!=null&&h(e,["videoMetadata"],m),e}function QP(t){const e={},n=c(t,["handle"]);if(n!=null&&h(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function G_(t){const e={},n=c(t,["voiceConfig"]);n!=null&&h(e,["voiceConfig"],n);const r=c(t,["languageCode"]);if(r!=null&&h(e,["languageCode"],r),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function ZP(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),h(e,["functionDeclarations"],f)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const i=c(t,["computerUse"]);i!=null&&h(e,["computerUse"],i);const s=c(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const o=c(t,["codeExecution"]);if(o!=null&&h(e,["codeExecution"],o),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(t,["googleMaps"]);a!=null&&h(e,["googleMaps"],BP(a));const l=c(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],qP(l));const u=c(t,["urlContext"]);return u!=null&&h(e,["urlContext"],u),e}function eI(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>jP(m))),h(e,["functionDeclarations"],p)}const r=c(t,["retrieval"]);r!=null&&h(e,["retrieval"],r);const i=c(t,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const s=c(t,["computerUse"]);if(s!=null&&h(e,["computerUse"],s),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=c(t,["codeExecution"]);o!=null&&h(e,["codeExecution"],o);const a=c(t,["enterpriseWebSearch"]);a!=null&&h(e,["enterpriseWebSearch"],a);const l=c(t,["googleMaps"]);l!=null&&h(e,["googleMaps"],l);const u=c(t,["googleSearch"]);u!=null&&h(e,["googleSearch"],u);const f=c(t,["urlContext"]);return f!=null&&h(e,["urlContext"],f),e}function tI(t){const e={},n=c(t,["promptTokenCount"]);n!=null&&h(e,["promptTokenCount"],n);const r=c(t,["cachedContentTokenCount"]);r!=null&&h(e,["cachedContentTokenCount"],r);const i=c(t,["candidatesTokenCount"]);i!=null&&h(e,["responseTokenCount"],i);const s=c(t,["toolUsePromptTokenCount"]);s!=null&&h(e,["toolUsePromptTokenCount"],s);const o=c(t,["thoughtsTokenCount"]);o!=null&&h(e,["thoughtsTokenCount"],o);const a=c(t,["totalTokenCount"]);a!=null&&h(e,["totalTokenCount"],a);const l=c(t,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(S=>S)),h(e,["promptTokensDetails"],g)}const u=c(t,["cacheTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(S=>S)),h(e,["cacheTokensDetails"],g)}const f=c(t,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(S=>S)),h(e,["responseTokensDetails"],g)}const p=c(t,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(S=>S)),h(e,["toolUsePromptTokensDetails"],g)}const m=c(t,["trafficType"]);return m!=null&&h(e,["trafficType"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nI(t){const e={},n=c(t,["data"]);if(n!=null&&h(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function rI(t){const e={},n=c(t,["content"]);n!=null&&h(e,["content"],n);const r=c(t,["citationMetadata"]);r!=null&&h(e,["citationMetadata"],iI(r));const i=c(t,["tokenCount"]);i!=null&&h(e,["tokenCount"],i);const s=c(t,["finishReason"]);s!=null&&h(e,["finishReason"],s);const o=c(t,["avgLogprobs"]);o!=null&&h(e,["avgLogprobs"],o);const a=c(t,["groundingMetadata"]);a!=null&&h(e,["groundingMetadata"],a);const l=c(t,["index"]);l!=null&&h(e,["index"],l);const u=c(t,["logprobsResult"]);u!=null&&h(e,["logprobsResult"],u);const f=c(t,["safetyRatings"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>g)),h(e,["safetyRatings"],m)}const p=c(t,["urlContextMetadata"]);return p!=null&&h(e,["urlContextMetadata"],p),e}function iI(t){const e={},n=c(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),h(e,["citations"],r)}return e}function sI(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],At(t,r));const i=c(e,["contents"]);if(i!=null){let s=Qr(i);Array.isArray(s)&&(s=s.map(o=>o)),h(n,["contents"],s)}return n}function oI(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),h(e,["tokensInfo"],i)}return e}function aI(t){const e={},n=c(t,["values"]);n!=null&&h(e,["values"],n);const r=c(t,["statistics"]);return r!=null&&h(e,["statistics"],lI(r)),e}function lI(t){const e={},n=c(t,["truncated"]);n!=null&&h(e,["truncated"],n);const r=c(t,["token_count"]);return r!=null&&h(e,["tokenCount"],r),e}function Ih(t){const e={},n=c(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>vR(s))),h(e,["parts"],i)}const r=c(t,["role"]);return r!=null&&h(e,["role"],r),e}function uI(t){const e={},n=c(t,["controlType"]);n!=null&&h(e,["controlType"],n);const r=c(t,["enableControlImageComputation"]);return r!=null&&h(e,["computeControl"],r),e}function cI(t){const e={};if(c(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function dI(t,e){const n={},r=c(t,["systemInstruction"]);e!==void 0&&r!=null&&h(e,["systemInstruction"],Xn(r));const i=c(t,["tools"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>X_(a))),h(e,["tools"],o)}const s=c(t,["generationConfig"]);return e!==void 0&&s!=null&&h(e,["generationConfig"],nR(s)),n}function fI(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],At(t,r));const i=c(e,["contents"]);if(i!=null){let o=Qr(i);Array.isArray(o)&&(o=o.map(a=>Ih(a))),h(n,["contents"],o)}const s=c(e,["config"]);return s!=null&&cI(s),n}function hI(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],At(t,r));const i=c(e,["contents"]);if(i!=null){let o=Qr(i);Array.isArray(o)&&(o=o.map(a=>a)),h(n,["contents"],o)}const s=c(e,["config"]);return s!=null&&dI(s,n),n}function pI(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["totalTokens"]);r!=null&&h(e,["totalTokens"],r);const i=c(t,["cachedContentTokenCount"]);return i!=null&&h(e,["cachedContentTokenCount"],i),e}function mI(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["totalTokens"]);return r!=null&&h(e,["totalTokens"],r),e}function gI(t,e){const n={},r=c(e,["model"]);return r!=null&&h(n,["_url","name"],At(t,r)),n}function vI(t,e){const n={},r=c(e,["model"]);return r!=null&&h(n,["_url","name"],At(t,r)),n}function yI(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function wI(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}function xI(t,e){const n={},r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const i=c(t,["negativePrompt"]);e!==void 0&&i!=null&&h(e,["parameters","negativePrompt"],i);const s=c(t,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const o=c(t,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const a=c(t,["guidanceScale"]);e!==void 0&&a!=null&&h(e,["parameters","guidanceScale"],a);const l=c(t,["seed"]);e!==void 0&&l!=null&&h(e,["parameters","seed"],l);const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&h(e,["parameters","safetySetting"],u);const f=c(t,["personGeneration"]);e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f);const p=c(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&h(e,["parameters","includeSafetyAttributes"],p);const m=c(t,["includeRaiReason"]);e!==void 0&&m!=null&&h(e,["parameters","includeRaiReason"],m);const g=c(t,["language"]);e!==void 0&&g!=null&&h(e,["parameters","language"],g);const S=c(t,["outputMimeType"]);e!==void 0&&S!=null&&h(e,["parameters","outputOptions","mimeType"],S);const _=c(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&h(e,["parameters","outputOptions","compressionQuality"],_);const E=c(t,["addWatermark"]);e!==void 0&&E!=null&&h(e,["parameters","addWatermark"],E);const b=c(t,["labels"]);e!==void 0&&b!=null&&h(e,["labels"],b);const N=c(t,["editMode"]);e!==void 0&&N!=null&&h(e,["parameters","editMode"],N);const T=c(t,["baseSteps"]);return e!==void 0&&T!=null&&h(e,["parameters","editConfig","baseSteps"],T),n}function bI(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],At(t,r));const i=c(e,["prompt"]);i!=null&&h(n,["instances[0]","prompt"],i);const s=c(e,["referenceImages"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>SR(l))),h(n,["instances[0]","referenceImages"],a)}const o=c(e,["config"]);return o!=null&&xI(o,n),n}function _I(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Rh(s))),h(e,["generatedImages"],i)}return e}function SI(t,e){const n={},r=c(t,["taskType"]);e!==void 0&&r!=null&&h(e,["requests[]","taskType"],r);const i=c(t,["title"]);e!==void 0&&i!=null&&h(e,["requests[]","title"],i);const s=c(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&h(e,["requests[]","outputDimensionality"],s),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function NI(t,e){const n={},r=c(t,["taskType"]);e!==void 0&&r!=null&&h(e,["instances[]","task_type"],r);const i=c(t,["title"]);e!==void 0&&i!=null&&h(e,["instances[]","title"],i);const s=c(t,["outputDimensionality"]);e!==void 0&&s!=null&&h(e,["parameters","outputDimensionality"],s);const o=c(t,["mimeType"]);e!==void 0&&o!=null&&h(e,["instances[]","mimeType"],o);const a=c(t,["autoTruncate"]);return e!==void 0&&a!=null&&h(e,["parameters","autoTruncate"],a),n}function AI(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],At(t,r));const i=c(e,["contents"]);if(i!=null){let a=vv(t,i);Array.isArray(a)&&(a=a.map(l=>l)),h(n,["requests[]","content"],a)}const s=c(e,["config"]);s!=null&&SI(s,n);const o=c(e,["model"]);return o!==void 0&&h(n,["requests[]","model"],At(t,o)),n}function EI(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],At(t,r));const i=c(e,["contents"]);if(i!=null){let o=vv(t,i);Array.isArray(o)&&(o=o.map(a=>a)),h(n,["instances[]","content"],o)}const s=c(e,["config"]);return s!=null&&NI(s,n),n}function TI(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),h(e,["embeddings"],s)}const i=c(t,["metadata"]);return i!=null&&h(e,["metadata"],i),e}function CI(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["predictions[]","embeddings"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>aI(o))),h(e,["embeddings"],s)}const i=c(t,["metadata"]);return i!=null&&h(e,["metadata"],i),e}function kI(t){const e={},n=c(t,["endpoint"]);n!=null&&h(e,["name"],n);const r=c(t,["deployedModelId"]);return r!=null&&h(e,["deployedModelId"],r),e}function PI(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function II(t){const e={},n=c(t,["id"]);n!=null&&h(e,["id"],n);const r=c(t,["args"]);r!=null&&h(e,["args"],r);const i=c(t,["name"]);if(i!=null&&h(e,["name"],i),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function RI(t){const e={},n=c(t,["mode"]);n!=null&&h(e,["mode"],n);const r=c(t,["allowedFunctionNames"]);if(r!=null&&h(e,["allowedFunctionNames"],r),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function LI(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&h(e,["description"],n);const r=c(t,["name"]);r!=null&&h(e,["name"],r);const i=c(t,["parameters"]);i!=null&&h(e,["parameters"],i);const s=c(t,["parametersJsonSchema"]);s!=null&&h(e,["parametersJsonSchema"],s);const o=c(t,["response"]);o!=null&&h(e,["response"],o);const a=c(t,["responseJsonSchema"]);return a!=null&&h(e,["responseJsonSchema"],a),e}function MI(t,e,n){const r={},i=c(e,["systemInstruction"]);n!==void 0&&i!=null&&h(n,["systemInstruction"],Ih(Xn(i)));const s=c(e,["temperature"]);s!=null&&h(r,["temperature"],s);const o=c(e,["topP"]);o!=null&&h(r,["topP"],o);const a=c(e,["topK"]);a!=null&&h(r,["topK"],a);const l=c(e,["candidateCount"]);l!=null&&h(r,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&h(r,["maxOutputTokens"],u);const f=c(e,["stopSequences"]);f!=null&&h(r,["stopSequences"],f);const p=c(e,["responseLogprobs"]);p!=null&&h(r,["responseLogprobs"],p);const m=c(e,["logprobs"]);m!=null&&h(r,["logprobs"],m);const g=c(e,["presencePenalty"]);g!=null&&h(r,["presencePenalty"],g);const S=c(e,["frequencyPenalty"]);S!=null&&h(r,["frequencyPenalty"],S);const _=c(e,["seed"]);_!=null&&h(r,["seed"],_);const E=c(e,["responseMimeType"]);E!=null&&h(r,["responseMimeType"],E);const b=c(e,["responseSchema"]);b!=null&&h(r,["responseSchema"],yv(b));const N=c(e,["responseJsonSchema"]);if(N!=null&&h(r,["responseJsonSchema"],N),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=c(e,["safetySettings"]);if(n!==void 0&&T!=null){let O=T;Array.isArray(O)&&(O=O.map(V=>NR(V))),h(n,["safetySettings"],O)}const M=c(e,["tools"]);if(n!==void 0&&M!=null){let O=Ul(M);Array.isArray(O)&&(O=O.map(V=>IR(jl(V)))),h(n,["tools"],O)}const U=c(e,["toolConfig"]);if(n!==void 0&&U!=null&&h(n,["toolConfig"],PR(U)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const Y=c(e,["cachedContent"]);n!==void 0&&Y!=null&&h(n,["cachedContent"],As(t,Y));const H=c(e,["responseModalities"]);H!=null&&h(r,["responseModalities"],H);const B=c(e,["mediaResolution"]);B!=null&&h(r,["mediaResolution"],B);const W=c(e,["speechConfig"]);if(W!=null&&h(r,["speechConfig"],wv(W)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ne=c(e,["thinkingConfig"]);ne!=null&&h(r,["thinkingConfig"],ne);const D=c(e,["imageConfig"]);D!=null&&h(r,["imageConfig"],aR(D));const j=c(e,["enableEnhancedCivicAnswers"]);return j!=null&&h(r,["enableEnhancedCivicAnswers"],j),r}function DI(t,e,n){const r={},i=c(e,["systemInstruction"]);n!==void 0&&i!=null&&h(n,["systemInstruction"],Xn(i));const s=c(e,["temperature"]);s!=null&&h(r,["temperature"],s);const o=c(e,["topP"]);o!=null&&h(r,["topP"],o);const a=c(e,["topK"]);a!=null&&h(r,["topK"],a);const l=c(e,["candidateCount"]);l!=null&&h(r,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&h(r,["maxOutputTokens"],u);const f=c(e,["stopSequences"]);f!=null&&h(r,["stopSequences"],f);const p=c(e,["responseLogprobs"]);p!=null&&h(r,["responseLogprobs"],p);const m=c(e,["logprobs"]);m!=null&&h(r,["logprobs"],m);const g=c(e,["presencePenalty"]);g!=null&&h(r,["presencePenalty"],g);const S=c(e,["frequencyPenalty"]);S!=null&&h(r,["frequencyPenalty"],S);const _=c(e,["seed"]);_!=null&&h(r,["seed"],_);const E=c(e,["responseMimeType"]);E!=null&&h(r,["responseMimeType"],E);const b=c(e,["responseSchema"]);b!=null&&h(r,["responseSchema"],yv(b));const N=c(e,["responseJsonSchema"]);N!=null&&h(r,["responseJsonSchema"],N);const T=c(e,["routingConfig"]);T!=null&&h(r,["routingConfig"],T);const M=c(e,["modelSelectionConfig"]);M!=null&&h(r,["modelConfig"],M);const U=c(e,["safetySettings"]);if(n!==void 0&&U!=null){let le=U;Array.isArray(le)&&(le=le.map(we=>we)),h(n,["safetySettings"],le)}const Y=c(e,["tools"]);if(n!==void 0&&Y!=null){let le=Ul(Y);Array.isArray(le)&&(le=le.map(we=>X_(jl(we)))),h(n,["tools"],le)}const H=c(e,["toolConfig"]);n!==void 0&&H!=null&&h(n,["toolConfig"],H);const B=c(e,["labels"]);n!==void 0&&B!=null&&h(n,["labels"],B);const W=c(e,["cachedContent"]);n!==void 0&&W!=null&&h(n,["cachedContent"],As(t,W));const ne=c(e,["responseModalities"]);ne!=null&&h(r,["responseModalities"],ne);const D=c(e,["mediaResolution"]);D!=null&&h(r,["mediaResolution"],D);const j=c(e,["speechConfig"]);j!=null&&h(r,["speechConfig"],Y_(wv(j)));const O=c(e,["audioTimestamp"]);O!=null&&h(r,["audioTimestamp"],O);const V=c(e,["thinkingConfig"]);V!=null&&h(r,["thinkingConfig"],V);const he=c(e,["imageConfig"]);if(he!=null&&h(r,["imageConfig"],lR(he)),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function Q2(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],At(t,r));const i=c(e,["contents"]);if(i!=null){let o=Qr(i);Array.isArray(o)&&(o=o.map(a=>Ih(a))),h(n,["contents"],o)}const s=c(e,["config"]);return s!=null&&h(n,["generationConfig"],MI(t,s,n)),n}function Z2(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],At(t,r));const i=c(e,["contents"]);if(i!=null){let o=Qr(i);Array.isArray(o)&&(o=o.map(a=>a)),h(n,["contents"],o)}const s=c(e,["config"]);return s!=null&&h(n,["generationConfig"],DI(t,s,n)),n}function e5(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>rI(u))),h(e,["candidates"],l)}const i=c(t,["modelVersion"]);i!=null&&h(e,["modelVersion"],i);const s=c(t,["promptFeedback"]);s!=null&&h(e,["promptFeedback"],s);const o=c(t,["responseId"]);o!=null&&h(e,["responseId"],o);const a=c(t,["usageMetadata"]);return a!=null&&h(e,["usageMetadata"],a),e}function t5(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),h(e,["candidates"],u)}const i=c(t,["createTime"]);i!=null&&h(e,["createTime"],i);const s=c(t,["modelVersion"]);s!=null&&h(e,["modelVersion"],s);const o=c(t,["promptFeedback"]);o!=null&&h(e,["promptFeedback"],o);const a=c(t,["responseId"]);a!=null&&h(e,["responseId"],a);const l=c(t,["usageMetadata"]);return l!=null&&h(e,["usageMetadata"],l),e}function FI(t,e){const n={};if(c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=c(t,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const i=c(t,["aspectRatio"]);e!==void 0&&i!=null&&h(e,["parameters","aspectRatio"],i);const s=c(t,["guidanceScale"]);if(e!==void 0&&s!=null&&h(e,["parameters","guidanceScale"],s),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=c(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&h(e,["parameters","safetySetting"],o);const a=c(t,["personGeneration"]);e!==void 0&&a!=null&&h(e,["parameters","personGeneration"],a);const l=c(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&h(e,["parameters","includeSafetyAttributes"],l);const u=c(t,["includeRaiReason"]);e!==void 0&&u!=null&&h(e,["parameters","includeRaiReason"],u);const f=c(t,["language"]);e!==void 0&&f!=null&&h(e,["parameters","language"],f);const p=c(t,["outputMimeType"]);e!==void 0&&p!=null&&h(e,["parameters","outputOptions","mimeType"],p);const m=c(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&h(e,["parameters","outputOptions","compressionQuality"],m),c(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=c(t,["imageSize"]);if(e!==void 0&&g!=null&&h(e,["parameters","sampleImageSize"],g),c(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function OI(t,e){const n={},r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const i=c(t,["negativePrompt"]);e!==void 0&&i!=null&&h(e,["parameters","negativePrompt"],i);const s=c(t,["numberOfImages"]);e!==void 0&&s!=null&&h(e,["parameters","sampleCount"],s);const o=c(t,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const a=c(t,["guidanceScale"]);e!==void 0&&a!=null&&h(e,["parameters","guidanceScale"],a);const l=c(t,["seed"]);e!==void 0&&l!=null&&h(e,["parameters","seed"],l);const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&h(e,["parameters","safetySetting"],u);const f=c(t,["personGeneration"]);e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f);const p=c(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&h(e,["parameters","includeSafetyAttributes"],p);const m=c(t,["includeRaiReason"]);e!==void 0&&m!=null&&h(e,["parameters","includeRaiReason"],m);const g=c(t,["language"]);e!==void 0&&g!=null&&h(e,["parameters","language"],g);const S=c(t,["outputMimeType"]);e!==void 0&&S!=null&&h(e,["parameters","outputOptions","mimeType"],S);const _=c(t,["outputCompressionQuality"]);e!==void 0&&_!=null&&h(e,["parameters","outputOptions","compressionQuality"],_);const E=c(t,["addWatermark"]);e!==void 0&&E!=null&&h(e,["parameters","addWatermark"],E);const b=c(t,["labels"]);e!==void 0&&b!=null&&h(e,["labels"],b);const N=c(t,["imageSize"]);e!==void 0&&N!=null&&h(e,["parameters","sampleImageSize"],N);const T=c(t,["enhancePrompt"]);return e!==void 0&&T!=null&&h(e,["parameters","enhancePrompt"],T),n}function jI(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],At(t,r));const i=c(e,["prompt"]);i!=null&&h(n,["instances[0]","prompt"],i);const s=c(e,["config"]);return s!=null&&FI(s,n),n}function UI(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],At(t,r));const i=c(e,["prompt"]);i!=null&&h(n,["instances[0]","prompt"],i);const s=c(e,["config"]);return s!=null&&OI(s,n),n}function BI(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>QI(o))),h(e,["generatedImages"],s)}const i=c(t,["positivePromptSafetyAttributes"]);return i!=null&&h(e,["positivePromptSafetyAttributes"],J_(i)),e}function qI(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>Rh(o))),h(e,["generatedImages"],s)}const i=c(t,["positivePromptSafetyAttributes"]);return i!=null&&h(e,["positivePromptSafetyAttributes"],K_(i)),e}function VI(t,e){const n={},r=c(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r),c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=c(t,["durationSeconds"]);if(e!==void 0&&i!=null&&h(e,["parameters","durationSeconds"],i),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=c(t,["aspectRatio"]);e!==void 0&&s!=null&&h(e,["parameters","aspectRatio"],s);const o=c(t,["resolution"]);e!==void 0&&o!=null&&h(e,["parameters","resolution"],o);const a=c(t,["personGeneration"]);if(e!==void 0&&a!=null&&h(e,["parameters","personGeneration"],a),c(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=c(t,["negativePrompt"]);e!==void 0&&l!=null&&h(e,["parameters","negativePrompt"],l);const u=c(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&h(e,["parameters","enhancePrompt"],u),c(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=c(t,["lastFrame"]);e!==void 0&&f!=null&&h(e,["instances[0]","lastFrame"],Lh(f));const p=c(t,["referenceImages"]);if(e!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>HR(g))),h(e,["instances[0]","referenceImages"],m)}if(c(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function $I(t,e){const n={},r=c(t,["numberOfVideos"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const s=c(t,["fps"]);e!==void 0&&s!=null&&h(e,["parameters","fps"],s);const o=c(t,["durationSeconds"]);e!==void 0&&o!=null&&h(e,["parameters","durationSeconds"],o);const a=c(t,["seed"]);e!==void 0&&a!=null&&h(e,["parameters","seed"],a);const l=c(t,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const u=c(t,["resolution"]);e!==void 0&&u!=null&&h(e,["parameters","resolution"],u);const f=c(t,["personGeneration"]);e!==void 0&&f!=null&&h(e,["parameters","personGeneration"],f);const p=c(t,["pubsubTopic"]);e!==void 0&&p!=null&&h(e,["parameters","pubsubTopic"],p);const m=c(t,["negativePrompt"]);e!==void 0&&m!=null&&h(e,["parameters","negativePrompt"],m);const g=c(t,["enhancePrompt"]);e!==void 0&&g!=null&&h(e,["parameters","enhancePrompt"],g);const S=c(t,["generateAudio"]);e!==void 0&&S!=null&&h(e,["parameters","generateAudio"],S);const _=c(t,["lastFrame"]);e!==void 0&&_!=null&&h(e,["instances[0]","lastFrame"],Ci(_));const E=c(t,["referenceImages"]);if(e!==void 0&&E!=null){let T=E;Array.isArray(T)&&(T=T.map(M=>zR(M))),h(e,["instances[0]","referenceImages"],T)}const b=c(t,["mask"]);e!==void 0&&b!=null&&h(e,["instances[0]","mask"],$R(b));const N=c(t,["compressionQuality"]);return e!==void 0&&N!=null&&h(e,["parameters","compressionQuality"],N),n}function HI(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["metadata"]);r!=null&&h(e,["metadata"],r);const i=c(t,["done"]);i!=null&&h(e,["done"],i);const s=c(t,["error"]);s!=null&&h(e,["error"],s);const o=c(t,["response","generateVideoResponse"]);return o!=null&&h(e,["response"],JI(o)),e}function zI(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["metadata"]);r!=null&&h(e,["metadata"],r);const i=c(t,["done"]);i!=null&&h(e,["done"],i);const s=c(t,["error"]);s!=null&&h(e,["error"],s);const o=c(t,["response"]);return o!=null&&h(e,["response"],KI(o)),e}function GI(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],At(t,r));const i=c(e,["prompt"]);i!=null&&h(n,["instances[0]","prompt"],i);const s=c(e,["image"]);s!=null&&h(n,["instances[0]","image"],Lh(s));const o=c(e,["video"]);o!=null&&h(n,["instances[0]","video"],Q_(o));const a=c(e,["source"]);a!=null&&YI(a,n);const l=c(e,["config"]);return l!=null&&VI(l,n),n}function WI(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],At(t,r));const i=c(e,["prompt"]);i!=null&&h(n,["instances[0]","prompt"],i);const s=c(e,["image"]);s!=null&&h(n,["instances[0]","image"],Ci(s));const o=c(e,["video"]);o!=null&&h(n,["instances[0]","video"],Z_(o));const a=c(e,["source"]);a!=null&&XI(a,n);const l=c(e,["config"]);return l!=null&&$I(l,n),n}function JI(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>eR(o))),h(e,["generatedVideos"],s)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&h(e,["raiMediaFilteredCount"],r);const i=c(t,["raiMediaFilteredReasons"]);return i!=null&&h(e,["raiMediaFilteredReasons"],i),e}function KI(t){const e={},n=c(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>tR(o))),h(e,["generatedVideos"],s)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&h(e,["raiMediaFilteredCount"],r);const i=c(t,["raiMediaFilteredReasons"]);return i!=null&&h(e,["raiMediaFilteredReasons"],i),e}function YI(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const i=c(t,["image"]);e!==void 0&&i!=null&&h(e,["instances[0]","image"],Lh(i));const s=c(t,["video"]);return e!==void 0&&s!=null&&h(e,["instances[0]","video"],Q_(s)),n}function XI(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const i=c(t,["image"]);e!==void 0&&i!=null&&h(e,["instances[0]","image"],Ci(i));const s=c(t,["video"]);return e!==void 0&&s!=null&&h(e,["instances[0]","video"],Z_(s)),n}function QI(t){const e={},n=c(t,["_self"]);n!=null&&h(e,["image"],uR(n));const r=c(t,["raiFilteredReason"]);r!=null&&h(e,["raiFilteredReason"],r);const i=c(t,["_self"]);return i!=null&&h(e,["safetyAttributes"],J_(i)),e}function Rh(t){const e={},n=c(t,["_self"]);n!=null&&h(e,["image"],W_(n));const r=c(t,["raiFilteredReason"]);r!=null&&h(e,["raiFilteredReason"],r);const i=c(t,["_self"]);i!=null&&h(e,["safetyAttributes"],K_(i));const s=c(t,["prompt"]);return s!=null&&h(e,["enhancedPrompt"],s),e}function ZI(t){const e={},n=c(t,["_self"]);n!=null&&h(e,["mask"],W_(n));const r=c(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),h(e,["labels"],i)}return e}function eR(t){const e={},n=c(t,["video"]);return n!=null&&h(e,["video"],qR(n)),e}function tR(t){const e={},n=c(t,["_self"]);return n!=null&&h(e,["video"],VR(n)),e}function nR(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&h(e,["modelConfig"],n);const r=c(t,["responseJsonSchema"]);r!=null&&h(e,["responseJsonSchema"],r);const i=c(t,["audioTimestamp"]);i!=null&&h(e,["audioTimestamp"],i);const s=c(t,["candidateCount"]);s!=null&&h(e,["candidateCount"],s);const o=c(t,["enableAffectiveDialog"]);o!=null&&h(e,["enableAffectiveDialog"],o);const a=c(t,["frequencyPenalty"]);a!=null&&h(e,["frequencyPenalty"],a);const l=c(t,["logprobs"]);l!=null&&h(e,["logprobs"],l);const u=c(t,["maxOutputTokens"]);u!=null&&h(e,["maxOutputTokens"],u);const f=c(t,["mediaResolution"]);f!=null&&h(e,["mediaResolution"],f);const p=c(t,["presencePenalty"]);p!=null&&h(e,["presencePenalty"],p);const m=c(t,["responseLogprobs"]);m!=null&&h(e,["responseLogprobs"],m);const g=c(t,["responseMimeType"]);g!=null&&h(e,["responseMimeType"],g);const S=c(t,["responseModalities"]);S!=null&&h(e,["responseModalities"],S);const _=c(t,["responseSchema"]);_!=null&&h(e,["responseSchema"],_);const E=c(t,["routingConfig"]);E!=null&&h(e,["routingConfig"],E);const b=c(t,["seed"]);b!=null&&h(e,["seed"],b);const N=c(t,["speechConfig"]);N!=null&&h(e,["speechConfig"],Y_(N));const T=c(t,["stopSequences"]);T!=null&&h(e,["stopSequences"],T);const M=c(t,["temperature"]);M!=null&&h(e,["temperature"],M);const U=c(t,["thinkingConfig"]);U!=null&&h(e,["thinkingConfig"],U);const Y=c(t,["topK"]);Y!=null&&h(e,["topK"],Y);const H=c(t,["topP"]);if(H!=null&&h(e,["topP"],H),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function rR(t,e){const n={},r=c(e,["model"]);return r!=null&&h(n,["_url","name"],At(t,r)),n}function iR(t,e){const n={},r=c(e,["model"]);return r!=null&&h(n,["_url","name"],At(t,r)),n}function sR(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function oR(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function aR(t){const e={},n=c(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const r=c(t,["imageSize"]);if(r!=null&&h(e,["imageSize"],r),c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function lR(t){const e={},n=c(t,["aspectRatio"]);n!=null&&h(e,["aspectRatio"],n);const r=c(t,["imageSize"]);r!=null&&h(e,["imageSize"],r);const i=c(t,["outputMimeType"]);i!=null&&h(e,["imageOutputOptions","mimeType"],i);const s=c(t,["outputCompressionQuality"]);return s!=null&&h(e,["imageOutputOptions","compressionQuality"],s),e}function uR(t){const e={},n=c(t,["bytesBase64Encoded"]);n!=null&&h(e,["imageBytes"],yo(n));const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function W_(t){const e={},n=c(t,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const r=c(t,["bytesBase64Encoded"]);r!=null&&h(e,["imageBytes"],yo(r));const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function Lh(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=c(t,["imageBytes"]);n!=null&&h(e,["bytesBase64Encoded"],yo(n));const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function Ci(t){const e={},n=c(t,["gcsUri"]);n!=null&&h(e,["gcsUri"],n);const r=c(t,["imageBytes"]);r!=null&&h(e,["bytesBase64Encoded"],yo(r));const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function cR(t,e,n){const r={},i=c(e,["pageSize"]);n!==void 0&&i!=null&&h(n,["_query","pageSize"],i);const s=c(e,["pageToken"]);n!==void 0&&s!=null&&h(n,["_query","pageToken"],s);const o=c(e,["filter"]);n!==void 0&&o!=null&&h(n,["_query","filter"],o);const a=c(e,["queryBase"]);return n!==void 0&&a!=null&&h(n,["_url","models_url"],U_(t,a)),r}function dR(t,e,n){const r={},i=c(e,["pageSize"]);n!==void 0&&i!=null&&h(n,["_query","pageSize"],i);const s=c(e,["pageToken"]);n!==void 0&&s!=null&&h(n,["_query","pageToken"],s);const o=c(e,["filter"]);n!==void 0&&o!=null&&h(n,["_query","filter"],o);const a=c(e,["queryBase"]);return n!==void 0&&a!=null&&h(n,["_url","models_url"],U_(t,a)),r}function fR(t,e){const n={},r=c(e,["config"]);return r!=null&&cR(t,r,n),n}function hR(t,e){const n={},r=c(e,["config"]);return r!=null&&dR(t,r,n),n}function pR(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=c(t,["_self"]);if(i!=null){let s=B_(i);Array.isArray(s)&&(s=s.map(o=>qm(o))),h(e,["models"],s)}return e}function mR(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=c(t,["_self"]);if(i!=null){let s=B_(i);Array.isArray(s)&&(s=s.map(o=>Vm(o))),h(e,["models"],s)}return e}function gR(t){const e={},n=c(t,["maskMode"]);n!=null&&h(e,["maskMode"],n);const r=c(t,["segmentationClasses"]);r!=null&&h(e,["maskClasses"],r);const i=c(t,["maskDilation"]);return i!=null&&h(e,["dilation"],i),e}function qm(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["displayName"]);r!=null&&h(e,["displayName"],r);const i=c(t,["description"]);i!=null&&h(e,["description"],i);const s=c(t,["version"]);s!=null&&h(e,["version"],s);const o=c(t,["_self"]);o!=null&&h(e,["tunedModelInfo"],RR(o));const a=c(t,["inputTokenLimit"]);a!=null&&h(e,["inputTokenLimit"],a);const l=c(t,["outputTokenLimit"]);l!=null&&h(e,["outputTokenLimit"],l);const u=c(t,["supportedGenerationMethods"]);u!=null&&h(e,["supportedActions"],u);const f=c(t,["temperature"]);f!=null&&h(e,["temperature"],f);const p=c(t,["maxTemperature"]);p!=null&&h(e,["maxTemperature"],p);const m=c(t,["topP"]);m!=null&&h(e,["topP"],m);const g=c(t,["topK"]);g!=null&&h(e,["topK"],g);const S=c(t,["thinking"]);return S!=null&&h(e,["thinking"],S),e}function Vm(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["displayName"]);r!=null&&h(e,["displayName"],r);const i=c(t,["description"]);i!=null&&h(e,["description"],i);const s=c(t,["versionId"]);s!=null&&h(e,["version"],s);const o=c(t,["deployedModels"]);if(o!=null){let p=o;Array.isArray(p)&&(p=p.map(m=>kI(m))),h(e,["endpoints"],p)}const a=c(t,["labels"]);a!=null&&h(e,["labels"],a);const l=c(t,["_self"]);l!=null&&h(e,["tunedModelInfo"],LR(l));const u=c(t,["defaultCheckpointId"]);u!=null&&h(e,["defaultCheckpointId"],u);const f=c(t,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>m)),h(e,["checkpoints"],p)}return e}function vR(t){const e={},n=c(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const r=c(t,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const i=c(t,["executableCode"]);i!=null&&h(e,["executableCode"],i);const s=c(t,["fileData"]);s!=null&&h(e,["fileData"],PI(s));const o=c(t,["functionCall"]);o!=null&&h(e,["functionCall"],II(o));const a=c(t,["functionResponse"]);a!=null&&h(e,["functionResponse"],a);const l=c(t,["inlineData"]);l!=null&&h(e,["inlineData"],nI(l));const u=c(t,["text"]);u!=null&&h(e,["text"],u);const f=c(t,["thought"]);f!=null&&h(e,["thought"],f);const p=c(t,["thoughtSignature"]);p!=null&&h(e,["thoughtSignature"],p);const m=c(t,["videoMetadata"]);return m!=null&&h(e,["videoMetadata"],m),e}function yR(t){const e={},n=c(t,["productImage"]);return n!=null&&h(e,["image"],Ci(n)),e}function wR(t,e){const n={},r=c(t,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const i=c(t,["baseSteps"]);e!==void 0&&i!=null&&h(e,["parameters","baseSteps"],i);const s=c(t,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const o=c(t,["seed"]);e!==void 0&&o!=null&&h(e,["parameters","seed"],o);const a=c(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&h(e,["parameters","safetySetting"],a);const l=c(t,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const u=c(t,["addWatermark"]);e!==void 0&&u!=null&&h(e,["parameters","addWatermark"],u);const f=c(t,["outputMimeType"]);e!==void 0&&f!=null&&h(e,["parameters","outputOptions","mimeType"],f);const p=c(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&h(e,["parameters","outputOptions","compressionQuality"],p);const m=c(t,["enhancePrompt"]);e!==void 0&&m!=null&&h(e,["parameters","enhancePrompt"],m);const g=c(t,["labels"]);return e!==void 0&&g!=null&&h(e,["labels"],g),n}function xR(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],At(t,r));const i=c(e,["source"]);i!=null&&_R(i,n);const s=c(e,["config"]);return s!=null&&wR(s,n),n}function bR(t){const e={},n=c(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Rh(i))),h(e,["generatedImages"],r)}return e}function _R(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const i=c(t,["personImage"]);e!==void 0&&i!=null&&h(e,["instances[0]","personImage","image"],Ci(i));const s=c(t,["productImages"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>yR(a))),h(e,["instances[0]","productImages"],o)}return n}function SR(t){const e={},n=c(t,["referenceImage"]);n!=null&&h(e,["referenceImage"],Ci(n));const r=c(t,["referenceId"]);r!=null&&h(e,["referenceId"],r);const i=c(t,["referenceType"]);i!=null&&h(e,["referenceType"],i);const s=c(t,["maskImageConfig"]);s!=null&&h(e,["maskImageConfig"],gR(s));const o=c(t,["controlImageConfig"]);o!=null&&h(e,["controlImageConfig"],uI(o));const a=c(t,["styleImageConfig"]);a!=null&&h(e,["styleImageConfig"],a);const l=c(t,["subjectImageConfig"]);return l!=null&&h(e,["subjectImageConfig"],l),e}function J_(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const r=c(t,["safetyAttributes","scores"]);r!=null&&h(e,["scores"],r);const i=c(t,["contentType"]);return i!=null&&h(e,["contentType"],i),e}function K_(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&h(e,["categories"],n);const r=c(t,["safetyAttributes","scores"]);r!=null&&h(e,["scores"],r);const i=c(t,["contentType"]);return i!=null&&h(e,["contentType"],i),e}function NR(t){const e={},n=c(t,["category"]);if(n!=null&&h(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=c(t,["threshold"]);return r!=null&&h(e,["threshold"],r),e}function AR(t){const e={},n=c(t,["image"]);return n!=null&&h(e,["image"],Ci(n)),e}function ER(t,e){const n={},r=c(t,["mode"]);e!==void 0&&r!=null&&h(e,["parameters","mode"],r);const i=c(t,["maxPredictions"]);e!==void 0&&i!=null&&h(e,["parameters","maxPredictions"],i);const s=c(t,["confidenceThreshold"]);e!==void 0&&s!=null&&h(e,["parameters","confidenceThreshold"],s);const o=c(t,["maskDilation"]);e!==void 0&&o!=null&&h(e,["parameters","maskDilation"],o);const a=c(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&h(e,["parameters","binaryColorThreshold"],a);const l=c(t,["labels"]);return e!==void 0&&l!=null&&h(e,["labels"],l),n}function TR(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],At(t,r));const i=c(e,["source"]);i!=null&&kR(i,n);const s=c(e,["config"]);return s!=null&&ER(s,n),n}function CR(t){const e={},n=c(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>ZI(i))),h(e,["generatedMasks"],r)}return e}function kR(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&h(e,["instances[0]","prompt"],r);const i=c(t,["image"]);e!==void 0&&i!=null&&h(e,["instances[0]","image"],Ci(i));const s=c(t,["scribbleImage"]);return e!==void 0&&s!=null&&h(e,["instances[0]","scribble"],AR(s)),n}function Y_(t){const e={},n=c(t,["voiceConfig"]);n!=null&&h(e,["voiceConfig"],n);const r=c(t,["languageCode"]);if(r!=null&&h(e,["languageCode"],r),c(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function PR(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&h(e,["functionCallingConfig"],RI(n));const r=c(t,["retrievalConfig"]);return r!=null&&h(e,["retrievalConfig"],r),e}function IR(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),h(e,["functionDeclarations"],f)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const i=c(t,["computerUse"]);i!=null&&h(e,["computerUse"],i);const s=c(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const o=c(t,["codeExecution"]);if(o!=null&&h(e,["codeExecution"],o),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(t,["googleMaps"]);a!=null&&h(e,["googleMaps"],sR(a));const l=c(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],oR(l));const u=c(t,["urlContext"]);return u!=null&&h(e,["urlContext"],u),e}function X_(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>LI(m))),h(e,["functionDeclarations"],p)}const r=c(t,["retrieval"]);r!=null&&h(e,["retrieval"],r);const i=c(t,["googleSearchRetrieval"]);i!=null&&h(e,["googleSearchRetrieval"],i);const s=c(t,["computerUse"]);if(s!=null&&h(e,["computerUse"],s),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=c(t,["codeExecution"]);o!=null&&h(e,["codeExecution"],o);const a=c(t,["enterpriseWebSearch"]);a!=null&&h(e,["enterpriseWebSearch"],a);const l=c(t,["googleMaps"]);l!=null&&h(e,["googleMaps"],l);const u=c(t,["googleSearch"]);u!=null&&h(e,["googleSearch"],u);const f=c(t,["urlContext"]);return f!=null&&h(e,["urlContext"],f),e}function RR(t){const e={},n=c(t,["baseModel"]);n!=null&&h(e,["baseModel"],n);const r=c(t,["createTime"]);r!=null&&h(e,["createTime"],r);const i=c(t,["updateTime"]);return i!=null&&h(e,["updateTime"],i),e}function LR(t){const e={},n=c(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&h(e,["baseModel"],n);const r=c(t,["createTime"]);r!=null&&h(e,["createTime"],r);const i=c(t,["updateTime"]);return i!=null&&h(e,["updateTime"],i),e}function MR(t,e){const n={},r=c(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const i=c(t,["description"]);e!==void 0&&i!=null&&h(e,["description"],i);const s=c(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&h(e,["defaultCheckpointId"],s),n}function DR(t,e){const n={},r=c(t,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const i=c(t,["description"]);e!==void 0&&i!=null&&h(e,["description"],i);const s=c(t,["defaultCheckpointId"]);return e!==void 0&&s!=null&&h(e,["defaultCheckpointId"],s),n}function FR(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","name"],At(t,r));const i=c(e,["config"]);return i!=null&&MR(i,n),n}function OR(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],At(t,r));const i=c(e,["config"]);return i!=null&&DR(i,n),n}function jR(t,e){const n={},r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const i=c(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&h(e,["parameters","safetySetting"],i);const s=c(t,["personGeneration"]);e!==void 0&&s!=null&&h(e,["parameters","personGeneration"],s);const o=c(t,["includeRaiReason"]);e!==void 0&&o!=null&&h(e,["parameters","includeRaiReason"],o);const a=c(t,["outputMimeType"]);e!==void 0&&a!=null&&h(e,["parameters","outputOptions","mimeType"],a);const l=c(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&h(e,["parameters","outputOptions","compressionQuality"],l);const u=c(t,["enhanceInputImage"]);e!==void 0&&u!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],u);const f=c(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const p=c(t,["labels"]);e!==void 0&&p!=null&&h(e,["labels"],p);const m=c(t,["numberOfImages"]);e!==void 0&&m!=null&&h(e,["parameters","sampleCount"],m);const g=c(t,["mode"]);return e!==void 0&&g!=null&&h(e,["parameters","mode"],g),n}function UR(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["_url","model"],At(t,r));const i=c(e,["image"]);i!=null&&h(n,["instances[0]","image"],Ci(i));const s=c(e,["upscaleFactor"]);s!=null&&h(n,["parameters","upscaleConfig","upscaleFactor"],s);const o=c(e,["config"]);return o!=null&&jR(o,n),n}function BR(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Rh(s))),h(e,["generatedImages"],i)}return e}function qR(t){const e={},n=c(t,["uri"]);n!=null&&h(e,["uri"],n);const r=c(t,["encodedVideo"]);r!=null&&h(e,["videoBytes"],yo(r));const i=c(t,["encoding"]);return i!=null&&h(e,["mimeType"],i),e}function VR(t){const e={},n=c(t,["gcsUri"]);n!=null&&h(e,["uri"],n);const r=c(t,["bytesBase64Encoded"]);r!=null&&h(e,["videoBytes"],yo(r));const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function $R(t){const e={},n=c(t,["image"]);n!=null&&h(e,["_self"],Ci(n));const r=c(t,["maskMode"]);return r!=null&&h(e,["maskMode"],r),e}function HR(t){const e={},n=c(t,["image"]);n!=null&&h(e,["image"],Lh(n));const r=c(t,["referenceType"]);return r!=null&&h(e,["referenceType"],r),e}function zR(t){const e={},n=c(t,["image"]);n!=null&&h(e,["image"],Ci(n));const r=c(t,["referenceType"]);return r!=null&&h(e,["referenceType"],r),e}function Q_(t){const e={},n=c(t,["uri"]);n!=null&&h(e,["uri"],n);const r=c(t,["videoBytes"]);r!=null&&h(e,["encodedVideo"],yo(r));const i=c(t,["mimeType"]);return i!=null&&h(e,["encoding"],i),e}function Z_(t){const e={},n=c(t,["uri"]);n!=null&&h(e,["gcsUri"],n);const r=c(t,["videoBytes"]);r!=null&&h(e,["bytesBase64Encoded"],yo(r));const i=c(t,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GR(t,e){const n={},r=c(t,["displayName"]);return e!==void 0&&r!=null&&h(e,["displayName"],r),n}function WR(t){const e={},n=c(t,["config"]);return n!=null&&GR(n,e),e}function JR(t,e){const n={},r=c(t,["force"]);return e!==void 0&&r!=null&&h(e,["_query","force"],r),n}function KR(t){const e={},n=c(t,["name"]);n!=null&&h(e,["_url","name"],n);const r=c(t,["config"]);return r!=null&&JR(r,e),e}function YR(t){const e={},n=c(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function XR(t,e){const n={},r=c(t,["customMetadata"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),h(e,["customMetadata"],s)}const i=c(t,["chunkingConfig"]);return e!==void 0&&i!=null&&h(e,["chunkingConfig"],i),n}function QR(t){const e={},n=c(t,["name"]);n!=null&&h(e,["name"],n);const r=c(t,["metadata"]);r!=null&&h(e,["metadata"],r);const i=c(t,["done"]);i!=null&&h(e,["done"],i);const s=c(t,["error"]);s!=null&&h(e,["error"],s);const o=c(t,["response"]);return o!=null&&h(e,["response"],e6(o)),e}function ZR(t){const e={},n=c(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const r=c(t,["fileName"]);r!=null&&h(e,["fileName"],r);const i=c(t,["config"]);return i!=null&&XR(i,e),e}function e6(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["parent"]);r!=null&&h(e,["parent"],r);const i=c(t,["documentName"]);return i!=null&&h(e,["documentName"],i),e}function t6(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),n}function n6(t){const e={},n=c(t,["config"]);return n!=null&&t6(n,e),e}function r6(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=c(t,["fileSearchStores"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),h(e,["fileSearchStores"],s)}return e}function eS(t,e){const n={},r=c(t,["mimeType"]);e!==void 0&&r!=null&&h(e,["mimeType"],r);const i=c(t,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const s=c(t,["customMetadata"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>l)),h(e,["customMetadata"],a)}const o=c(t,["chunkingConfig"]);return e!==void 0&&o!=null&&h(e,["chunkingConfig"],o),n}function i6(t){const e={},n=c(t,["fileSearchStoreName"]);n!=null&&h(e,["_url","file_search_store_name"],n);const r=c(t,["config"]);return r!=null&&eS(r,e),e}function s6(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&h(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o6="Content-Type",a6="X-Server-Timeout",l6="User-Agent",$m="x-goog-api-client",u6="1.33.0",c6=`google-genai-sdk/${u6}`,d6="v1beta1",f6="v1beta";class h6{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:d6,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:f6,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))i.searchParams.append(o,String(a));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(n))typeof s=="object"?r[i]=Object.assign(Object.assign({},r[i]),s):s!==void 0&&(r[i]=s);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const s=new AbortController,o=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>s.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=o}return n&&n.extraBody!==null&&p6(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await n5(i),new jm(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await n5(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return Ai(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:u,value:f}=yield ct(i.read());if(u){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=s.decode(f,{stream:!0});try{const S=JSON.parse(p);if("error"in S){const _=JSON.parse(JSON.stringify(S.error)),E=_.status,b=_.code,N=`got status: ${E}. ${JSON.stringify(S)}`;if(b>=400&&b<600)throw new Ph({message:N,status:b})}}catch(S){if(S.name==="ApiError")throw S}o+=p;let m=-1,g=0;for(;;){m=-1,g=0;for(const E of l){const b=o.indexOf(E);b!==-1&&(m===-1||b<m)&&(m=b,g=E.length)}if(m===-1)break;const S=o.substring(0,m);o=o.substring(m+g);const _=S.trim();if(_.startsWith(a)){const E=_.substring(a.length).trim();try{const b=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ct(new jm(b))}catch(b){throw new Error(`exception parsing stream chunk ${E}. ${b}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=c6+" "+this.clientOptions.userAgentExtra;return e[l6]=n,e[$m]=n,e[o6]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))r.append(i,s);e.timeout&&e.timeout>0&&r.append(a6,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const l={file:i},u=this.getFileName(e),f=Ve("upload/v1beta/files",l._url),p=await this.fetchUploadUrl(f,i.sizeBytes,i.mimeType,u,l,n==null?void 0:n.httpOptions);return s.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,r){var i;const s=this.clientOptions.uploader,o=await s.stat(n),a=String(o.size),l=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:o.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),p={};r!=null&&eS(r,p);const m=await this.fetchUploadUrl(u,a,l,f,p,r==null?void 0:r.httpOptions);return s.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,s,o){var a;let l={};o?l=o:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const u=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:l});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(a=u==null?void 0:u.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function n5(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new Ph({message:i,status:n}):new Error(i)}}function p6(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(s,o){const a=Object.assign({},s);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const u=o[l],f=a[l];u&&typeof u=="object"&&!Array.isArray(u)&&f&&typeof f=="object"&&!Array.isArray(f)?a[l]=r(f,u):(f&&u&&typeof f!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof f}, New type: ${typeof u}. Overwriting.`),a[l]=u)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const m6="mcp_used/unknown";let g6=!1;function tS(t){for(const e of t)if(v6(e)||typeof e=="object"&&"inputSchema"in e)return!0;return g6}function nS(t){var e;const n=(e=t[$m])!==null&&e!==void 0?e:"";t[$m]=(n+` ${m6}`).trimStart()}function v6(t){return t!==null&&typeof t=="object"&&t instanceof bv}function y6(t){return Ai(this,arguments,function*(n,r=100){let i,s=0;for(;s<r;){const o=yield ct(n.listTools({cursor:i}));for(const a of o.tools)yield yield ct(a),s++;if(!o.nextCursor)break;i=o.nextCursor}})}class bv{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new bv(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const s={},o=[];for(const f of this.mcpClients)try{for(var a=!0,l=(n=void 0,Ei(y6(f))),u;u=await l.next(),e=u.done,!e;a=!0){i=u.value,a=!1;const p=i;o.push(p);const m=p.name;if(s[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);s[m]=f}}catch(p){n={error:p}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),Y3(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const o=await i.callTool({name:r.name,arguments:r.args},void 0,s);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function w6(t,e,n){const r=new V3;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class x6{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=S6(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${a}`;let u=()=>{};const f=new Promise(T=>{u=T}),p=e.callbacks,m=function(){u({})},g=this.apiClient,S={onopen:m,onmessage:T=>{w6(g,p.onmessage,T)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(T){},onclose:(r=p==null?void 0:p.onclose)!==null&&r!==void 0?r:function(T){}},_=this.webSocketFactory.create(l,_6(o),S);_.connect(),await f;const N={setup:{model:At(this.apiClient,e.model)}};return _.send(JSON.stringify(N)),new b6(_,this.apiClient)}}class b6{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=WP(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=GP(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(ol.PLAY)}pause(){this.sendPlaybackControl(ol.PAUSE)}stop(){this.sendPlaybackControl(ol.STOP)}resetContext(){this.sendPlaybackControl(ol.RESET_CONTEXT)}close(){this.conn.close()}}function _6(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function S6(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const N6="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function A6(t,e,n){const r=new q3;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const s=JSON.parse(i);if(t.isVertexAI()){const o=YP(s);Object.assign(r,o)}else Object.assign(r,s);e(r)}class E6{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new x6(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,s,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let f;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&tS(e.config.tools)&&nS(p);const m=P6(p);if(this.apiClient.isVertexAI())f=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,f);else{const W=this.apiClient.getApiKey();let ne="BidiGenerateContent",D="key";W!=null&&W.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ne="BidiGenerateContentConstrained",D="access_token"),f=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${ne}?${D}=${W}`}let g=()=>{};const S=new Promise(W=>{g=W}),_=e.callbacks,E=function(){var W;(W=_==null?void 0:_.onopen)===null||W===void 0||W.call(_),g({})},b=this.apiClient,N={onopen:E,onmessage:W=>{A6(b,_.onmessage,W)},onerror:(n=_==null?void 0:_.onerror)!==null&&n!==void 0?n:function(W){},onclose:(r=_==null?void 0:_.onclose)!==null&&r!==void 0?r:function(W){}},T=this.webSocketFactory.create(f,k6(m),N);T.connect(),await S;let M=At(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&M.startsWith("publishers/")){const W=this.apiClient.getProject(),ne=this.apiClient.getLocation();M=`projects/${W}/locations/${ne}/`+M}let U={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Zf.AUDIO]}:e.config.responseModalities=[Zf.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const Y=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],H=[];for(const W of Y)if(this.isCallableTool(W)){const ne=W;H.push(await ne.tool())}else H.push(W);H.length>0&&(e.config.tools=H);const B={model:M,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?U=zP(this.apiClient,B):U=HP(this.apiClient,B),delete U.config,T.send(JSON.stringify(U)),new C6(T,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const T6={turnComplete:!0};class C6{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Qr(n.turns),e.isVertexAI()||(r=r.map(i=>Ih(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(N6)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},T6),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:KP(e)}:n={realtimeInput:JP(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function k6(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function P6(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const r5=10;function i5(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(yl(o)){i=!0;break}if(!i)return!0;const s=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function yl(t){return"callTool"in t&&typeof t.callTool=="function"}function I6(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>yl(i)))!==null&&r!==void 0?r:!1}function s5(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(yl(r))return;const s=r;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(i)}),n}function o5(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R6 extends Ns{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,s,o,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!I6(n)||i5(n.config))return await this.generateContentInternal(l);const u=s5(n);if(u.length>0){const _=u.map(E=>`tools[${E}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${_}.`)}let f,p;const m=Qr(l.contents),g=(s=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:r5;let S=0;for(;S<g&&(f=await this.generateContentInternal(l),!(!f.functionCalls||f.functionCalls.length===0));){const _=f.candidates[0].content,E=[];for(const b of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(yl(b)){const T=await b.callTool(f.functionCalls);E.push(...T)}S++,p={role:"user",parts:E},l.contents=Qr(l.contents),l.contents.push(_),l.contents.push(p),o5(l.config)&&(m.push(_),m.push(p))}return o5(l.config)&&(f.automaticFunctionCallingHistory=m),f},this.generateContentStream=async n=>{var r,i,s,o,a;if(this.maybeMoveToResponseJsonSchem(n),i5(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const l=s5(n);if(l.length>0){const p=l.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const u=(s=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,f=(a=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(u&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let s;const o=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=l==null?void 0:l.safetyAttributes:o.push(l);let a;return s?a={generatedImages:o,positivePromptSafetyAttributes:s,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new ia(bs.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,s,o,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(s=n.source)===null||s===void 0?void 0:s.video)===null||o===void 0)&&o.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const o=await Promise.all(s.map(async l=>yl(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&tS(e.config.tools)){const l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),nS(u),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return a}async initAfcToolsMap(e){var n,r,i;const s=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(yl(o)){const a=o,l=await a.tool();for(const u of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!u.name)throw new Error("Function declaration name is required.");if(s.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);s.set(u.name,a)}}return s}async processAfcStream(e){var n,r,i;const s=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:r5;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return function(u,f,p){return Ai(this,arguments,function*(){for(var m,g,S,_,E,b;a<s;){o&&(a++,o=!1);const U=yield ct(u.processParamsMaybeAddMcpUsage(p)),Y=yield ct(u.generateContentStreamInternal(U)),H=[],B=[];try{for(var N=!0,T=(g=void 0,Ei(Y)),M;M=yield ct(T.next()),m=M.done,!m;N=!0){_=M.value,N=!1;const W=_;if(yield yield ct(W),W.candidates&&(!((E=W.candidates[0])===null||E===void 0)&&E.content)){B.push(W.candidates[0].content);for(const ne of(b=W.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(a<s&&ne.functionCall){if(!ne.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(ne.functionCall.name)){const D=yield ct(f.get(ne.functionCall.name).callTool([ne.functionCall]));H.push(...D)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${ne.functionCall.name}`)}}}}catch(W){g={error:W}}finally{try{!N&&!m&&(S=T.return)&&(yield ct(S.call(T)))}finally{if(g)throw g.error}}if(H.length>0){o=!0;const W=new Eu;W.candidates=[{content:{role:"user",parts:H}}],yield yield ct(W);const ne=[];ne.push(...B),ne.push({role:"user",parts:H});const D=Qr(p.contents).concat(ne);p.contents=D}else break}})}(this,l,e)}async generateContentInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Z2(this.apiClient,e);return a=Ve("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=t5(f),m=new Eu;return Object.assign(m,p),m})}else{const u=Q2(this.apiClient,e);return a=Ve("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=e5(f),m=new Eu;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=Z2(this.apiClient,e);return a=Ve("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(p){return Ai(this,arguments,function*(){var m,g,S,_;try{for(var E=!0,b=Ei(p),N;N=yield ct(b.next()),m=N.done,!m;E=!0){_=N.value,E=!1;const T=_,M=t5(yield ct(T.json()));M.sdkHttpResponse={headers:T.headers};const U=new Eu;Object.assign(U,M),yield yield ct(U)}}catch(T){g={error:T}}finally{try{!E&&!m&&(S=b.return)&&(yield ct(S.call(b)))}finally{if(g)throw g.error}}})})}else{const u=Q2(this.apiClient,e);return a=Ve("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(p){return Ai(this,arguments,function*(){var m,g,S,_;try{for(var E=!0,b=Ei(p),N;N=yield ct(b.next()),m=N.done,!m;E=!0){_=N.value,E=!1;const T=_,M=e5(yield ct(T.json()));M.sdkHttpResponse={headers:T.headers};const U=new Eu;Object.assign(U,M),yield yield ct(U)}}catch(T){g={error:T}}finally{try{!E&&!m&&(S=b.return)&&(yield ct(S.call(b)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=EI(this.apiClient,e);return a=Ve("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=CI(f),m=new D2;return Object.assign(m,p),m})}else{const u=AI(this.apiClient,e);return a=Ve("{model}:batchEmbedContents",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=TI(f),m=new D2;return Object.assign(m,p),m})}}async generateImagesInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=UI(this.apiClient,e);return a=Ve("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=qI(f),m=new F2;return Object.assign(m,p),m})}else{const u=jI(this.apiClient,e);return a=Ve("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=BI(f),m=new F2;return Object.assign(m,p),m})}}async editImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=bI(this.apiClient,e);return s=Ve("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:l.headers},f})),i.then(l=>{const u=_I(l),f=new P3;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=UR(this.apiClient,e);return s=Ve("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:l.headers},f})),i.then(l=>{const u=BR(l),f=new I3;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=xR(this.apiClient,e);return s=Ve("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=bR(l),f=new R3;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=TR(this.apiClient,e);return s=Ve("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=CR(l),f=new L3;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=iR(this.apiClient,e);return a=Ve("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>Vm(f))}else{const u=rR(this.apiClient,e);return a=Ve("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>qm(f))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=hR(this.apiClient,e);return a=Ve("{models_url}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=mR(f),m=new O2;return Object.assign(m,p),m})}else{const u=fR(this.apiClient,e);return a=Ve("{models_url}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=pR(f),m=new O2;return Object.assign(m,p),m})}}async update(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=OR(this.apiClient,e);return a=Ve("{model}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>Vm(f))}else{const u=FR(this.apiClient,e);return a=Ve("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>qm(f))}}async delete(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=vI(this.apiClient,e);return a=Ve("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=wI(f),m=new j2;return Object.assign(m,p),m})}else{const u=gI(this.apiClient,e);return a=Ve("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=yI(f),m=new j2;return Object.assign(m,p),m})}}async countTokens(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=hI(this.apiClient,e);return a=Ve("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=mI(f),m=new U2;return Object.assign(m,p),m})}else{const u=fI(this.apiClient,e);return a=Ve("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=pI(f),m=new U2;return Object.assign(m,p),m})}}async computeTokens(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=sI(this.apiClient,e);return s=Ve("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:l.headers},f})),i.then(l=>{const u=oI(l),f=new M3;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=WI(this.apiClient,e);return a=Ve("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o.then(f=>{const p=zI(f),m=new eh;return Object.assign(m,p),m})}else{const u=GI(this.apiClient,e);return a=Ve("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o.then(f=>{const p=HI(f),m=new eh;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class L6 extends Ns{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=N3(e);return a=Ve("{operationName}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),o}else{const u=S3(e);return a=Ve("{operationName}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=g3(e);return s=Ve("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M6(t){const e={},n=c(t,["data"]);if(n!=null&&h(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function D6(t){const e={},n=c(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>H6(s))),h(e,["parts"],i)}const r=c(t,["role"]);return r!=null&&h(e,["role"],r),e}function F6(t,e,n){const r={},i=c(e,["expireTime"]);n!==void 0&&i!=null&&h(n,["expireTime"],i);const s=c(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&h(n,["newSessionExpireTime"],s);const o=c(e,["uses"]);n!==void 0&&o!=null&&h(n,["uses"],o);const a=c(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&h(n,["bidiGenerateContentSetup"],$6(t,a));const l=c(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&h(n,["fieldMask"],l),r}function O6(t,e){const n={},r=c(e,["config"]);return r!=null&&h(n,["config"],F6(t,r,n)),n}function j6(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&h(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&h(e,["mimeType"],r),e}function U6(t){const e={},n=c(t,["id"]);n!=null&&h(e,["id"],n);const r=c(t,["args"]);r!=null&&h(e,["args"],r);const i=c(t,["name"]);if(i!=null&&h(e,["name"],i),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function B6(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&h(e,["enableWidget"],n),e}function q6(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&h(e,["timeRangeFilter"],n),e}function V6(t,e){const n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig"],r);const i=c(t,["responseModalities"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig","responseModalities"],i);const s=c(t,["temperature"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","temperature"],s);const o=c(t,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const a=c(t,["topK"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topK"],a);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&h(e,["setup","generationConfig","mediaResolution"],u);const f=c(t,["seed"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","seed"],f);const p=c(t,["speechConfig"]);e!==void 0&&p!=null&&h(e,["setup","generationConfig","speechConfig"],xv(p));const m=c(t,["thinkingConfig"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","thinkingConfig"],m);const g=c(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],g);const S=c(t,["systemInstruction"]);e!==void 0&&S!=null&&h(e,["setup","systemInstruction"],D6(Xn(S)));const _=c(t,["tools"]);if(e!==void 0&&_!=null){let Y=Ul(_);Array.isArray(Y)&&(Y=Y.map(H=>G6(jl(H)))),h(e,["setup","tools"],Y)}const E=c(t,["sessionResumption"]);e!==void 0&&E!=null&&h(e,["setup","sessionResumption"],z6(E));const b=c(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&h(e,["setup","inputAudioTranscription"],b);const N=c(t,["outputAudioTranscription"]);e!==void 0&&N!=null&&h(e,["setup","outputAudioTranscription"],N);const T=c(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&h(e,["setup","realtimeInputConfig"],T);const M=c(t,["contextWindowCompression"]);e!==void 0&&M!=null&&h(e,["setup","contextWindowCompression"],M);const U=c(t,["proactivity"]);if(e!==void 0&&U!=null&&h(e,["setup","proactivity"],U),c(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function $6(t,e){const n={},r=c(e,["model"]);r!=null&&h(n,["setup","model"],At(t,r));const i=c(e,["config"]);return i!=null&&h(n,["config"],V6(i,n)),n}function H6(t){const e={},n=c(t,["mediaResolution"]);n!=null&&h(e,["mediaResolution"],n);const r=c(t,["codeExecutionResult"]);r!=null&&h(e,["codeExecutionResult"],r);const i=c(t,["executableCode"]);i!=null&&h(e,["executableCode"],i);const s=c(t,["fileData"]);s!=null&&h(e,["fileData"],j6(s));const o=c(t,["functionCall"]);o!=null&&h(e,["functionCall"],U6(o));const a=c(t,["functionResponse"]);a!=null&&h(e,["functionResponse"],a);const l=c(t,["inlineData"]);l!=null&&h(e,["inlineData"],M6(l));const u=c(t,["text"]);u!=null&&h(e,["text"],u);const f=c(t,["thought"]);f!=null&&h(e,["thought"],f);const p=c(t,["thoughtSignature"]);p!=null&&h(e,["thoughtSignature"],p);const m=c(t,["videoMetadata"]);return m!=null&&h(e,["videoMetadata"],m),e}function z6(t){const e={},n=c(t,["handle"]);if(n!=null&&h(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function G6(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),h(e,["functionDeclarations"],f)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],r);const i=c(t,["computerUse"]);i!=null&&h(e,["computerUse"],i);const s=c(t,["fileSearch"]);s!=null&&h(e,["fileSearch"],s);const o=c(t,["codeExecution"]);if(o!=null&&h(e,["codeExecution"],o),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(t,["googleMaps"]);a!=null&&h(e,["googleMaps"],B6(a));const l=c(t,["googleSearch"]);l!=null&&h(e,["googleSearch"],q6(l));const u=c(t,["urlContext"]);return u!=null&&h(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W6(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(s=>`${n}.${s}`);e.push(...i)}else e.push(n)}return e.join(",")}function J6(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const s=r.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const s=W6(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(u=>o.includes(u)?`generationConfig.${u}`:u));const l=[];s&&l.push(s),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class K6 extends Ns{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=O6(this.apiClient,e);s=Ve("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=J6(a,e.config);return i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y6(t,e){const n={},r=c(t,["force"]);return e!==void 0&&r!=null&&h(e,["_query","force"],r),n}function X6(t){const e={},n=c(t,["name"]);n!=null&&h(e,["_url","name"],n);const r=c(t,["config"]);return r!=null&&Y6(r,e),e}function Q6(t){const e={},n=c(t,["name"]);return n!=null&&h(e,["_url","name"],n),e}function Z6(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&h(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);return e!==void 0&&i!=null&&h(e,["_query","pageToken"],i),n}function eL(t){const e={},n=c(t,["parent"]);n!=null&&h(e,["_url","parent"],n);const r=c(t,["config"]);return r!=null&&Z6(r,e),e}function tL(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&h(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&h(e,["nextPageToken"],r);const i=c(t,["documents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),h(e,["documents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nL extends Ns{constructor(e){super(),this.apiClient=e,this.list=async n=>new ia(bs.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=Q6(e);return s=Ve("{name}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=X6(e);i=Ve("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=eL(e);return s=Ve("{parent}/documents",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=tL(l),f=new D3;return Object.assign(f,u),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rL extends Ns{constructor(e,n=new nL(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new ia(bs.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=WR(e);return s=Ve("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=YR(e);return s=Ve("{name}",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=KR(e);i=Ve("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=n6(e);return s=Ve("fileSearchStores",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=r6(l),f=new F3;return Object.assign(f,u),f})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=i6(e);return s=Ve("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=s6(l),f=new O3;return Object.assign(f,u),f})}}async importFile(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=ZR(e);return s=Ve("{file_search_store_name}:importFile",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=QR(l),f=new mv;return Object.assign(f,u),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let rS=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return rS=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const iL=()=>rS();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hm(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const zm=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ti extends Error{}class sr extends ti{constructor(e,n,r,i){super(`${sr.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new Mh({message:r,cause:zm(n)});const s=n;return e===400?new sS(e,s,r,i):e===401?new oS(e,s,r,i):e===403?new aS(e,s,r,i):e===404?new lS(e,s,r,i):e===409?new uS(e,s,r,i):e===422?new cS(e,s,r,i):e===429?new dS(e,s,r,i):e>=500?new fS(e,s,r,i):new sr(e,s,r,i)}}class Gm extends sr{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Mh extends sr{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class iS extends Mh{constructor({message:e}={}){super({message:e??"Request timed out."})}}class sS extends sr{}class oS extends sr{}class aS extends sr{}class lS extends sr{}class uS extends sr{}class cS extends sr{}class dS extends sr{}class fS extends sr{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sL=/^[a-z][a-z0-9+.-]*:/i,oL=t=>sL.test(t);let Wm=t=>(Wm=Array.isArray,Wm(t));const aL=Wm;let lL=aL;const a5=lL;function uL(t){if(!t)return!0;for(const e in t)return!1;return!0}function cL(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const dL=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ti(`${t} must be an integer`);if(e<0)throw new ti(`${t} must be a positive integer`);return e},fL=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hL=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const za="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pL(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const mL=()=>{var t,e,n,r,i;const s=pL();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":za,"X-Stainless-OS":u5(Deno.build.os),"X-Stainless-Arch":l5(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":za,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":za,"X-Stainless-OS":u5((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":l5((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const o=gL();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":za,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":za,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function gL(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const l5=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",u5=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let jd;const vL=()=>jd??(jd=mL());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yL(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function hS(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function wL(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return hS({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function pS(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function xL(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bL=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mS=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function c0(t,e,n){return mS(),new File(t,e??"unknown_file",n)}function _L(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const SL=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gS=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",NL=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&gS(t),AL=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function EL(t,e,n){if(mS(),t=await t,NL(t))return t instanceof File?t:c0([await t.arrayBuffer()],t.name);if(AL(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),c0(await Jm(i),e,n)}const r=await Jm(t);if(e||(e=_L(t)),!(n!=null&&n.type)){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return c0(r,e,n)}async function Jm(t){var e,n,r,i,s;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(gS(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(SL(t))try{for(var a=!0,l=Ei(t),u;u=await l.next(),e=u.done,!e;a=!0){i=u.value,a=!1;const f=i;o.push(...await Jm(f))}}catch(f){n={error:f}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{const f=(s=t==null?void 0:t.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${TL(t)}`)}return o}function TL(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vS{constructor(e){this._client=e}}vS._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yS(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const c5=Object.freeze(Object.create(null)),CL=(t=yS)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const s=[],o=n.reduce((f,p,m)=>{var g,S,_;/[?#]/.test(p)&&(i=!0);const E=r[m];let b=(i?encodeURIComponent:t)(""+E);return m!==r.length&&(E==null||typeof E=="object"&&E.toString===((_=Object.getPrototypeOf((S=Object.getPrototypeOf((g=E.hasOwnProperty)!==null&&g!==void 0?g:c5))!==null&&S!==void 0?S:c5))===null||_===void 0?void 0:_.toString))&&(b=E+"",s.push({start:f.length+p.length,length:b.length,error:`Value of type ${Object.prototype.toString.call(E).slice(8,-1)} is not a valid path parameter`})),f+p+(m===r.length?"":b)},""),a=o.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=l.exec(a))!==null;)s.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(s.sort((f,p)=>f.start-p.start),s.length>0){let f=0;const p=s.reduce((m,g)=>{const S=" ".repeat(g.start-f),_="^".repeat(g.length);return f=g.start+g.length,m+S+_},"");throw new ti(`Path parameters result in path with invalid segments:
${s.map(m=>m.error).join(`
`)}
${o}
${p}`)}return o},Ud=CL(yS);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wS extends vS{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,s=nh(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new ti("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new ti("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Ud`/${i}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(Ud`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(Ud`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const s=n??{},{api_version:o=this._client.apiVersion}=s,a=nh(s,["api_version"]);return this._client.get(Ud`/${o}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}wS._key=Object.freeze(["interactions"]);class xS extends wS{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kL(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let Bd;function _v(t){let e;return(Bd??(e=new globalThis.TextEncoder,Bd=e.encode.bind(e)))(t)}let qd;function d5(t){let e;return(qd??(e=new globalThis.TextDecoder,qd=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dh{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?_v(e):e;this.buffer=kL([this.buffer,n]);const r=[];let i;for(;(i=PL(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(d5(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const s=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,o=d5(this.buffer.subarray(0,s));r.push(o),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}Dh.NEWLINE_CHARS=new Set([`
`,"\r"]);Dh.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function PL(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function IL(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rh={off:0,error:200,warn:300,info:400,debug:500},f5=(t,e,n)=>{if(t){if(cL(rh,t))return t;nr(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(rh))}`)}};function Fu(){}function Vd(t,e,n){return!e||rh[t]>rh[n]?Fu:e[t].bind(e)}const RL={error:Fu,warn:Fu,info:Fu,debug:Fu};let h5=new WeakMap;function nr(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return RL;const i=h5.get(n);if(i&&i[0]===r)return i[1];const s={error:Vd("error",n,r),warn:Vd("warn",n,r),info:Vd("info",n,r),debug:Vd("debug",n,r)};return h5.set(n,[r,s]),s}const Uo=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class al{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const s=r?nr(r):console;function o(){return Ai(this,arguments,function*(){var l,u,f,p;if(i)throw new ti("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let m=!1;try{try{for(var g=!0,S=Ei(LL(e,n)),_;_=yield ct(S.next()),l=_.done,!l;g=!0){p=_.value,g=!1;const E=p;if(!m)if(E.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield ct(JSON.parse(E.data))}catch(b){throw s.error("Could not parse message into JSON:",E.data),s.error("From chunk:",E.raw),b}}}catch(E){u={error:E}}finally{try{!g&&!l&&(f=S.return)&&(yield ct(f.call(S)))}finally{if(u)throw u.error}}m=!0}catch(E){if(Hm(E))return yield ct(void 0);throw E}finally{m||n.abort()}})}return new al(o,n,r)}static fromReadableStream(e,n,r){let i=!1;function s(){return Ai(this,arguments,function*(){var l,u,f,p;const m=new Dh,g=pS(e);try{for(var S=!0,_=Ei(g),E;E=yield ct(_.next()),l=E.done,!l;S=!0){p=E.value,S=!1;const b=p;for(const N of m.decode(b))yield yield ct(N)}}catch(b){u={error:b}}finally{try{!S&&!l&&(f=_.return)&&(yield ct(f.call(_)))}finally{if(u)throw u.error}}for(const b of m.flush())yield yield ct(b)})}function o(){return Ai(this,arguments,function*(){var l,u,f,p;if(i)throw new ti("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let m=!1;try{try{for(var g=!0,S=Ei(s()),_;_=yield ct(S.next()),l=_.done,!l;g=!0){p=_.value,g=!1;const E=p;m||E&&(yield yield ct(JSON.parse(E)))}}catch(E){u={error:E}}finally{try{!g&&!l&&(f=S.return)&&(yield ct(f.call(S)))}finally{if(u)throw u.error}}m=!0}catch(E){if(Hm(E))return yield ct(void 0);throw E}finally{m||n.abort()}})}return new al(o,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new al(()=>i(e),this.controller,this.client),new al(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return hS({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await n.next();if(s)return r.close();const o=_v(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function LL(t,e){return Ai(this,arguments,function*(){var r,i,s,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ti("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ti("Attempted to iterate over a response with no body");const a=new DL,l=new Dh,u=pS(t.body);try{for(var f=!0,p=Ei(ML(u)),m;m=yield ct(p.next()),r=m.done,!r;f=!0){o=m.value,f=!1;const g=o;for(const S of l.decode(g)){const _=a.decode(S);_&&(yield yield ct(_))}}}catch(g){i={error:g}}finally{try{!f&&!r&&(s=p.return)&&(yield ct(s.call(p)))}finally{if(i)throw i.error}}for(const g of l.flush()){const S=a.decode(g);S&&(yield yield ct(S))}})}function ML(t){return Ai(this,arguments,function*(){var n,r,i,s;let o=new Uint8Array;try{for(var a=!0,l=Ei(t),u;u=yield ct(l.next()),n=u.done,!n;a=!0){s=u.value,a=!1;const f=s;if(f==null)continue;const p=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?_v(f):f;let m=new Uint8Array(o.length+p.length);m.set(o),m.set(p,o.length),o=m;let g;for(;(g=IL(o))!==-1;)yield yield ct(o.slice(0,g)),o=o.slice(g)}}catch(f){r={error:f}}finally{try{!a&&!n&&(i=l.return)&&(yield ct(i.call(l)))}finally{if(r)throw r.error}}o.length>0&&(yield yield ct(o))})}class DL{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=FL(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function FL(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function OL(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{var a;if(e.options.stream)return nr(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):al.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),u=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))?await n.json():await n.text()})();return nr(t).debug(`[${r}] response parsed`,Uo({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sv extends Promise{constructor(e,n,r=OL){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new Sv(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bS=Symbol("brand.privateNullableHeaders");function*jL(t){if(!t)return;if(bS in t){const{values:r,nulls:i}=t;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():a5(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=a5(r[1])?r[1]:[r[1]];let o=!1;for(const a of s)a!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,a])}}const d0=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[s,o]of jL(r)){const a=s.toLowerCase();i.has(a)||(e.delete(s),i.add(a)),o===null?(e.delete(s),n.add(a)):(e.append(s,o),n.delete(a))}}return{[bS]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const f0=t=>{var e,n,r,i,s,o;if(typeof globalThis.process<"u")return(r=(n=(e=c3)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(o=(s=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||s===void 0?void 0:s.call(i,t))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _S;class Fh{constructor(e){var n,r,i,s,o,a,l,u=e===void 0?{}:e,{baseURL:f=f0("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:p=(n=f0("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:m="v1beta"}=u,g=nh(u,["baseURL","apiKey","apiVersion"]);const S=Object.assign(Object.assign({apiKey:p,apiVersion:m},g),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=S.baseURL,this.timeout=(r=S.timeout)!==null&&r!==void 0?r:Fh.DEFAULT_TIMEOUT,this.logger=(i=S.logger)!==null&&i!==void 0?i:console;const _="warn";this.logLevel=_,this.logLevel=(o=(s=f5(S.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:f5(f0("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:_,this.fetchOptions=S.fetchOptions,this.maxRetries=(a=S.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=S.fetch)!==null&&l!==void 0?l:yL(),this.encoder=bL,this._options=S,this.apiKey=p,this.apiVersion=m}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){if(this.apiKey!=null)return d0([{"x-goog-api-key":this.apiKey}])}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new ti(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${za}`}defaultIdempotencyKey(){return`stainless-node-retry-${iL()}`}makeStatusError(e,n,r,i){return sr.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,s=oL(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return uL(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new Sv(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,s,o;const a=await e,l=(i=a.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:u,url:f,timeout:p}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(u,{url:f,options:a});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=r===void 0?"":`, retryOf: ${r}`,S=Date.now();if(nr(this).debug(`[${m}] sending request`,Uo({retryOfRequestLogID:r,method:a.method,url:f,options:a,headers:u.headers})),!((s=a.signal)===null||s===void 0)&&s.aborted)throw new Gm;const _=new AbortController,E=await this.fetchWithTimeout(f,u,p,_).catch(zm),b=Date.now();if(E instanceof globalThis.Error){const T=`retrying, ${n} attempts remaining`;if(!((o=a.signal)===null||o===void 0)&&o.aborted)throw new Gm;const M=Hm(E)||/timed? ?out/i.test(String(E)+("cause"in E?String(E.cause):""));if(n)return nr(this).info(`[${m}] connection ${M?"timed out":"failed"} - ${T}`),nr(this).debug(`[${m}] connection ${M?"timed out":"failed"} (${T})`,Uo({retryOfRequestLogID:r,url:f,durationMs:b-S,message:E.message})),this.retryRequest(a,n,r??m);throw nr(this).info(`[${m}] connection ${M?"timed out":"failed"} - error; no more retries left`),nr(this).debug(`[${m}] connection ${M?"timed out":"failed"} (error; no more retries left)`,Uo({retryOfRequestLogID:r,url:f,durationMs:b-S,message:E.message})),M?new iS:new Mh({cause:E})}const N=`[${m}${g}] ${u.method} ${f} ${E.ok?"succeeded":"failed"} with status ${E.status} in ${b-S}ms`;if(!E.ok){const T=await this.shouldRetry(E);if(n&&T){const W=`retrying, ${n} attempts remaining`;return await xL(E.body),nr(this).info(`${N} - ${W}`),nr(this).debug(`[${m}] response error (${W})`,Uo({retryOfRequestLogID:r,url:E.url,status:E.status,headers:E.headers,durationMs:b-S})),this.retryRequest(a,n,r??m,E.headers)}const M=T?"error; no more retries left":"error; not retryable";nr(this).info(`${N} - ${M}`);const U=await E.text().catch(W=>zm(W).message),Y=fL(U),H=Y?void 0:U;throw nr(this).debug(`[${m}] response error (${M})`,Uo({retryOfRequestLogID:r,url:E.url,status:E.status,headers:E.headers,message:H,durationMs:Date.now()-S})),this.makeStatusError(E.status,Y,H,E.headers)}return nr(this).info(N),nr(this).debug(`[${m}] response start`,Uo({retryOfRequestLogID:r,url:E.url,status:E.status,headers:E.headers,durationMs:b-S})),{response:E,options:a,controller:_,requestLogID:m,retryOfRequestLogID:r,startTime:S}}async fetchWithTimeout(e,n,r,i){const s=n||{},{signal:o,method:a}=s,l=nh(s,["signal","method"]);o&&o.addEventListener("abort",()=>i.abort());const u=setTimeout(()=>i.abort(),r),f=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,p=Object.assign(Object.assign(Object.assign({signal:i.signal},f?{duplex:"half"}:{}),{method:"GET"}),l);a&&(p.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(u)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var s;let o;const a=i==null?void 0:i.get("retry-after-ms");if(a){const u=parseFloat(a);Number.isNaN(u)||(o=u)}const l=i==null?void 0:i.get("retry-after");if(l&&!o){const u=parseFloat(l);Number.isNaN(u)?o=Date.parse(l)-Date.now():o=u*1e3}if(!(o&&0<=o&&o<60*1e3)){const u=(s=e.maxRetries)!==null&&s!==void 0?s:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,u)}return await hL(o),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),a=1-Math.random()*.25;return o*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,s;const o=Object.assign({},e),{method:a,path:l,query:u,defaultBaseURL:f}=o,p=this.buildURL(l,u,f);"timeout"in o&&dL("timeout",o.timeout),o.timeout=(r=o.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:m,body:g}=this.buildBody({options:o}),S=await this.buildHeaders({options:e,method:a,bodyHeaders:m,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:S},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(s=o.fetchOptions)!==null&&s!==void 0?s:{}),url:p,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const o=d0([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),vL()),await this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=d0([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:wL(e)}:this.encoder({body:e,headers:r})}}Fh.DEFAULT_TIMEOUT=6e4;class In extends Fh{constructor(){super(...arguments),this.interactions=new xS(this)}}_S=In;In.GeminiNextGenAPIClient=_S;In.GeminiNextGenAPIClientError=ti;In.APIError=sr;In.APIConnectionError=Mh;In.APIConnectionTimeoutError=iS;In.APIUserAbortError=Gm;In.NotFoundError=lS;In.ConflictError=uS;In.RateLimitError=dS;In.BadRequestError=sS;In.AuthenticationError=oS;In.InternalServerError=fS;In.PermissionDeniedError=aS;In.UnprocessableEntityError=cS;In.toFile=EL;In.Interactions=xS;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UL(t,e){const n={},r=c(t,["name"]);return r!=null&&h(n,["_url","name"],r),n}function BL(t,e){const n={},r=c(t,["name"]);return r!=null&&h(n,["_url","name"],r),n}function qL(t,e){const n={},r=c(t,["sdkHttpResponse"]);return r!=null&&h(n,["sdkHttpResponse"],r),n}function VL(t,e){const n={},r=c(t,["sdkHttpResponse"]);return r!=null&&h(n,["sdkHttpResponse"],r),n}function $L(t,e,n){const r={};if(c(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=c(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&h(e,["displayName"],i),c(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=c(t,["epochCount"]);e!==void 0&&s!=null&&h(e,["tuningTask","hyperparameters","epochCount"],s);const o=c(t,["learningRateMultiplier"]);if(o!=null&&h(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),c(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=c(t,["batchSize"]);e!==void 0&&a!=null&&h(e,["tuningTask","hyperparameters","batchSize"],a);const l=c(t,["learningRate"]);if(e!==void 0&&l!=null&&h(e,["tuningTask","hyperparameters","learningRate"],l),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function HL(t,e,n){const r={};let i=c(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const g=c(t,["validationDataset"]);e!==void 0&&g!=null&&h(e,["supervisedTuningSpec"],p5(g))}else if(i==="PREFERENCE_TUNING"){const g=c(t,["validationDataset"]);e!==void 0&&g!=null&&h(e,["preferenceOptimizationSpec"],p5(g))}const s=c(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&h(e,["tunedModelDisplayName"],s);const o=c(t,["description"]);e!==void 0&&o!=null&&h(e,["description"],o);let a=c(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const g=c(t,["epochCount"]);e!==void 0&&g!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(a==="PREFERENCE_TUNING"){const g=c(t,["epochCount"]);e!==void 0&&g!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let l=c(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const g=c(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(l==="PREFERENCE_TUNING"){const g=c(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let u=c(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=c(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(u==="PREFERENCE_TUNING"){const g=c(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&h(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let f=c(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const g=c(t,["adapterSize"]);e!==void 0&&g!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(f==="PREFERENCE_TUNING"){const g=c(t,["adapterSize"]);e!==void 0&&g!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(c(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=c(t,["labels"]);e!==void 0&&p!=null&&h(e,["labels"],p);const m=c(t,["beta"]);return e!==void 0&&m!=null&&h(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),r}function zL(t,e){const n={},r=c(t,["baseModel"]);r!=null&&h(n,["baseModel"],r);const i=c(t,["preTunedModel"]);i!=null&&h(n,["preTunedModel"],i);const s=c(t,["trainingDataset"]);s!=null&&n8(s);const o=c(t,["config"]);return o!=null&&$L(o,n),n}function GL(t,e){const n={},r=c(t,["baseModel"]);r!=null&&h(n,["baseModel"],r);const i=c(t,["preTunedModel"]);i!=null&&h(n,["preTunedModel"],i);const s=c(t,["trainingDataset"]);s!=null&&r8(s,n,e);const o=c(t,["config"]);return o!=null&&HL(o,n,e),n}function WL(t,e){const n={},r=c(t,["name"]);return r!=null&&h(n,["_url","name"],r),n}function JL(t,e){const n={},r=c(t,["name"]);return r!=null&&h(n,["_url","name"],r),n}function KL(t,e,n){const r={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const s=c(t,["pageToken"]);e!==void 0&&s!=null&&h(e,["_query","pageToken"],s);const o=c(t,["filter"]);return e!==void 0&&o!=null&&h(e,["_query","filter"],o),r}function YL(t,e,n){const r={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const s=c(t,["pageToken"]);e!==void 0&&s!=null&&h(e,["_query","pageToken"],s);const o=c(t,["filter"]);return e!==void 0&&o!=null&&h(e,["_query","filter"],o),r}function XL(t,e){const n={},r=c(t,["config"]);return r!=null&&KL(r,n),n}function QL(t,e){const n={},r=c(t,["config"]);return r!=null&&YL(r,n),n}function ZL(t,e){const n={},r=c(t,["sdkHttpResponse"]);r!=null&&h(n,["sdkHttpResponse"],r);const i=c(t,["nextPageToken"]);i!=null&&h(n,["nextPageToken"],i);const s=c(t,["tunedModels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>SS(a))),h(n,["tuningJobs"],o)}return n}function e8(t,e){const n={},r=c(t,["sdkHttpResponse"]);r!=null&&h(n,["sdkHttpResponse"],r);const i=c(t,["nextPageToken"]);i!=null&&h(n,["nextPageToken"],i);const s=c(t,["tuningJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>Km(a))),h(n,["tuningJobs"],o)}return n}function t8(t,e){const n={},r=c(t,["name"]);r!=null&&h(n,["model"],r);const i=c(t,["name"]);return i!=null&&h(n,["endpoint"],i),n}function n8(t,e){const n={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=c(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),h(n,["examples","examples"],i)}return n}function r8(t,e,n){const r={};let i=c(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const o=c(t,["gcsUri"]);e!==void 0&&o!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){const o=c(t,["gcsUri"]);e!==void 0&&o!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let s=c(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=c(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=c(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&h(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(c(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function SS(t,e){const n={},r=c(t,["sdkHttpResponse"]);r!=null&&h(n,["sdkHttpResponse"],r);const i=c(t,["name"]);i!=null&&h(n,["name"],i);const s=c(t,["state"]);s!=null&&h(n,["state"],O_(s));const o=c(t,["createTime"]);o!=null&&h(n,["createTime"],o);const a=c(t,["tuningTask","startTime"]);a!=null&&h(n,["startTime"],a);const l=c(t,["tuningTask","completeTime"]);l!=null&&h(n,["endTime"],l);const u=c(t,["updateTime"]);u!=null&&h(n,["updateTime"],u);const f=c(t,["description"]);f!=null&&h(n,["description"],f);const p=c(t,["baseModel"]);p!=null&&h(n,["baseModel"],p);const m=c(t,["_self"]);return m!=null&&h(n,["tunedModel"],t8(m)),n}function Km(t,e){const n={},r=c(t,["sdkHttpResponse"]);r!=null&&h(n,["sdkHttpResponse"],r);const i=c(t,["name"]);i!=null&&h(n,["name"],i);const s=c(t,["state"]);s!=null&&h(n,["state"],O_(s));const o=c(t,["createTime"]);o!=null&&h(n,["createTime"],o);const a=c(t,["startTime"]);a!=null&&h(n,["startTime"],a);const l=c(t,["endTime"]);l!=null&&h(n,["endTime"],l);const u=c(t,["updateTime"]);u!=null&&h(n,["updateTime"],u);const f=c(t,["error"]);f!=null&&h(n,["error"],f);const p=c(t,["description"]);p!=null&&h(n,["description"],p);const m=c(t,["baseModel"]);m!=null&&h(n,["baseModel"],m);const g=c(t,["tunedModel"]);g!=null&&h(n,["tunedModel"],g);const S=c(t,["preTunedModel"]);S!=null&&h(n,["preTunedModel"],S);const _=c(t,["supervisedTuningSpec"]);_!=null&&h(n,["supervisedTuningSpec"],_);const E=c(t,["preferenceOptimizationSpec"]);E!=null&&h(n,["preferenceOptimizationSpec"],E);const b=c(t,["tuningDataStats"]);b!=null&&h(n,["tuningDataStats"],b);const N=c(t,["encryptionSpec"]);N!=null&&h(n,["encryptionSpec"],N);const T=c(t,["partnerModelTuningSpec"]);T!=null&&h(n,["partnerModelTuningSpec"],T);const M=c(t,["customBaseModel"]);M!=null&&h(n,["customBaseModel"],M);const U=c(t,["experiment"]);U!=null&&h(n,["experiment"],U);const Y=c(t,["labels"]);Y!=null&&h(n,["labels"],Y);const H=c(t,["outputUri"]);H!=null&&h(n,["outputUri"],H);const B=c(t,["pipelineJob"]);B!=null&&h(n,["pipelineJob"],B);const W=c(t,["serviceAccount"]);W!=null&&h(n,["serviceAccount"],W);const ne=c(t,["tunedModelDisplayName"]);ne!=null&&h(n,["tunedModelDisplayName"],ne);const D=c(t,["veoTuningSpec"]);return D!=null&&h(n,["veoTuningSpec"],D),n}function i8(t,e){const n={},r=c(t,["sdkHttpResponse"]);r!=null&&h(n,["sdkHttpResponse"],r);const i=c(t,["name"]);i!=null&&h(n,["name"],i);const s=c(t,["metadata"]);s!=null&&h(n,["metadata"],s);const o=c(t,["done"]);o!=null&&h(n,["done"],o);const a=c(t,["error"]);return a!=null&&h(n,["error"],a),n}function p5(t,e){const n={},r=c(t,["gcsUri"]);r!=null&&h(n,["validationDatasetUri"],r);const i=c(t,["vertexDatasetResource"]);return i!=null&&h(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class s8 extends Ns{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ia(bs.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),s=await this.tuneMldevInternal(i);let o="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?o=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(o=s.name.split("/operations/")[0]),{name:o,state:Om.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=JL(e);return a=Ve("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>Km(f))}else{const u=WL(e);return a=Ve("{name}",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>SS(f))}}async listInternal(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=QL(e);return a=Ve("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=e8(f),m=new B2;return Object.assign(m,p),m})}else{const u=XL(e);return a=Ve("tunedModels",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=ZL(f),m=new B2;return Object.assign(m,p),m})}}async cancel(e){var n,r,i,s;let o,a="",l={};if(this.apiClient.isVertexAI()){const u=BL(e);return a=Ve("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=VL(f),m=new q2;return Object.assign(m,p),m})}else{const u=UL(e);return a=Ve("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),o.then(f=>{const p=qL(f),m=new q2;return Object.assign(m,p),m})}}async tuneInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const a=GL(e,e);return s=Ve("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:l.headers},f})),i.then(l=>Km(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=zL(e);return s=Ve("tunedModels",a._url),o=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:l.headers},f})),i.then(l=>i8(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class o8{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const a8=1024*1024*8,l8=3,u8=1e3,c8=2,ih="x-goog-upload-status";async function d8(t,e,n){var r;const i=await NS(t,e,n),s=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[ih])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function f8(t,e,n){var r;const i=await NS(t,e,n),s=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[ih])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=I_(s),a=new gv;return Object.assign(a,o),a}async function NS(t,e,n){var r,i;let s=0,o=0,a=new jm(new Response),l="upload";for(s=t.size;o<s;){const u=Math.min(a8,s-o),f=t.slice(o,o+u);o+u>=s&&(l+=", finalize");let p=0,m=u8;for(;p<l8&&(a=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(o),"Content-Length":String(u)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[ih]));)p++,await p8(m),m=m*c8;if(o+=u,((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[ih])!=="active")break;if(s<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function h8(t){return{size:t.size,type:t.type}}function p8(t){return new Promise(e=>setTimeout(e,t))}class m8{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await d8(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await f8(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await h8(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class g8{create(e,n,r){return new v8(e,n,r)}}class v8{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const m5="x-goog-api-key";class y8{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(m5)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(m5,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const w8="gl-node/";class x8{get interactions(){if(this._interactions!==void 0)return this._interactions;if(console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions."),this.vertexai)throw new Error("This version of the GenAI SDK does not support Vertex AI API for interactions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new In({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=p3(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new y8(this.apiKey);this.apiClient=new h6({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:w8+"web",uploader:new m8,downloader:new o8}),this.models=new R6(this.apiClient),this.live=new E6(this.apiClient,i,new g8),this.batches=new $k(this.apiClient),this.chats=new NP(this.models,this.apiClient),this.caches=new bP(this.apiClient),this.files=new MP(this.apiClient),this.operations=new L6(this.apiClient),this.authTokens=new K6(this.apiClient),this.tunings=new s8(this.apiClient),this.fileSearchStores=new rL(this.apiClient)}}const b8={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},_8=()=>{try{typeof import.meta<"u"}catch{}return""},S8=async(t,e)=>{const n=_8();if(!n)return"API Key missing. Please set VITE_GOOGLE_AI_KEY in your Vercel Environment Variables.";const r=new x8({apiKey:n}),i=`
    Act as a senior mortgage underwriter and financial advisor. 
    Analyze the following mortgage scenario for a client.
    
    Data:
    ${JSON.stringify({scenario:t,results:e},null,2)}
    
    Provide a concise analysis focusing on:
    1. Debt-to-Income impact (assuming typical income, just general advice on payment comfort).
    2. The efficiency of the loan structure (e.g. is the Buydown worth the cost? Is the MI too high?).
    3. If FHA/VA vs Conventional choice looks appropriate based on the LTV.
    4. Specific advice on the Down Payment Assistance if active.

    Format the output with bold headings and bullet points using Markdown. Keep it under 250 words.
  `;try{return(await r.models.generateContent({model:"gemini-2.5-flash",contents:i})).text||"No analysis generated."}catch(s){return console.error("Gemini API Error:",s),"Unable to generate analysis. Please verify your API Key quota and permissions."}},N8="modulepreload",A8=function(t){return"/"+t},g5={},Ym=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=A8(l),l in g5)return;g5[l]=!0;const u=l.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":N8,u||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),u)return new Promise((m,g)=>{p.addEventListener("load",m),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function It(t){"@babel/helpers - typeof";return It=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},It(t)}var Yn=Uint8Array,Mr=Uint16Array,Nv=Int32Array,Oh=new Yn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),jh=new Yn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Xm=new Yn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),AS=function(t,e){for(var n=new Mr(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new Nv(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},ES=AS(Oh,2),TS=ES.b,Qm=ES.r;TS[28]=258,Qm[258]=28;var CS=AS(jh,0),E8=CS.b,v5=CS.r,Zm=new Mr(32768);for(var Vt=0;Vt<32768;++Vt){var qs=(Vt&43690)>>1|(Vt&21845)<<1;qs=(qs&52428)>>2|(qs&13107)<<2,qs=(qs&61680)>>4|(qs&3855)<<4,Zm[Vt]=((qs&65280)>>8|(qs&255)<<8)>>1}var Xi=function(t,e,n){for(var r=t.length,i=0,s=new Mr(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new Mr(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new Mr(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],f=e-t[i],p=o[t[i]-1]++<<f,m=p|(1<<f)-1;p<=m;++p)a[Zm[p]>>l]=u}else for(a=new Mr(r),i=0;i<r;++i)t[i]&&(a[i]=Zm[o[t[i]-1]++]>>15-t[i]);return a},fo=new Yn(288);for(var Vt=0;Vt<144;++Vt)fo[Vt]=8;for(var Vt=144;Vt<256;++Vt)fo[Vt]=9;for(var Vt=256;Vt<280;++Vt)fo[Vt]=7;for(var Vt=280;Vt<288;++Vt)fo[Vt]=8;var hc=new Yn(32);for(var Vt=0;Vt<32;++Vt)hc[Vt]=5;var T8=Xi(fo,9,0),C8=Xi(fo,9,1),k8=Xi(hc,5,0),P8=Xi(hc,5,1),h0=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},hi=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},p0=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},Av=function(t){return(t+7)/8|0},kS=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Yn(t.subarray(e,n))},I8=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],yi=function(t,e,n){var r=new Error(e||I8[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,yi),!n)throw r;return r},R8=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new Yn(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new Yn(i*3));var u=function(Ie){var je=n.length;if(Ie>je){var Oe=new Yn(Math.max(je*2,Ie));Oe.set(n),n=Oe}},f=e.f||0,p=e.p||0,m=e.b||0,g=e.l,S=e.d,_=e.m,E=e.n,b=i*8;do{if(!g){f=hi(t,p,1);var N=hi(t,p+1,3);if(p+=3,N)if(N==1)g=C8,S=P8,_=9,E=5;else if(N==2){var Y=hi(t,p,31)+257,H=hi(t,p+10,15)+4,B=Y+hi(t,p+5,31)+1;p+=14;for(var W=new Yn(B),ne=new Yn(19),D=0;D<H;++D)ne[Xm[D]]=hi(t,p+D*3,7);p+=H*3;for(var j=h0(ne),O=(1<<j)-1,V=Xi(ne,j,1),D=0;D<B;){var he=V[hi(t,p,O)];p+=he&15;var T=he>>4;if(T<16)W[D++]=T;else{var le=0,we=0;for(T==16?(we=3+hi(t,p,3),p+=2,le=W[D-1]):T==17?(we=3+hi(t,p,7),p+=3):T==18&&(we=11+hi(t,p,127),p+=7);we--;)W[D++]=le}}var X=W.subarray(0,Y),ae=W.subarray(Y);_=h0(X),E=h0(ae),g=Xi(X,_,1),S=Xi(ae,E,1)}else yi(1);else{var T=Av(p)+4,M=t[T-4]|t[T-3]<<8,U=T+M;if(U>i){l&&yi(0);break}a&&u(m+M),n.set(t.subarray(T,U),m),e.b=m+=M,e.p=p=U*8,e.f=f;continue}if(p>b){l&&yi(0);break}}a&&u(m+131072);for(var fe=(1<<_)-1,Ce=(1<<E)-1,P=p;;P=p){var le=g[p0(t,p)&fe],q=le>>4;if(p+=le&15,p>b){l&&yi(0);break}if(le||yi(2),q<256)n[m++]=q;else if(q==256){P=p,g=null;break}else{var z=q-254;if(q>264){var D=q-257,Q=Oh[D];z=hi(t,p,(1<<Q)-1)+TS[D],p+=Q}var re=S[p0(t,p)&Ce],ce=re>>4;re||yi(3),p+=re&15;var ae=E8[ce];if(ce>3){var Q=jh[ce];ae+=p0(t,p)&(1<<Q)-1,p+=Q}if(p>b){l&&yi(0);break}a&&u(m+131072);var ve=m+z;if(m<ae){var ye=s-ae,De=Math.min(ae,ve);for(ye+m<0&&yi(3);m<De;++m)n[m]=r[ye+m]}for(;m<ve;++m)n[m]=n[m-ae]}}e.l=g,e.p=P,e.b=m,e.f=f,g&&(f=1,e.m=_,e.d=S,e.n=E)}while(!f);return m!=n.length&&o?kS(n,0,m):n.subarray(0,m)},cs=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Tu=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},m0=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:IS,l:0};if(i==1){var o=new Yn(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(U,Y){return U.f-Y.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],u=0,f=1,p=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};f!=i-1;)a=n[n[u].f<n[p].f?u++:p++],l=n[u!=f&&n[u].f<n[p].f?u++:p++],n[f++]={s:-1,f:a.f+l.f,l:a,r:l};for(var m=s[0].s,r=1;r<i;++r)s[r].s>m&&(m=s[r].s);var g=new Mr(m+1),S=eg(n[f-1],g,0);if(S>e){var r=0,_=0,E=S-e,b=1<<E;for(s.sort(function(Y,H){return g[H.s]-g[Y.s]||Y.f-H.f});r<i;++r){var N=s[r].s;if(g[N]>e)_+=b-(1<<S-g[N]),g[N]=e;else break}for(_>>=E;_>0;){var T=s[r].s;g[T]<e?_-=1<<e-g[T]++-1:++r}for(;r>=0&&_;--r){var M=s[r].s;g[M]==e&&(--g[M],++_)}S=e}return{t:new Yn(g),l:S}},eg=function(t,e,n){return t.s==-1?Math.max(eg(t.l,e,n+1),eg(t.r,e,n+1)):e[t.s]=n},y5=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Mr(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},Cu=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},PS=function(t,e,n){var r=n.length,i=Av(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},w5=function(t,e,n,r,i,s,o,a,l,u,f){cs(e,f++,n),++i[256];for(var p=m0(i,15),m=p.t,g=p.l,S=m0(s,15),_=S.t,E=S.l,b=y5(m),N=b.c,T=b.n,M=y5(_),U=M.c,Y=M.n,H=new Mr(19),B=0;B<N.length;++B)++H[N[B]&31];for(var B=0;B<U.length;++B)++H[U[B]&31];for(var W=m0(H,7),ne=W.t,D=W.l,j=19;j>4&&!ne[Xm[j-1]];--j);var O=u+5<<3,V=Cu(i,fo)+Cu(s,hc)+o,he=Cu(i,m)+Cu(s,_)+o+14+3*j+Cu(H,ne)+2*H[16]+3*H[17]+7*H[18];if(l>=0&&O<=V&&O<=he)return PS(e,f,t.subarray(l,l+u));var le,we,X,ae;if(cs(e,f,1+(he<V)),f+=2,he<V){le=Xi(m,g,0),we=m,X=Xi(_,E,0),ae=_;var fe=Xi(ne,D,0);cs(e,f,T-257),cs(e,f+5,Y-1),cs(e,f+10,j-4),f+=14;for(var B=0;B<j;++B)cs(e,f+3*B,ne[Xm[B]]);f+=3*j;for(var Ce=[N,U],P=0;P<2;++P)for(var q=Ce[P],B=0;B<q.length;++B){var z=q[B]&31;cs(e,f,fe[z]),f+=ne[z],z>15&&(cs(e,f,q[B]>>5&127),f+=q[B]>>12)}}else le=T8,we=fo,X=k8,ae=hc;for(var B=0;B<a;++B){var Q=r[B];if(Q>255){var z=Q>>18&31;Tu(e,f,le[z+257]),f+=we[z+257],z>7&&(cs(e,f,Q>>23&31),f+=Oh[z]);var re=Q&31;Tu(e,f,X[re]),f+=ae[re],re>3&&(Tu(e,f,Q>>5&8191),f+=jh[re])}else Tu(e,f,le[Q]),f+=we[Q]}return Tu(e,f,le[256]),f+we[256]},L8=new Nv([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),IS=new Yn(0),M8=function(t,e,n,r,i,s){var o=s.z||t.length,a=new Yn(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),u=s.l,f=(s.r||0)&7;if(e){f&&(l[0]=s.r>>3);for(var p=L8[e-1],m=p>>13,g=p&8191,S=(1<<n)-1,_=s.p||new Mr(32768),E=s.h||new Mr(S+1),b=Math.ceil(n/3),N=2*b,T=function(Qe){return(t[Qe]^t[Qe+1]<<b^t[Qe+2]<<N)&S},M=new Nv(25e3),U=new Mr(288),Y=new Mr(32),H=0,B=0,W=s.i||0,ne=0,D=s.w||0,j=0;W+2<o;++W){var O=T(W),V=W&32767,he=E[O];if(_[V]=he,E[O]=V,D<=W){var le=o-W;if((H>7e3||ne>24576)&&(le>423||!u)){f=w5(t,l,0,M,U,Y,B,ne,j,W-j,f),ne=H=B=0,j=W;for(var we=0;we<286;++we)U[we]=0;for(var we=0;we<30;++we)Y[we]=0}var X=2,ae=0,fe=g,Ce=V-he&32767;if(le>2&&O==T(W-Ce))for(var P=Math.min(m,le)-1,q=Math.min(32767,W),z=Math.min(258,le);Ce<=q&&--fe&&V!=he;){if(t[W+X]==t[W+X-Ce]){for(var Q=0;Q<z&&t[W+Q]==t[W+Q-Ce];++Q);if(Q>X){if(X=Q,ae=Ce,Q>P)break;for(var re=Math.min(Ce,Q-2),ce=0,we=0;we<re;++we){var ve=W-Ce+we&32767,ye=_[ve],De=ve-ye&32767;De>ce&&(ce=De,he=ve)}}}V=he,he=_[V],Ce+=V-he&32767}if(ae){M[ne++]=268435456|Qm[X]<<18|v5[ae];var Ie=Qm[X]&31,je=v5[ae]&31;B+=Oh[Ie]+jh[je],++U[257+Ie],++Y[je],D=W+X,++H}else M[ne++]=t[W],++U[t[W]]}}for(W=Math.max(W,D);W<o;++W)M[ne++]=t[W],++U[t[W]];f=w5(t,l,u,M,U,Y,B,ne,j,W-j,f),u||(s.r=f&7|l[f/8|0]<<3,f-=7,s.h=E,s.p=_,s.i=W,s.w=D)}else{for(var W=s.w||0;W<o+u;W+=65535){var Oe=W+65535;Oe>=o&&(l[f/8|0]=u,Oe=o),f=PS(l,f+1,t.subarray(W,Oe))}s.i=o}return kS(a,0,r+Av(f)+i)},RS=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},D8=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new Yn(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return M8(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},LS=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},F8=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=RS();i.p(e.dictionary),LS(t,2,i.d())}},O8=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&yi(6,"invalid zlib data"),(t[1]>>5&1)==1&&yi(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function tg(t,e){e||(e={});var n=RS();n.p(t);var r=D8(t,e,e.dictionary?6:2,4);return F8(r,e),LS(r,r.length-4,n.d()),r}function j8(t,e){return R8(t.subarray(O8(t),-4),{i:2},e,e)}var U8=typeof TextDecoder<"u"&&new TextDecoder,B8=0;try{U8.decode(IS,{stream:!0}),B8=1}catch{}var st=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function g0(){st.console&&typeof st.console.log=="function"&&st.console.log.apply(st.console,arguments)}var Dt={log:g0,warn:function(t){st.console&&(typeof st.console.warn=="function"?st.console.warn.apply(st.console,arguments):g0.call(null,arguments))},error:function(t){st.console&&(typeof st.console.error=="function"?st.console.error.apply(st.console,arguments):g0(t))}};function v0(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Bo(r.response,e,n)},r.onerror=function(){Dt.error("could not download file")},r.send()}function x5(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function $d(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Wu,ng,Bo=st.saveAs||((typeof window>"u"?"undefined":It(window))!=="object"||window!==st?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=st.URL||st.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?x5(i.href)?v0(t,e,n):$d(i,i.target="_blank"):$d(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){$d(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(x5(t))v0(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){$d(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:It(s)!=="object"&&(Dt.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return v0(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(st.HTMLElement)||st.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":It(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var f=a.result;f=o?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=f:location=f,r=null},a.readAsDataURL(t)}else{var l=st.URL||st.webkitURL,u=l.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function MS(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+a+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function y0(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=Hn(n,r,i,s,e[0],7,-680876936),s=Hn(s,n,r,i,e[1],12,-389564586),i=Hn(i,s,n,r,e[2],17,606105819),r=Hn(r,i,s,n,e[3],22,-1044525330),n=Hn(n,r,i,s,e[4],7,-176418897),s=Hn(s,n,r,i,e[5],12,1200080426),i=Hn(i,s,n,r,e[6],17,-1473231341),r=Hn(r,i,s,n,e[7],22,-45705983),n=Hn(n,r,i,s,e[8],7,1770035416),s=Hn(s,n,r,i,e[9],12,-1958414417),i=Hn(i,s,n,r,e[10],17,-42063),r=Hn(r,i,s,n,e[11],22,-1990404162),n=Hn(n,r,i,s,e[12],7,1804603682),s=Hn(s,n,r,i,e[13],12,-40341101),i=Hn(i,s,n,r,e[14],17,-1502002290),n=zn(n,r=Hn(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=zn(s,n,r,i,e[6],9,-1069501632),i=zn(i,s,n,r,e[11],14,643717713),r=zn(r,i,s,n,e[0],20,-373897302),n=zn(n,r,i,s,e[5],5,-701558691),s=zn(s,n,r,i,e[10],9,38016083),i=zn(i,s,n,r,e[15],14,-660478335),r=zn(r,i,s,n,e[4],20,-405537848),n=zn(n,r,i,s,e[9],5,568446438),s=zn(s,n,r,i,e[14],9,-1019803690),i=zn(i,s,n,r,e[3],14,-187363961),r=zn(r,i,s,n,e[8],20,1163531501),n=zn(n,r,i,s,e[13],5,-1444681467),s=zn(s,n,r,i,e[2],9,-51403784),i=zn(i,s,n,r,e[7],14,1735328473),n=Gn(n,r=zn(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Gn(s,n,r,i,e[8],11,-2022574463),i=Gn(i,s,n,r,e[11],16,1839030562),r=Gn(r,i,s,n,e[14],23,-35309556),n=Gn(n,r,i,s,e[1],4,-1530992060),s=Gn(s,n,r,i,e[4],11,1272893353),i=Gn(i,s,n,r,e[7],16,-155497632),r=Gn(r,i,s,n,e[10],23,-1094730640),n=Gn(n,r,i,s,e[13],4,681279174),s=Gn(s,n,r,i,e[0],11,-358537222),i=Gn(i,s,n,r,e[3],16,-722521979),r=Gn(r,i,s,n,e[6],23,76029189),n=Gn(n,r,i,s,e[9],4,-640364487),s=Gn(s,n,r,i,e[12],11,-421815835),i=Gn(i,s,n,r,e[15],16,530742520),n=Wn(n,r=Gn(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Wn(s,n,r,i,e[7],10,1126891415),i=Wn(i,s,n,r,e[14],15,-1416354905),r=Wn(r,i,s,n,e[5],21,-57434055),n=Wn(n,r,i,s,e[12],6,1700485571),s=Wn(s,n,r,i,e[3],10,-1894986606),i=Wn(i,s,n,r,e[10],15,-1051523),r=Wn(r,i,s,n,e[1],21,-2054922799),n=Wn(n,r,i,s,e[8],6,1873313359),s=Wn(s,n,r,i,e[15],10,-30611744),i=Wn(i,s,n,r,e[6],15,-1560198380),r=Wn(r,i,s,n,e[13],21,1309151649),n=Wn(n,r,i,s,e[4],6,-145523070),s=Wn(s,n,r,i,e[11],10,-1120210379),i=Wn(i,s,n,r,e[2],15,718787259),r=Wn(r,i,s,n,e[9],21,-343485551),t[0]=Zs(n,t[0]),t[1]=Zs(r,t[1]),t[2]=Zs(i,t[2]),t[3]=Zs(s,t[3])}function Uh(t,e,n,r,i,s){return e=Zs(Zs(e,t),Zs(r,s)),Zs(e<<i|e>>>32-i,n)}function Hn(t,e,n,r,i,s,o){return Uh(e&n|~e&r,t,e,i,s,o)}function zn(t,e,n,r,i,s,o){return Uh(e&r|n&~r,t,e,i,s,o)}function Gn(t,e,n,r,i,s,o){return Uh(e^n^r,t,e,i,s,o)}function Wn(t,e,n,r,i,s,o){return Uh(n^(e|~r),t,e,i,s,o)}function DS(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)y0(r,q8(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(y0(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,y0(r,i),r}function q8(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Wu=st.atob.bind(st),ng=st.btoa.bind(st);var b5="0123456789abcdef".split("");function V8(t){for(var e="",n=0;n<4;n++)e+=b5[t>>8*n+4&15]+b5[t>>8*n&15];return e}function $8(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function rg(t){return DS(t).map($8).join("")}var H8=function(t){for(var e=0;e<t.length;e++)t[e]=V8(t[e]);return t.join("")}(DS("hello"))!="5d41402abc4b2a76b9719d911017c592";function Zs(t,e){if(H8){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function ig(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var u=0;for(l=0;l<256;l++){var f=a[l];u=(u+f+o.charCodeAt(l))%256,a[l]=a[u],a[u]=f}n=t,r=a}else a=r;var p=e.length,m=0,g=0,S="";for(l=0;l<p;l++)g=(g+(f=a[m=(m+1)%256]))%256,a[m]=a[g],a[g]=f,o=a[(a[m]+a[g])%256],S+=String.fromCharCode(e.charCodeAt(l)^o);return S}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var _5={print:4,modify:8,copy:16,"annot-forms":32};function Ga(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(_5.perm!==void 0)throw new Error("Invalid permission: "+a);i+=_5[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=rg(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=ig(this.encryptionKey,this.padding)}function Wa(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function S5(t){if(It(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){st.console&&Dt.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function sh(t){if(!(this instanceof sh))return new sh(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function FS(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function $o(t,e,n,r,i){if(!(this instanceof $o))return new $o(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,FS.call(this,r,i)}function ll(t,e,n,r,i){if(!(this instanceof ll))return new ll(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,FS.call(this,r,i)}function it(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,u="S",f=null;It(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(f=t.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,m={},g={internal:{},__private__:{}};g.__private__.PubSub=S5;var S="1.3",_=g.__private__.getPdfVersion=function(){return S};g.__private__.setPdfVersion=function(w){S=w};var E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return E};var b=g.__private__.getPageFormat=function(w){return E[w]};i=i||"a4";var N={COMPAT:"compat",ADVANCED:"advanced"},T=N.COMPAT;function M(){this.saveGraphicsState(),J(new nt(Ne,0,0,-Ne,0,Cs()*Ne).toString()+" cm"),this.setFontSize(this.getFontSize()/Ne),u="n",T=N.ADVANCED}function U(){this.restoreGraphicsState(),u="S",T=N.COMPAT}var Y=g.__private__.combineFontStyleAndFontWeight=function(w,k){if(w=="bold"&&k=="normal"||w=="bold"&&k==400||w=="normal"&&k=="italic"||w=="bold"&&k=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return k&&(w=k==400||k==="normal"?w==="italic"?"italic":"normal":k!=700&&k!=="bold"||w!=="normal"?(k==700?"bold":k)+""+w:"bold"),w};g.advancedAPI=function(w){var k=T===N.COMPAT;return k&&M.call(this),typeof w!="function"||(w(this),k&&U.call(this)),this},g.compatAPI=function(w){var k=T===N.ADVANCED;return k&&U.call(this),typeof w!="function"||(w(this),k&&M.call(this)),this},g.isAdvancedAPI=function(){return T===N.ADVANCED};var H,B=function(w){if(T!==N.ADVANCED)throw new Error(w+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},W=g.roundToPrecision=g.__private__.roundToPrecision=function(w,k){var G=e||k;if(isNaN(w)||isNaN(G))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return w.toFixed(G).replace(/0+$/,"")};H=g.hpf=g.__private__.hpf=typeof l=="number"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return W(w,l)}:l==="smart"?function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return W(w,w>-1&&w<1?16:5)}:function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.hpf");return W(w,16)};var ne=g.f2=g.__private__.f2=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f2");return W(w,2)},D=g.__private__.f3=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.f3");return W(w,3)},j=g.scale=g.__private__.scale=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.scale");return T===N.COMPAT?w*Ne:T===N.ADVANCED?w:void 0},O=function(w){return T===N.COMPAT?Cs()-w:T===N.ADVANCED?w:void 0},V=function(w){return j(O(w))};g.__private__.setPrecision=g.setPrecision=function(w){typeof parseInt(w,10)=="number"&&(e=parseInt(w,10))};var he,le="00000000000000000000000000000000",we=g.__private__.getFileId=function(){return le},X=g.__private__.setFileId=function(w){return le=w!==void 0&&/^[a-fA-F0-9]{32}$/.test(w)?w.toUpperCase():le.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(Bn=new Ga(f.userPermissions,f.userPassword,f.ownerPassword,le)),le};g.setFileId=function(w){return X(w),this},g.getFileId=function(){return we()};var ae=g.__private__.convertDateToPDFDate=function(w){var k=w.getTimezoneOffset(),G=k<0?"+":"-",Z=Math.floor(Math.abs(k/60)),de=Math.abs(k%60),_e=[G,z(Z),"'",z(de),"'"].join("");return["D:",w.getFullYear(),z(w.getMonth()+1),z(w.getDate()),z(w.getHours()),z(w.getMinutes()),z(w.getSeconds()),_e].join("")},fe=g.__private__.convertPDFDateToDate=function(w){var k=parseInt(w.substr(2,4),10),G=parseInt(w.substr(6,2),10)-1,Z=parseInt(w.substr(8,2),10),de=parseInt(w.substr(10,2),10),_e=parseInt(w.substr(12,2),10),Me=parseInt(w.substr(14,2),10);return new Date(k,G,Z,de,_e,Me,0)},Ce=g.__private__.setCreationDate=function(w){var k;if(w===void 0&&(w=new Date),w instanceof Date)k=ae(w);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(w))throw new Error("Invalid argument passed to jsPDF.setCreationDate");k=w}return he=k},P=g.__private__.getCreationDate=function(w){var k=he;return w==="jsDate"&&(k=fe(he)),k};g.setCreationDate=function(w){return Ce(w),this},g.getCreationDate=function(w){return P(w)};var q,z=g.__private__.padd2=function(w){return("0"+parseInt(w)).slice(-2)},Q=g.__private__.padd2Hex=function(w){return("00"+(w=w.toString())).substr(w.length)},re=0,ce=[],ve=[],ye=0,De=[],Ie=[],je=!1,Oe=ve,Qe=function(){re=0,ye=0,ve=[],ce=[],De=[],es=hn(),ii=hn()};g.__private__.setCustomOutputDestination=function(w){je=!0,Oe=w};var be=function(w){je||(Oe=w)};g.__private__.resetCustomOutputDestination=function(){je=!1,Oe=ve};var J=g.__private__.out=function(w){return w=w.toString(),ye+=w.length+1,Oe.push(w),Oe},qe=g.__private__.write=function(w){return J(arguments.length===1?w.toString():Array.prototype.join.call(arguments," "))},ge=g.__private__.getArrayBuffer=function(w){for(var k=w.length,G=new ArrayBuffer(k),Z=new Uint8Array(G);k--;)Z[k]=w.charCodeAt(k);return G},ue=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return ue};var Se=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(w){return Se=T===N.ADVANCED?w/Ne:w,this};var ke,Le=g.__private__.getFontSize=g.getFontSize=function(){return T===N.COMPAT?Se:Se*Ne},Ge=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(w){return Ge=w,this},g.__private__.getR2L=g.getR2L=function(){return Ge};var Ze,ot=g.__private__.setZoomMode=function(w){var k=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(w))ke=w;else if(isNaN(w)){if(k.indexOf(w)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+w+'" is not recognized.');ke=w}else ke=parseInt(w,10)};g.__private__.getZoomMode=function(){return ke};var at,vt=g.__private__.setPageMode=function(w){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(w)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+w+'" is not recognized.');Ze=w};g.__private__.getPageMode=function(){return Ze};var K=g.__private__.setLayoutMode=function(w){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(w)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+w+'" is not recognized.');at=w};g.__private__.getLayoutMode=function(){return at},g.__private__.setDisplayMode=g.setDisplayMode=function(w,k,G){return ot(w),K(k),vt(G),this};var ie={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(w){if(Object.keys(ie).indexOf(w)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ie[w]},g.__private__.getDocumentProperties=function(){return ie},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(w){for(var k in ie)ie.hasOwnProperty(k)&&w[k]&&(ie[k]=w[k]);return this},g.__private__.setDocumentProperty=function(w,k){if(Object.keys(ie).indexOf(w)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ie[w]=k};var Re,Ne,lt,xt,Sr,Ct={},Ft={},Ur=[],We={},Nr={},Xt={},ni={},Zi=null,Qt=0,ft=[],Tt=new S5(g),wo=t.hotfixes||[],Rn={},Ii={},Ri=[],nt=function w(k,G,Z,de,_e,Me){if(!(this instanceof w))return new w(k,G,Z,de,_e,Me);isNaN(k)&&(k=1),isNaN(G)&&(G=0),isNaN(Z)&&(Z=0),isNaN(de)&&(de=1),isNaN(_e)&&(_e=0),isNaN(Me)&&(Me=0),this._matrix=[k,G,Z,de,_e,Me]};Object.defineProperty(nt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(nt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(nt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(nt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(nt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(nt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(nt.prototype,"a",{get:function(){return this._matrix[0]},set:function(w){this._matrix[0]=w}}),Object.defineProperty(nt.prototype,"b",{get:function(){return this._matrix[1]},set:function(w){this._matrix[1]=w}}),Object.defineProperty(nt.prototype,"c",{get:function(){return this._matrix[2]},set:function(w){this._matrix[2]=w}}),Object.defineProperty(nt.prototype,"d",{get:function(){return this._matrix[3]},set:function(w){this._matrix[3]=w}}),Object.defineProperty(nt.prototype,"e",{get:function(){return this._matrix[4]},set:function(w){this._matrix[4]=w}}),Object.defineProperty(nt.prototype,"f",{get:function(){return this._matrix[5]},set:function(w){this._matrix[5]=w}}),Object.defineProperty(nt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(nt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(nt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(nt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),nt.prototype.join=function(w){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(H).join(w)},nt.prototype.multiply=function(w){var k=w.sx*this.sx+w.shy*this.shx,G=w.sx*this.shy+w.shy*this.sy,Z=w.shx*this.sx+w.sy*this.shx,de=w.shx*this.shy+w.sy*this.sy,_e=w.tx*this.sx+w.ty*this.shx+this.tx,Me=w.tx*this.shy+w.ty*this.sy+this.ty;return new nt(k,G,Z,de,_e,Me)},nt.prototype.decompose=function(){var w=this.sx,k=this.shy,G=this.shx,Z=this.sy,de=this.tx,_e=this.ty,Me=Math.sqrt(w*w+k*k),$e=(w/=Me)*G+(k/=Me)*Z;G-=w*$e,Z-=k*$e;var et=Math.sqrt(G*G+Z*Z);return $e/=et,w*(Z/=et)<k*(G/=et)&&(w=-w,k=-k,$e=-$e,Me=-Me),{scale:new nt(Me,0,0,et,0,0),translate:new nt(1,0,0,1,de,_e),rotate:new nt(w,k,-k,w,0,0),skew:new nt(1,0,$e,1,0,0)}},nt.prototype.toString=function(w){return this.join(" ")},nt.prototype.inversed=function(){var w=this.sx,k=this.shy,G=this.shx,Z=this.sy,de=this.tx,_e=this.ty,Me=1/(w*Z-k*G),$e=Z*Me,et=-k*Me,mt=-G*Me,ht=w*Me;return new nt($e,et,mt,ht,-$e*de-mt*_e,-et*de-ht*_e)},nt.prototype.applyToPoint=function(w){var k=w.x*this.sx+w.y*this.shx+this.tx,G=w.x*this.shy+w.y*this.sy+this.ty;return new wa(k,G)},nt.prototype.applyToRectangle=function(w){var k=this.applyToPoint(w),G=this.applyToPoint(new wa(w.x+w.w,w.y+w.h));return new Xl(k.x,k.y,G.x-k.x,G.y-k.y)},nt.prototype.clone=function(){var w=this.sx,k=this.shy,G=this.shx,Z=this.sy,de=this.tx,_e=this.ty;return new nt(w,k,G,Z,de,_e)},g.Matrix=nt;var ri=g.matrixMult=function(w,k){return k.multiply(w)},Li=new nt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=Li;var lr=function(w,k){if(!Nr[w]){var G=(k instanceof $o?"Sh":"P")+(Object.keys(We).length+1).toString(10);k.id=G,Nr[w]=G,We[G]=k,Tt.publish("addPattern",k)}};g.ShadingPattern=$o,g.TilingPattern=ll,g.addShadingPattern=function(w,k){return B("addShadingPattern()"),lr(w,k),this},g.beginTilingPattern=function(w){B("beginTilingPattern()"),Bc(w.boundingBox[0],w.boundingBox[1],w.boundingBox[2]-w.boundingBox[0],w.boundingBox[3]-w.boundingBox[1],w.matrix)},g.endTilingPattern=function(w,k){B("endTilingPattern()"),k.stream=Ie[q].join(`
`),lr(w,k),Tt.publish("endTilingPattern",k),Ri.pop().restore()};var bn=g.__private__.newObject=function(){var w=hn();return Ar(w,!0),w},hn=g.__private__.newObjectDeferred=function(){return re++,ce[re]=function(){return ye},re},Ar=function(w,k){return k=typeof k=="boolean"&&k,ce[w]=ye,k&&J(w+" 0 obj"),w},oa=g.__private__.newAdditionalObject=function(){var w={objId:hn(),content:""};return De.push(w),w},es=hn(),ii=hn(),si=g.__private__.decodeColorString=function(w){var k=w.split(" ");if(k.length!==2||k[1]!=="g"&&k[1]!=="G")k.length===5&&(k[4]==="k"||k[4]==="K")&&(k=[(1-k[0])*(1-k[3]),(1-k[1])*(1-k[3]),(1-k[2])*(1-k[3]),"r"]);else{var G=parseFloat(k[0]);k=[G,G,G,"r"]}for(var Z="#",de=0;de<3;de++)Z+=("0"+Math.floor(255*parseFloat(k[de])).toString(16)).slice(-2);return Z},oi=g.__private__.encodeColorString=function(w){var k;typeof w=="string"&&(w={ch1:w});var G=w.ch1,Z=w.ch2,de=w.ch3,_e=w.ch4,Me=w.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof G=="string"&&G.charAt(0)!=="#"){var $e=new MS(G);if($e.ok)G=$e.toHex();else if(!/^\d*\.?\d*$/.test(G))throw new Error('Invalid color "'+G+'" passed to jsPDF.encodeColorString.')}if(typeof G=="string"&&/^#[0-9A-Fa-f]{3}$/.test(G)&&(G="#"+G[1]+G[1]+G[2]+G[2]+G[3]+G[3]),typeof G=="string"&&/^#[0-9A-Fa-f]{6}$/.test(G)){var et=parseInt(G.substr(1),16);G=et>>16&255,Z=et>>8&255,de=255&et}if(Z===void 0||_e===void 0&&G===Z&&Z===de)if(typeof G=="string")k=G+" "+Me[0];else switch(w.precision){case 2:k=ne(G/255)+" "+Me[0];break;case 3:default:k=D(G/255)+" "+Me[0]}else if(_e===void 0||It(_e)==="object"){if(_e&&!isNaN(_e.a)&&_e.a===0)return k=["1.","1.","1.",Me[1]].join(" ");if(typeof G=="string")k=[G,Z,de,Me[1]].join(" ");else switch(w.precision){case 2:k=[ne(G/255),ne(Z/255),ne(de/255),Me[1]].join(" ");break;default:case 3:k=[D(G/255),D(Z/255),D(de/255),Me[1]].join(" ")}}else if(typeof G=="string")k=[G,Z,de,_e,Me[2]].join(" ");else switch(w.precision){case 2:k=[ne(G),ne(Z),ne(de),ne(_e),Me[2]].join(" ");break;case 3:default:k=[D(G),D(Z),D(de),D(_e),Me[2]].join(" ")}return k},Mi=g.__private__.getFilters=function(){return o},Br=g.__private__.putStream=function(w){var k=(w=w||{}).data||"",G=w.filters||Mi(),Z=w.alreadyAppliedFilters||[],de=w.addLength1||!1,_e=k.length,Me=w.objectId,$e=function(qn){return qn};if(f!==null&&Me===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&($e=Bn.encryptor(Me,0));var et={};G===!0&&(G=["FlateEncode"]);var mt=w.additionalKeyValues||[],ht=(et=it.API.processDataByFilters!==void 0?it.API.processDataByFilters(k,G):{data:k,reverseChain:[]}).reverseChain+(Array.isArray(Z)?Z.join(" "):Z.toString());if(et.data.length!==0&&(mt.push({key:"Length",value:et.data.length}),de===!0&&mt.push({key:"Length1",value:_e})),ht.length!=0)if(ht.split("/").length-1==1)mt.push({key:"Filter",value:ht});else{mt.push({key:"Filter",value:"["+ht+"]"});for(var bt=0;bt<mt.length;bt+=1)if(mt[bt].key==="DecodeParms"){for(var Gt=[],Zt=0;Zt<et.reverseChain.split("/").length-1;Zt+=1)Gt.push("null");Gt.push(mt[bt].value),mt[bt].value="["+Gt.join(" ")+"]"}}J("<<");for(var pn=0;pn<mt.length;pn++)J("/"+mt[pn].key+" "+mt[pn].value);J(">>"),et.data.length!==0&&(J("stream"),J($e(et.data)),J("endstream"))},Di=g.__private__.putPage=function(w){var k=w.number,G=w.data,Z=w.objId,de=w.contentsObjId;Ar(Z,!0),J("<</Type /Page"),J("/Parent "+w.rootDictionaryObjId+" 0 R"),J("/Resources "+w.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(H(w.mediaBox.bottomLeftX))+" "+parseFloat(H(w.mediaBox.bottomLeftY))+" "+H(w.mediaBox.topRightX)+" "+H(w.mediaBox.topRightY)+"]"),w.cropBox!==null&&J("/CropBox ["+H(w.cropBox.bottomLeftX)+" "+H(w.cropBox.bottomLeftY)+" "+H(w.cropBox.topRightX)+" "+H(w.cropBox.topRightY)+"]"),w.bleedBox!==null&&J("/BleedBox ["+H(w.bleedBox.bottomLeftX)+" "+H(w.bleedBox.bottomLeftY)+" "+H(w.bleedBox.topRightX)+" "+H(w.bleedBox.topRightY)+"]"),w.trimBox!==null&&J("/TrimBox ["+H(w.trimBox.bottomLeftX)+" "+H(w.trimBox.bottomLeftY)+" "+H(w.trimBox.topRightX)+" "+H(w.trimBox.topRightY)+"]"),w.artBox!==null&&J("/ArtBox ["+H(w.artBox.bottomLeftX)+" "+H(w.artBox.bottomLeftY)+" "+H(w.artBox.topRightX)+" "+H(w.artBox.topRightY)+"]"),typeof w.userUnit=="number"&&w.userUnit!==1&&J("/UserUnit "+w.userUnit),Tt.publish("putPage",{objId:Z,pageContext:ft[k],pageNumber:k,page:G}),J("/Contents "+de+" 0 R"),J(">>"),J("endobj");var _e=G.join(`
`);return T===N.ADVANCED&&(_e+=`
Q`),Ar(de,!0),Br({data:_e,filters:Mi(),objectId:de}),J("endobj"),Z},xo=g.__private__.putPages=function(){var w,k,G=[];for(w=1;w<=Qt;w++)ft[w].objId=hn(),ft[w].contentsObjId=hn();for(w=1;w<=Qt;w++)G.push(Di({number:w,data:Ie[w],objId:ft[w].objId,contentsObjId:ft[w].contentsObjId,mediaBox:ft[w].mediaBox,cropBox:ft[w].cropBox,bleedBox:ft[w].bleedBox,trimBox:ft[w].trimBox,artBox:ft[w].artBox,userUnit:ft[w].userUnit,rootDictionaryObjId:es,resourceDictionaryObjId:ii}));Ar(es,!0),J("<</Type /Pages");var Z="/Kids [";for(k=0;k<Qt;k++)Z+=G[k]+" 0 R ";J(Z+"]"),J("/Count "+Qt),J(">>"),J("endobj"),Tt.publish("postPutPages")},aa=function(w){Tt.publish("putFont",{font:w,out:J,newObject:bn,putStream:Br}),w.isAlreadyPutted!==!0&&(w.objectNumber=bn(),J("<<"),J("/Type /Font"),J("/BaseFont /"+Wa(w.postScriptName)),J("/Subtype /Type1"),typeof w.encoding=="string"&&J("/Encoding /"+w.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},la=function(){for(var w in Ct)Ct.hasOwnProperty(w)&&(p===!1||p===!0&&m.hasOwnProperty(w))&&aa(Ct[w])},ua=function(w){w.objectNumber=bn();var k=[];k.push({key:"Type",value:"/XObject"}),k.push({key:"Subtype",value:"/Form"}),k.push({key:"BBox",value:"["+[H(w.x),H(w.y),H(w.x+w.width),H(w.y+w.height)].join(" ")+"]"}),k.push({key:"Matrix",value:"["+w.matrix.toString()+"]"});var G=w.pages[1].join(`
`);Br({data:G,additionalKeyValues:k,objectId:w.objectNumber}),J("endobj")},ca=function(){for(var w in Rn)Rn.hasOwnProperty(w)&&ua(Rn[w])},_c=function(w,k){var G,Z=[],de=1/(k-1);for(G=0;G<1;G+=de)Z.push(G);if(Z.push(1),w[0].offset!=0){var _e={offset:0,color:w[0].color};w.unshift(_e)}if(w[w.length-1].offset!=1){var Me={offset:1,color:w[w.length-1].color};w.push(Me)}for(var $e="",et=0,mt=0;mt<Z.length;mt++){for(G=Z[mt];G>w[et+1].offset;)et++;var ht=w[et].offset,bt=(G-ht)/(w[et+1].offset-ht),Gt=w[et].color,Zt=w[et+1].color;$e+=Q(Math.round((1-bt)*Gt[0]+bt*Zt[0]).toString(16))+Q(Math.round((1-bt)*Gt[1]+bt*Zt[1]).toString(16))+Q(Math.round((1-bt)*Gt[2]+bt*Zt[2]).toString(16))}return $e.trim()},qh=function(w,k){k||(k=21);var G=bn(),Z=_c(w.colors,k),de=[];de.push({key:"FunctionType",value:"0"}),de.push({key:"Domain",value:"[0.0 1.0]"}),de.push({key:"Size",value:"["+k+"]"}),de.push({key:"BitsPerSample",value:"8"}),de.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),de.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Br({data:Z,additionalKeyValues:de,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:G}),J("endobj"),w.objectNumber=bn(),J("<< /ShadingType "+w.type),J("/ColorSpace /DeviceRGB");var _e="/Coords ["+H(parseFloat(w.coords[0]))+" "+H(parseFloat(w.coords[1]))+" ";w.type===2?_e+=H(parseFloat(w.coords[2]))+" "+H(parseFloat(w.coords[3])):_e+=H(parseFloat(w.coords[2]))+" "+H(parseFloat(w.coords[3]))+" "+H(parseFloat(w.coords[4]))+" "+H(parseFloat(w.coords[5])),J(_e+="]"),w.matrix&&J("/Matrix ["+w.matrix.toString()+"]"),J("/Function "+G+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},Vh=function(w,k){var G=hn(),Z=bn();k.push({resourcesOid:G,objectOid:Z}),w.objectNumber=Z;var de=[];de.push({key:"Type",value:"/Pattern"}),de.push({key:"PatternType",value:"1"}),de.push({key:"PaintType",value:"1"}),de.push({key:"TilingType",value:"1"}),de.push({key:"BBox",value:"["+w.boundingBox.map(H).join(" ")+"]"}),de.push({key:"XStep",value:H(w.xStep)}),de.push({key:"YStep",value:H(w.yStep)}),de.push({key:"Resources",value:G+" 0 R"}),w.matrix&&de.push({key:"Matrix",value:"["+w.matrix.toString()+"]"}),Br({data:w.stream,additionalKeyValues:de,objectId:w.objectNumber}),J("endobj")},da=function(w){var k;for(k in We)We.hasOwnProperty(k)&&(We[k]instanceof $o?qh(We[k]):We[k]instanceof ll&&Vh(We[k],w))},Sc=function(w){for(var k in w.objectNumber=bn(),J("<<"),w)switch(k){case"opacity":J("/ca "+ne(w[k]));break;case"stroke-opacity":J("/CA "+ne(w[k]))}J(">>"),J("endobj")},$h=function(){var w;for(w in Xt)Xt.hasOwnProperty(w)&&Sc(Xt[w])},ql=function(){for(var w in J("/XObject <<"),Rn)Rn.hasOwnProperty(w)&&Rn[w].objectNumber>=0&&J("/"+w+" "+Rn[w].objectNumber+" 0 R");Tt.publish("putXobjectDict"),J(">>")},Hh=function(){Bn.oid=bn(),J("<<"),J("/Filter /Standard"),J("/V "+Bn.v),J("/R "+Bn.r),J("/U <"+Bn.toHexString(Bn.U)+">"),J("/O <"+Bn.toHexString(Bn.O)+">"),J("/P "+Bn.P),J(">>"),J("endobj")},Nc=function(){for(var w in J("/Font <<"),Ct)Ct.hasOwnProperty(w)&&(p===!1||p===!0&&m.hasOwnProperty(w))&&J("/"+w+" "+Ct[w].objectNumber+" 0 R");J(">>")},zh=function(){if(Object.keys(We).length>0){for(var w in J("/Shading <<"),We)We.hasOwnProperty(w)&&We[w]instanceof $o&&We[w].objectNumber>=0&&J("/"+w+" "+We[w].objectNumber+" 0 R");Tt.publish("putShadingPatternDict"),J(">>")}},fa=function(w){if(Object.keys(We).length>0){for(var k in J("/Pattern <<"),We)We.hasOwnProperty(k)&&We[k]instanceof g.TilingPattern&&We[k].objectNumber>=0&&We[k].objectNumber<w&&J("/"+k+" "+We[k].objectNumber+" 0 R");Tt.publish("putTilingPatternDict"),J(">>")}},Gh=function(){if(Object.keys(Xt).length>0){var w;for(w in J("/ExtGState <<"),Xt)Xt.hasOwnProperty(w)&&Xt[w].objectNumber>=0&&J("/"+w+" "+Xt[w].objectNumber+" 0 R");Tt.publish("putGStateDict"),J(">>")}},on=function(w){Ar(w.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Nc(),zh(),fa(w.objectOid),Gh(),ql(),J(">>"),J("endobj")},Ac=function(){var w=[];la(),$h(),ca(),da(w),Tt.publish("putResources"),w.forEach(on),on({resourcesOid:ii,objectOid:Number.MAX_SAFE_INTEGER}),Tt.publish("postPutResources")},Ec=function(){Tt.publish("putAdditionalObjects");for(var w=0;w<De.length;w++){var k=De[w];Ar(k.objId,!0),J(k.content),J("endobj")}Tt.publish("postPutAdditionalObjects")},Tc=function(w){Ft[w.fontName]=Ft[w.fontName]||{},Ft[w.fontName][w.fontStyle]=w.id},Vl=function(w,k,G,Z,de){var _e={id:"F"+(Object.keys(Ct).length+1).toString(10),postScriptName:w,fontName:k,fontStyle:G,encoding:Z,isStandardFont:de||!1,metadata:{}};return Tt.publish("addFont",{font:_e,instance:this}),Ct[_e.id]=_e,Tc(_e),_e.id},Wh=function(w){for(var k=0,G=ue.length;k<G;k++){var Z=Vl.call(this,w[k][0],w[k][1],w[k][2],ue[k][3],!0);p===!1&&(m[Z]=!0);var de=w[k][0].split("-");Tc({id:Z,fontName:de[0],fontStyle:de[1]||""})}Tt.publish("addFonts",{fonts:Ct,dictionary:Ft})},ai=function(w){return w.foo=function(){try{return w.apply(this,arguments)}catch(Z){var k=Z.stack||"";~k.indexOf(" at ")&&(k=k.split(" at ")[1]);var G="Error in function "+k.split(`
`)[0].split("<")[0]+": "+Z.message;if(!st.console)throw new Error(G);st.console.error(G,Z),st.alert&&alert(G)}},w.foo.bar=w,w.foo},ha=function(w,k){var G,Z,de,_e,Me,$e,et,mt,ht;if(de=(k=k||{}).sourceEncoding||"Unicode",Me=k.outputEncoding,(k.autoencode||Me)&&Ct[Re].metadata&&Ct[Re].metadata[de]&&Ct[Re].metadata[de].encoding&&(_e=Ct[Re].metadata[de].encoding,!Me&&Ct[Re].encoding&&(Me=Ct[Re].encoding),!Me&&_e.codePages&&(Me=_e.codePages[0]),typeof Me=="string"&&(Me=_e[Me]),Me)){for(et=!1,$e=[],G=0,Z=w.length;G<Z;G++)(mt=Me[w.charCodeAt(G)])?$e.push(String.fromCharCode(mt)):$e.push(w[G]),$e[G].charCodeAt(0)>>8&&(et=!0);w=$e.join("")}for(G=w.length;et===void 0&&G!==0;)w.charCodeAt(G-1)>>8&&(et=!0),G--;if(!et)return w;for($e=k.noBOM?[]:[254,255],G=0,Z=w.length;G<Z;G++){if((ht=(mt=w.charCodeAt(G))>>8)>>8)throw new Error("Character at position "+G+" of string '"+w+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");$e.push(ht),$e.push(mt-(ht<<8))}return String.fromCharCode.apply(void 0,$e)},ur=g.__private__.pdfEscape=g.pdfEscape=function(w,k){return ha(w,k).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},$l=g.__private__.beginPage=function(w){Ie[++Qt]=[],ft[Qt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(w[0]),topRightY:Number(w[1])}},kc(Qt),be(Ie[q])},Cc=function(w,k){var G,Z,de;switch(n=k||n,typeof w=="string"&&(G=b(w.toLowerCase()),Array.isArray(G)&&(Z=G[0],de=G[1])),Array.isArray(w)&&(Z=w[0]*Ne,de=w[1]*Ne),isNaN(Z)&&(Z=i[0],de=i[1]),(Z>14400||de>14400)&&(Dt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Z=Math.min(14400,Z),de=Math.min(14400,de)),i=[Z,de],n.substr(0,1)){case"l":de>Z&&(i=[de,Z]);break;case"p":Z>de&&(i=[de,Z])}$l(i),Dc(Wl),J(li),Kl!==0&&J(Kl+" J"),Yl!==0&&J(Yl+" j"),Tt.publish("addPage",{pageNumber:Qt})},Jh=function(w){w>0&&w<=Qt&&(Ie.splice(w,1),ft.splice(w,1),Qt--,q>Qt&&(q=Qt),this.setPage(q))},kc=function(w){w>0&&w<=Qt&&(q=w)},Kh=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return Ie.length-1},Pc=function(w,k,G){var Z,de=void 0;return G=G||{},w=w!==void 0?w:Ct[Re].fontName,k=k!==void 0?k:Ct[Re].fontStyle,Z=w.toLowerCase(),Ft[Z]!==void 0&&Ft[Z][k]!==void 0?de=Ft[Z][k]:Ft[w]!==void 0&&Ft[w][k]!==void 0?de=Ft[w][k]:G.disableWarning===!1&&Dt.warn("Unable to look up font label for font '"+w+"', '"+k+"'. Refer to getFontList() for available fonts."),de||G.noFallback||(de=Ft.times[k])==null&&(de=Ft.times.normal),de},Yh=g.__private__.putInfo=function(){var w=bn(),k=function(Z){return Z};for(var G in f!==null&&(k=Bn.encryptor(w,0)),J("<<"),J("/Producer ("+ur(k("jsPDF "+it.version))+")"),ie)ie.hasOwnProperty(G)&&ie[G]&&J("/"+G.substr(0,1).toUpperCase()+G.substr(1)+" ("+ur(k(ie[G]))+")");J("/CreationDate ("+ur(k(he))+")"),J(">>"),J("endobj")},Hl=g.__private__.putCatalog=function(w){var k=(w=w||{}).rootDictionaryObjId||es;switch(bn(),J("<<"),J("/Type /Catalog"),J("/Pages "+k+" 0 R"),ke||(ke="fullwidth"),ke){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var G=""+ke;G.substr(G.length-1)==="%"&&(ke=parseInt(ke)/100),typeof ke=="number"&&J("/OpenAction [3 0 R /XYZ null null "+ne(ke)+"]")}switch(at||(at="continuous"),at){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}Ze&&J("/PageMode /"+Ze),Tt.publish("putCatalog"),J(">>"),J("endobj")},Xh=g.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(re+1)),J("/Root "+re+" 0 R"),J("/Info "+(re-1)+" 0 R"),f!==null&&J("/Encrypt "+Bn.oid+" 0 R"),J("/ID [ <"+le+"> <"+le+"> ]"),J(">>")},Qh=g.__private__.putHeader=function(){J("%PDF-"+S),J("%")},Zh=g.__private__.putXRef=function(){var w="0000000000";J("xref"),J("0 "+(re+1)),J("0000000000 65535 f ");for(var k=1;k<=re;k++)typeof ce[k]=="function"?J((w+ce[k]()).slice(-10)+" 00000 n "):ce[k]!==void 0?J((w+ce[k]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},ts=g.__private__.buildDocument=function(){Qe(),be(ve),Tt.publish("buildDocument"),Qh(),xo(),Ec(),Ac(),f!==null&&Hh(),Yh(),Hl();var w=ye;return Zh(),Xh(),J("startxref"),J(""+w),J("%%EOF"),be(Ie[q]),ve.join(`
`)},pa=g.__private__.getBlob=function(w){return new Blob([ge(w)],{type:"application/pdf"})},ma=g.output=g.__private__.output=ai(function(w,k){switch(typeof(k=k||{})=="string"?k={filename:k}:k.filename=k.filename||"generated.pdf",w){case void 0:return ts();case"save":g.save(k.filename);break;case"arraybuffer":return ge(ts());case"blob":return pa(ts());case"bloburi":case"bloburl":if(st.URL!==void 0&&typeof st.URL.createObjectURL=="function")return st.URL&&st.URL.createObjectURL(pa(ts()))||void 0;Dt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var G="",Z=ts();try{G=ng(Z)}catch{G=ng(unescape(encodeURIComponent(Z)))}return"data:application/pdf;filename="+k.filename+";base64,"+G;case"pdfobjectnewwindow":if(Object.prototype.toString.call(st)==="[object Window]"){var de="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",_e=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';k.pdfObjectUrl&&(de=k.pdfObjectUrl,_e="");var Me='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+de+'"'+_e+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(k)+");<\/script></body></html>",$e=st.open();return $e!==null&&$e.document.write(Me),$e}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(st)==="[object Window]"){var et='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(k.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+k.filename+'" width="500px" height="400px" /></body></html>',mt=st.open();if(mt!==null){mt.document.write(et);var ht=this;mt.document.documentElement.querySelector("#pdfViewer").onload=function(){mt.document.title=k.filename,mt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ht.output("bloburl"))}}return mt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(st)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var bt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",k)+'"></iframe></body></html>',Gt=st.open();if(Gt!==null&&(Gt.document.write(bt),Gt.document.title=k.filename),Gt||typeof safari>"u")return Gt;break;case"datauri":case"dataurl":return st.document.location.href=this.output("datauristring",k);default:return null}}),Ic=function(w){return Array.isArray(wo)===!0&&wo.indexOf(w)>-1};switch(r){case"pt":Ne=1;break;case"mm":Ne=72/25.4;break;case"cm":Ne=72/2.54;break;case"in":Ne=72;break;case"px":Ne=Ic("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ne=12;break;case"ex":Ne=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Ne=r}var Bn=null;Ce(),X();var ep=function(w){return f!==null?Bn.encryptor(w,0):function(k){return k}},Rc=g.__private__.getPageInfo=g.getPageInfo=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ft[w].objId,pageNumber:w,pageContext:ft[w]}},ut=g.__private__.getPageInfoByObjId=function(w){if(isNaN(w)||w%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var k in ft)if(ft[k].objId===w)break;return Rc(k)},tp=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:ft[q].objId,pageNumber:q,pageContext:ft[q]}};g.addPage=function(){return Cc.apply(this,arguments),this},g.setPage=function(){return kc.apply(this,arguments),be.call(this,Ie[q]),this},g.insertPage=function(w){return this.addPage(),this.movePage(q,w),this},g.movePage=function(w,k){var G,Z;if(w>k){G=Ie[w],Z=ft[w];for(var de=w;de>k;de--)Ie[de]=Ie[de-1],ft[de]=ft[de-1];Ie[k]=G,ft[k]=Z,this.setPage(k)}else if(w<k){G=Ie[w],Z=ft[w];for(var _e=w;_e<k;_e++)Ie[_e]=Ie[_e+1],ft[_e]=ft[_e+1];Ie[k]=G,ft[k]=Z,this.setPage(k)}return this},g.deletePage=function(){return Jh.apply(this,arguments),this},g.__private__.text=g.text=function(w,k,G,Z,de){var _e,Me,$e,et,mt,ht,bt,Gt,Zt,pn=(Z=Z||{}).scope||this;if(typeof w=="number"&&typeof k=="number"&&(typeof G=="string"||Array.isArray(G))){var qn=G;G=k,k=w,w=qn}if(arguments[3]instanceof nt?(B("The transform parameter of text() with a Matrix value"),Zt=de):($e=arguments[4],et=arguments[5],It(bt=arguments[3])==="object"&&bt!==null||(typeof $e=="string"&&(et=$e,$e=null),typeof bt=="string"&&(et=bt,bt=null),typeof bt=="number"&&($e=bt,bt=null),Z={flags:bt,angle:$e,align:et})),isNaN(k)||isNaN(G)||w==null)throw new Error("Invalid arguments passed to jsPDF.text");if(w.length===0)return pn;var An="",ui=!1,Er=typeof Z.lineHeightFactor=="number"?Z.lineHeightFactor:_o,ji=pn.internal.scaleFactor;function qc(Ot){return Ot=Ot.split("	").join(Array(Z.TabLen||9).join(" ")),ur(Ot,bt)}function tu(Ot){for(var jt,ln=Ot.concat(),_n=[],os=ln.length;os--;)typeof(jt=ln.shift())=="string"?_n.push(jt):Array.isArray(Ot)&&(jt.length===1||jt[1]===void 0&&jt[2]===void 0)?_n.push(jt[0]):_n.push([jt[0],jt[1],jt[2]]);return _n}function nu(Ot,jt){var ln;if(typeof Ot=="string")ln=jt(Ot)[0];else if(Array.isArray(Ot)){for(var _n,os,cu=Ot.concat(),Pa=[],Gc=cu.length;Gc--;)typeof(_n=cu.shift())=="string"?Pa.push(jt(_n)[0]):Array.isArray(_n)&&typeof _n[0]=="string"&&(os=jt(_n[0],_n[1],_n[2]),Pa.push([os[0],os[1],os[2]]));ln=Pa}return ln}var ba=!1,ru=!0;if(typeof w=="string")ba=!0;else if(Array.isArray(w)){var iu=w.concat();Me=[];for(var _a,Ln=iu.length;Ln--;)(typeof(_a=iu.shift())!="string"||Array.isArray(_a)&&typeof _a[0]!="string")&&(ru=!1);ba=ru}if(ba===!1)throw new Error('Type of text must be string or Array. "'+w+'" is not recognized.');typeof w=="string"&&(w=w.match(/[\r?\n]/)?w.split(/\r\n|\r|\n/g):[w]);var Sa=Se/pn.internal.scaleFactor,Na=Sa*(Er-1);switch(Z.baseline){case"bottom":G-=Na;break;case"top":G+=Sa-Na;break;case"hanging":G+=Sa-2*Na;break;case"middle":G+=Sa/2-Na}if((ht=Z.maxWidth||0)>0&&(typeof w=="string"?w=pn.splitTextToSize(w,ht):Object.prototype.toString.call(w)==="[object Array]"&&(w=w.reduce(function(Ot,jt){return Ot.concat(pn.splitTextToSize(jt,ht))},[]))),_e={text:w,x:k,y:G,options:Z,mutex:{pdfEscape:ur,activeFontKey:Re,fonts:Ct,activeFontSize:Se}},Tt.publish("preProcessText",_e),w=_e.text,$e=(Z=_e.options).angle,!(Zt instanceof nt)&&$e&&typeof $e=="number"){$e*=Math.PI/180,Z.rotationDirection===0&&($e=-$e),T===N.ADVANCED&&($e=-$e);var Aa=Math.cos($e),su=Math.sin($e);Zt=new nt(Aa,su,-su,Aa,0,0)}else $e&&$e instanceof nt&&(Zt=$e);T!==N.ADVANCED||Zt||(Zt=Li),(mt=Z.charSpace||ya)!==void 0&&(An+=H(j(mt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Gt=Z.horizontalScale)!==void 0&&(An+=H(100*Gt)+` Tz
`),Z.lang;var cr=-1,dp=Z.renderingMode!==void 0?Z.renderingMode:Z.stroke,ou=pn.internal.getCurrentPageInfo().pageContext;switch(dp){case 0:case!1:case"fill":cr=0;break;case 1:case!0:case"stroke":cr=1;break;case 2:case"fillThenStroke":cr=2;break;case 3:case"invisible":cr=3;break;case 4:case"fillAndAddForClipping":cr=4;break;case 5:case"strokeAndAddPathForClipping":cr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":cr=6;break;case 7:case"addToPathForClipping":cr=7}var Vc=ou.usedRenderingMode!==void 0?ou.usedRenderingMode:-1;cr!==-1?An+=cr+` Tr
`:Vc!==-1&&(An+=`0 Tr
`),cr!==-1&&(ou.usedRenderingMode=cr),et=Z.align||"left";var qr,Ea=Se*Er,$c=pn.internal.pageSize.getWidth(),Hc=Ct[Re];mt=Z.charSpace||ya,ht=Z.maxWidth||0,bt=Object.assign({autoencode:!0,noBOM:!0},Z.flags);var ks=[],Ao=function(Ot){return pn.getStringUnitWidth(Ot,{font:Hc,charSpace:mt,fontSize:Se,doKerning:!1})*Se/ji};if(Object.prototype.toString.call(w)==="[object Array]"){var dr;Me=tu(w),et!=="left"&&(qr=Me.map(Ao));var Zn,Ps=0;if(et==="right"){k-=qr[0],w=[],Ln=Me.length;for(var rs=0;rs<Ln;rs++)rs===0?(Zn=Oi(k),dr=ns(G)):(Zn=j(Ps-qr[rs]),dr=-Ea),w.push([Me[rs],Zn,dr]),Ps=qr[rs]}else if(et==="center"){k-=qr[0]/2,w=[],Ln=Me.length;for(var is=0;is<Ln;is++)is===0?(Zn=Oi(k),dr=ns(G)):(Zn=j((Ps-qr[is])/2),dr=-Ea),w.push([Me[is],Zn,dr]),Ps=qr[is]}else if(et==="left"){w=[],Ln=Me.length;for(var Ta=0;Ta<Ln;Ta++)w.push(Me[Ta])}else if(et==="justify"&&Hc.encoding==="Identity-H"){w=[],Ln=Me.length,ht=ht!==0?ht:$c;for(var ss=0,an=0;an<Ln;an++)if(dr=an===0?ns(G):-Ea,Zn=an===0?Oi(k):ss,an<Ln-1){var au=j((ht-qr[an])/(Me[an].split(" ").length-1)),er=Me[an].split(" ");w.push([er[0]+" ",Zn,dr]),ss=0;for(var Vr=1;Vr<er.length;Vr++){var Ca=(Ao(er[Vr-1]+" "+er[Vr])-Ao(er[Vr]))*ji+au;Vr==er.length-1?w.push([er[Vr],Ca,0]):w.push([er[Vr]+" ",Ca,0]),ss-=Ca}}else w.push([Me[an],Zn,dr]);w.push(["",ss,0])}else{if(et!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(w=[],Ln=Me.length,ht=ht!==0?ht:$c,an=0;an<Ln;an++)dr=an===0?ns(G):-Ea,Zn=an===0?Oi(k):0,an<Ln-1?ks.push(H(j((ht-qr[an])/(Me[an].split(" ").length-1)))):ks.push(0),w.push([Me[an],Zn,dr])}}var zc=typeof Z.R2L=="boolean"?Z.R2L:Ge;zc===!0&&(w=nu(w,function(Ot,jt,ln){return[Ot.split("").reverse().join(""),jt,ln]})),_e={text:w,x:k,y:G,options:Z,mutex:{pdfEscape:ur,activeFontKey:Re,fonts:Ct,activeFontSize:Se}},Tt.publish("postProcessText",_e),w=_e.text,ui=_e.mutex.isHex||!1;var lu=Ct[Re].encoding;lu!=="WinAnsiEncoding"&&lu!=="StandardEncoding"||(w=nu(w,function(Ot,jt,ln){return[qc(Ot),jt,ln]})),Me=tu(w),w=[];for(var Eo,To,Is,Co=0,ka=1,ko=Array.isArray(Me[0])?ka:Co,Rs="",uu=function(Ot,jt,ln){var _n="";return ln instanceof nt?(ln=typeof Z.angle=="number"?ri(ln,new nt(1,0,0,1,Ot,jt)):ri(new nt(1,0,0,1,Ot,jt),ln),T===N.ADVANCED&&(ln=ri(new nt(1,0,0,-1,0,0),ln)),_n=ln.join(" ")+` Tm
`):_n=H(Ot)+" "+H(jt)+` Td
`,_n},$r=0;$r<Me.length;$r++){switch(Rs="",ko){case ka:Is=(ui?"<":"(")+Me[$r][0]+(ui?">":")"),Eo=parseFloat(Me[$r][1]),To=parseFloat(Me[$r][2]);break;case Co:Is=(ui?"<":"(")+Me[$r]+(ui?">":")"),Eo=Oi(k),To=ns(G)}ks!==void 0&&ks[$r]!==void 0&&(Rs=ks[$r]+` Tw
`),$r===0?w.push(Rs+uu(Eo,To,Zt)+Is):ko===Co?w.push(Rs+Is):ko===ka&&w.push(Rs+uu(Eo,To,Zt)+Is)}w=ko===Co?w.join(` Tj
T* `):w.join(` Tj
`),w+=` Tj
`;var Hr=`BT
/`;return Hr+=Re+" "+Se+` Tf
`,Hr+=H(Se*Er)+` TL
`,Hr+=So+`
`,Hr+=An,Hr+=w,J(Hr+="ET"),m[Re]=!0,pn};var np=g.__private__.clip=g.clip=function(w){return J(w==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return np("evenodd")},g.__private__.discardPath=g.discardPath=function(){return J("n"),this};var Fi=g.__private__.isValidStyle=function(w){var k=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(w)!==-1&&(k=!0),k};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(w){return Fi(w)&&(u=w),this};var Lc=g.__private__.getStyle=g.getStyle=function(w){var k=u;switch(w){case"D":case"S":k="S";break;case"F":k="f";break;case"FD":case"DF":k="B";break;case"f":case"f*":case"B":case"B*":k=w}return k},Mc=g.close=function(){return J("h"),this};g.stroke=function(){return J("S"),this},g.fill=function(w){return ga("f",w),this},g.fillEvenOdd=function(w){return ga("f*",w),this},g.fillStroke=function(w){return ga("B",w),this},g.fillStrokeEvenOdd=function(w){return ga("B*",w),this};var ga=function(w,k){It(k)==="object"?ip(k,w):J(w)},zl=function(w){w===null||T===N.ADVANCED&&w===void 0||(w=Lc(w),J(w))};function rp(w,k,G,Z,de){var _e=new ll(k||this.boundingBox,G||this.xStep,Z||this.yStep,this.gState,de||this.matrix);_e.stream=this.stream;var Me=w+"$$"+this.cloneIndex+++"$$";return lr(Me,_e),_e}var ip=function(w,k){var G=Nr[w.key],Z=We[G];if(Z instanceof $o)J("q"),J(sp(k)),Z.gState&&g.setGState(Z.gState),J(w.matrix.toString()+" cm"),J("/"+G+" sh"),J("Q");else if(Z instanceof ll){var de=new nt(1,0,0,-1,0,Cs());w.matrix&&(de=de.multiply(w.matrix||Li),G=rp.call(Z,w.key,w.boundingBox,w.xStep,w.yStep,de).id),J("q"),J("/Pattern cs"),J("/"+G+" scn"),Z.gState&&g.setGState(Z.gState),J(k),J("Q")}},sp=function(w){switch(w){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Gl=g.moveTo=function(w,k){return J(H(j(w))+" "+H(V(k))+" m"),this},bo=g.lineTo=function(w,k){return J(H(j(w))+" "+H(V(k))+" l"),this},Es=g.curveTo=function(w,k,G,Z,de,_e){return J([H(j(w)),H(V(k)),H(j(G)),H(V(Z)),H(j(de)),H(V(_e)),"c"].join(" ")),this};g.__private__.line=g.line=function(w,k,G,Z,de){if(isNaN(w)||isNaN(k)||isNaN(G)||isNaN(Z)||!Fi(de))throw new Error("Invalid arguments passed to jsPDF.line");return T===N.COMPAT?this.lines([[G-w,Z-k]],w,k,[1,1],de||"S"):this.lines([[G-w,Z-k]],w,k,[1,1]).stroke()},g.__private__.lines=g.lines=function(w,k,G,Z,de,_e){var Me,$e,et,mt,ht,bt,Gt,Zt,pn,qn,An,ui;if(typeof w=="number"&&(ui=G,G=k,k=w,w=ui),Z=Z||[1,1],_e=_e||!1,isNaN(k)||isNaN(G)||!Array.isArray(w)||!Array.isArray(Z)||!Fi(de)||typeof _e!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Gl(k,G),Me=Z[0],$e=Z[1],mt=w.length,qn=k,An=G,et=0;et<mt;et++)(ht=w[et]).length===2?(qn=ht[0]*Me+qn,An=ht[1]*$e+An,bo(qn,An)):(bt=ht[0]*Me+qn,Gt=ht[1]*$e+An,Zt=ht[2]*Me+qn,pn=ht[3]*$e+An,qn=ht[4]*Me+qn,An=ht[5]*$e+An,Es(bt,Gt,Zt,pn,qn,An));return _e&&Mc(),zl(de),this},g.path=function(w){for(var k=0;k<w.length;k++){var G=w[k],Z=G.c;switch(G.op){case"m":Gl(Z[0],Z[1]);break;case"l":bo(Z[0],Z[1]);break;case"c":Es.apply(this,Z);break;case"h":Mc()}}return this},g.__private__.rect=g.rect=function(w,k,G,Z,de){if(isNaN(w)||isNaN(k)||isNaN(G)||isNaN(Z)||!Fi(de))throw new Error("Invalid arguments passed to jsPDF.rect");return T===N.COMPAT&&(Z=-Z),J([H(j(w)),H(V(k)),H(j(G)),H(j(Z)),"re"].join(" ")),zl(de),this},g.__private__.triangle=g.triangle=function(w,k,G,Z,de,_e,Me){if(isNaN(w)||isNaN(k)||isNaN(G)||isNaN(Z)||isNaN(de)||isNaN(_e)||!Fi(Me))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[G-w,Z-k],[de-G,_e-Z],[w-de,k-_e]],w,k,[1,1],Me,!0),this},g.__private__.roundedRect=g.roundedRect=function(w,k,G,Z,de,_e,Me){if(isNaN(w)||isNaN(k)||isNaN(G)||isNaN(Z)||isNaN(de)||isNaN(_e)||!Fi(Me))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var $e=4/3*(Math.SQRT2-1);return de=Math.min(de,.5*G),_e=Math.min(_e,.5*Z),this.lines([[G-2*de,0],[de*$e,0,de,_e-_e*$e,de,_e],[0,Z-2*_e],[0,_e*$e,-de*$e,_e,-de,_e],[2*de-G,0],[-de*$e,0,-de,-_e*$e,-de,-_e],[0,2*_e-Z],[0,-_e*$e,de*$e,-_e,de,-_e]],w+de,k,[1,1],Me,!0),this},g.__private__.ellipse=g.ellipse=function(w,k,G,Z,de){if(isNaN(w)||isNaN(k)||isNaN(G)||isNaN(Z)||!Fi(de))throw new Error("Invalid arguments passed to jsPDF.ellipse");var _e=4/3*(Math.SQRT2-1)*G,Me=4/3*(Math.SQRT2-1)*Z;return Gl(w+G,k),Es(w+G,k-Me,w+_e,k-Z,w,k-Z),Es(w-_e,k-Z,w-G,k-Me,w-G,k),Es(w-G,k+Me,w-_e,k+Z,w,k+Z),Es(w+_e,k+Z,w+G,k+Me,w+G,k),zl(de),this},g.__private__.circle=g.circle=function(w,k,G,Z){if(isNaN(w)||isNaN(k)||isNaN(G)||!Fi(Z))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(w,k,G,G,Z)},g.setFont=function(w,k,G){return G&&(k=Y(k,G)),Re=Pc(w,k,{disableWarning:!1}),this};var op=g.__private__.getFont=g.getFont=function(){return Ct[Pc.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var w,k,G={};for(w in Ft)if(Ft.hasOwnProperty(w))for(k in G[w]=[],Ft[w])Ft[w].hasOwnProperty(k)&&G[w].push(k);return G},g.addFont=function(w,k,G,Z,de){var _e=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&_e.indexOf(arguments[3])!==-1?de=arguments[3]:arguments[3]&&_e.indexOf(arguments[3])==-1&&(G=Y(G,Z)),de=de||"Identity-H",Vl.call(this,w,k,G,de)};var _o,Wl=t.lineWidth||.200025,va=g.__private__.getLineWidth=g.getLineWidth=function(){return Wl},Dc=g.__private__.setLineWidth=g.setLineWidth=function(w){return Wl=w,J(H(j(w))+" w"),this};g.__private__.setLineDash=it.API.setLineDash=it.API.setLineDashPattern=function(w,k){if(w=w||[],k=k||0,isNaN(k)||!Array.isArray(w))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return w=w.map(function(G){return H(j(G))}).join(" "),k=H(j(k)),J("["+w+"] "+k+" d"),this};var Fc=g.__private__.getLineHeight=g.getLineHeight=function(){return Se*_o};g.__private__.getLineHeight=g.getLineHeight=function(){return Se*_o};var Oc=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(w){return typeof(w=w||1.15)=="number"&&(_o=w),this},jc=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return _o};Oc(t.lineHeight);var Oi=g.__private__.getHorizontalCoordinate=function(w){return j(w)},ns=g.__private__.getVerticalCoordinate=function(w){return T===N.ADVANCED?w:ft[q].mediaBox.topRightY-ft[q].mediaBox.bottomLeftY-j(w)},ap=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(w){return H(Oi(w))},Ts=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(w){return H(ns(w))},li=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return si(li)},g.__private__.setStrokeColor=g.setDrawColor=function(w,k,G,Z){return li=oi({ch1:w,ch2:k,ch3:G,ch4:Z,pdfColorType:"draw",precision:2}),J(li),this};var Jl=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return si(Jl)},g.__private__.setFillColor=g.setFillColor=function(w,k,G,Z){return Jl=oi({ch1:w,ch2:k,ch3:G,ch4:Z,pdfColorType:"fill",precision:2}),J(Jl),this};var So=t.textColor||"0 g",lp=g.__private__.getTextColor=g.getTextColor=function(){return si(So)};g.__private__.setTextColor=g.setTextColor=function(w,k,G,Z){return So=oi({ch1:w,ch2:k,ch3:G,ch4:Z,pdfColorType:"text",precision:3}),this};var ya=t.charSpace,up=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(ya||0)};g.__private__.setCharSpace=g.setCharSpace=function(w){if(isNaN(w))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ya=w,this};var Kl=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(w){var k=g.CapJoinStyles[w];if(k===void 0)throw new Error("Line cap style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Kl=k,J(k+" J"),this};var Yl=0;g.__private__.setLineJoin=g.setLineJoin=function(w){var k=g.CapJoinStyles[w];if(k===void 0)throw new Error("Line join style of '"+w+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Yl=k,J(k+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(w){if(w=w||0,isNaN(w))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(H(j(w))+" M"),this},g.GState=sh,g.setGState=function(w){(w=typeof w=="string"?Xt[ni[w]]:Uc(null,w)).equals(Zi)||(J("/"+w.id+" gs"),Zi=w)};var Uc=function(w,k){if(!w||!ni[w]){var G=!1;for(var Z in Xt)if(Xt.hasOwnProperty(Z)&&Xt[Z].equals(k)){G=!0;break}if(G)k=Xt[Z];else{var de="GS"+(Object.keys(Xt).length+1).toString(10);Xt[de]=k,k.id=de}return w&&(ni[w]=k.id),Tt.publish("addGState",k),k}};g.addGState=function(w,k){return Uc(w,k),this},g.saveGraphicsState=function(){return J("q"),Ur.push({key:Re,size:Se,color:So}),this},g.restoreGraphicsState=function(){J("Q");var w=Ur.pop();return Re=w.key,Se=w.size,So=w.color,Zi=null,this},g.setCurrentTransformationMatrix=function(w){return J(w.toString()+" cm"),this},g.comment=function(w){return J("#"+w),this};var wa=function(w,k){var G=w||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return G},set:function(_e){isNaN(_e)||(G=parseFloat(_e))}});var Z=k||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Z},set:function(_e){isNaN(_e)||(Z=parseFloat(_e))}});var de="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return de},set:function(_e){de=_e.toString()}}),this},Xl=function(w,k,G,Z){wa.call(this,w,k),this.type="rect";var de=G||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return de},set:function(Me){isNaN(Me)||(de=parseFloat(Me))}});var _e=Z||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return _e},set:function(Me){isNaN(Me)||(_e=parseFloat(Me))}}),this},Ql=function(){this.page=Qt,this.currentPage=q,this.pages=Ie.slice(0),this.pagesContext=ft.slice(0),this.x=lt,this.y=xt,this.matrix=Sr,this.width=No(q),this.height=Cs(q),this.outputDestination=Oe,this.id="",this.objectNumber=-1};Ql.prototype.restore=function(){Qt=this.page,q=this.currentPage,ft=this.pagesContext,Ie=this.pages,lt=this.x,xt=this.y,Sr=this.matrix,Zl(q,this.width),eu(q,this.height),Oe=this.outputDestination};var Bc=function(w,k,G,Z,de){Ri.push(new Ql),Qt=q=0,Ie=[],lt=w,xt=k,Sr=de,$l([G,Z])},cp=function(w){if(Ii[w])Ri.pop().restore();else{var k=new Ql,G="Xo"+(Object.keys(Rn).length+1).toString(10);k.id=G,Ii[w]=G,Rn[G]=k,Tt.publish("addFormObject",k),Ri.pop().restore()}};for(var xa in g.beginFormObject=function(w,k,G,Z,de){return Bc(w,k,G,Z,de),this},g.endFormObject=function(w){return cp(w),this},g.doFormObject=function(w,k){var G=Rn[Ii[w]];return J("q"),J(k.toString()+" cm"),J("/"+G.id+" Do"),J("Q"),this},g.getFormObject=function(w){var k=Rn[Ii[w]];return{x:k.x,y:k.y,width:k.width,height:k.height,matrix:k.matrix}},g.save=function(w,k){return w=w||"generated.pdf",(k=k||{}).returnPromise=k.returnPromise||!1,k.returnPromise===!1?(Bo(pa(ts()),w),typeof Bo.unload=="function"&&st.setTimeout&&setTimeout(Bo.unload,911),this):new Promise(function(G,Z){try{var de=Bo(pa(ts()),w);typeof Bo.unload=="function"&&st.setTimeout&&setTimeout(Bo.unload,911),G(de)}catch(_e){Z(_e.message)}})},it.API)it.API.hasOwnProperty(xa)&&(xa==="events"&&it.API.events.length?function(w,k){var G,Z,de;for(de=k.length-1;de!==-1;de--)G=k[de][0],Z=k[de][1],w.subscribe.apply(w,[G].concat(typeof Z=="function"?[Z]:Z))}(Tt,it.API.events):g[xa]=it.API[xa]);var No=g.getPageWidth=function(w){return(ft[w=w||q].mediaBox.topRightX-ft[w].mediaBox.bottomLeftX)/Ne},Zl=g.setPageWidth=function(w,k){ft[w].mediaBox.topRightX=k*Ne+ft[w].mediaBox.bottomLeftX},Cs=g.getPageHeight=function(w){return(ft[w=w||q].mediaBox.topRightY-ft[w].mediaBox.bottomLeftY)/Ne},eu=g.setPageHeight=function(w,k){ft[w].mediaBox.topRightY=k*Ne+ft[w].mediaBox.bottomLeftY};return g.internal={pdfEscape:ur,getStyle:Lc,getFont:op,getFontSize:Le,getCharSpace:up,getTextColor:lp,getLineHeight:Fc,getLineHeightFactor:jc,getLineWidth:va,write:qe,getHorizontalCoordinate:Oi,getVerticalCoordinate:ns,getCoordinateString:ap,getVerticalCoordinateString:Ts,collections:{},newObject:bn,newAdditionalObject:oa,newObjectDeferred:hn,newObjectDeferredBegin:Ar,getFilters:Mi,putStream:Br,events:Tt,scaleFactor:Ne,pageSize:{getWidth:function(){return No(q)},setWidth:function(w){Zl(q,w)},getHeight:function(){return Cs(q)},setHeight:function(w){eu(q,w)}},encryptionOptions:f,encryption:Bn,getEncryptor:ep,output:ma,getNumberOfPages:Kh,pages:Ie,out:J,f2:ne,f3:D,getPageInfo:Rc,getPageInfoByObjId:ut,getCurrentPageInfo:tp,getPDFVersion:_,Point:wa,Rectangle:Xl,Matrix:nt,hasHotfix:Ic},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return No(q)},set:function(w){Zl(q,w)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Cs(q)},set:function(w){eu(q,w)},enumerable:!0,configurable:!0}),Wh.call(g,ue),Re="F1",Cc(i,n),Tt.publish("initialized"),g}Ga.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Ga.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ga.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Ga.prototype.processOwnerPassword=function(t,e){return ig(rg(e).substr(0,5),t)},Ga.prototype.encryptor=function(t,e){var n=rg(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return ig(n,r)}},sh.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||It(t)!==It(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},it.API={events:[]},it.version="2.5.2";var rn=it.API,Ev=1,sa=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},qa=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},pt=function(t){return t.toFixed(2)},Vs=function(t){return t.toFixed(5)};rn.__acroform__={};var _r=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},N5=function(t){return t*Ev},Vi=function(t){var e=new jS,n=Ye.internal.getHeight(t)||0,r=Ye.internal.getWidth(t)||0;return e.BBox=[0,0,Number(pt(r)),Number(pt(n))],e},z8=rn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},G8=rn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},W8=rn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},cn=rn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return W8(t,e-1)},dn=rn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return z8(t,e-1)},fn=rn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return G8(t,e-1)},J8=rn.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(pt(l.lowerLeft_X)),Number(pt(l.lowerLeft_Y)),Number(pt(l.upperRight_X)),Number(pt(l.upperRight_Y))]},K8=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=sg(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+pt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Vi(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},sg=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(D){return D.split(`
`)}):i.map(function(D){return[D]});var s=n,o=Ye.internal.getHeight(t)||0;o=o<0?-o:o;var a=Ye.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(D,j,O){if(D+1<i.length){var V=j+" "+i[D+1][0];return Hd(V,t,O).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var u,f,p=Hd("3",t,s).height,m=t.multiline?o-s:(o-p)/2,g=m+=2,S=0,_=0,E=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Hd(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var b="",N=0,T=0;T<i.length;T++)if(i.hasOwnProperty(T)){var M=!1;if(i[T].length!==1&&E!==i[T].length-1){if((p+2)*(N+2)+2>o)continue e;b+=i[T][E],M=!0,_=T,T--}else{b=(b+=i[T][E]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var U=parseInt(T),Y=l(U,b,s),H=T>=i.length-1;if(Y&&!H){b+=" ",E=0;continue}if(Y||H){if(H)_=U;else if(t.multiline&&(p+2)*(N+2)+2>o)continue e}else{if(!t.multiline||(p+2)*(N+2)+2>o)continue e;_=U}}for(var B="",W=S;W<=_;W++){var ne=i[W];if(t.multiline){if(W===_){B+=ne[E]+" ",E=(E+1)%ne.length;continue}if(W===S){B+=ne[ne.length-1]+" ";continue}}B+=ne[0]+" "}switch(B=B.substr(B.length-1)==" "?B.substr(0,B.length-1):B,f=Hd(B,t,s).width,t.textAlign){case"right":u=a-f-2;break;case"center":u=(a-f)/2;break;case"left":default:u=2}e+=pt(u)+" "+pt(g)+` Td
`,e+="("+sa(B)+`) Tj
`,e+=-pt(u)+` 0 Td
`,g=-(s+2),f=0,S=M?_:_+1,N++,b=""}break}return r.text=e,r.fontSize=s,r},Hd=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},Y8={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},X8=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},Q8=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),It(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},Z8=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(ki.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Y8)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Ev=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new US,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&X8(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],u=a.Rect;if(a.Rect&&(a.Rect=J8(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Ye.createDefaultAppearanceStream(a),It(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=u,a.hasAppearanceStream&&!a.appearanceStreamContent){var f=K8(a);l.push({key:"AP",value:"<</N "+f+">>"}),i.internal.acroformPlugin.xForms.push(f)}if(a.appearanceStreamContent){var p="";for(var m in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(m)){var g=a.appearanceStreamContent[m];if(p+="/"+m+" ",p+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var o in g)if(g.hasOwnProperty(o)){var S=g[o];typeof S=="function"&&(S=S.call(i,a)),p+="/"+o+" "+S+" ",i.internal.acroformPlugin.xForms.indexOf(S)>=0||i.internal.acroformPlugin.xForms.push(S)}}else typeof(S=g)=="function"&&(S=S.call(i,a)),p+="/"+o+" "+S,i.internal.acroformPlugin.xForms.indexOf(S)>=0||i.internal.acroformPlugin.xForms.push(S);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&Q8(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},OS=rn.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),It(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+sa(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},w0=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+sa(r(t))+")"},Wi=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Wi.prototype.toString=function(){return this.objId+" 0 R"},Wi.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Wi.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:OS(i,this.objId,this.scope)}):i instanceof Wi?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var jS=function(){Wi.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};_r(jS,Wi);var US=function(){Wi.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+sa(n(t))+")"}},set:function(n){t=n}})};_r(US,Wi);var ki=function t(){Wi.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');e=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!cn(e,3)},set:function(b){b?this.F=dn(e,3):this.F=fn(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');n=b}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(b){r=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(b){r[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(b){r[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(b){r[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(b){r[3]=b}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof oh)return;s="FieldObject"+t.FieldNum++}var b=function(N){return N};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+sa(b(s))+")"},set:function(b){s=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(b){s=b}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(b){o=b}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(b){a=b}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(b){l=b}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/Ev:u},set:function(b){u=b}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(b){f=b}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof oh||this instanceof Yo))return w0(p,this.objId,this.scope)},set:function(b){b=b.toString(),p=b}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof kn?m:w0(m,this.objId,this.scope)},set:function(b){b=b.toString(),m=this instanceof kn?b:b.substr(0,1)==="("?qa(b.substr(1,b.length-2)):qa(b)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof kn?qa(m.substr(1,m.length-1)):m},set:function(b){b=b.toString(),m=this instanceof kn?"/"+b:b}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof kn?g:w0(g,this.objId,this.scope)},set:function(b){b=b.toString(),g=this instanceof kn?b:b.substr(0,1)==="("?qa(b.substr(1,b.length-2)):qa(b)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof kn?qa(g.substr(1,g.length-1)):g},set:function(b){b=b.toString(),g=this instanceof kn?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var S,_=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return _},set:function(b){b=!!b,_=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(S)return S},set:function(b){S=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,1)},set:function(b){b?this.Ff=dn(this.Ff,1):this.Ff=fn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,2)},set:function(b){b?this.Ff=dn(this.Ff,2):this.Ff=fn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,3)},set:function(b){b?this.Ff=dn(this.Ff,3):this.Ff=fn(this.Ff,3)}});var E=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(E!==null)return E},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');E=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(E){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:E=2;break;case"center":case 1:E=1;break;case"left":case 0:default:E=0}}})};_r(ki,Wi);var wl=function(){ki.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return OS(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,u=[];l=o.exec(s);)u.push(l[a]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,18)},set:function(n){n?this.Ff=dn(this.Ff,18):this.Ff=fn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=dn(this.Ff,19):this.Ff=fn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,20)},set:function(n){n?(this.Ff=dn(this.Ff,20),e.sort()):this.Ff=fn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,22)},set:function(n){n?this.Ff=dn(this.Ff,22):this.Ff=fn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,23)},set:function(n){n?this.Ff=dn(this.Ff,23):this.Ff=fn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,27)},set:function(n){n?this.Ff=dn(this.Ff,27):this.Ff=fn(this.Ff,27)}}),this.hasAppearanceStream=!1};_r(wl,ki);var xl=function(){wl.call(this),this.fontName="helvetica",this.combo=!1};_r(xl,wl);var bl=function(){xl.call(this),this.combo=!0};_r(bl,xl);var ff=function(){bl.call(this),this.edit=!0};_r(ff,bl);var kn=function(){ki.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,15)},set:function(n){n?this.Ff=dn(this.Ff,15):this.Ff=fn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,16)},set:function(n){n?this.Ff=dn(this.Ff,16):this.Ff=fn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,17)},set:function(n){n?this.Ff=dn(this.Ff,17):this.Ff=fn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,26)},set:function(n){n?this.Ff=dn(this.Ff,26):this.Ff=fn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+sa(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){It(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};_r(kn,ki);var hf=function(){kn.call(this),this.pushButton=!0};_r(hf,kn);var _l=function(){kn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};_r(_l,kn);var oh=function(){var t,e;ki.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+sa(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){It(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ye.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};_r(oh,ki),_l.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},_l.prototype.createOption=function(t){var e=new oh;return e.Parent=this,e.optionName=t,this.Kids.push(e),eM.call(this.scope,e),e};var pf=function(){kn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ye.CheckBox.createAppearanceStream()};_r(pf,kn);var Yo=function(){ki.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,13)},set:function(e){e?this.Ff=dn(this.Ff,13):this.Ff=fn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,21)},set:function(e){e?this.Ff=dn(this.Ff,21):this.Ff=fn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,23)},set:function(e){e?this.Ff=dn(this.Ff,23):this.Ff=fn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,24)},set:function(e){e?this.Ff=dn(this.Ff,24):this.Ff=fn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,25)},set:function(e){e?this.Ff=dn(this.Ff,25):this.Ff=fn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,26)},set:function(e){e?this.Ff=dn(this.Ff,26):this.Ff=fn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};_r(Yo,ki);var mf=function(){Yo.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!cn(this.Ff,14)},set:function(t){t?this.Ff=dn(this.Ff,14):this.Ff=fn(this.Ff,14)}}),this.password=!0};_r(mf,Yo);var Ye={CheckBox:{createAppearanceStream:function(){return{N:{On:Ye.CheckBox.YesNormal},D:{On:Ye.CheckBox.YesPushDown,Off:Ye.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Vi(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=sg(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+pt(Ye.internal.getWidth(t))+" "+pt(Ye.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+pt(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Vi(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=Ye.internal.getHeight(t),o=Ye.internal.getWidth(t),a=sg(t,t.caption);return i.push("1 g"),i.push("0 0 "+pt(o)+" "+pt(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+pt(o-1)+" "+pt(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+pt(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Vi(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+pt(Ye.internal.getWidth(t))+" "+pt(Ye.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Ye.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Ye.RadioButton.Circle.YesNormal,e.D[t]=Ye.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Vi(t);e.scope=t.scope;var n=[],r=Ye.internal.getWidth(t)<=Ye.internal.getHeight(t)?Ye.internal.getWidth(t)/4:Ye.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Ye.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Vs(Ye.internal.getWidth(t)/2)+" "+Vs(Ye.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Vi(t);e.scope=t.scope;var n=[],r=Ye.internal.getWidth(t)<=Ye.internal.getHeight(t)?Ye.internal.getWidth(t)/4:Ye.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ye.internal.Bezier_C).toFixed(5)),o=Number((r*Ye.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Vs(Ye.internal.getWidth(t)/2)+" "+Vs(Ye.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Vs(Ye.internal.getWidth(t)/2)+" "+Vs(Ye.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Vi(t);e.scope=t.scope;var n=[],r=Ye.internal.getWidth(t)<=Ye.internal.getHeight(t)?Ye.internal.getWidth(t)/4:Ye.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ye.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Vs(Ye.internal.getWidth(t)/2)+" "+Vs(Ye.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Ye.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Ye.RadioButton.Cross.YesNormal,e.D[t]=Ye.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Vi(t);e.scope=t.scope;var n=[],r=Ye.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+pt(Ye.internal.getWidth(t)-2)+" "+pt(Ye.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(pt(r.x1.x)+" "+pt(r.x1.y)+" m"),n.push(pt(r.x2.x)+" "+pt(r.x2.y)+" l"),n.push(pt(r.x4.x)+" "+pt(r.x4.y)+" m"),n.push(pt(r.x3.x)+" "+pt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Vi(t);e.scope=t.scope;var n=Ye.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+pt(Ye.internal.getWidth(t))+" "+pt(Ye.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+pt(Ye.internal.getWidth(t)-2)+" "+pt(Ye.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(pt(n.x1.x)+" "+pt(n.x1.y)+" m"),r.push(pt(n.x2.x)+" "+pt(n.x2.y)+" l"),r.push(pt(n.x4.x)+" "+pt(n.x4.y)+" m"),r.push(pt(n.x3.x)+" "+pt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Vi(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+pt(Ye.internal.getWidth(t))+" "+pt(Ye.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Ye.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Ye.internal.getWidth(t),n=Ye.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Ye.internal.getWidth=function(t){var e=0;return It(t)==="object"&&(e=N5(t.Rect[2])),e},Ye.internal.getHeight=function(t){var e=0;return It(t)==="object"&&(e=N5(t.Rect[3])),e};var eM=rn.addField=function(t){if(Z8(this,t),!(t instanceof ki))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};rn.AcroFormChoiceField=wl,rn.AcroFormListBox=xl,rn.AcroFormComboBox=bl,rn.AcroFormEditBox=ff,rn.AcroFormButton=kn,rn.AcroFormPushButton=hf,rn.AcroFormRadioButton=_l,rn.AcroFormCheckBox=pf,rn.AcroFormTextField=Yo,rn.AcroFormPasswordField=mf,rn.AcroFormAppearance=Ye,rn.AcroForm={ChoiceField:wl,ListBox:xl,ComboBox:bl,EditBox:ff,Button:kn,PushButton:hf,RadioButton:_l,CheckBox:pf,TextField:Yo,PasswordField:mf,Appearance:Ye},it.AcroForm={ChoiceField:wl,ListBox:xl,ComboBox:bl,EditBox:ff,Button:kn,PushButton:hf,RadioButton:_l,CheckBox:pf,TextField:Yo,PasswordField:mf,Appearance:Ye};it.AcroForm;function BS(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(D,j){var O,V,he,le,we,X=e;if((j=j||e)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(Y(D))for(we in n)for(he=n[we],O=0;O<he.length;O+=1){for(le=!0,V=0;V<he[O].length;V+=1)if(he[O][V]!==void 0&&he[O][V]!==D[V]){le=!1;break}if(le===!0){X=we;break}}else for(we in n)for(he=n[we],O=0;O<he.length;O+=1){for(le=!0,V=0;V<he[O].length;V+=1)if(he[O][V]!==void 0&&he[O][V]!==D.charCodeAt(V)){le=!1;break}if(le===!0){X=we;break}}return X===e&&j!==e&&(X=j),X},i=function D(j){for(var O=this.internal.write,V=this.internal.putStream,he=(0,this.internal.getFilters)();he.indexOf("FlateEncode")!==-1;)he.splice(he.indexOf("FlateEncode"),1);j.objectId=this.internal.newObject();var le=[];if(le.push({key:"Type",value:"/XObject"}),le.push({key:"Subtype",value:"/Image"}),le.push({key:"Width",value:j.width}),le.push({key:"Height",value:j.height}),j.colorSpace===E.INDEXED?le.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(j.palette.length/3-1)+" "+("sMask"in j&&j.sMask!==void 0?j.objectId+2:j.objectId+1)+" 0 R]"}):(le.push({key:"ColorSpace",value:"/"+j.colorSpace}),j.colorSpace===E.DEVICE_CMYK&&le.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),le.push({key:"BitsPerComponent",value:j.bitsPerComponent}),"decodeParameters"in j&&j.decodeParameters!==void 0&&le.push({key:"DecodeParms",value:"<<"+j.decodeParameters+">>"}),"transparency"in j&&Array.isArray(j.transparency)){for(var we="",X=0,ae=j.transparency.length;X<ae;X++)we+=j.transparency[X]+" "+j.transparency[X]+" ";le.push({key:"Mask",value:"["+we+"]"})}j.sMask!==void 0&&le.push({key:"SMask",value:j.objectId+1+" 0 R"});var fe=j.filter!==void 0?["/"+j.filter]:void 0;if(V({data:j.data,additionalKeyValues:le,alreadyAppliedFilters:fe,objectId:j.objectId}),O("endobj"),"sMask"in j&&j.sMask!==void 0){var Ce="/Predictor "+j.predictor+" /Colors 1 /BitsPerComponent "+j.bitsPerComponent+" /Columns "+j.width,P={width:j.width,height:j.height,colorSpace:"DeviceGray",bitsPerComponent:j.bitsPerComponent,decodeParameters:Ce,data:j.sMask};"filter"in j&&(P.filter=j.filter),D.call(this,P)}if(j.colorSpace===E.INDEXED){var q=this.internal.newObject();V({data:B(new Uint8Array(j.palette)),objectId:q}),O("endobj")}},s=function(){var D=this.internal.collections.addImage_images;for(var j in D)i.call(this,D[j])},o=function(){var D,j=this.internal.collections.addImage_images,O=this.internal.write;for(var V in j)O("/I"+(D=j[V]).index,D.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var D=this.internal.collections.addImage_images;return a.call(this),D},u=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function(D){return typeof t["process"+D.toUpperCase()]=="function"},p=function(D){return It(D)==="object"&&D.nodeType===1},m=function(D,j){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var O=""+D.getAttribute("src");if(O.indexOf("data:image/")===0)return Wu(unescape(O).split("base64,").pop());var V=t.loadFile(O,!0);if(V!==void 0)return V}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var he;switch(j){case"PNG":he="image/png";break;case"WEBP":he="image/webp";break;case"JPEG":case"JPG":default:he="image/jpeg"}return Wu(D.toDataURL(he,1).split("base64,").pop())}},g=function(D){var j=this.internal.collections.addImage_images;if(j){for(var O in j)if(D===j[O].alias)return j[O]}},S=function(D,j,O){return D||j||(D=-96,j=-96),D<0&&(D=-1*O.width*72/D/this.internal.scaleFactor),j<0&&(j=-1*O.height*72/j/this.internal.scaleFactor),D===0&&(D=j*O.width/O.height),j===0&&(j=D*O.height/O.width),[D,j]},_=function(D,j,O,V,he,le){var we=S.call(this,O,V,he),X=this.internal.getCoordinateString,ae=this.internal.getVerticalCoordinateString,fe=l.call(this);if(O=we[0],V=we[1],fe[he.index]=he,le){le*=Math.PI/180;var Ce=Math.cos(le),P=Math.sin(le),q=function(Q){return Q.toFixed(4)},z=[q(Ce),q(P),q(-1*P),q(Ce),0,0,"cm"]}this.internal.write("q"),le?(this.internal.write([1,"0","0",1,X(D),ae(j+V),"cm"].join(" ")),this.internal.write(z.join(" ")),this.internal.write([X(O),"0","0",X(V),"0","0","cm"].join(" "))):this.internal.write([X(O),"0","0",X(V),X(D),ae(j+V),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+he.index+" Do"),this.internal.write("Q")},E=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=t.__addimage__.sHashCode=function(D){var j,O,V=0;if(typeof D=="string")for(O=D.length,j=0;j<O;j++)V=(V<<5)-V+D.charCodeAt(j),V|=0;else if(Y(D))for(O=D.byteLength/2,j=0;j<O;j++)V=(V<<5)-V+D[j],V|=0;return V},T=t.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var j=!0;return D.length===0&&(j=!1),D.length%4!=0&&(j=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(j=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(j=!1),j},M=t.__addimage__.extractImageFromDataUrl=function(D){var j=(D=D||"").split("base64,"),O=null;if(j.length===2){var V=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(j[0]);Array.isArray(V)&&(O={mimeType:V[1],charset:V[2],data:j[1]})}return O},U=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(D){return U()&&D instanceof ArrayBuffer};var Y=t.__addimage__.isArrayBufferView=function(D){return U()&&typeof Uint32Array<"u"&&(D instanceof Int8Array||D instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array)},H=t.__addimage__.binaryStringToUint8Array=function(D){for(var j=D.length,O=new Uint8Array(j),V=0;V<j;V++)O[V]=D.charCodeAt(V);return O},B=t.__addimage__.arrayBufferToBinaryString=function(D){for(var j="",O=Y(D)?D:new Uint8Array(D),V=0;V<O.length;V+=8192)j+=String.fromCharCode.apply(null,O.subarray(V,V+8192));return j};t.addImage=function(){var D,j,O,V,he,le,we,X,ae;if(typeof arguments[1]=="number"?(j=e,O=arguments[1],V=arguments[2],he=arguments[3],le=arguments[4],we=arguments[5],X=arguments[6],ae=arguments[7]):(j=arguments[1],O=arguments[2],V=arguments[3],he=arguments[4],le=arguments[5],we=arguments[6],X=arguments[7],ae=arguments[8]),It(D=arguments[0])==="object"&&!p(D)&&"imageData"in D){var fe=D;D=fe.imageData,j=fe.format||j||e,O=fe.x||O||0,V=fe.y||V||0,he=fe.w||fe.width||he,le=fe.h||fe.height||le,we=fe.alias||we,X=fe.compression||X,ae=fe.rotation||fe.angle||ae}var Ce=this.internal.getFilters();if(X===void 0&&Ce.indexOf("FlateEncode")!==-1&&(X="SLOW"),isNaN(O)||isNaN(V))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var P=W.call(this,D,j,we,X);return _.call(this,O,V,he,le,P,ae),this};var W=function(D,j,O,V){var he,le,we;if(typeof D=="string"&&r(D)===e){D=unescape(D);var X=ne(D,!1);(X!==""||(X=t.loadFile(D,!0))!==void 0)&&(D=X)}if(p(D)&&(D=m(D,j)),j=r(D,j),!f(j))throw new Error("addImage does not support files of type '"+j+"', please ensure that a plugin for '"+j+"' support is added.");if(((we=O)==null||we.length===0)&&(O=function(ae){return typeof ae=="string"||Y(ae)?N(ae):Y(ae.data)?N(ae.data):null}(D)),(he=g.call(this,O))||(U()&&(D instanceof Uint8Array||j==="RGBA"||(le=D,D=H(D))),he=this["process"+j.toUpperCase()](D,u.call(this),O,function(ae){return ae&&typeof ae=="string"&&(ae=ae.toUpperCase()),ae in t.image_compression?ae:b.NONE}(V),le)),!he)throw new Error("An unknown error occurred whilst processing the image.");return he},ne=t.__addimage__.convertBase64ToBinaryString=function(D,j){var O;j=typeof j!="boolean"||j;var V,he="";if(typeof D=="string"){V=(O=M(D))!==null?O.data:D;try{he=Wu(V)}catch(le){if(j)throw T(V)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+le.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return he};t.getImageProperties=function(D){var j,O,V="";if(p(D)&&(D=m(D)),typeof D=="string"&&r(D)===e&&((V=ne(D,!1))===""&&(V=t.loadFile(D)||""),D=V),O=r(D),!f(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(!U()||D instanceof Uint8Array||(D=H(D)),!(j=this["process"+O.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return j.fileType=O,j}})(it.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};it.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,f=!1,p=0;p<u.length&&!f;p++)switch((r=u[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var m=0;m<u.length;m++){r=u[m];var g=this.internal.pdfEscape,S=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var _=this.internal.newAdditionalObject(),E=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(_.objId),N=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+g(b(r.contents))+")",s+=" /Popup "+E.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+g(b(N))+") >>",_.content=s;var T=_.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+T,r.open&&(s+=" /Open true"),s+=" >>",E.content=s,this.internal.write(_.objId,"0 R",E.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var M=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(S(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+M+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var U=this.annotations._nameMap[r.options.name];r.options.pageNumber=U.page,r.options.top=U.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(S(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var Y=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+Y+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:u(r),w:l(n+i),h:u(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var f=this.splitTextToSize(n,a).length;o=Math.ceil(u*f)}else a=l,o=u;return this.text(n,r,i,s),i+=.2*u,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-u,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(it.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(_){return e[_.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(_){return typeof _=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(_)},a=t.__arabicParser__.isArabicEndLetter=function(_){return o(_)&&s(_)&&e[_.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(_){return o(_)&&i.indexOf(_.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(_){return o(_)&&s(_)&&e[_.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(_){return o(_)&&s(_)&&e[_.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(_){return o(_)&&s(_)&&e[_.charCodeAt(0)].length>=3};var f=t.__arabicParser__.arabicLetterHasMedialForm=function(_){return o(_)&&s(_)&&e[_.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(_){var E=0,b=n,N="",T=0;for(E=0;E<_.length;E+=1)b[_.charCodeAt(E)]!==void 0?(T++,typeof(b=b[_.charCodeAt(E)])=="number"&&(N+=String.fromCharCode(b),b=n,T=0),E===_.length-1&&(b=n,N+=_.charAt(E-(T-1)),E-=T-1,T=0)):(b=n,N+=_.charAt(E-T),E-=T,T=0);return N};t.__arabicParser__.isArabicDiacritic=function(_){return _!==void 0&&r[_.charCodeAt(0)]!==void 0};var m=t.__arabicParser__.getCorrectForm=function(_,E,b){return o(_)?s(_)===!1?-1:!u(_)||!o(E)&&!o(b)||!o(b)&&a(E)||a(_)&&!o(E)||a(_)&&l(E)||a(_)&&a(E)?0:f(_)&&o(E)&&!a(E)&&o(b)&&u(b)?3:a(_)||!o(b)?1:2:-1},g=function(_){var E=0,b=0,N=0,T="",M="",U="",Y=(_=_||"").split("\\s+"),H=[];for(E=0;E<Y.length;E+=1){for(H.push(""),b=0;b<Y[E].length;b+=1)T=Y[E][b],M=Y[E][b-1],U=Y[E][b+1],o(T)?(N=m(T,M,U),H[E]+=N!==-1?String.fromCharCode(e[T.charCodeAt(0)][N]):T):H[E]+=T;H[E]=p(H[E])}return H.join(" ")},S=t.__arabicParser__.processArabic=t.processArabic=function(){var _,E=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(E)){var N=0;for(b=[],N=0;N<E.length;N+=1)Array.isArray(E[N])?b.push([g(E[N][0]),E[N][1],E[N][2]]):b.push([g(E[N])]);_=b}else _=g(E);return typeof arguments[0]=="string"?_:(arguments[0].text=_,arguments[0])};t.events.push(["preProcessText",S])}(it.API),it.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(it.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(_){l=_}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(_){u=_}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(_){f=_}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(_){p=_}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(_){m=_}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(_){g=_}});var S=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return S},set:function(_){S=_}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){r.call(this);var f=(u=u||{}).fontSize||this.getFontSize(),p=u.font||this.getFont(),m=u.scaleFactor||this.internal.scaleFactor,g=0,S=0,_=0,E=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var b=u.maxWidth;b>0?typeof l=="string"?l=this.splitTextToSize(l,b):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(T,M){return T.concat(E.splitTextToSize(M,b))},[])):l=Array.isArray(l)?l:[l];for(var N=0;N<l.length;N++)g<(_=this.getStringUnitWidth(l[N],{font:p})*f)&&(g=_);return g!==0&&(S=l.length),{w:g/=m,h:Math.max((S*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/m,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,g&&m&&(this.printHeaderRow(l.lineNumber,!0),l.y+=m[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-f,l.y+f,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+f,{align:"center",baseline:"top",maxWidth:l.width-f-f}):this.text(l.text,l.x+f,l.y+f,{align:"left",baseline:"top",maxWidth:l.width-f-f})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,f,p,m){if(r.call(this),!f)throw new Error("No data for PDF table.");var g,S,_,E,b=[],N=[],T=[],M={},U={},Y=[],H=[],B=(m=m||{}).autoSize||!1,W=m.printHeaders!==!1,ne=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,D=m.margins||Object.assign({width:this.getPageWidth()},e),j=typeof m.padding=="number"?m.padding:3,O=m.headerBackgroundColor||"#c8c8c8",V=m.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=W,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=ne,this.internal.__cell__.padding=j,this.internal.__cell__.headerBackgroundColor=O,this.internal.__cell__.headerTextColor=V,this.setFontSize(ne),p==null)N=b=Object.keys(f[0]),T=b.map(function(){return"left"});else if(Array.isArray(p)&&It(p[0])==="object")for(b=p.map(function(fe){return fe.name}),N=p.map(function(fe){return fe.prompt||fe.name||""}),T=p.map(function(fe){return fe.align||"left"}),g=0;g<p.length;g+=1)U[p[g].name]=p[g].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(N=b=p,T=b.map(function(){return"left"}));if(B||Array.isArray(p)&&typeof p[0]=="string")for(g=0;g<b.length;g+=1){for(M[E=b[g]]=f.map(function(fe){return fe[E]}),this.setFont(void 0,"bold"),Y.push(this.getTextDimensions(N[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),S=M[E],this.setFont(void 0,"normal"),_=0;_<S.length;_+=1)Y.push(this.getTextDimensions(S[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);U[E]=Math.max.apply(null,Y)+j+j,Y=[]}if(W){var he={};for(g=0;g<b.length;g+=1)he[b[g]]={},he[b[g]].text=N[g],he[b[g]].align=T[g];var le=a.call(this,he,U);H=b.map(function(fe){return new s(l,u,U[fe],le,he[fe].text,void 0,he[fe].align)}),this.setTableHeaderRow(H),this.printHeaderRow(1,!1)}var we=p.reduce(function(fe,Ce){return fe[Ce.name]=Ce.align,fe},{});for(g=0;g<f.length;g+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:g,data:f[g]},this);var X=a.call(this,f[g],U);for(_=0;_<b.length;_+=1){var ae=f[g][b[_]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:g,col:_,data:ae},this),o.call(this,new s(l,u,U[b[_]],X,ae,g+2,we[b[_]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var a=function(l,u){var f=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(l).map(function(g){var S=l[g];return this.splitTextToSize(S.hasOwnProperty("text")?S.text:S,u[g]-f-f)},this).map(function(g){return this.getLineHeightFactor()*g.length*p/m+f+f},this).reduce(function(g,S){return Math.max(g,S)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){f=this.internal.__cell__.tableHeaderRow[g].clone(),u&&(f.y=this.internal.__cell__.margins.top||0,m.push(f)),f.lineNumber=l;var S=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,f),this.setTextColor(S)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),n=!1}}(it.API);var qS={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},VS=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],og=BS(VS),$S=[100,200,300,400,500,600,700,800,900],tM=BS($S);function ag(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return qS[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof og[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function A5(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var nM={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},E5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function T5(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function rM(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},nM,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=ag(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+T5(s)+"' and default family '"+r+"'.");if(o=function(l,u){if(u[l])return u[l];var f=og[l],p=f<=og.normal?-1:1,m=A5(u,VS,f,p);if(!m)throw new Error("Could not find a matching font-stretch value for "+l);return m}(s.stretch,o),o=function(l,u){if(u[l])return u[l];for(var f=qS[l],p=0;p<f.length;++p)if(u[f[p]])return u[f[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var f=tM[l],p=A5(u,$S,f,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+T5(s)+"'.");return o}function C5(t){return t.trimLeft()}function iM(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function sM(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var zd,k5,P5,x0=["times"];(function(t){var e,n,r,i,s,o,a,l,u,f=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new l,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new o,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new o,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,u=new f}]);var p=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=P;Object.defineProperty(this,"pdf",{get:function(){return q}});var z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return z},set:function(be){z=!!be}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(be){Q=!!be}});var re=0;Object.defineProperty(this,"posX",{get:function(){return re},set:function(be){isNaN(be)||(re=be)}});var ce=0;Object.defineProperty(this,"posY",{get:function(){return ce},set:function(be){isNaN(be)||(ce=be)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(be){var J;typeof be=="number"?J=[be,be,be,be]:((J=new Array(4))[0]=be[0],J[1]=be.length>=2?be[1]:J[0],J[2]=be.length>=3?be[2]:J[0],J[3]=be.length>=4?be[3]:J[1]),u.margin=J}});var ve=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ve},set:function(be){ve=be}});var ye=0;Object.defineProperty(this,"lastBreak",{get:function(){return ye},set:function(be){ye=be}});var De=[];Object.defineProperty(this,"pageBreaks",{get:function(){return De},set:function(be){De=be}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(be){be instanceof f&&(u=be)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(be){u.path=be}});var Ie=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ie},set:function(be){Ie=be}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(be){var J;J=m(be),this.ctx.fillStyle=J.style,this.ctx.isFillTransparent=J.a===0,this.ctx.fillOpacity=J.a,this.pdf.setFillColor(J.r,J.g,J.b,{a:J.a}),this.pdf.setTextColor(J.r,J.g,J.b,{a:J.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(be){var J=m(be);this.ctx.strokeStyle=J.style,this.ctx.isStrokeTransparent=J.a===0,this.ctx.strokeOpacity=J.a,J.a===0?this.pdf.setDrawColor(255,255,255):(J.a,this.pdf.setDrawColor(J.r,J.g,J.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(be){["butt","round","square"].indexOf(be)!==-1&&(this.ctx.lineCap=be,this.pdf.setLineCap(be))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(be){isNaN(be)||(this.ctx.lineWidth=be,this.pdf.setLineWidth(be))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(be){["bevel","round","miter"].indexOf(be)!==-1&&(this.ctx.lineJoin=be,this.pdf.setLineJoin(be))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(be){isNaN(be)||(this.ctx.miterLimit=be,this.pdf.setMiterLimit(be))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(be){this.ctx.textBaseline=be}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(be){["right","end","center","left","start"].indexOf(be)!==-1&&(this.ctx.textAlign=be)}});var je=null;function Oe(be,J){if(je===null){var qe=function(ge){var ue=[];return Object.keys(ge).forEach(function(Se){ge[Se].forEach(function(ke){var Le=null;switch(ke){case"bold":Le={family:Se,weight:"bold"};break;case"italic":Le={family:Se,style:"italic"};break;case"bolditalic":Le={family:Se,weight:"bold",style:"italic"};break;case"":case"normal":Le={family:Se}}Le!==null&&(Le.ref={name:Se,style:ke},ue.push(Le))})}),ue}(be.getFontList());je=function(ge){for(var ue={},Se=0;Se<ge.length;++Se){var ke=ag(ge[Se]),Le=ke.family,Ge=ke.stretch,Ze=ke.style,ot=ke.weight;ue[Le]=ue[Le]||{},ue[Le][Ge]=ue[Le][Ge]||{},ue[Le][Ge][Ze]=ue[Le][Ge][Ze]||{},ue[Le][Ge][Ze][ot]=ke}return ue}(qe.concat(J))}return je}var Qe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Qe},set:function(be){je=null,Qe=be}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(be){var J;if(this.ctx.font=be,(J=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(be))!==null){var qe=J[1],ge=(J[2],J[3]),ue=J[4],Se=(J[5],J[6]),ke=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ue)[2];ue=Math.floor(ke==="px"?parseFloat(ue)*this.pdf.internal.scaleFactor:ke==="em"?parseFloat(ue)*this.pdf.getFontSize():parseFloat(ue)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ue);var Le=function(ie){var Re,Ne,lt=[],xt=ie.trim();if(xt==="")return x0;if(xt in E5)return[E5[xt]];for(;xt!=="";){switch(Ne=null,Re=(xt=C5(xt)).charAt(0)){case'"':case"'":Ne=iM(xt.substring(1),Re);break;default:Ne=sM(xt)}if(Ne===null||(lt.push(Ne[0]),(xt=C5(Ne[1]))!==""&&xt.charAt(0)!==","))return x0;xt=xt.replace(/^,/,"")}return lt}(Se);if(this.fontFaces){var Ge=rM(Oe(this.pdf,this.fontFaces),Le.map(function(ie){return{family:ie,stretch:"normal",weight:ge,style:qe}}));this.pdf.setFont(Ge.ref.name,Ge.ref.style)}else{var Ze="";(ge==="bold"||parseInt(ge,10)>=700||qe==="bold")&&(Ze="bold"),qe==="italic"&&(Ze+="italic"),Ze.length===0&&(Ze="normal");for(var ot="",at={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},vt=0;vt<Le.length;vt++){if(this.pdf.internal.getFont(Le[vt],Ze,{noFallback:!0,disableWarning:!0})!==void 0){ot=Le[vt];break}if(Ze==="bolditalic"&&this.pdf.internal.getFont(Le[vt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ot=Le[vt],Ze="bold";else if(this.pdf.internal.getFont(Le[vt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ot=Le[vt],Ze="normal";break}}if(ot===""){for(var K=0;K<Le.length;K++)if(at[Le[K]]){ot=at[Le[K]];break}}ot=ot===""?"Times":ot,this.pdf.setFont(ot,Ze)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(be){this.ctx.globalCompositeOperation=be}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(be){this.ctx.globalAlpha=be}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(be){this.ctx.lineDashOffset=be,Ce.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(be){this.ctx.lineDash=be,Ce.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(be){this.ctx.ignoreClearRect=!!be}})};p.prototype.setLineDash=function(P){this.lineDash=P},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){M.call(this,"fill",!1)},p.prototype.stroke=function(){M.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(P,q){if(isNaN(P)||isNaN(q))throw Dt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var z=this.ctx.transform.applyToPoint(new o(P,q));this.path.push({type:"mt",x:z.x,y:z.y}),this.ctx.lastPoint=new o(P,q)},p.prototype.closePath=function(){var P=new o(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&It(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){P=new o(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(P.x,P.y)},p.prototype.lineTo=function(P,q){if(isNaN(P)||isNaN(q))throw Dt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var z=this.ctx.transform.applyToPoint(new o(P,q));this.path.push({type:"lt",x:z.x,y:z.y}),this.ctx.lastPoint=new o(z.x,z.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),M.call(this,null,!0)},p.prototype.quadraticCurveTo=function(P,q,z,Q){if(isNaN(z)||isNaN(Q)||isNaN(P)||isNaN(q))throw Dt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var re=this.ctx.transform.applyToPoint(new o(z,Q)),ce=this.ctx.transform.applyToPoint(new o(P,q));this.path.push({type:"qct",x1:ce.x,y1:ce.y,x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},p.prototype.bezierCurveTo=function(P,q,z,Q,re,ce){if(isNaN(re)||isNaN(ce)||isNaN(P)||isNaN(q)||isNaN(z)||isNaN(Q))throw Dt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ve=this.ctx.transform.applyToPoint(new o(re,ce)),ye=this.ctx.transform.applyToPoint(new o(P,q)),De=this.ctx.transform.applyToPoint(new o(z,Q));this.path.push({type:"bct",x1:ye.x,y1:ye.y,x2:De.x,y2:De.y,x:ve.x,y:ve.y}),this.ctx.lastPoint=new o(ve.x,ve.y)},p.prototype.arc=function(P,q,z,Q,re,ce){if(isNaN(P)||isNaN(q)||isNaN(z)||isNaN(Q)||isNaN(re))throw Dt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ce=!!ce,!this.ctx.transform.isIdentity){var ve=this.ctx.transform.applyToPoint(new o(P,q));P=ve.x,q=ve.y;var ye=this.ctx.transform.applyToPoint(new o(0,z)),De=this.ctx.transform.applyToPoint(new o(0,0));z=Math.sqrt(Math.pow(ye.x-De.x,2)+Math.pow(ye.y-De.y,2))}Math.abs(re-Q)>=2*Math.PI&&(Q=0,re=2*Math.PI),this.path.push({type:"arc",x:P,y:q,radius:z,startAngle:Q,endAngle:re,counterclockwise:ce})},p.prototype.arcTo=function(P,q,z,Q,re){throw new Error("arcTo not implemented.")},p.prototype.rect=function(P,q,z,Q){if(isNaN(P)||isNaN(q)||isNaN(z)||isNaN(Q))throw Dt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,q),this.lineTo(P+z,q),this.lineTo(P+z,q+Q),this.lineTo(P,q+Q),this.lineTo(P,q),this.lineTo(P+z,q),this.lineTo(P,q)},p.prototype.fillRect=function(P,q,z,Q){if(isNaN(P)||isNaN(q)||isNaN(z)||isNaN(Q))throw Dt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var re={};this.lineCap!=="butt"&&(re.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(re.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,q,z,Q),this.fill(),re.hasOwnProperty("lineCap")&&(this.lineCap=re.lineCap),re.hasOwnProperty("lineJoin")&&(this.lineJoin=re.lineJoin)}},p.prototype.strokeRect=function(P,q,z,Q){if(isNaN(P)||isNaN(q)||isNaN(z)||isNaN(Q))throw Dt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");S.call(this)||(this.beginPath(),this.rect(P,q,z,Q),this.stroke())},p.prototype.clearRect=function(P,q,z,Q){if(isNaN(P)||isNaN(q)||isNaN(z)||isNaN(Q))throw Dt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,q,z,Q))},p.prototype.save=function(P){P=typeof P!="boolean"||P;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},p.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("Q");this.pdf.setPage(q),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(P){var q,z,Q,re;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))q=0,z=0,Q=0,re=0;else{var ce=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(ce!==null)q=parseInt(ce[1]),z=parseInt(ce[2]),Q=parseInt(ce[3]),re=1;else if((ce=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)q=parseInt(ce[1]),z=parseInt(ce[2]),Q=parseInt(ce[3]),re=parseFloat(ce[4]);else{if(re=1,typeof P=="string"&&P.charAt(0)!=="#"){var ve=new MS(P);P=ve.ok?ve.toHex():"#000000"}P.length===4?(q=P.substring(1,2),q+=q,z=P.substring(2,3),z+=z,Q=P.substring(3,4),Q+=Q):(q=P.substring(1,3),z=P.substring(3,5),Q=P.substring(5,7)),q=parseInt(q,16),z=parseInt(z,16),Q=parseInt(Q,16)}}return{r:q,g:z,b:Q,a:re,style:P}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},S=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(P,q,z,Q){if(isNaN(q)||isNaN(z)||typeof P!="string")throw Dt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!g.call(this)){var re=X(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;j.call(this,{text:P,x:q,y:z,scale:ce,angle:re,align:this.textAlign,maxWidth:Q})}},p.prototype.strokeText=function(P,q,z,Q){if(isNaN(q)||isNaN(z)||typeof P!="string")throw Dt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!S.call(this)){Q=isNaN(Q)?void 0:Q;var re=X(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;j.call(this,{text:P,x:q,y:z,scale:ce,renderingMode:"stroke",angle:re,align:this.textAlign,maxWidth:Q})}},p.prototype.measureText=function(P){if(typeof P!="string")throw Dt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,z=this.pdf.internal.scaleFactor,Q=q.internal.getFontSize(),re=q.getStringUnitWidth(P)*Q/q.internal.scaleFactor,ce=function(ve){var ye=(ve=ve||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ye}}),this};return new ce({width:re*=Math.round(96*z/72*1e4)/1e4})},p.prototype.scale=function(P,q){if(isNaN(P)||isNaN(q))throw Dt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var z=new l(P,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(z)},p.prototype.rotate=function(P){if(isNaN(P))throw Dt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new l(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},p.prototype.translate=function(P,q){if(isNaN(P)||isNaN(q))throw Dt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var z=new l(1,0,0,1,P,q);this.ctx.transform=this.ctx.transform.multiply(z)},p.prototype.transform=function(P,q,z,Q,re,ce){if(isNaN(P)||isNaN(q)||isNaN(z)||isNaN(Q)||isNaN(re)||isNaN(ce))throw Dt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ve=new l(P,q,z,Q,re,ce);this.ctx.transform=this.ctx.transform.multiply(ve)},p.prototype.setTransform=function(P,q,z,Q,re,ce){P=isNaN(P)?1:P,q=isNaN(q)?0:q,z=isNaN(z)?0:z,Q=isNaN(Q)?1:Q,re=isNaN(re)?0:re,ce=isNaN(ce)?0:ce,this.ctx.transform=new l(P,q,z,Q,re,ce)};var _=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(P,q,z,Q,re,ce,ve,ye,De){var Ie=this.pdf.getImageProperties(P),je=1,Oe=1,Qe=1,be=1;Q!==void 0&&ye!==void 0&&(Qe=ye/Q,be=De/re,je=Ie.width/Q*ye/Q,Oe=Ie.height/re*De/re),ce===void 0&&(ce=q,ve=z,q=0,z=0),Q!==void 0&&ye===void 0&&(ye=Q,De=re),Q===void 0&&ye===void 0&&(ye=Ie.width,De=Ie.height);for(var J,qe=this.ctx.transform.decompose(),ge=X(qe.rotate.shx),ue=new l,Se=(ue=(ue=(ue=ue.multiply(qe.translate)).multiply(qe.skew)).multiply(qe.scale)).applyToRectangle(new a(ce-q*Qe,ve-z*be,Q*je,re*Oe)),ke=E.call(this,Se),Le=[],Ge=0;Ge<ke.length;Ge+=1)Le.indexOf(ke[Ge])===-1&&Le.push(ke[Ge]);if(T(Le),this.autoPaging)for(var Ze=Le[0],ot=Le[Le.length-1],at=Ze;at<ot+1;at++){this.pdf.setPage(at);var vt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],K=at===1?this.posY+this.margin[0]:this.margin[0],ie=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Re=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ne=at===1?0:ie+(at-2)*Re;if(this.ctx.clip_path.length!==0){var lt=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(J,this.posX+this.margin[3],-Ne+K+this.ctx.prevPageLastElemOffset),U.call(this,"fill",!0),this.path=lt}var xt=JSON.parse(JSON.stringify(Se));xt=N([xt],this.posX+this.margin[3],-Ne+K+this.ctx.prevPageLastElemOffset)[0];var Sr=(at>Ze||at<ot)&&_.call(this);Sr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vt,Re,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",xt.x,xt.y,xt.w,xt.h,null,null,ge),Sr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",Se.x,Se.y,Se.w,Se.h,null,null,ge)};var E=function(P,q,z){var Q=[];q=q||this.pdf.internal.pageSize.width,z=z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var re=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":Q.push(Math.floor((P.y+re)/z)+1);break;case"arc":Q.push(Math.floor((P.y+re-P.radius)/z)+1),Q.push(Math.floor((P.y+re+P.radius)/z)+1);break;case"qct":var ce=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);Q.push(Math.floor((ce.y+re)/z)+1),Q.push(Math.floor((ce.y+ce.h+re)/z)+1);break;case"bct":var ve=fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);Q.push(Math.floor((ve.y+re)/z)+1),Q.push(Math.floor((ve.y+ve.h+re)/z)+1);break;case"rect":Q.push(Math.floor((P.y+re)/z)+1),Q.push(Math.floor((P.y+P.h+re)/z)+1)}for(var ye=0;ye<Q.length;ye+=1)for(;this.pdf.internal.getNumberOfPages()<Q[ye];)b.call(this);return Q},b=function(){var P=this.fillStyle,q=this.strokeStyle,z=this.font,Q=this.lineCap,re=this.lineWidth,ce=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=q,this.font=z,this.lineCap=Q,this.lineWidth=re,this.lineJoin=ce},N=function(P,q,z){for(var Q=0;Q<P.length;Q++)switch(P[Q].type){case"bct":P[Q].x2+=q,P[Q].y2+=z;case"qct":P[Q].x1+=q,P[Q].y1+=z;case"mt":case"lt":case"arc":default:P[Q].x+=q,P[Q].y+=z}return P},T=function(P){return P.sort(function(q,z){return q-z})},M=function(P,q){for(var z,Q,re=this.fillStyle,ce=this.strokeStyle,ve=this.lineCap,ye=this.lineWidth,De=Math.abs(ye*this.ctx.transform.scaleX),Ie=this.lineJoin,je=JSON.parse(JSON.stringify(this.path)),Oe=JSON.parse(JSON.stringify(this.path)),Qe=[],be=0;be<Oe.length;be++)if(Oe[be].x!==void 0)for(var J=E.call(this,Oe[be]),qe=0;qe<J.length;qe+=1)Qe.indexOf(J[qe])===-1&&Qe.push(J[qe]);for(var ge=0;ge<Qe.length;ge++)for(;this.pdf.internal.getNumberOfPages()<Qe[ge];)b.call(this);if(T(Qe),this.autoPaging)for(var ue=Qe[0],Se=Qe[Qe.length-1],ke=ue;ke<Se+1;ke++){this.pdf.setPage(ke),this.fillStyle=re,this.strokeStyle=ce,this.lineCap=ve,this.lineWidth=De,this.lineJoin=Ie;var Le=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ge=ke===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],at=ke===1?0:Ze+(ke-2)*ot;if(this.ctx.clip_path.length!==0){var vt=this.path;z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(z,this.posX+this.margin[3],-at+Ge+this.ctx.prevPageLastElemOffset),U.call(this,P,!0),this.path=vt}if(Q=JSON.parse(JSON.stringify(je)),this.path=N(Q,this.posX+this.margin[3],-at+Ge+this.ctx.prevPageLastElemOffset),q===!1||ke===0){var K=(ke>ue||ke<Se)&&_.call(this);K&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Le,ot,null).clip().discardPath()),U.call(this,P,q),K&&this.pdf.restoreGraphicsState()}this.lineWidth=ye}else this.lineWidth=De,U.call(this,P,q),this.lineWidth=ye;this.path=je},U=function(P,q){if((P!=="stroke"||q||!S.call(this))&&(P==="stroke"||q||!g.call(this))){for(var z,Q,re=[],ce=this.path,ve=0;ve<ce.length;ve++){var ye=ce[ve];switch(ye.type){case"begin":re.push({begin:!0});break;case"close":re.push({close:!0});break;case"mt":re.push({start:ye,deltas:[],abs:[]});break;case"lt":var De=re.length;if(ce[ve-1]&&!isNaN(ce[ve-1].x)&&(z=[ye.x-ce[ve-1].x,ye.y-ce[ve-1].y],De>0)){for(;De>=0;De--)if(re[De-1].close!==!0&&re[De-1].begin!==!0){re[De-1].deltas.push(z),re[De-1].abs.push(ye);break}}break;case"bct":z=[ye.x1-ce[ve-1].x,ye.y1-ce[ve-1].y,ye.x2-ce[ve-1].x,ye.y2-ce[ve-1].y,ye.x-ce[ve-1].x,ye.y-ce[ve-1].y],re[re.length-1].deltas.push(z);break;case"qct":var Ie=ce[ve-1].x+2/3*(ye.x1-ce[ve-1].x),je=ce[ve-1].y+2/3*(ye.y1-ce[ve-1].y),Oe=ye.x+2/3*(ye.x1-ye.x),Qe=ye.y+2/3*(ye.y1-ye.y),be=ye.x,J=ye.y;z=[Ie-ce[ve-1].x,je-ce[ve-1].y,Oe-ce[ve-1].x,Qe-ce[ve-1].y,be-ce[ve-1].x,J-ce[ve-1].y],re[re.length-1].deltas.push(z);break;case"arc":re.push({deltas:[],abs:[],arc:!0}),Array.isArray(re[re.length-1].abs)&&re[re.length-1].abs.push(ye)}}Q=q?null:P==="stroke"?"stroke":"fill";for(var qe=!1,ge=0;ge<re.length;ge++)if(re[ge].arc)for(var ue=re[ge].abs,Se=0;Se<ue.length;Se++){var ke=ue[Se];ke.type==="arc"?B.call(this,ke.x,ke.y,ke.radius,ke.startAngle,ke.endAngle,ke.counterclockwise,void 0,q,!qe):O.call(this,ke.x,ke.y),qe=!0}else if(re[ge].close===!0)this.pdf.internal.out("h"),qe=!1;else if(re[ge].begin!==!0){var Le=re[ge].start.x,Ge=re[ge].start.y;V.call(this,re[ge].deltas,Le,Ge),qe=!0}Q&&W.call(this,Q),q&&ne.call(this)}},Y=function(P){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,z=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-z;case"top":return P+q-z;case"hanging":return P+q-2*z;case"middle":return P+q/2-z;case"ideographic":return P;case"alphabetic":default:return P}},H=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(q,z){this.colorStops.push([q,z])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var B=function(P,q,z,Q,re,ce,ve,ye,De){for(var Ie=le.call(this,z,Q,re,ce),je=0;je<Ie.length;je++){var Oe=Ie[je];je===0&&(De?D.call(this,Oe.x1+P,Oe.y1+q):O.call(this,Oe.x1+P,Oe.y1+q)),he.call(this,P,q,Oe.x2,Oe.y2,Oe.x3,Oe.y3,Oe.x4,Oe.y4)}ye?ne.call(this):W.call(this,ve)},W=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ne=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(P,q){this.pdf.internal.out(n(P)+" "+r(q)+" m")},j=function(P){var q;switch(P.align){case"right":case"end":q="right";break;case"center":q="center";break;case"left":case"start":default:q="left"}var z=this.pdf.getTextDimensions(P.text),Q=Y.call(this,P.y),re=H.call(this,Q)-z.h,ce=this.ctx.transform.applyToPoint(new o(P.x,Q)),ve=this.ctx.transform.decompose(),ye=new l;ye=(ye=(ye=ye.multiply(ve.translate)).multiply(ve.skew)).multiply(ve.scale);for(var De,Ie,je,Oe=this.ctx.transform.applyToRectangle(new a(P.x,Q,z.w,z.h)),Qe=ye.applyToRectangle(new a(P.x,re,z.w,z.h)),be=E.call(this,Qe),J=[],qe=0;qe<be.length;qe+=1)J.indexOf(be[qe])===-1&&J.push(be[qe]);if(T(J),this.autoPaging)for(var ge=J[0],ue=J[J.length-1],Se=ge;Se<ue+1;Se++){this.pdf.setPage(Se);var ke=Se===1?this.posY+this.margin[0]:this.margin[0],Le=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ge=this.pdf.internal.pageSize.height-this.margin[2],Ze=Ge-this.margin[0],ot=this.pdf.internal.pageSize.width-this.margin[1],at=ot-this.margin[3],vt=Se===1?0:Le+(Se-2)*Ze;if(this.ctx.clip_path.length!==0){var K=this.path;De=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(De,this.posX+this.margin[3],-1*vt+ke),U.call(this,"fill",!0),this.path=K}var ie=N([JSON.parse(JSON.stringify(Qe))],this.posX+this.margin[3],-vt+ke+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(Ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ie*P.scale),je=this.lineWidth,this.lineWidth=je*P.scale);var Re=this.autoPaging!=="text";if(Re||ie.y+ie.h<=Ge){if(Re||ie.y>=ke&&ie.x<=ot){var Ne=Re?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||ot-ie.x)[0],lt=N([JSON.parse(JSON.stringify(Oe))],this.posX+this.margin[3],-vt+ke+this.ctx.prevPageLastElemOffset)[0],xt=Re&&(Se>ge||Se<ue)&&_.call(this);xt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],at,Ze,null).clip().discardPath()),this.pdf.text(Ne,lt.x,lt.y,{angle:P.angle,align:q,renderingMode:P.renderingMode}),xt&&this.pdf.restoreGraphicsState()}}else ie.y<Ge&&(this.ctx.prevPageLastElemOffset+=Ge-ie.y);P.scale>=.01&&(this.pdf.setFontSize(Ie),this.lineWidth=je)}else P.scale>=.01&&(Ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ie*P.scale),je=this.lineWidth,this.lineWidth=je*P.scale),this.pdf.text(P.text,ce.x+this.posX,ce.y+this.posY,{angle:P.angle,align:q,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(Ie),this.lineWidth=je)},O=function(P,q,z,Q){z=z||0,Q=Q||0,this.pdf.internal.out(n(P+z)+" "+r(q+Q)+" l")},V=function(P,q,z){return this.pdf.lines(P,q,z,null,null)},he=function(P,q,z,Q,re,ce,ve,ye){this.pdf.internal.out([e(i(z+P)),e(s(Q+q)),e(i(re+P)),e(s(ce+q)),e(i(ve+P)),e(s(ye+q)),"c"].join(" "))},le=function(P,q,z,Q){for(var re=2*Math.PI,ce=Math.PI/2;q>z;)q-=re;var ve=Math.abs(z-q);ve<re&&Q&&(ve=re-ve);for(var ye=[],De=Q?-1:1,Ie=q;ve>1e-5;){var je=Ie+De*Math.min(ve,ce);ye.push(we.call(this,P,Ie,je)),ve-=Math.abs(je-Ie),Ie=je}return ye},we=function(P,q,z){var Q=(z-q)/2,re=P*Math.cos(Q),ce=P*Math.sin(Q),ve=re,ye=-ce,De=ve*ve+ye*ye,Ie=De+ve*re+ye*ce,je=4/3*(Math.sqrt(2*De*Ie)-Ie)/(ve*ce-ye*re),Oe=ve-je*ye,Qe=ye+je*ve,be=Oe,J=-Qe,qe=Q+q,ge=Math.cos(qe),ue=Math.sin(qe);return{x1:P*Math.cos(q),y1:P*Math.sin(q),x2:Oe*ge-Qe*ue,y2:Oe*ue+Qe*ge,x3:be*ge-J*ue,y3:be*ue+J*ge,x4:P*Math.cos(z),y4:P*Math.sin(z)}},X=function(P){return 180*P/Math.PI},ae=function(P,q,z,Q,re,ce){var ve=P+.5*(z-P),ye=q+.5*(Q-q),De=re+.5*(z-re),Ie=ce+.5*(Q-ce),je=Math.min(P,re,ve,De),Oe=Math.max(P,re,ve,De),Qe=Math.min(q,ce,ye,Ie),be=Math.max(q,ce,ye,Ie);return new a(je,Qe,Oe-je,be-Qe)},fe=function(P,q,z,Q,re,ce,ve,ye){var De,Ie,je,Oe,Qe,be,J,qe,ge,ue,Se,ke,Le,Ge,Ze=z-P,ot=Q-q,at=re-z,vt=ce-Q,K=ve-re,ie=ye-ce;for(Ie=0;Ie<41;Ie++)ge=(J=(je=P+(De=Ie/40)*Ze)+De*((Qe=z+De*at)-je))+De*(Qe+De*(re+De*K-Qe)-J),ue=(qe=(Oe=q+De*ot)+De*((be=Q+De*vt)-Oe))+De*(be+De*(ce+De*ie-be)-qe),Ie==0?(Se=ge,ke=ue,Le=ge,Ge=ue):(Se=Math.min(Se,ge),ke=Math.min(ke,ue),Le=Math.max(Le,ge),Ge=Math.max(Ge,ue));return new a(Math.round(Se),Math.round(ke),Math.round(Le-Se),Math.round(Ge-ke))},Ce=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,q,z=(P=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:q}));this.prevLineDash!==z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=z)}}})(it.API),function(t){var e=function(s){var o,a,l,u,f,p,m,g,S,_;for(a=[],l=0,u=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(f=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(f=((f=((f=((f=(f-(_=f%85))/85)-(S=f%85))/85)-(g=f%85))/85)-(m=f%85))/85)%85,a.push(p+33,m+33,g+33,S+33,_+33)):a.push(122);return function(E,b){for(var N=b;N>0;N--)E.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,u,f,p=String,m="length",g=255,S="charCodeAt",_="slice",E="replace";for(s[_](-2),s=s[_](0,-2)[E](/\s/g,"")[E]("z","!!!!!"),l=[],u=0,f=(s+=o="uuuuu"[_](s[m]%5||5))[m];f>u;u+=5)a=52200625*(s[S](u)-33)+614125*(s[S](u+1)-33)+7225*(s[S](u+2)-33)+85*(s[S](u+3)-33)+(s[S](u+4)-33),l.push(g&a>>24,g&a>>16,g&a>>8,g&a);return function(b,N){for(var T=N;T>0;T--)b.pop()}(l,o[m]),p.fromCharCode.apply(p,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=tg(o)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(it.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,u,f){var p=new XMLHttpRequest,m=0,g=function(S){var _=S.length,E=[],b=String.fromCharCode;for(m=0;m<_;m+=1)E.push(b(255&S.charCodeAt(m)));return E.join("")};if(p.open("GET",l,!u),p.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(p.onload=function(){p.status===200?f(g(this.responseText)):f(void 0)}),p.send(null),u&&p.status===200)return g(p.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(it.API),function(t){function e(){return(st.html2canvas?Promise.resolve(st.html2canvas):Ym(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(st.DOMPurify?Promise.resolve(st.DOMPurify):Ym(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=It(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var u in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[u]=a.style[u];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(u,f){for(var p=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),m=u.firstChild;m;m=m.nextSibling)f!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||p.appendChild(l(m,f));return u.nodeType===1&&(u.nodeName==="CANVAS"?(p.width=u.width,p.height=u.height,p.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(p.value=u.value),p.addEventListener("load",function(){p.scrollTop=u.scrollTop,p.scrollLeft=u.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,u=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var m=0;m<u.length;++m){var g=u[m],S=g.src.find(function(_){return _.format==="truetype"});S&&l.addFont(S.url,g.ref.name,g.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),a(this.prop.container,p)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(o=o||it.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,u){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,u){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(u,f){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,u),p}).then(u,f).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),f=l.call(u,o,a);return s.convert(f,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,it.getPageSize=function(o,a,l){if(It(o)==="object"){var u=o;o=u.orientation,a=u.unit||a,l=u.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var f,p=(""+l).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+a}var g,S=0,_=0;if(m.hasOwnProperty(p))S=m[p][1]/f,_=m[p][0]/f;else try{S=l[1],_=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",_>S&&(g=_,_=S,S=g);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",S>_&&(g=_,_=S,S=g)}return{width:_,height:S,unit:a,k:f,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(ag):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(it.API),it.API.addJS=function(t){return P5=t,this.internal.events.subscribe("postPutResources",function(){zd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(zd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),k5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+P5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){zd!==void 0&&k5!==void 0&&this.internal.out("/Names <</JavaScript "+zd+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,f=[];for(s=0;s<u;s++){var p=n.internal.newObject();f.push(p);var m=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var g=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<f.length;s++)n.internal.write("(page_"+(s+1)+")"+f[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+g+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(it.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,u=this.decode.DCT_DECODE,f=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(p){for(var m,g=256*p.charCodeAt(4)+p.charCodeAt(5),S=p.length,_={width:0,height:0,numcomponents:1},E=4;E<S;E+=2){if(E+=g,e.indexOf(p.charCodeAt(E+1))!==-1){m=256*p.charCodeAt(E+5)+p.charCodeAt(E+6),_={width:256*p.charCodeAt(E+7)+p.charCodeAt(E+8),height:m,numcomponents:p.charCodeAt(E+9)};break}g=256*p.charCodeAt(E+2)+p.charCodeAt(E+3)}return _}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}f={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:u,index:r,alias:i}}return f}}(it.API);var Va,Gd,I5,R5,L5,oM=function(){var t,e,n;function r(s){var o,a,l,u,f,p,m,g,S,_,E,b,N,T;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),S=(function(){var M,U;for(U=[],M=0;M<4;++M)U.push(String.fromCharCode(this.data[this.pos++]));return U}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),u=this.readUInt16()||100,p.delay=1e3*f/u,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(S==="fdAT"&&(this.pos+=4,o-=4),s=(p!=null?p.data:void 0)||this.imgData,b=0;0<=o?b<o:b>o;0<=o?++b:--b)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((_=l-this.transparency.indexed.length)>0)for(N=0;0<=_?N<_:N>_;0<=_?++N:--N)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":m=(E=this.read(o)).indexOf(0),g=String.fromCharCode.apply(String,E.slice(0,m)),this.text[g]=String.fromCharCode.apply(String,E.slice(m+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(T=this.colorType)===4||T===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function f(p,m,g,S){var _,E,b,N,T,M,U,Y,H,B,W,ne,D,j,O,V,he,le,we,X,ae,fe=Math.ceil((u.width-p)/g),Ce=Math.ceil((u.height-m)/S),P=u.width==fe&&u.height==Ce;for(j=o*fe,ne=P?a:new Uint8Array(j*Ce),M=s.length,D=0,E=0;D<Ce&&l<M;){switch(s[l++]){case 0:for(N=he=0;he<j;N=he+=1)ne[E++]=s[l++];break;case 1:for(N=le=0;le<j;N=le+=1)_=s[l++],T=N<o?0:ne[E-o],ne[E++]=(_+T)%256;break;case 2:for(N=we=0;we<j;N=we+=1)_=s[l++],b=(N-N%o)/o,O=D&&ne[(D-1)*j+b*o+N%o],ne[E++]=(O+_)%256;break;case 3:for(N=X=0;X<j;N=X+=1)_=s[l++],b=(N-N%o)/o,T=N<o?0:ne[E-o],O=D&&ne[(D-1)*j+b*o+N%o],ne[E++]=(_+Math.floor((T+O)/2))%256;break;case 4:for(N=ae=0;ae<j;N=ae+=1)_=s[l++],b=(N-N%o)/o,T=N<o?0:ne[E-o],D===0?O=V=0:(O=ne[(D-1)*j+b*o+N%o],V=b&&ne[(D-1)*j+(b-1)*o+N%o]),U=T+O-V,Y=Math.abs(U-T),B=Math.abs(U-O),W=Math.abs(U-V),H=Y<=B&&Y<=W?T:B<=W?O:V,ne[E++]=(_+H)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!P){var q=((m+D*S)*u.width+p)*o,z=D*j;for(N=0;N<fe;N+=1){for(var Q=0;Q<o;Q+=1)a[q++]=ne[z++];q+=(g-1)*o}}D++}}return s=j8(s),u.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,u,f,p,m,g;for(a=this.palette,f=this.transparency.indexed||[],u=new Uint8Array((f.length||0)+a.length),l=0,s=0,o=p=0,m=a.length;p<m;o=p+=3)u[l++]=a[o],u[l++]=a[o+1],u[l++]=a[o+2],u[l++]=(g=f[s++])!=null?g:255;return u},r.prototype.copyToImageData=function(s,o){var a,l,u,f,p,m,g,S,_,E,b;if(l=this.colors,_=null,a=this.hasAlphaChannel,this.palette.length&&(_=(b=this._decodedPalette)!=null?b:this._decodedPalette=this.decodePalette(),l=4,a=!0),S=(u=s.data||s).length,p=_||o,f=m=0,l===1)for(;f<S;)g=_?4*o[f/4]:m,E=p[g++],u[f++]=E,u[f++]=E,u[f++]=E,u[f++]=a?p[g++]:255,m=g;else for(;f<S;)g=_?4*o[f/4]:m,u[f++]=p[g++],u[f++]=p[g++],u[f++]=p[g++],u[f++]=a?p[g++]:255,m=g},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(st)==="[object Window]"){try{e=st.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,u,f,p,m,g;if(this.animation){for(g=[],a=f=0,p=(m=this.animation.frames).length;f<p;a=++f)o=m[a],l=s.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,u),o.imageData=l,g.push(o.image=t(l));return g}},r.prototype.renderFrame=function(s,o){var a,l,u;return a=(l=this.animation.frames)[o],u=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,u,f,p,m=this;return a=0,p=this.animation,u=p.numFrames,l=p.frames,f=p.numPlays,(o=function(){var g,S;if(g=a++%u,S=l[g],m.renderFrame(s,g),u>1&&a/u<f)return m.animation._timeout=setTimeout(o,S.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function aM(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var u=!0,f=[],p=0,m=null,g=0,S=null;for(this.width=n,this.height=r;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,S=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var _=t[e++];p=t[e++]|t[e++]<<8,m=t[e++],!(1&_)&&(m=null),g=_>>2&7,e++;break;case 254:for(;;){if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var E=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,T=t[e++]|t[e++]<<8,M=t[e++],U=M>>6&1,Y=1<<(7&M)+1,H=a,B=l,W=!1;M>>7&&(W=!0,H=e,B=Y,e+=3*Y);var ne=e;for(e++;;){var D;if(!((D=t[e++])>=0))throw Error("Invalid block size");if(D===0)break;e+=D}f.push({x:E,y:b,width:N,height:T,has_local_palette:W,palette_offset:H,palette_size:B,data_offset:ne,data_length:e-ne,transparent_index:m,interlaced:!!U,delay:p,disposal:g});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return S},this.frameInfo=function(j){if(j<0||j>=f.length)throw new Error("Frame index out of range.");return f[j]},this.decodeAndBlitFrameBGRA=function(j,O){var V=this.frameInfo(j),he=V.width*V.height,le=new Uint8Array(he);M5(t,V.data_offset,le,he);var we=V.palette_offset,X=V.transparent_index;X===null&&(X=256);var ae=V.width,fe=n-ae,Ce=ae,P=4*(V.y*n+V.x),q=4*((V.y+V.height)*n+V.x),z=P,Q=4*fe;V.interlaced===!0&&(Q+=4*n*7);for(var re=8,ce=0,ve=le.length;ce<ve;++ce){var ye=le[ce];if(Ce===0&&(Ce=ae,(z+=Q)>=q&&(Q=4*fe+4*n*(re-1),z=P+(ae+fe)*(re<<1),re>>=1)),ye===X)z+=4;else{var De=t[we+3*ye],Ie=t[we+3*ye+1],je=t[we+3*ye+2];O[z++]=je,O[z++]=Ie,O[z++]=De,O[z++]=255}--Ce}},this.decodeAndBlitFrameRGBA=function(j,O){var V=this.frameInfo(j),he=V.width*V.height,le=new Uint8Array(he);M5(t,V.data_offset,le,he);var we=V.palette_offset,X=V.transparent_index;X===null&&(X=256);var ae=V.width,fe=n-ae,Ce=ae,P=4*(V.y*n+V.x),q=4*((V.y+V.height)*n+V.x),z=P,Q=4*fe;V.interlaced===!0&&(Q+=4*n*7);for(var re=8,ce=0,ve=le.length;ce<ve;++ce){var ye=le[ce];if(Ce===0&&(Ce=ae,(z+=Q)>=q&&(Q=4*fe+4*n*(re-1),z=P+(ae+fe)*(re<<1),re>>=1)),ye===X)z+=4;else{var De=t[we+3*ye],Ie=t[we+3*ye+1],je=t[we+3*ye+2];O[z++]=De,O[z++]=Ie,O[z++]=je,O[z++]=255}--Ce}}}function M5(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,u=(1<<l)-1,f=0,p=0,m=0,g=t[e++],S=new Int32Array(4096),_=null;;){for(;f<16&&g!==0;)p|=t[e++]<<f,f+=8,g===1?g=t[e++]:--g;if(f<l)break;var E=p&u;if(p>>=l,f-=l,E!==s){if(E===o)break;for(var b=E<a?E:_,N=0,T=b;T>s;)T=S[T]>>8,++N;var M=T;if(m+N+(b!==E?1:0)>r)return void Dt.log("Warning, gif stream longer than expected.");n[m++]=M;var U=m+=N;for(b!==E&&(n[m++]=M),T=b;N--;)T=S[T],n[--U]=255&T,T>>=8;_!==null&&a<4096&&(S[a++]=_<<8|M,a>=u+1&&l<12&&(++l,u=u<<1|1)),_=E}else a=o+1,u=(1<<(l=i+1))-1,_=null}return m!==r&&Dt.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function b0(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),u=new Array(64),f=new Array(64),p=new Array(65535),m=new Array(65535),g=new Array(64),S=new Array(64),_=[],E=0,b=7,N=new Array(64),T=new Array(64),M=new Array(64),U=new Array(256),Y=new Array(2048),H=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],B=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],W=[0,1,2,3,4,5,6,7,8,9,10,11],ne=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],j=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],he=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function le(P,q){for(var z=0,Q=0,re=new Array,ce=1;ce<=16;ce++){for(var ve=1;ve<=P[ce];ve++)re[q[Q]]=[],re[q[Q]][0]=z,re[q[Q]][1]=ce,Q++,z++;z*=2}return re}function we(P){for(var q=P[0],z=P[1]-1;z>=0;)q&1<<z&&(E|=1<<b),z--,--b<0&&(E==255?(X(255),X(0)):X(E),b=7,E=0)}function X(P){_.push(P)}function ae(P){X(P>>8&255),X(255&P)}function fe(P,q,z,Q,re){for(var ce,ve=re[0],ye=re[240],De=function(ue,Se){var ke,Le,Ge,Ze,ot,at,vt,K,ie,Re,Ne=0;for(ie=0;ie<8;++ie){ke=ue[Ne],Le=ue[Ne+1],Ge=ue[Ne+2],Ze=ue[Ne+3],ot=ue[Ne+4],at=ue[Ne+5],vt=ue[Ne+6];var lt=ke+(K=ue[Ne+7]),xt=ke-K,Sr=Le+vt,Ct=Le-vt,Ft=Ge+at,Ur=Ge-at,We=Ze+ot,Nr=Ze-ot,Xt=lt+We,ni=lt-We,Zi=Sr+Ft,Qt=Sr-Ft;ue[Ne]=Xt+Zi,ue[Ne+4]=Xt-Zi;var ft=.707106781*(Qt+ni);ue[Ne+2]=ni+ft,ue[Ne+6]=ni-ft;var Tt=.382683433*((Xt=Nr+Ur)-(Qt=Ct+xt)),wo=.5411961*Xt+Tt,Rn=1.306562965*Qt+Tt,Ii=.707106781*(Zi=Ur+Ct),Ri=xt+Ii,nt=xt-Ii;ue[Ne+5]=nt+wo,ue[Ne+3]=nt-wo,ue[Ne+1]=Ri+Rn,ue[Ne+7]=Ri-Rn,Ne+=8}for(Ne=0,ie=0;ie<8;++ie){ke=ue[Ne],Le=ue[Ne+8],Ge=ue[Ne+16],Ze=ue[Ne+24],ot=ue[Ne+32],at=ue[Ne+40],vt=ue[Ne+48];var ri=ke+(K=ue[Ne+56]),Li=ke-K,lr=Le+vt,bn=Le-vt,hn=Ge+at,Ar=Ge-at,oa=Ze+ot,es=Ze-ot,ii=ri+oa,si=ri-oa,oi=lr+hn,Mi=lr-hn;ue[Ne]=ii+oi,ue[Ne+32]=ii-oi;var Br=.707106781*(Mi+si);ue[Ne+16]=si+Br,ue[Ne+48]=si-Br;var Di=.382683433*((ii=es+Ar)-(Mi=bn+Li)),xo=.5411961*ii+Di,aa=1.306562965*Mi+Di,la=.707106781*(oi=Ar+bn),ua=Li+la,ca=Li-la;ue[Ne+40]=ca+xo,ue[Ne+24]=ca-xo,ue[Ne+8]=ua+aa,ue[Ne+56]=ua-aa,Ne++}for(ie=0;ie<64;++ie)Re=ue[ie]*Se[ie],g[ie]=Re>0?Re+.5|0:Re-.5|0;return g}(P,q),Ie=0;Ie<64;++Ie)S[H[Ie]]=De[Ie];var je=S[0]-z;z=S[0],je==0?we(Q[0]):(we(Q[m[ce=32767+je]]),we(p[ce]));for(var Oe=63;Oe>0&&S[Oe]==0;)Oe--;if(Oe==0)return we(ve),z;for(var Qe,be=1;be<=Oe;){for(var J=be;S[be]==0&&be<=Oe;)++be;var qe=be-J;if(qe>=16){Qe=qe>>4;for(var ge=1;ge<=Qe;++ge)we(ye);qe&=15}ce=32767+S[be],we(re[(qe<<4)+m[ce]]),we(p[ce]),be++}return Oe!=63&&we(ve),z}function Ce(P){P=Math.min(Math.max(P,1),100),s!=P&&(function(q){for(var z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var re=o((z[Q]*q+50)/100);re=Math.min(Math.max(re,1),255),a[H[Q]]=re}for(var ce=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ve=0;ve<64;ve++){var ye=o((ce[ve]*q+50)/100);ye=Math.min(Math.max(ye,1),255),l[H[ve]]=ye}for(var De=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ie=0,je=0;je<8;je++)for(var Oe=0;Oe<8;Oe++)u[Ie]=1/(a[H[Ie]]*De[je]*De[Oe]*8),f[Ie]=1/(l[H[Ie]]*De[je]*De[Oe]*8),Ie++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),s=P)}this.encode=function(P,q){q&&Ce(q),_=new Array,E=0,b=7,ae(65496),ae(65504),ae(16),X(74),X(70),X(73),X(70),X(0),X(1),X(1),X(0),ae(1),ae(1),X(0),X(0),function(){ae(65499),ae(132),X(0);for(var Le=0;Le<64;Le++)X(a[Le]);X(1);for(var Ge=0;Ge<64;Ge++)X(l[Ge])}(),function(Le,Ge){ae(65472),ae(17),X(8),ae(Ge),ae(Le),X(3),X(1),X(17),X(0),X(2),X(17),X(1),X(3),X(17),X(1)}(P.width,P.height),function(){ae(65476),ae(418),X(0);for(var Le=0;Le<16;Le++)X(B[Le+1]);for(var Ge=0;Ge<=11;Ge++)X(W[Ge]);X(16);for(var Ze=0;Ze<16;Ze++)X(ne[Ze+1]);for(var ot=0;ot<=161;ot++)X(D[ot]);X(1);for(var at=0;at<16;at++)X(j[at+1]);for(var vt=0;vt<=11;vt++)X(O[vt]);X(17);for(var K=0;K<16;K++)X(V[K+1]);for(var ie=0;ie<=161;ie++)X(he[ie])}(),ae(65498),ae(12),X(3),X(1),X(0),X(2),X(17),X(3),X(17),X(0),X(63),X(0);var z=0,Q=0,re=0;E=0,b=7,this.encode.displayName="_encode_";for(var ce,ve,ye,De,Ie,je,Oe,Qe,be,J=P.data,qe=P.width,ge=P.height,ue=4*qe,Se=0;Se<ge;){for(ce=0;ce<ue;){for(Ie=ue*Se+ce,Oe=-1,Qe=0,be=0;be<64;be++)je=Ie+(Qe=be>>3)*ue+(Oe=4*(7&be)),Se+Qe>=ge&&(je-=ue*(Se+1+Qe-ge)),ce+Oe>=ue&&(je-=ce+Oe-ue+4),ve=J[je++],ye=J[je++],De=J[je++],N[be]=(Y[ve]+Y[ye+256>>0]+Y[De+512>>0]>>16)-128,T[be]=(Y[ve+768>>0]+Y[ye+1024>>0]+Y[De+1280>>0]>>16)-128,M[be]=(Y[ve+1280>>0]+Y[ye+1536>>0]+Y[De+1792>>0]>>16)-128;z=fe(N,u,z,e,r),Q=fe(T,f,Q,n,i),re=fe(M,f,re,n,i),ce+=32}Se+=8}if(b>=0){var ke=[];ke[1]=b+1,ke[0]=(1<<b+1)-1,we(ke)}return ae(65497),new Uint8Array(_)},t=t||50,function(){for(var P=String.fromCharCode,q=0;q<256;q++)U[q]=P(q)}(),e=le(B,W),n=le(j,O),r=le(ne,D),i=le(V,he),function(){for(var P=1,q=2,z=1;z<=15;z++){for(var Q=P;Q<q;Q++)m[32767+Q]=z,p[32767+Q]=[],p[32767+Q][1]=z,p[32767+Q][0]=Q;for(var re=-(q-1);re<=-P;re++)m[32767+re]=z,p[32767+re]=[],p[32767+re][1]=z,p[32767+re][0]=q-1+re;P<<=1,q<<=1}}(),function(){for(var P=0;P<256;P++)Y[P]=19595*P,Y[P+256>>0]=38470*P,Y[P+512>>0]=7471*P+32768,Y[P+768>>0]=-11059*P,Y[P+1024>>0]=-21709*P,Y[P+1280>>0]=32768*P+8421375,Y[P+1536>>0]=-27439*P,Y[P+1792>>0]=-5329*P}(),Ce(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function pi(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function D5(t){function e(B){if(!B)throw Error("assert :P")}function n(B,W,ne){for(var D=0;4>D;D++)if(B[W+D]!=ne.charCodeAt(D))return!0;return!1}function r(B,W,ne,D,j){for(var O=0;O<j;O++)B[W+O]=ne[D+O]}function i(B,W,ne,D){for(var j=0;j<D;j++)B[W+j]=ne}function s(B){return new Int32Array(B)}function o(B,W){for(var ne=[],D=0;D<B;D++)ne.push(new W);return ne}function a(B,W){var ne=[];return function D(j,O,V){for(var he=V[O],le=0;le<he&&(j.push(V.length>O+1?[]:new W),!(V.length<O+1));le++)D(j[le],O+1,V)}(ne,0,B),ne}var l=function(){var B=this;function W(d,v){for(var x=1<<v-1>>>0;d&x;)x>>>=1;return x?(d&x-1)+x:d}function ne(d,v,x,A,C){e(!(A%x));do d[v+(A-=x)]=C;while(0<A)}function D(d,v,x,A,C){if(e(2328>=C),512>=C)var I=s(512);else if((I=s(C))==null)return 0;return function(R,L,F,$,ee,pe){var me,oe,Te=L,xe=1<<F,te=s(16),se=s(16);for(e(ee!=0),e($!=null),e(R!=null),e(0<F),oe=0;oe<ee;++oe){if(15<$[oe])return 0;++te[$[oe]]}if(te[0]==ee)return 0;for(se[1]=0,me=1;15>me;++me){if(te[me]>1<<me)return 0;se[me+1]=se[me]+te[me]}for(oe=0;oe<ee;++oe)me=$[oe],0<$[oe]&&(pe[se[me]++]=oe);if(se[15]==1)return($=new j).g=0,$.value=pe[0],ne(R,Te,1,xe,$),xe;var Ae,Pe=-1,Ee=xe-1,ze=0,Ue=1,tt=1,Be=1<<F;for(oe=0,me=1,ee=2;me<=F;++me,ee<<=1){if(Ue+=tt<<=1,0>(tt-=te[me]))return 0;for(;0<te[me];--te[me])($=new j).g=me,$.value=pe[oe++],ne(R,Te+ze,ee,Be,$),ze=W(ze,me)}for(me=F+1,ee=2;15>=me;++me,ee<<=1){if(Ue+=tt<<=1,0>(tt-=te[me]))return 0;for(;0<te[me];--te[me]){if($=new j,(ze&Ee)!=Pe){for(Te+=Be,Ae=1<<(Pe=me)-F;15>Pe&&!(0>=(Ae-=te[Pe]));)++Pe,Ae<<=1;xe+=Be=1<<(Ae=Pe-F),R[L+(Pe=ze&Ee)].g=Ae+F,R[L+Pe].value=Te-L-Pe}$.g=me-F,$.value=pe[oe++],ne(R,Te+(ze>>F),ee,Be,$),ze=W(ze,me)}}return Ue!=2*se[15]-1?0:xe}(d,v,x,A,C,I)}function j(){this.value=this.g=0}function O(){this.value=this.g=0}function V(){this.G=o(5,j),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ln,O)}function he(d,v,x,A){e(d!=null),e(v!=null),e(2147483648>A),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=v,d.pa=x,d.Jd=v,d.Yc=x+A,d.Zc=4<=A?x+A-4+1:x,ce(d)}function le(d,v){for(var x=0;0<v--;)x|=ye(d,128)<<v;return x}function we(d,v){var x=le(d,v);return ve(d)?-x:x}function X(d,v,x,A){var C,I=0;for(e(d!=null),e(v!=null),e(4294967288>A),d.Sb=A,d.Ra=0,d.u=0,d.h=0,4<A&&(A=4),C=0;C<A;++C)I+=v[x+C]<<8*C;d.Ra=I,d.bb=A,d.oa=v,d.pa=x}function ae(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<Aa-8>>>0,++d.bb,d.u-=8;z(d)&&(d.h=1,d.u=0)}function fe(d,v){if(e(0<=v),!d.h&&v<=Na){var x=q(d)&Sa[v];return d.u+=v,ae(d),x}return d.h=1,d.u=0}function Ce(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(d){return d.Ra>>>(d.u&Aa-1)>>>0}function z(d){return e(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>Aa}function Q(d,v){d.u=v,d.h=z(d)}function re(d){d.u>=su&&(e(d.u>=su),ae(d))}function ce(d){e(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(e(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function ve(d){return le(d,1)}function ye(d,v){var x=d.Ca;0>d.b&&ce(d);var A=d.b,C=x*v>>>8,I=(d.I>>>A>C)+0;for(I?(x-=C,d.I-=C+1<<A>>>0):x=C+1,A=x,C=0;256<=A;)C+=8,A>>=8;return A=7^C+cr[A],d.b-=A,d.Ca=(x<<A)-1,I}function De(d,v,x){d[v+0]=x>>24&255,d[v+1]=x>>16&255,d[v+2]=x>>8&255,d[v+3]=x>>0&255}function Ie(d,v){return d[v+0]<<0|d[v+1]<<8}function je(d,v){return Ie(d,v)|d[v+2]<<16}function Oe(d,v){return Ie(d,v)|Ie(d,v+2)<<16}function Qe(d,v){var x=1<<v;return e(d!=null),e(0<v),d.X=s(x),d.X==null?0:(d.Mb=32-v,d.Xa=v,1)}function be(d,v){e(d!=null),e(v!=null),e(d.Xa==v.Xa),r(v.X,0,d.X,0,1<<v.Xa)}function J(){this.X=[],this.Xa=this.Mb=0}function qe(d,v,x,A){e(x!=null),e(A!=null);var C=x[0],I=A[0];return C==0&&(C=(d*I+v/2)/v),I==0&&(I=(v*C+d/2)/d),0>=C||0>=I?0:(x[0]=C,A[0]=I,1)}function ge(d,v){return d+(1<<v)-1>>>v}function ue(d,v){return((4278255360&d)+(4278255360&v)>>>0&4278255360)+((16711935&d)+(16711935&v)>>>0&16711935)>>>0}function Se(d,v){B[v]=function(x,A,C,I,R,L,F){var $;for($=0;$<R;++$){var ee=B[d](L[F+$-1],C,I+$);L[F+$]=ue(x[A+$],ee)}}}function ke(){this.ud=this.hd=this.jd=0}function Le(d,v){return((4278124286&(d^v))>>>1)+(d&v)>>>0}function Ge(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function Ze(d,v){return Ge(d+(d-v+.5>>1))}function ot(d,v,x){return Math.abs(v-x)-Math.abs(d-x)}function at(d,v,x,A,C,I,R){for(A=I[R-1],x=0;x<C;++x)I[R+x]=A=ue(d[v+x],A)}function vt(d,v,x,A,C){var I;for(I=0;I<x;++I){var R=d[v+I],L=R>>8&255,F=16711935&(F=(F=16711935&R)+((L<<16)+L));A[C+I]=(4278255360&R)+F>>>0}}function K(d,v){v.jd=d>>0&255,v.hd=d>>8&255,v.ud=d>>16&255}function ie(d,v,x,A,C,I){var R;for(R=0;R<A;++R){var L=v[x+R],F=L>>>8,$=L,ee=255&(ee=(ee=L>>>16)+((d.jd<<24>>24)*(F<<24>>24)>>>5));$=255&($=($=$+((d.hd<<24>>24)*(F<<24>>24)>>>5))+((d.ud<<24>>24)*(ee<<24>>24)>>>5)),C[I+R]=(4278255360&L)+(ee<<16)+$}}function Re(d,v,x,A,C){B[v]=function(I,R,L,F,$,ee,pe,me,oe){for(F=pe;F<me;++F)for(pe=0;pe<oe;++pe)$[ee++]=C(L[A(I[R++])])},B[d]=function(I,R,L,F,$,ee,pe){var me=8>>I.b,oe=I.Ea,Te=I.K[0],xe=I.w;if(8>me)for(I=(1<<I.b)-1,xe=(1<<me)-1;R<L;++R){var te,se=0;for(te=0;te<oe;++te)te&I||(se=A(F[$++])),ee[pe++]=C(Te[se&xe]),se>>=me}else B["VP8LMapColor"+x](F,$,Te,xe,ee,pe,R,L,oe)}}function Ne(d,v,x,A,C){for(x=v+x;v<x;){var I=d[v++];A[C++]=I>>16&255,A[C++]=I>>8&255,A[C++]=I>>0&255}}function lt(d,v,x,A,C){for(x=v+x;v<x;){var I=d[v++];A[C++]=I>>16&255,A[C++]=I>>8&255,A[C++]=I>>0&255,A[C++]=I>>24&255}}function xt(d,v,x,A,C){for(x=v+x;v<x;){var I=(R=d[v++])>>16&240|R>>12&15,R=R>>0&240|R>>28&15;A[C++]=I,A[C++]=R}}function Sr(d,v,x,A,C){for(x=v+x;v<x;){var I=(R=d[v++])>>16&248|R>>13&7,R=R>>5&224|R>>3&31;A[C++]=I,A[C++]=R}}function Ct(d,v,x,A,C){for(x=v+x;v<x;){var I=d[v++];A[C++]=I>>0&255,A[C++]=I>>8&255,A[C++]=I>>16&255}}function Ft(d,v,x,A,C,I){if(I==0)for(x=v+x;v<x;)De(A,((I=d[v++])[0]>>24|I[1]>>8&65280|I[2]<<8&16711680|I[3]<<24)>>>0),C+=32;else r(A,C,d,v,x)}function Ur(d,v){B[v][0]=B[d+"0"],B[v][1]=B[d+"1"],B[v][2]=B[d+"2"],B[v][3]=B[d+"3"],B[v][4]=B[d+"4"],B[v][5]=B[d+"5"],B[v][6]=B[d+"6"],B[v][7]=B[d+"7"],B[v][8]=B[d+"8"],B[v][9]=B[d+"9"],B[v][10]=B[d+"10"],B[v][11]=B[d+"11"],B[v][12]=B[d+"12"],B[v][13]=B[d+"13"],B[v][14]=B[d+"0"],B[v][15]=B[d+"0"]}function We(d){return d==pp||d==mp||d==Qc||d==gp}function Nr(){this.eb=[],this.size=this.A=this.fb=0}function Xt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ni(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Nr,this.f.kb=new Xt,this.sd=null}function Zi(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Qt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ft(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function Tt(d,v){var x=d.T,A=v.ba.f.RGBA,C=A.eb,I=A.fb+d.ka*A.A,R=Gr[v.ba.S],L=d.y,F=d.O,$=d.f,ee=d.N,pe=d.ea,me=d.W,oe=v.cc,Te=v.dc,xe=v.Mc,te=v.Nc,se=d.ka,Ae=d.ka+d.T,Pe=d.U,Ee=Pe+1>>1;for(se==0?R(L,F,null,null,$,ee,pe,me,$,ee,pe,me,C,I,null,null,Pe):(R(v.ec,v.fc,L,F,oe,Te,xe,te,$,ee,pe,me,C,I-A.A,C,I,Pe),++x);se+2<Ae;se+=2)oe=$,Te=ee,xe=pe,te=me,ee+=d.Rc,me+=d.Rc,I+=2*A.A,R(L,(F+=2*d.fa)-d.fa,L,F,oe,Te,xe,te,$,ee,pe,me,C,I-A.A,C,I,Pe);return F+=d.fa,d.j+Ae<d.o?(r(v.ec,v.fc,L,F,Pe),r(v.cc,v.dc,$,ee,Ee),r(v.Mc,v.Nc,pe,me,Ee),x--):1&Ae||R(L,F,null,null,$,ee,pe,me,$,ee,pe,me,C,I+A.A,null,null,Pe),x}function wo(d,v,x){var A=d.F,C=[d.J];if(A!=null){var I=d.U,R=v.ba.S,L=R==Xc||R==Qc;v=v.ba.f.RGBA;var F=[0],$=d.ka;F[0]=d.T,d.Kb&&($==0?--F[0]:(--$,C[0]-=d.width),d.j+d.ka+d.T==d.o&&(F[0]=d.o-d.j-$));var ee=v.eb;$=v.fb+$*v.A,d=jt(A,C[0],d.width,I,F,ee,$+(L?0:3),v.A),e(x==F),d&&We(R)&&Hr(ee,$,L,I,F,v.A)}return 0}function Rn(d){var v=d.ma,x=v.ba.S,A=11>x,C=x==Kc||x==Yc||x==Xc||x==hp||x==12||We(x);if(v.memory=null,v.Ib=null,v.Jb=null,v.Nd=null,!ru(v.Oa,d,C?11:12))return 0;if(C&&We(x)&&Me(),d.da)alert("todo:use_scaling");else{if(A){if(v.Ib=ft,d.Kb){if(x=d.U+1>>1,v.memory=s(d.U+2*x),v.memory==null)return 0;v.ec=v.memory,v.fc=0,v.cc=v.ec,v.dc=v.fc+d.U,v.Mc=v.cc,v.Nc=v.dc+x,v.Ib=Tt,Me()}}else alert("todo:EmitYUV");C&&(v.Jb=wo,A&&de())}if(A&&!Ov){for(d=0;256>d;++d)mN[d]=89858*(d-128)+ed>>Zc,yN[d]=-22014*(d-128)+ed,vN[d]=-45773*(d-128),gN[d]=113618*(d-128)+ed>>Zc;for(d=fu;d<wp;++d)v=76283*(d-16)+ed>>Zc,wN[d-fu]=Er(v,255),xN[d-fu]=Er(v+8>>4,15);Ov=1}return 1}function Ii(d){var v=d.ma,x=d.U,A=d.T;return e(!(1&d.ka)),0>=x||0>=A?0:(x=v.Ib(d,v),v.Jb!=null&&v.Jb(d,v,x),v.Dc+=x,1)}function Ri(d){d.ma.memory=null}function nt(d,v,x,A){return fe(d,8)!=47?0:(v[0]=fe(d,14)+1,x[0]=fe(d,14)+1,A[0]=fe(d,1),fe(d,3)!=0?0:!d.h)}function ri(d,v){if(4>d)return d+1;var x=d-2>>1;return(2+(1&d)<<x)+fe(v,x)+1}function Li(d,v){return 120<v?v-120:1<=(x=((x=tN[v-1])>>4)*d+(8-(15&x)))?x:1;var x}function lr(d,v,x){var A=q(x),C=d[v+=255&A].g-8;return 0<C&&(Q(x,x.u+8),A=q(x),v+=d[v].value,v+=A&(1<<C)-1),Q(x,x.u+d[v].g),d[v].value}function bn(d,v,x){return x.g+=d.g,x.value+=d.value<<v>>>0,e(8>=x.g),d.g}function hn(d,v,x){var A=d.xc;return e((v=A==0?0:d.vc[d.md*(x>>A)+(v>>A)])<d.Wb),d.Ya[v]}function Ar(d,v,x,A){var C=d.ab,I=d.c*v,R=d.C;v=R+v;var L=x,F=A;for(A=d.Ta,x=d.Ua;0<C--;){var $=d.gc[C],ee=R,pe=v,me=L,oe=F,Te=(F=A,L=x,$.Ea);switch(e(ee<pe),e(pe<=$.nc),$.hc){case 2:Vc(me,oe,(pe-ee)*Te,F,L);break;case 0:var xe=ee,te=pe,se=F,Ae=L,Pe=(Be=$).Ea;xe==0&&(dp(me,oe,null,null,1,se,Ae),at(me,oe+1,0,0,Pe-1,se,Ae+1),oe+=Pe,Ae+=Pe,++xe);for(var Ee=1<<Be.b,ze=Ee-1,Ue=ge(Pe,Be.b),tt=Be.K,Be=Be.w+(xe>>Be.b)*Ue;xe<te;){var Et=tt,kt=Be,_t=1;for(ou(me,oe,se,Ae-Pe,1,se,Ae);_t<Pe;){var wt=(_t&~ze)+Ee;wt>Pe&&(wt=Pe),(0,ks[Et[kt++]>>8&15])(me,oe+ +_t,se,Ae+_t-Pe,wt-_t,se,Ae+_t),_t=wt}oe+=Pe,Ae+=Pe,++xe&ze||(Be+=Ue)}pe!=$.nc&&r(F,L-Te,F,L+(pe-ee-1)*Te,Te);break;case 1:for(Te=me,te=oe,Pe=(me=$.Ea)-(Ae=me&~(se=(oe=1<<$.b)-1)),xe=ge(me,$.b),Ee=$.K,$=$.w+(ee>>$.b)*xe;ee<pe;){for(ze=Ee,Ue=$,tt=new ke,Be=te+Ae,Et=te+me;te<Be;)K(ze[Ue++],tt),Ao(tt,Te,te,oe,F,L),te+=oe,L+=oe;te<Et&&(K(ze[Ue++],tt),Ao(tt,Te,te,Pe,F,L),te+=Pe,L+=Pe),++ee&se||($+=xe)}break;case 3:if(me==F&&oe==L&&0<$.b){for(te=F,me=Te=L+(pe-ee)*Te-(Ae=(pe-ee)*ge($.Ea,$.b)),oe=F,se=L,xe=[],Ae=(Pe=Ae)-1;0<=Ae;--Ae)xe[Ae]=oe[se+Ae];for(Ae=Pe-1;0<=Ae;--Ae)te[me+Ae]=xe[Ae];qr($,ee,pe,F,Te,F,L)}else qr($,ee,pe,me,oe,F,L)}L=A,F=x}F!=x&&r(A,x,L,F,I)}function oa(d,v){var x=d.V,A=d.Ba+d.c*d.C,C=v-d.C;if(e(v<=d.l.o),e(16>=C),0<C){var I=d.l,R=d.Ta,L=d.Ua,F=I.width;if(Ar(d,C,x,A),C=L=[L],e((x=d.C)<(A=v)),e(I.v<I.va),A>I.o&&(A=I.o),x<I.j){var $=I.j-x;x=I.j,C[0]+=$*F}if(x>=A?x=0:(C[0]+=4*I.v,I.ka=x-I.j,I.U=I.va-I.v,I.T=A-x,x=1),x){if(L=L[0],11>(x=d.ca).S){var ee=x.f.RGBA,pe=(A=x.S,C=I.U,I=I.T,$=ee.eb,ee.A),me=I;for(ee=ee.fb+d.Ma*ee.A;0<me--;){var oe=R,Te=L,xe=C,te=$,se=ee;switch(A){case Jc:dr(oe,Te,xe,te,se);break;case Kc:Zn(oe,Te,xe,te,se);break;case pp:Zn(oe,Te,xe,te,se),Hr(te,se,0,xe,1,0);break;case Cv:is(oe,Te,xe,te,se);break;case Yc:Ft(oe,Te,xe,te,se,1);break;case mp:Ft(oe,Te,xe,te,se,1),Hr(te,se,0,xe,1,0);break;case Xc:Ft(oe,Te,xe,te,se,0);break;case Qc:Ft(oe,Te,xe,te,se,0),Hr(te,se,1,xe,1,0);break;case hp:Ps(oe,Te,xe,te,se);break;case gp:Ps(oe,Te,xe,te,se),Ot(te,se,xe,1,0);break;case kv:rs(oe,Te,xe,te,se);break;default:e(0)}L+=F,ee+=pe}d.Ma+=I}else alert("todo:EmitRescaledRowsYUVA");e(d.Ma<=x.height)}}d.C=v,e(d.C<=d.i)}function es(d){var v;if(0<d.ua)return 0;for(v=0;v<d.Wb;++v){var x=d.Ya[v].G,A=d.Ya[v].H;if(0<x[1][A[1]+0].g||0<x[2][A[2]+0].g||0<x[3][A[3]+0].g)return 0}return 1}function ii(d,v,x,A,C,I){if(d.Z!=0){var R=d.qd,L=d.rd;for(e(Ms[d.Z]!=null);v<x;++v)Ms[d.Z](R,L,A,C,A,C,I),R=A,L=C,C+=I;d.qd=R,d.rd=L}}function si(d,v){var x=d.l.ma,A=x.Z==0||x.Z==1?d.l.j:d.C;if(A=d.C<A?A:d.C,e(v<=d.l.o),v>A){var C=d.l.width,I=x.ca,R=x.tb+C*A,L=d.V,F=d.Ba+d.c*A,$=d.gc;e(d.ab==1),e($[0].hc==3),$c($[0],A,v,L,F,I,R),ii(x,A,v,I,R,C)}d.C=d.Ma=v}function oi(d,v,x,A,C,I,R){var L=d.$/A,F=d.$%A,$=d.m,ee=d.s,pe=x+d.$,me=pe;C=x+A*C;var oe=x+A*I,Te=280+ee.ua,xe=d.Pb?L:16777216,te=0<ee.ua?ee.Wa:null,se=ee.wc,Ae=pe<oe?hn(ee,F,L):null;e(d.C<I),e(oe<=C);var Pe=!1;e:for(;;){for(;Pe||pe<oe;){var Ee=0;if(L>=xe){var ze=pe-x;e((xe=d).Pb),xe.wd=xe.m,xe.xd=ze,0<xe.s.ua&&be(xe.s.Wa,xe.s.vb),xe=L+rN}if(F&se||(Ae=hn(ee,F,L)),e(Ae!=null),Ae.Qb&&(v[pe]=Ae.qb,Pe=!0),!Pe)if(re($),Ae.jc){Ee=$,ze=v;var Ue=pe,tt=Ae.pd[q(Ee)&Ln-1];e(Ae.jc),256>tt.g?(Q(Ee,Ee.u+tt.g),ze[Ue]=tt.value,Ee=0):(Q(Ee,Ee.u+tt.g-256),e(256<=tt.value),Ee=tt.value),Ee==0&&(Pe=!0)}else Ee=lr(Ae.G[0],Ae.H[0],$);if($.h)break;if(Pe||256>Ee){if(!Pe)if(Ae.nd)v[pe]=(Ae.qb|Ee<<8)>>>0;else{if(re($),Pe=lr(Ae.G[1],Ae.H[1],$),re($),ze=lr(Ae.G[2],Ae.H[2],$),Ue=lr(Ae.G[3],Ae.H[3],$),$.h)break;v[pe]=(Ue<<24|Pe<<16|Ee<<8|ze)>>>0}if(Pe=!1,++pe,++F>=A&&(F=0,++L,R!=null&&L<=I&&!(L%16)&&R(d,L),te!=null))for(;me<pe;)Ee=v[me++],te.X[(506832829*Ee&4294967295)>>>te.Mb]=Ee}else if(280>Ee){if(Ee=ri(Ee-256,$),ze=lr(Ae.G[4],Ae.H[4],$),re($),ze=Li(A,ze=ri(ze,$)),$.h)break;if(pe-x<ze||C-pe<Ee)break e;for(Ue=0;Ue<Ee;++Ue)v[pe+Ue]=v[pe+Ue-ze];for(pe+=Ee,F+=Ee;F>=A;)F-=A,++L,R!=null&&L<=I&&!(L%16)&&R(d,L);if(e(pe<=C),F&se&&(Ae=hn(ee,F,L)),te!=null)for(;me<pe;)Ee=v[me++],te.X[(506832829*Ee&4294967295)>>>te.Mb]=Ee}else{if(!(Ee<Te))break e;for(Pe=Ee-280,e(te!=null);me<pe;)Ee=v[me++],te.X[(506832829*Ee&4294967295)>>>te.Mb]=Ee;Ee=pe,e(!(Pe>>>(ze=te).Xa)),v[Ee]=ze.X[Pe],Pe=!0}Pe||e($.h==z($))}if(d.Pb&&$.h&&pe<C)e(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&be(d.s.vb,d.s.Wa);else{if($.h)break e;R!=null&&R(d,L>I?I:L),d.a=0,d.$=pe-x}return 1}return d.a=3,0}function Mi(d){e(d!=null),d.vc=null,d.yc=null,d.Ya=null;var v=d.Wa;v!=null&&(v.X=null),d.vb=null,e(d!=null)}function Br(){var d=new cp;return d==null?null:(d.a=0,d.xb=Rv,Ur("Predictor","VP8LPredictors"),Ur("Predictor","VP8LPredictors_C"),Ur("PredictorAdd","VP8LPredictorsAdd"),Ur("PredictorAdd","VP8LPredictorsAdd_C"),Vc=vt,Ao=ie,dr=Ne,Zn=lt,Ps=xt,rs=Sr,is=Ct,B.VP8LMapColor32b=Ea,B.VP8LMapColor8b=Hc,d)}function Di(d,v,x,A,C){var I=1,R=[d],L=[v],F=A.m,$=A.s,ee=null,pe=0;e:for(;;){if(x)for(;I&&fe(F,1);){var me=R,oe=L,Te=A,xe=1,te=Te.m,se=Te.gc[Te.ab],Ae=fe(te,2);if(Te.Oc&1<<Ae)I=0;else{switch(Te.Oc|=1<<Ae,se.hc=Ae,se.Ea=me[0],se.nc=oe[0],se.K=[null],++Te.ab,e(4>=Te.ab),Ae){case 0:case 1:se.b=fe(te,3)+2,xe=Di(ge(se.Ea,se.b),ge(se.nc,se.b),0,Te,se.K),se.K=se.K[0];break;case 3:var Pe,Ee=fe(te,8)+1,ze=16<Ee?0:4<Ee?1:2<Ee?2:3;if(me[0]=ge(se.Ea,ze),se.b=ze,Pe=xe=Di(Ee,1,0,Te,se.K)){var Ue,tt=Ee,Be=se,Et=1<<(8>>Be.b),kt=s(Et);if(kt==null)Pe=0;else{var _t=Be.K[0],wt=Be.w;for(kt[0]=Be.K[0][0],Ue=1;Ue<1*tt;++Ue)kt[Ue]=ue(_t[wt+Ue],kt[Ue-1]);for(;Ue<4*Et;++Ue)kt[Ue]=0;Be.K[0]=null,Be.K[0]=kt,Pe=1}}xe=Pe;break;case 2:break;default:e(0)}I=xe}}if(R=R[0],L=L[0],I&&fe(F,1)&&!(I=1<=(pe=fe(F,4))&&11>=pe)){A.a=3;break e}var Mt;if(Mt=I)t:{var Lt,gt,mn,fr=A,gn=R,hr=L,Pt=pe,Cr=x,kr=fr.m,En=fr.s,Mn=[null],tr=1,Wr=0,Ui=nN[Pt];n:for(;;){if(Cr&&fe(kr,1)){var Tn=fe(kr,3)+2,ls=ge(gn,Tn),Po=ge(hr,Tn),Ia=ls*Po;if(!Di(ls,Po,0,fr,Mn))break n;for(Mn=Mn[0],En.xc=Tn,Lt=0;Lt<Ia;++Lt){var Ds=Mn[Lt]>>8&65535;Mn[Lt]=Ds,Ds>=tr&&(tr=Ds+1)}}if(kr.h)break n;for(gt=0;5>gt;++gt){var en=Pv[gt];!gt&&0<Pt&&(en+=1<<Pt),Wr<en&&(Wr=en)}var xp=o(tr*Ui,j),Bv=tr,qv=o(Bv,V);if(qv==null)var nd=null;else e(65536>=Bv),nd=qv;var hu=s(Wr);if(nd==null||hu==null||xp==null){fr.a=1;break n}var rd=xp;for(Lt=mn=0;Lt<tr;++Lt){var di=nd[Lt],Ra=di.G,La=di.H,Vv=0,id=1,$v=0;for(gt=0;5>gt;++gt){en=Pv[gt],Ra[gt]=rd,La[gt]=mn,!gt&&0<Pt&&(en+=1<<Pt);i:{var sd,bp=en,od=fr,pu=hu,SN=rd,NN=mn,_p=0,Fs=od.m,AN=fe(Fs,1);if(i(pu,0,0,bp),AN){var EN=fe(Fs,1)+1,TN=fe(Fs,1),Hv=fe(Fs,TN==0?1:8);pu[Hv]=1,EN==2&&(pu[Hv=fe(Fs,8)]=1);var ad=1}else{var zv=s(19),Gv=fe(Fs,4)+4;if(19<Gv){od.a=3;var ld=0;break i}for(sd=0;sd<Gv;++sd)zv[eN[sd]]=fe(Fs,3);var Sp=void 0,mu=void 0,Wv=od,CN=zv,ud=bp,Jv=pu,Np=0,Os=Wv.m,Kv=8,Yv=o(128,j);r:for(;D(Yv,0,7,CN,19);){if(fe(Os,1)){var kN=2+2*fe(Os,3);if((Sp=2+fe(Os,kN))>ud)break r}else Sp=ud;for(mu=0;mu<ud&&Sp--;){re(Os);var Xv=Yv[0+(127&q(Os))];Q(Os,Os.u+Xv.g);var Ma=Xv.value;if(16>Ma)Jv[mu++]=Ma,Ma!=0&&(Kv=Ma);else{var PN=Ma==16,Qv=Ma-16,IN=QS[Qv],Zv=fe(Os,XS[Qv])+IN;if(mu+Zv>ud)break r;for(var RN=PN?Kv:0;0<Zv--;)Jv[mu++]=RN}}Np=1;break r}Np||(Wv.a=3),ad=Np}(ad=ad&&!Fs.h)&&(_p=D(SN,NN,8,pu,bp)),ad&&_p!=0?ld=_p:(od.a=3,ld=0)}if(ld==0)break n;if(id&&ZS[gt]==1&&(id=rd[mn].g==0),Vv+=rd[mn].g,mn+=ld,3>=gt){var gu,Ap=hu[0];for(gu=1;gu<en;++gu)hu[gu]>Ap&&(Ap=hu[gu]);$v+=Ap}}if(di.nd=id,di.Qb=0,id&&(di.qb=(Ra[3][La[3]+0].value<<24|Ra[1][La[1]+0].value<<16|Ra[2][La[2]+0].value)>>>0,Vv==0&&256>Ra[0][La[0]+0].value&&(di.Qb=1,di.qb+=Ra[0][La[0]+0].value<<8)),di.jc=!di.Qb&&6>$v,di.jc){var cd,us=di;for(cd=0;cd<Ln;++cd){var js=cd,Us=us.pd[js],dd=us.G[0][us.H[0]+js];256<=dd.value?(Us.g=dd.g+256,Us.value=dd.value):(Us.g=0,Us.value=0,js>>=bn(dd,8,Us),js>>=bn(us.G[1][us.H[1]+js],16,Us),js>>=bn(us.G[2][us.H[2]+js],0,Us),bn(us.G[3][us.H[3]+js],24,Us))}}}En.vc=Mn,En.Wb=tr,En.Ya=nd,En.yc=xp,Mt=1;break t}Mt=0}if(!(I=Mt)){A.a=3;break e}if(0<pe){if($.ua=1<<pe,!Qe($.Wa,pe)){A.a=1,I=0;break e}}else $.ua=0;var Ep=A,e1=R,LN=L,Tp=Ep.s,Cp=Tp.xc;if(Ep.c=e1,Ep.i=LN,Tp.md=ge(e1,Cp),Tp.wc=Cp==0?-1:(1<<Cp)-1,x){A.xb=cN;break e}if((ee=s(R*L))==null){A.a=1,I=0;break e}I=(I=oi(A,ee,0,R,L,L,null))&&!F.h;break e}return I?(C!=null?C[0]=ee:(e(ee==null),e(x)),A.$=0,x||Mi($)):Mi($),I}function xo(d,v){var x=d.c*d.i,A=x+v+16*v;return e(d.c<=v),d.V=s(A),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+x+v,1)}function aa(d,v){var x=d.C,A=v-x,C=d.V,I=d.Ba+d.c*x;for(e(v<=d.l.o);0<A;){var R=16<A?16:A,L=d.l.ma,F=d.l.width,$=F*R,ee=L.ca,pe=L.tb+F*x,me=d.Ta,oe=d.Ua;Ar(d,R,C,I),ln(me,oe,ee,pe,$),ii(L,x,x+R,ee,pe,F),A-=R,C+=R*d.c,x+=R}e(x==v),d.C=d.Ma=v}function la(){this.ub=this.yd=this.td=this.Rb=0}function ua(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ca(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function _c(){this.Yb=function(){var d=[];return function v(x,A,C){for(var I=C[A],R=0;R<I&&(x.push(C.length>A+1?[]:0),!(C.length<A+1));R++)v(x[R],A+1,C)}(d,0,[3,11]),d}()}function qh(){this.jb=s(3),this.Wc=a([4,8],_c),this.Xc=a([4,17],_c)}function Vh(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function da(){this.ld=this.La=this.dd=this.tc=0}function Sc(){this.Na=this.la=0}function $h(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ql(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Hh(){this.uc=this.M=this.Nb=0,this.wa=Array(new da),this.Y=0,this.ya=Array(new ql),this.aa=0,this.l=new fa}function Nc(){this.y=s(16),this.f=s(8),this.ea=s(8)}function zh(){this.cb=this.a=0,this.sc="",this.m=new Ce,this.Od=new la,this.Kc=new ua,this.ed=new Vh,this.Qa=new ca,this.Ic=this.$c=this.Aa=0,this.D=new Hh,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Ce),this.ia=0,this.pb=o(4,$h),this.Pa=new qh,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Nc),this.Hd=0,this.rb=Array(new Sc),this.sb=0,this.wa=Array(new da),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ql),this.L=this.aa=0,this.gd=a([4,2],da),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function fa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Gh(){var d=new zh;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,du||(du=Tc)),d}function on(d,v,x){return d.a==0&&(d.a=v,d.sc=x,d.cb=0),0}function Ac(d,v,x){return 3<=x&&d[v+0]==157&&d[v+1]==1&&d[v+2]==42}function Ec(d,v){if(d==null)return 0;if(d.a=0,d.sc="OK",v==null)return on(d,2,"null VP8Io passed to VP8GetHeaders()");var x=v.data,A=v.w,C=v.ha;if(4>C)return on(d,7,"Truncated header.");var I=x[A+0]|x[A+1]<<8|x[A+2]<<16,R=d.Od;if(R.Rb=!(1&I),R.td=I>>1&7,R.yd=I>>4&1,R.ub=I>>5,3<R.td)return on(d,3,"Incorrect keyframe parameters.");if(!R.yd)return on(d,4,"Frame not displayable.");A+=3,C-=3;var L=d.Kc;if(R.Rb){if(7>C)return on(d,7,"cannot parse picture header");if(!Ac(x,A,C))return on(d,3,"Bad code word");L.c=16383&(x[A+4]<<8|x[A+3]),L.Td=x[A+4]>>6,L.i=16383&(x[A+6]<<8|x[A+5]),L.Ud=x[A+6]>>6,A+=7,C-=7,d.za=L.c+15>>4,d.Ub=L.i+15>>4,v.width=L.c,v.height=L.i,v.Da=0,v.j=0,v.v=0,v.va=v.width,v.o=v.height,v.da=0,v.ib=v.width,v.hb=v.height,v.U=v.width,v.T=v.height,i((I=d.Pa).jb,0,255,I.jb.length),e((I=d.Qa)!=null),I.Cb=0,I.Bb=0,I.Fb=1,i(I.Zb,0,0,I.Zb.length),i(I.Lb,0,0,I.Lb)}if(R.ub>C)return on(d,7,"bad partition length");he(I=d.m,x,A,R.ub),A+=R.ub,C-=R.ub,R.Rb&&(L.Ld=ve(I),L.Kd=ve(I)),L=d.Qa;var F,$=d.Pa;if(e(I!=null),e(L!=null),L.Cb=ve(I),L.Cb){if(L.Bb=ve(I),ve(I)){for(L.Fb=ve(I),F=0;4>F;++F)L.Zb[F]=ve(I)?we(I,7):0;for(F=0;4>F;++F)L.Lb[F]=ve(I)?we(I,6):0}if(L.Bb)for(F=0;3>F;++F)$.jb[F]=ve(I)?le(I,8):255}else L.Bb=0;if(I.Ka)return on(d,3,"cannot parse segment header");if((L=d.ed).zd=ve(I),L.Tb=le(I,6),L.wb=le(I,3),L.Pc=ve(I),L.Pc&&ve(I)){for($=0;4>$;++$)ve(I)&&(L.vd[$]=we(I,6));for($=0;4>$;++$)ve(I)&&(L.od[$]=we(I,6))}if(d.L=L.Tb==0?0:L.zd?1:2,I.Ka)return on(d,3,"cannot parse filter header");var ee=C;if(C=F=A,A=F+ee,L=ee,d.Xb=(1<<le(d.m,2))-1,ee<3*($=d.Xb))x=7;else{for(F+=3*$,L-=3*$,ee=0;ee<$;++ee){var pe=x[C+0]|x[C+1]<<8|x[C+2]<<16;pe>L&&(pe=L),he(d.Jc[+ee],x,F,pe),F+=pe,L-=pe,C+=3}he(d.Jc[+$],x,F,L),x=F<A?0:5}if(x!=0)return on(d,x,"cannot parse partitions");for(x=le(F=d.m,7),C=ve(F)?we(F,4):0,A=ve(F)?we(F,4):0,L=ve(F)?we(F,4):0,$=ve(F)?we(F,4):0,F=ve(F)?we(F,4):0,ee=d.Qa,pe=0;4>pe;++pe){if(ee.Cb){var me=ee.Zb[pe];ee.Fb||(me+=x)}else{if(0<pe){d.pb[pe]=d.pb[0];continue}me=x}var oe=d.pb[pe];oe.Sc[0]=vp[Er(me+C,127)],oe.Sc[1]=yp[Er(me+0,127)],oe.Eb[0]=2*vp[Er(me+A,127)],oe.Eb[1]=101581*yp[Er(me+L,127)]>>16,8>oe.Eb[1]&&(oe.Eb[1]=8),oe.Qc[0]=vp[Er(me+$,117)],oe.Qc[1]=yp[Er(me+F,127)],oe.lc=me+F}if(!R.Rb)return on(d,4,"Not a key frame.");for(ve(I),R=d.Pa,x=0;4>x;++x){for(C=0;8>C;++C)for(A=0;3>A;++A)for(L=0;11>L;++L)$=ye(I,lN[x][C][A][L])?le(I,8):oN[x][C][A][L],R.Wc[x][C].Yb[A][L]=$;for(C=0;17>C;++C)R.Xc[x][C]=R.Wc[x][uN[C]]}return d.kc=ve(I),d.kc&&(d.Bd=le(I,8)),d.cb=1}function Tc(d,v,x,A,C,I,R){var L=v[C].Yb[x];for(x=0;16>C;++C){if(!ye(d,L[x+0]))return C;for(;!ye(d,L[x+1]);)if(L=v[++C].Yb[0],x=0,C==16)return 16;var F=v[C+1].Yb;if(ye(d,L[x+2])){var $=d,ee=0;if(ye($,(me=L)[(pe=x)+3]))if(ye($,me[pe+6])){for(L=0,pe=2*(ee=ye($,me[pe+8]))+(me=ye($,me[pe+9+ee])),ee=0,me=iN[pe];me[L];++L)ee+=ee+ye($,me[L]);ee+=3+(8<<pe)}else ye($,me[pe+7])?(ee=7+2*ye($,165),ee+=ye($,145)):ee=5+ye($,159);else ee=ye($,me[pe+4])?3+ye($,me[pe+5]):2;L=F[2]}else ee=1,L=F[1];F=R+sN[C],0>($=d).b&&ce($);var pe,me=$.b,oe=(pe=$.Ca>>1)-($.I>>me)>>31;--$.b,$.Ca+=oe,$.Ca|=1,$.I-=(pe+1&oe)<<me,I[F]=((ee^oe)-oe)*A[(0<C)+0]}return 16}function Vl(d){var v=d.rb[d.sb-1];v.la=0,v.Na=0,i(d.zc,0,0,d.zc.length),d.ja=0}function Wh(d,v){if(d==null)return 0;if(v==null)return on(d,2,"NULL VP8Io parameter in VP8Decode().");if(!d.cb&&!Ec(d,v))return 0;if(e(d.cb),v.ac==null||v.ac(v)){v.ob&&(d.L=0);var x=td[d.L];if(d.L==2?(d.yb=0,d.zb=0):(d.yb=v.v-x>>4,d.zb=v.j-x>>4,0>d.yb&&(d.yb=0),0>d.zb&&(d.zb=0)),d.Va=v.o+15+x>>4,d.Hb=v.va+15+x>>4,d.Hb>d.za&&(d.Hb=d.za),d.Va>d.Ub&&(d.Va=d.Ub),0<d.L){var A=d.ed;for(x=0;4>x;++x){var C;if(d.Qa.Cb){var I=d.Qa.Lb[x];d.Qa.Fb||(I+=A.Tb)}else I=A.Tb;for(C=0;1>=C;++C){var R=d.gd[x][C],L=I;if(A.Pc&&(L+=A.vd[0],C&&(L+=A.od[0])),0<(L=0>L?0:63<L?63:L)){var F=L;0<A.wb&&(F=4<A.wb?F>>2:F>>1)>9-A.wb&&(F=9-A.wb),1>F&&(F=1),R.dd=F,R.tc=2*L+F,R.ld=40<=L?2:15<=L?1:0}else R.tc=0;R.La=C}}}x=0}else on(d,6,"Frame setup failed"),x=d.a;if(x=x==0){if(x){d.$c=0,0<d.Aa||(d.Ic=_N);e:{x=d.Ic,A=4*(F=d.za);var $=32*F,ee=F+1,pe=0<d.L?F*(0<d.Aa?2:1):0,me=(d.Aa==2?2:1)*F;if((R=A+832+(C=3*(16*x+td[d.L])/2*$)+(I=d.Fa!=null&&0<d.Fa.length?d.Kc.c*d.Kc.i:0))!=R)x=0;else{if(R>d.Vb){if(d.Vb=0,d.Ec=s(R),d.Fc=0,d.Ec==null){x=on(d,1,"no memory during frame initialization.");break e}d.Vb=R}R=d.Ec,L=d.Fc,d.Ac=R,d.Bc=L,L+=A,d.Gd=o($,Nc),d.Hd=0,d.rb=o(ee+1,Sc),d.sb=1,d.wa=pe?o(pe,da):null,d.Y=0,d.D.Nb=0,d.D.wa=d.wa,d.D.Y=d.Y,0<d.Aa&&(d.D.Y+=F),e(!0),d.oc=R,d.pc=L,L+=832,d.ya=o(me,ql),d.aa=0,d.D.ya=d.ya,d.D.aa=d.aa,d.Aa==2&&(d.D.aa+=F),d.R=16*F,d.B=8*F,F=($=td[d.L])*d.R,$=$/2*d.B,d.sa=R,d.ta=L+F,d.qa=d.sa,d.ra=d.ta+16*x*d.R+$,d.Ha=d.qa,d.Ia=d.ra+8*x*d.B+$,d.$c=0,L+=C,d.mb=I?R:null,d.nb=I?L:null,e(L+I<=d.Fc+d.Vb),Vl(d),i(d.Ac,d.Bc,0,A),x=1}}if(x){if(v.ka=0,v.y=d.sa,v.O=d.ta,v.f=d.qa,v.N=d.ra,v.ea=d.Ha,v.Vd=d.Ia,v.fa=d.R,v.Rc=d.B,v.F=null,v.J=0,!Gc){for(x=-255;255>=x;++x)_n[255+x]=0>x?-x:x;for(x=-1020;1020>=x;++x)os[1020+x]=-128>x?-128:127<x?127:x;for(x=-112;112>=x;++x)cu[112+x]=-16>x?-16:15<x?15:x;for(x=-255;510>=x;++x)Pa[255+x]=0>x?0:255<x?255:x;Gc=1}Ta=Yh,ss=Jh,au=kc,er=Kh,Vr=Pc,an=Cc,Ca=Jl,zc=So,lu=up,Eo=Kl,To=lp,Is=ya,Co=Yl,ka=Uc,ko=jc,Rs=Oi,uu=ns,$r=ap,ci[0]=Fi,ci[1]=Xh,ci[2]=tp,ci[3]=np,ci[4]=Lc,ci[5]=ga,ci[6]=Mc,ci[7]=zl,ci[8]=ip,ci[9]=rp,Ls[0]=Ic,Ls[1]=Zh,Ls[2]=ts,Ls[3]=pa,Ls[4]=Bn,Ls[5]=ep,Ls[6]=Rc,as[0]=Es,as[1]=Qh,as[2]=sp,as[3]=Gl,as[4]=_o,as[5]=op,as[6]=Wl,x=1}else x=0}x&&(x=function(oe,Te){for(oe.M=0;oe.M<oe.Va;++oe.M){var xe,te=oe.Jc[oe.M&oe.Xb],se=oe.m,Ae=oe;for(xe=0;xe<Ae.za;++xe){var Pe=se,Ee=Ae,ze=Ee.Ac,Ue=Ee.Bc+4*xe,tt=Ee.zc,Be=Ee.ya[Ee.aa+xe];if(Ee.Qa.Bb?Be.$b=ye(Pe,Ee.Pa.jb[0])?2+ye(Pe,Ee.Pa.jb[2]):ye(Pe,Ee.Pa.jb[1]):Be.$b=0,Ee.kc&&(Be.Ad=ye(Pe,Ee.Bd)),Be.Za=!ye(Pe,145)+0,Be.Za){var Et=Be.Ob,kt=0;for(Ee=0;4>Ee;++Ee){var _t,wt=tt[0+Ee];for(_t=0;4>_t;++_t){wt=aN[ze[Ue+_t]][wt];for(var Mt=Iv[ye(Pe,wt[0])];0<Mt;)Mt=Iv[2*Mt+ye(Pe,wt[Mt])];wt=-Mt,ze[Ue+_t]=wt}r(Et,kt,ze,Ue,4),kt+=4,tt[0+Ee]=wt}}else wt=ye(Pe,156)?ye(Pe,128)?1:3:ye(Pe,163)?2:0,Be.Ob[0]=wt,i(ze,Ue,wt,4),i(tt,0,wt,4);Be.Dd=ye(Pe,142)?ye(Pe,114)?ye(Pe,183)?1:3:2:0}if(Ae.m.Ka)return on(oe,7,"Premature end-of-partition0 encountered.");for(;oe.ja<oe.za;++oe.ja){if(Ae=te,Pe=(se=oe).rb[se.sb-1],ze=se.rb[se.sb+se.ja],xe=se.ya[se.aa+se.ja],Ue=se.kc?xe.Ad:0)Pe.la=ze.la=0,xe.Za||(Pe.Na=ze.Na=0),xe.Hc=0,xe.Gc=0,xe.ia=0;else{var Lt,gt;if(Pe=ze,ze=Ae,Ue=se.Pa.Xc,tt=se.ya[se.aa+se.ja],Be=se.pb[tt.$b],Ee=tt.ad,Et=0,kt=se.rb[se.sb-1],wt=_t=0,i(Ee,Et,0,384),tt.Za)var mn=0,fr=Ue[3];else{Mt=s(16);var gn=Pe.Na+kt.Na;if(gn=du(ze,Ue[1],gn,Be.Eb,0,Mt,0),Pe.Na=kt.Na=(0<gn)+0,1<gn)Ta(Mt,0,Ee,Et);else{var hr=Mt[0]+3>>3;for(Mt=0;256>Mt;Mt+=16)Ee[Et+Mt]=hr}mn=1,fr=Ue[0]}var Pt=15&Pe.la,Cr=15&kt.la;for(Mt=0;4>Mt;++Mt){var kr=1&Cr;for(hr=gt=0;4>hr;++hr)Pt=Pt>>1|(kr=(gn=du(ze,fr,gn=kr+(1&Pt),Be.Sc,mn,Ee,Et))>mn)<<7,gt=gt<<2|(3<gn?3:1<gn?2:Ee[Et+0]!=0),Et+=16;Pt>>=4,Cr=Cr>>1|kr<<7,_t=(_t<<8|gt)>>>0}for(fr=Pt,mn=Cr>>4,Lt=0;4>Lt;Lt+=2){for(gt=0,Pt=Pe.la>>4+Lt,Cr=kt.la>>4+Lt,Mt=0;2>Mt;++Mt){for(kr=1&Cr,hr=0;2>hr;++hr)gn=kr+(1&Pt),Pt=Pt>>1|(kr=0<(gn=du(ze,Ue[2],gn,Be.Qc,0,Ee,Et)))<<3,gt=gt<<2|(3<gn?3:1<gn?2:Ee[Et+0]!=0),Et+=16;Pt>>=2,Cr=Cr>>1|kr<<5}wt|=gt<<4*Lt,fr|=Pt<<4<<Lt,mn|=(240&Cr)<<Lt}Pe.la=fr,kt.la=mn,tt.Hc=_t,tt.Gc=wt,tt.ia=43690&wt?0:Be.ia,Ue=!(_t|wt)}if(0<se.L&&(se.wa[se.Y+se.ja]=se.gd[xe.$b][xe.Za],se.wa[se.Y+se.ja].La|=!Ue),Ae.Ka)return on(oe,7,"Premature end-of-file encountered.")}if(Vl(oe),se=Te,Ae=1,xe=(te=oe).D,Pe=0<te.L&&te.M>=te.zb&&te.M<=te.Va,te.Aa==0)e:{if(xe.M=te.M,xe.uc=Pe,nu(te,xe),Ae=1,xe=(gt=te.D).Nb,Pe=(wt=td[te.L])*te.R,ze=wt/2*te.B,Mt=16*xe*te.R,hr=8*xe*te.B,Ue=te.sa,tt=te.ta-Pe+Mt,Be=te.qa,Ee=te.ra-ze+hr,Et=te.Ha,kt=te.Ia-ze+hr,Cr=(Pt=gt.M)==0,_t=Pt>=te.Va-1,te.Aa==2&&nu(te,gt),gt.uc)for(kr=(gn=te).D.M,e(gn.D.uc),gt=gn.yb;gt<gn.Hb;++gt){mn=gt,fr=kr;var En=(Mn=(en=gn).D).Nb;Lt=en.R;var Mn=Mn.wa[Mn.Y+mn],tr=en.sa,Wr=en.ta+16*En*Lt+16*mn,Ui=Mn.dd,Tn=Mn.tc;if(Tn!=0)if(e(3<=Tn),en.L==1)0<mn&&Rs(tr,Wr,Lt,Tn+4),Mn.La&&$r(tr,Wr,Lt,Tn),0<fr&&ko(tr,Wr,Lt,Tn+4),Mn.La&&uu(tr,Wr,Lt,Tn);else{var ls=en.B,Po=en.qa,Ia=en.ra+8*En*ls+8*mn,Ds=en.Ha,en=en.Ia+8*En*ls+8*mn;En=Mn.ld,0<mn&&(zc(tr,Wr,Lt,Tn+4,Ui,En),Eo(Po,Ia,Ds,en,ls,Tn+4,Ui,En)),Mn.La&&(Is(tr,Wr,Lt,Tn,Ui,En),ka(Po,Ia,Ds,en,ls,Tn,Ui,En)),0<fr&&(Ca(tr,Wr,Lt,Tn+4,Ui,En),lu(Po,Ia,Ds,en,ls,Tn+4,Ui,En)),Mn.La&&(To(tr,Wr,Lt,Tn,Ui,En),Co(Po,Ia,Ds,en,ls,Tn,Ui,En))}}if(te.ia&&alert("todo:DitherRow"),se.put!=null){if(gt=16*Pt,Pt=16*(Pt+1),Cr?(se.y=te.sa,se.O=te.ta+Mt,se.f=te.qa,se.N=te.ra+hr,se.ea=te.Ha,se.W=te.Ia+hr):(gt-=wt,se.y=Ue,se.O=tt,se.f=Be,se.N=Ee,se.ea=Et,se.W=kt),_t||(Pt-=wt),Pt>se.o&&(Pt=se.o),se.F=null,se.J=null,te.Fa!=null&&0<te.Fa.length&&gt<Pt&&(se.J=eu(te,se,gt,Pt-gt),se.F=te.mb,se.F==null&&se.F.length==0)){Ae=on(te,3,"Could not decode alpha data.");break e}gt<se.j&&(wt=se.j-gt,gt=se.j,e(!(1&wt)),se.O+=te.R*wt,se.N+=te.B*(wt>>1),se.W+=te.B*(wt>>1),se.F!=null&&(se.J+=se.width*wt)),gt<Pt&&(se.O+=se.v,se.N+=se.v>>1,se.W+=se.v>>1,se.F!=null&&(se.J+=se.v),se.ka=gt-se.j,se.U=se.va-se.v,se.T=Pt-gt,Ae=se.put(se))}xe+1!=te.Ic||_t||(r(te.sa,te.ta-Pe,Ue,tt+16*te.R,Pe),r(te.qa,te.ra-ze,Be,Ee+8*te.B,ze),r(te.Ha,te.Ia-ze,Et,kt+8*te.B,ze))}if(!Ae)return on(oe,6,"Output aborted.")}return 1}(d,v)),v.bc!=null&&v.bc(v),x&=1}return x?(d.cb=0,x):0}function ai(d,v,x,A,C){C=d[v+x+32*A]+(C>>3),d[v+x+32*A]=-256&C?0>C?0:255:C}function ha(d,v,x,A,C,I){ai(d,v,0,x,A+C),ai(d,v,1,x,A+I),ai(d,v,2,x,A-I),ai(d,v,3,x,A-C)}function ur(d){return(20091*d>>16)+d}function $l(d,v,x,A){var C,I=0,R=s(16);for(C=0;4>C;++C){var L=d[v+0]+d[v+8],F=d[v+0]-d[v+8],$=(35468*d[v+4]>>16)-ur(d[v+12]),ee=ur(d[v+4])+(35468*d[v+12]>>16);R[I+0]=L+ee,R[I+1]=F+$,R[I+2]=F-$,R[I+3]=L-ee,I+=4,v++}for(C=I=0;4>C;++C)L=(d=R[I+0]+4)+R[I+8],F=d-R[I+8],$=(35468*R[I+4]>>16)-ur(R[I+12]),ai(x,A,0,0,L+(ee=ur(R[I+4])+(35468*R[I+12]>>16))),ai(x,A,1,0,F+$),ai(x,A,2,0,F-$),ai(x,A,3,0,L-ee),I++,A+=32}function Cc(d,v,x,A){var C=d[v+0]+4,I=35468*d[v+4]>>16,R=ur(d[v+4]),L=35468*d[v+1]>>16;ha(x,A,0,C+R,d=ur(d[v+1]),L),ha(x,A,1,C+I,d,L),ha(x,A,2,C-I,d,L),ha(x,A,3,C-R,d,L)}function Jh(d,v,x,A,C){$l(d,v,x,A),C&&$l(d,v+16,x,A+4)}function kc(d,v,x,A){ss(d,v+0,x,A,1),ss(d,v+32,x,A+128,1)}function Kh(d,v,x,A){var C;for(d=d[v+0]+4,C=0;4>C;++C)for(v=0;4>v;++v)ai(x,A,v,C,d)}function Pc(d,v,x,A){d[v+0]&&er(d,v+0,x,A),d[v+16]&&er(d,v+16,x,A+4),d[v+32]&&er(d,v+32,x,A+128),d[v+48]&&er(d,v+48,x,A+128+4)}function Yh(d,v,x,A){var C,I=s(16);for(C=0;4>C;++C){var R=d[v+0+C]+d[v+12+C],L=d[v+4+C]+d[v+8+C],F=d[v+4+C]-d[v+8+C],$=d[v+0+C]-d[v+12+C];I[0+C]=R+L,I[8+C]=R-L,I[4+C]=$+F,I[12+C]=$-F}for(C=0;4>C;++C)R=(d=I[0+4*C]+3)+I[3+4*C],L=I[1+4*C]+I[2+4*C],F=I[1+4*C]-I[2+4*C],$=d-I[3+4*C],x[A+0]=R+L>>3,x[A+16]=$+F>>3,x[A+32]=R-L>>3,x[A+48]=$-F>>3,A+=64}function Hl(d,v,x){var A,C=v-32,I=Tr,R=255-d[C-1];for(A=0;A<x;++A){var L,F=I,$=R+d[v-1];for(L=0;L<x;++L)d[v+L]=F[$+d[C+L]];v+=32}}function Xh(d,v){Hl(d,v,4)}function Qh(d,v){Hl(d,v,8)}function Zh(d,v){Hl(d,v,16)}function ts(d,v){var x;for(x=0;16>x;++x)r(d,v+32*x,d,v-32,16)}function pa(d,v){var x;for(x=16;0<x;--x)i(d,v,d[v-1],16),v+=32}function ma(d,v,x){var A;for(A=0;16>A;++A)i(v,x+32*A,d,16)}function Ic(d,v){var x,A=16;for(x=0;16>x;++x)A+=d[v-1+32*x]+d[v+x-32];ma(A>>5,d,v)}function Bn(d,v){var x,A=8;for(x=0;16>x;++x)A+=d[v-1+32*x];ma(A>>4,d,v)}function ep(d,v){var x,A=8;for(x=0;16>x;++x)A+=d[v+x-32];ma(A>>4,d,v)}function Rc(d,v){ma(128,d,v)}function ut(d,v,x){return d+2*v+x+2>>2}function tp(d,v){var x,A=v-32;for(A=new Uint8Array([ut(d[A-1],d[A+0],d[A+1]),ut(d[A+0],d[A+1],d[A+2]),ut(d[A+1],d[A+2],d[A+3]),ut(d[A+2],d[A+3],d[A+4])]),x=0;4>x;++x)r(d,v+32*x,A,0,A.length)}function np(d,v){var x=d[v-1],A=d[v-1+32],C=d[v-1+64],I=d[v-1+96];De(d,v+0,16843009*ut(d[v-1-32],x,A)),De(d,v+32,16843009*ut(x,A,C)),De(d,v+64,16843009*ut(A,C,I)),De(d,v+96,16843009*ut(C,I,I))}function Fi(d,v){var x,A=4;for(x=0;4>x;++x)A+=d[v+x-32]+d[v-1+32*x];for(A>>=3,x=0;4>x;++x)i(d,v+32*x,A,4)}function Lc(d,v){var x=d[v-1+0],A=d[v-1+32],C=d[v-1+64],I=d[v-1-32],R=d[v+0-32],L=d[v+1-32],F=d[v+2-32],$=d[v+3-32];d[v+0+96]=ut(A,C,d[v-1+96]),d[v+1+96]=d[v+0+64]=ut(x,A,C),d[v+2+96]=d[v+1+64]=d[v+0+32]=ut(I,x,A),d[v+3+96]=d[v+2+64]=d[v+1+32]=d[v+0+0]=ut(R,I,x),d[v+3+64]=d[v+2+32]=d[v+1+0]=ut(L,R,I),d[v+3+32]=d[v+2+0]=ut(F,L,R),d[v+3+0]=ut($,F,L)}function Mc(d,v){var x=d[v+1-32],A=d[v+2-32],C=d[v+3-32],I=d[v+4-32],R=d[v+5-32],L=d[v+6-32],F=d[v+7-32];d[v+0+0]=ut(d[v+0-32],x,A),d[v+1+0]=d[v+0+32]=ut(x,A,C),d[v+2+0]=d[v+1+32]=d[v+0+64]=ut(A,C,I),d[v+3+0]=d[v+2+32]=d[v+1+64]=d[v+0+96]=ut(C,I,R),d[v+3+32]=d[v+2+64]=d[v+1+96]=ut(I,R,L),d[v+3+64]=d[v+2+96]=ut(R,L,F),d[v+3+96]=ut(L,F,F)}function ga(d,v){var x=d[v-1+0],A=d[v-1+32],C=d[v-1+64],I=d[v-1-32],R=d[v+0-32],L=d[v+1-32],F=d[v+2-32],$=d[v+3-32];d[v+0+0]=d[v+1+64]=I+R+1>>1,d[v+1+0]=d[v+2+64]=R+L+1>>1,d[v+2+0]=d[v+3+64]=L+F+1>>1,d[v+3+0]=F+$+1>>1,d[v+0+96]=ut(C,A,x),d[v+0+64]=ut(A,x,I),d[v+0+32]=d[v+1+96]=ut(x,I,R),d[v+1+32]=d[v+2+96]=ut(I,R,L),d[v+2+32]=d[v+3+96]=ut(R,L,F),d[v+3+32]=ut(L,F,$)}function zl(d,v){var x=d[v+0-32],A=d[v+1-32],C=d[v+2-32],I=d[v+3-32],R=d[v+4-32],L=d[v+5-32],F=d[v+6-32],$=d[v+7-32];d[v+0+0]=x+A+1>>1,d[v+1+0]=d[v+0+64]=A+C+1>>1,d[v+2+0]=d[v+1+64]=C+I+1>>1,d[v+3+0]=d[v+2+64]=I+R+1>>1,d[v+0+32]=ut(x,A,C),d[v+1+32]=d[v+0+96]=ut(A,C,I),d[v+2+32]=d[v+1+96]=ut(C,I,R),d[v+3+32]=d[v+2+96]=ut(I,R,L),d[v+3+64]=ut(R,L,F),d[v+3+96]=ut(L,F,$)}function rp(d,v){var x=d[v-1+0],A=d[v-1+32],C=d[v-1+64],I=d[v-1+96];d[v+0+0]=x+A+1>>1,d[v+2+0]=d[v+0+32]=A+C+1>>1,d[v+2+32]=d[v+0+64]=C+I+1>>1,d[v+1+0]=ut(x,A,C),d[v+3+0]=d[v+1+32]=ut(A,C,I),d[v+3+32]=d[v+1+64]=ut(C,I,I),d[v+3+64]=d[v+2+64]=d[v+0+96]=d[v+1+96]=d[v+2+96]=d[v+3+96]=I}function ip(d,v){var x=d[v-1+0],A=d[v-1+32],C=d[v-1+64],I=d[v-1+96],R=d[v-1-32],L=d[v+0-32],F=d[v+1-32],$=d[v+2-32];d[v+0+0]=d[v+2+32]=x+R+1>>1,d[v+0+32]=d[v+2+64]=A+x+1>>1,d[v+0+64]=d[v+2+96]=C+A+1>>1,d[v+0+96]=I+C+1>>1,d[v+3+0]=ut(L,F,$),d[v+2+0]=ut(R,L,F),d[v+1+0]=d[v+3+32]=ut(x,R,L),d[v+1+32]=d[v+3+64]=ut(A,x,R),d[v+1+64]=d[v+3+96]=ut(C,A,x),d[v+1+96]=ut(I,C,A)}function sp(d,v){var x;for(x=0;8>x;++x)r(d,v+32*x,d,v-32,8)}function Gl(d,v){var x;for(x=0;8>x;++x)i(d,v,d[v-1],8),v+=32}function bo(d,v,x){var A;for(A=0;8>A;++A)i(v,x+32*A,d,8)}function Es(d,v){var x,A=8;for(x=0;8>x;++x)A+=d[v+x-32]+d[v-1+32*x];bo(A>>4,d,v)}function op(d,v){var x,A=4;for(x=0;8>x;++x)A+=d[v+x-32];bo(A>>3,d,v)}function _o(d,v){var x,A=4;for(x=0;8>x;++x)A+=d[v-1+32*x];bo(A>>3,d,v)}function Wl(d,v){bo(128,d,v)}function va(d,v,x){var A=d[v-x],C=d[v+0],I=3*(C-A)+fp[1020+d[v-2*x]-d[v+x]],R=Wc[112+(I+4>>3)];d[v-x]=Tr[255+A+Wc[112+(I+3>>3)]],d[v+0]=Tr[255+C-R]}function Dc(d,v,x,A){var C=d[v+0],I=d[v+x];return zr[255+d[v-2*x]-d[v-x]]>A||zr[255+I-C]>A}function Fc(d,v,x,A){return 4*zr[255+d[v-x]-d[v+0]]+zr[255+d[v-2*x]-d[v+x]]<=A}function Oc(d,v,x,A,C){var I=d[v-3*x],R=d[v-2*x],L=d[v-x],F=d[v+0],$=d[v+x],ee=d[v+2*x],pe=d[v+3*x];return 4*zr[255+L-F]+zr[255+R-$]>A?0:zr[255+d[v-4*x]-I]<=C&&zr[255+I-R]<=C&&zr[255+R-L]<=C&&zr[255+pe-ee]<=C&&zr[255+ee-$]<=C&&zr[255+$-F]<=C}function jc(d,v,x,A){var C=2*A+1;for(A=0;16>A;++A)Fc(d,v+A,x,C)&&va(d,v+A,x)}function Oi(d,v,x,A){var C=2*A+1;for(A=0;16>A;++A)Fc(d,v+A*x,1,C)&&va(d,v+A*x,1)}function ns(d,v,x,A){var C;for(C=3;0<C;--C)jc(d,v+=4*x,x,A)}function ap(d,v,x,A){var C;for(C=3;0<C;--C)Oi(d,v+=4,x,A)}function Ts(d,v,x,A,C,I,R,L){for(I=2*I+1;0<C--;){if(Oc(d,v,x,I,R))if(Dc(d,v,x,L))va(d,v,x);else{var F=d,$=v,ee=x,pe=F[$-2*ee],me=F[$-ee],oe=F[$+0],Te=F[$+ee],xe=F[$+2*ee],te=27*(Ae=fp[1020+3*(oe-me)+fp[1020+pe-Te]])+63>>7,se=18*Ae+63>>7,Ae=9*Ae+63>>7;F[$-3*ee]=Tr[255+F[$-3*ee]+Ae],F[$-2*ee]=Tr[255+pe+se],F[$-ee]=Tr[255+me+te],F[$+0]=Tr[255+oe-te],F[$+ee]=Tr[255+Te-se],F[$+2*ee]=Tr[255+xe-Ae]}v+=A}}function li(d,v,x,A,C,I,R,L){for(I=2*I+1;0<C--;){if(Oc(d,v,x,I,R))if(Dc(d,v,x,L))va(d,v,x);else{var F=d,$=v,ee=x,pe=F[$-ee],me=F[$+0],oe=F[$+ee],Te=Wc[112+((xe=3*(me-pe))+4>>3)],xe=Wc[112+(xe+3>>3)],te=Te+1>>1;F[$-2*ee]=Tr[255+F[$-2*ee]+te],F[$-ee]=Tr[255+pe+xe],F[$+0]=Tr[255+me-Te],F[$+ee]=Tr[255+oe-te]}v+=A}}function Jl(d,v,x,A,C,I){Ts(d,v,x,1,16,A,C,I)}function So(d,v,x,A,C,I){Ts(d,v,1,x,16,A,C,I)}function lp(d,v,x,A,C,I){var R;for(R=3;0<R;--R)li(d,v+=4*x,x,1,16,A,C,I)}function ya(d,v,x,A,C,I){var R;for(R=3;0<R;--R)li(d,v+=4,1,x,16,A,C,I)}function up(d,v,x,A,C,I,R,L){Ts(d,v,C,1,8,I,R,L),Ts(x,A,C,1,8,I,R,L)}function Kl(d,v,x,A,C,I,R,L){Ts(d,v,1,C,8,I,R,L),Ts(x,A,1,C,8,I,R,L)}function Yl(d,v,x,A,C,I,R,L){li(d,v+4*C,C,1,8,I,R,L),li(x,A+4*C,C,1,8,I,R,L)}function Uc(d,v,x,A,C,I,R,L){li(d,v+4,1,C,8,I,R,L),li(x,A+4,1,C,8,I,R,L)}function wa(){this.ba=new ni,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Qt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Xl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ql(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Bc(){this.ua=0,this.Wa=new J,this.vb=new J,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new V,this.yc=new j}function cp(){this.xb=this.a=0,this.l=new fa,this.ca=new ni,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Bc,this.ab=0,this.gc=o(4,Ql),this.Oc=0}function xa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new fa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function No(d,v,x,A,C,I,R){for(d=d==null?0:d[v+0],v=0;v<R;++v)C[I+v]=d+x[A+v]&255,d=C[I+v]}function Zl(d,v,x,A,C,I,R){var L;if(d==null)No(null,null,x,A,C,I,R);else for(L=0;L<R;++L)C[I+L]=d[v+L]+x[A+L]&255}function Cs(d,v,x,A,C,I,R){if(d==null)No(null,null,x,A,C,I,R);else{var L,F=d[v+0],$=F,ee=F;for(L=0;L<R;++L)$=ee+(F=d[v+L])-$,ee=x[A+L]+(-256&$?0>$?0:255:$)&255,$=F,C[I+L]=ee}}function eu(d,v,x,A){var C=v.width,I=v.o;if(e(d!=null&&v!=null),0>x||0>=A||x+A>I)return null;if(!d.Cc){if(d.ga==null){var R;if(d.ga=new xa,(R=d.ga==null)||(R=v.width*v.o,e(d.Gb.length==0),d.Gb=s(R),d.Uc=0,d.Gb==null?R=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,R=1),R=!R),!R){R=d.ga;var L=d.Fa,F=d.P,$=d.qc,ee=d.mb,pe=d.nb,me=F+1,oe=$-1,Te=R.l;if(e(L!=null&&ee!=null&&v!=null),Ms[0]=null,Ms[1]=No,Ms[2]=Zl,Ms[3]=Cs,R.ca=ee,R.tb=pe,R.c=v.width,R.i=v.height,e(0<R.c&&0<R.i),1>=$)v=0;else if(R.$a=L[F+0]>>0&3,R.Z=L[F+0]>>2&3,R.Lc=L[F+0]>>4&3,F=L[F+0]>>6&3,0>R.$a||1<R.$a||4<=R.Z||1<R.Lc||F)v=0;else if(Te.put=Ii,Te.ac=Rn,Te.bc=Ri,Te.ma=R,Te.width=v.width,Te.height=v.height,Te.Da=v.Da,Te.v=v.v,Te.va=v.va,Te.j=v.j,Te.o=v.o,R.$a)e:{e(R.$a==1),v=Br();t:for(;;){if(v==null){v=0;break e}if(e(R!=null),R.mc=v,v.c=R.c,v.i=R.i,v.l=R.l,v.l.ma=R,v.l.width=R.c,v.l.height=R.i,v.a=0,X(v.m,L,me,oe),!Di(R.c,R.i,1,v,null)||(v.ab==1&&v.gc[0].hc==3&&es(v.s)?(R.ic=1,L=v.c*v.i,v.Ta=null,v.Ua=0,v.V=s(L),v.Ba=0,v.V==null?(v.a=1,v=0):v=1):(R.ic=0,v=xo(v,R.c)),!v))break t;v=1;break e}R.mc=null,v=0}else v=oe>=R.c*R.i;R=!v}if(R)return null;d.ga.Lc!=1?d.Ga=0:A=I-x}e(d.ga!=null),e(x+A<=I);e:{if(v=(L=d.ga).c,I=L.l.o,L.$a==0){if(me=d.rc,oe=d.Vc,Te=d.Fa,F=d.P+1+x*v,$=d.mb,ee=d.nb+x*v,e(F<=d.P+d.qc),L.Z!=0)for(e(Ms[L.Z]!=null),R=0;R<A;++R)Ms[L.Z](me,oe,Te,F,$,ee,v),me=$,oe=ee,ee+=v,F+=v;else for(R=0;R<A;++R)r($,ee,Te,F,v),me=$,oe=ee,ee+=v,F+=v;d.rc=me,d.Vc=oe}else{if(e(L.mc!=null),v=x+A,e((R=L.mc)!=null),e(v<=R.i),R.C>=v)v=1;else if(L.ic||de(),L.ic){L=R.V,me=R.Ba,oe=R.c;var xe=R.i,te=(Te=1,F=R.$/oe,$=R.$%oe,ee=R.m,pe=R.s,R.$),se=oe*xe,Ae=oe*v,Pe=pe.wc,Ee=te<Ae?hn(pe,$,F):null;e(te<=se),e(v<=xe),e(es(pe));t:for(;;){for(;!ee.h&&te<Ae;){if($&Pe||(Ee=hn(pe,$,F)),e(Ee!=null),re(ee),256>(xe=lr(Ee.G[0],Ee.H[0],ee)))L[me+te]=xe,++te,++$>=oe&&($=0,++F<=v&&!(F%16)&&si(R,F));else{if(!(280>xe)){Te=0;break t}xe=ri(xe-256,ee);var ze,Ue=lr(Ee.G[4],Ee.H[4],ee);if(re(ee),!(te>=(Ue=Li(oe,Ue=ri(Ue,ee)))&&se-te>=xe)){Te=0;break t}for(ze=0;ze<xe;++ze)L[me+te+ze]=L[me+te+ze-Ue];for(te+=xe,$+=xe;$>=oe;)$-=oe,++F<=v&&!(F%16)&&si(R,F);te<Ae&&$&Pe&&(Ee=hn(pe,$,F))}e(ee.h==z(ee))}si(R,F>v?v:F);break t}!Te||ee.h&&te<se?(Te=0,R.a=ee.h?5:3):R.$=te,v=Te}else v=oi(R,R.V,R.Ba,R.c,R.i,v,aa);if(!v){A=0;break e}}x+A>=I&&(d.Cc=1),A=1}if(!A)return null;if(d.Cc&&((A=d.ga)!=null&&(A.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+x*C}function w(d,v,x,A,C,I){for(;0<C--;){var R,L=d,F=v+(x?1:0),$=d,ee=v+(x?0:3);for(R=0;R<A;++R){var pe=$[ee+4*R];pe!=255&&(pe*=32897,L[F+4*R+0]=L[F+4*R+0]*pe>>23,L[F+4*R+1]=L[F+4*R+1]*pe>>23,L[F+4*R+2]=L[F+4*R+2]*pe>>23)}v+=I}}function k(d,v,x,A,C){for(;0<A--;){var I;for(I=0;I<x;++I){var R=d[v+2*I+0],L=15&($=d[v+2*I+1]),F=4369*L,$=(240&$|$>>4)*F>>16;d[v+2*I+0]=(240&R|R>>4)*F>>16&240|(15&R|R<<4)*F>>16>>4&15,d[v+2*I+1]=240&$|L}v+=C}}function G(d,v,x,A,C,I,R,L){var F,$,ee=255;for($=0;$<C;++$){for(F=0;F<A;++F){var pe=d[v+F];I[R+4*F]=pe,ee&=pe}v+=x,R+=L}return ee!=255}function Z(d,v,x,A,C){var I;for(I=0;I<C;++I)x[A+I]=d[v+I]>>8}function de(){Hr=w,Ot=k,jt=G,ln=Z}function _e(d,v,x){B[d]=function(A,C,I,R,L,F,$,ee,pe,me,oe,Te,xe,te,se,Ae,Pe){var Ee,ze=Pe-1>>1,Ue=L[F+0]|$[ee+0]<<16,tt=pe[me+0]|oe[Te+0]<<16;e(A!=null);var Be=3*Ue+tt+131074>>2;for(v(A[C+0],255&Be,Be>>16,xe,te),I!=null&&(Be=3*tt+Ue+131074>>2,v(I[R+0],255&Be,Be>>16,se,Ae)),Ee=1;Ee<=ze;++Ee){var Et=L[F+Ee]|$[ee+Ee]<<16,kt=pe[me+Ee]|oe[Te+Ee]<<16,_t=Ue+Et+tt+kt+524296,wt=_t+2*(Et+tt)>>3;Be=wt+Ue>>1,Ue=(_t=_t+2*(Ue+kt)>>3)+Et>>1,v(A[C+2*Ee-1],255&Be,Be>>16,xe,te+(2*Ee-1)*x),v(A[C+2*Ee-0],255&Ue,Ue>>16,xe,te+(2*Ee-0)*x),I!=null&&(Be=_t+tt>>1,Ue=wt+kt>>1,v(I[R+2*Ee-1],255&Be,Be>>16,se,Ae+(2*Ee-1)*x),v(I[R+2*Ee+0],255&Ue,Ue>>16,se,Ae+(2*Ee+0)*x)),Ue=Et,tt=kt}1&Pe||(Be=3*Ue+tt+131074>>2,v(A[C+Pe-1],255&Be,Be>>16,xe,te+(Pe-1)*x),I!=null&&(Be=3*tt+Ue+131074>>2,v(I[R+Pe-1],255&Be,Be>>16,se,Ae+(Pe-1)*x)))}}function Me(){Gr[Jc]=dN,Gr[Kc]=Lv,Gr[Cv]=fN,Gr[Yc]=Mv,Gr[Xc]=Dv,Gr[hp]=Fv,Gr[kv]=hN,Gr[pp]=Lv,Gr[mp]=Mv,Gr[Qc]=Dv,Gr[gp]=Fv}function $e(d){return d&-16384?0>d?0:255:d>>pN}function et(d,v){return $e((19077*d>>8)+(26149*v>>8)-14234)}function mt(d,v,x){return $e((19077*d>>8)-(6419*v>>8)-(13320*x>>8)+8708)}function ht(d,v){return $e((19077*d>>8)+(33050*v>>8)-17685)}function bt(d,v,x,A,C){A[C+0]=et(d,x),A[C+1]=mt(d,v,x),A[C+2]=ht(d,v)}function Gt(d,v,x,A,C){A[C+0]=ht(d,v),A[C+1]=mt(d,v,x),A[C+2]=et(d,x)}function Zt(d,v,x,A,C){var I=mt(d,v,x);v=I<<3&224|ht(d,v)>>3,A[C+0]=248&et(d,x)|I>>5,A[C+1]=v}function pn(d,v,x,A,C){var I=240&ht(d,v)|15;A[C+0]=240&et(d,x)|mt(d,v,x)>>4,A[C+1]=I}function qn(d,v,x,A,C){A[C+0]=255,bt(d,v,x,A,C+1)}function An(d,v,x,A,C){Gt(d,v,x,A,C),A[C+3]=255}function ui(d,v,x,A,C){bt(d,v,x,A,C),A[C+3]=255}function Er(d,v){return 0>d?0:d>v?v:d}function ji(d,v,x){B[d]=function(A,C,I,R,L,F,$,ee,pe){for(var me=ee+(-2&pe)*x;ee!=me;)v(A[C+0],I[R+0],L[F+0],$,ee),v(A[C+1],I[R+0],L[F+0],$,ee+x),C+=2,++R,++F,ee+=2*x;1&pe&&v(A[C+0],I[R+0],L[F+0],$,ee)}}function qc(d,v,x){return x==0?d==0?v==0?6:5:v==0?4:0:x}function tu(d,v,x,A,C){switch(d>>>30){case 3:ss(v,x,A,C,0);break;case 2:an(v,x,A,C);break;case 1:er(v,x,A,C)}}function nu(d,v){var x,A,C=v.M,I=v.Nb,R=d.oc,L=d.pc+40,F=d.oc,$=d.pc+584,ee=d.oc,pe=d.pc+600;for(x=0;16>x;++x)R[L+32*x-1]=129;for(x=0;8>x;++x)F[$+32*x-1]=129,ee[pe+32*x-1]=129;for(0<C?R[L-1-32]=F[$-1-32]=ee[pe-1-32]=129:(i(R,L-32-1,127,21),i(F,$-32-1,127,9),i(ee,pe-32-1,127,9)),A=0;A<d.za;++A){var me=v.ya[v.aa+A];if(0<A){for(x=-1;16>x;++x)r(R,L+32*x-4,R,L+32*x+12,4);for(x=-1;8>x;++x)r(F,$+32*x-4,F,$+32*x+4,4),r(ee,pe+32*x-4,ee,pe+32*x+4,4)}var oe=d.Gd,Te=d.Hd+A,xe=me.ad,te=me.Hc;if(0<C&&(r(R,L-32,oe[Te].y,0,16),r(F,$-32,oe[Te].f,0,8),r(ee,pe-32,oe[Te].ea,0,8)),me.Za){var se=R,Ae=L-32+16;for(0<C&&(A>=d.za-1?i(se,Ae,oe[Te].y[15],4):r(se,Ae,oe[Te+1].y,0,4)),x=0;4>x;x++)se[Ae+128+x]=se[Ae+256+x]=se[Ae+384+x]=se[Ae+0+x];for(x=0;16>x;++x,te<<=2)se=R,Ae=L+jv[x],ci[me.Ob[x]](se,Ae),tu(te,xe,16*+x,se,Ae)}else if(se=qc(A,C,me.Ob[0]),Ls[se](R,L),te!=0)for(x=0;16>x;++x,te<<=2)tu(te,xe,16*+x,R,L+jv[x]);for(x=me.Gc,se=qc(A,C,me.Dd),as[se](F,$),as[se](ee,pe),te=xe,se=F,Ae=$,255&(me=x>>0)&&(170&me?au(te,256,se,Ae):Vr(te,256,se,Ae)),me=ee,te=pe,255&(x>>=8)&&(170&x?au(xe,320,me,te):Vr(xe,320,me,te)),C<d.Ub-1&&(r(oe[Te].y,0,R,L+480,16),r(oe[Te].f,0,F,$+224,8),r(oe[Te].ea,0,ee,pe+224,8)),x=8*I*d.B,oe=d.sa,Te=d.ta+16*A+16*I*d.R,xe=d.qa,me=d.ra+8*A+x,te=d.Ha,se=d.Ia+8*A+x,x=0;16>x;++x)r(oe,Te+x*d.R,R,L+32*x,16);for(x=0;8>x;++x)r(xe,me+x*d.B,F,$+32*x,8),r(te,se+x*d.B,ee,pe+32*x,8)}}function ba(d,v,x,A,C,I,R,L,F){var $=[0],ee=[0],pe=0,me=F!=null?F.kd:0,oe=F??new Xl;if(d==null||12>x)return 7;oe.data=d,oe.w=v,oe.ha=x,v=[v],x=[x],oe.gb=[oe.gb];e:{var Te=v,xe=x,te=oe.gb;if(e(d!=null),e(xe!=null),e(te!=null),te[0]=0,12<=xe[0]&&!n(d,Te[0],"RIFF")){if(n(d,Te[0]+8,"WEBP")){te=3;break e}var se=Oe(d,Te[0]+4);if(12>se||4294967286<se){te=3;break e}if(me&&se>xe[0]-8){te=7;break e}te[0]=se,Te[0]+=12,xe[0]-=12}te=0}if(te!=0)return te;for(se=0<oe.gb[0],x=x[0];;){e:{var Ae=d;xe=v,te=x;var Pe=$,Ee=ee,ze=Te=[0];if((Be=pe=[pe])[0]=0,8>te[0])te=7;else{if(!n(Ae,xe[0],"VP8X")){if(Oe(Ae,xe[0]+4)!=10){te=3;break e}if(18>te[0]){te=7;break e}var Ue=Oe(Ae,xe[0]+8),tt=1+je(Ae,xe[0]+12);if(2147483648<=tt*(Ae=1+je(Ae,xe[0]+15))){te=3;break e}ze!=null&&(ze[0]=Ue),Pe!=null&&(Pe[0]=tt),Ee!=null&&(Ee[0]=Ae),xe[0]+=18,te[0]-=18,Be[0]=1}te=0}}if(pe=pe[0],Te=Te[0],te!=0)return te;if(xe=!!(2&Te),!se&&pe)return 3;if(I!=null&&(I[0]=!!(16&Te)),R!=null&&(R[0]=xe),L!=null&&(L[0]=0),R=$[0],Te=ee[0],pe&&xe&&F==null){te=0;break}if(4>x){te=7;break}if(se&&pe||!se&&!pe&&!n(d,v[0],"ALPH")){x=[x],oe.na=[oe.na],oe.P=[oe.P],oe.Sa=[oe.Sa];e:{Ue=d,te=v,se=x;var Be=oe.gb;Pe=oe.na,Ee=oe.P,ze=oe.Sa,tt=22,e(Ue!=null),e(se!=null),Ae=te[0];var Et=se[0];for(e(Pe!=null),e(ze!=null),Pe[0]=null,Ee[0]=null,ze[0]=0;;){if(te[0]=Ae,se[0]=Et,8>Et){te=7;break e}var kt=Oe(Ue,Ae+4);if(4294967286<kt){te=3;break e}var _t=8+kt+1&-2;if(tt+=_t,0<Be&&tt>Be){te=3;break e}if(!n(Ue,Ae,"VP8 ")||!n(Ue,Ae,"VP8L")){te=0;break e}if(Et[0]<_t){te=7;break e}n(Ue,Ae,"ALPH")||(Pe[0]=Ue,Ee[0]=Ae+8,ze[0]=kt),Ae+=_t,Et-=_t}}if(x=x[0],oe.na=oe.na[0],oe.P=oe.P[0],oe.Sa=oe.Sa[0],te!=0)break}x=[x],oe.Ja=[oe.Ja],oe.xa=[oe.xa];e:if(Be=d,te=v,se=x,Pe=oe.gb[0],Ee=oe.Ja,ze=oe.xa,Ue=te[0],Ae=!n(Be,Ue,"VP8 "),tt=!n(Be,Ue,"VP8L"),e(Be!=null),e(se!=null),e(Ee!=null),e(ze!=null),8>se[0])te=7;else{if(Ae||tt){if(Be=Oe(Be,Ue+4),12<=Pe&&Be>Pe-12){te=3;break e}if(me&&Be>se[0]-8){te=7;break e}Ee[0]=Be,te[0]+=8,se[0]-=8,ze[0]=tt}else ze[0]=5<=se[0]&&Be[Ue+0]==47&&!(Be[Ue+4]>>5),Ee[0]=se[0];te=0}if(x=x[0],oe.Ja=oe.Ja[0],oe.xa=oe.xa[0],v=v[0],te!=0)break;if(4294967286<oe.Ja)return 3;if(L==null||xe||(L[0]=oe.xa?2:1),R=[R],Te=[Te],oe.xa){if(5>x){te=7;break}L=R,me=Te,xe=I,d==null||5>x?d=0:5<=x&&d[v+0]==47&&!(d[v+4]>>5)?(se=[0],Be=[0],Pe=[0],X(Ee=new P,d,v,x),nt(Ee,se,Be,Pe)?(L!=null&&(L[0]=se[0]),me!=null&&(me[0]=Be[0]),xe!=null&&(xe[0]=Pe[0]),d=1):d=0):d=0}else{if(10>x){te=7;break}L=Te,d==null||10>x||!Ac(d,v+3,x-3)?d=0:(me=d[v+0]|d[v+1]<<8|d[v+2]<<16,xe=16383&(d[v+7]<<8|d[v+6]),d=16383&(d[v+9]<<8|d[v+8]),1&me||3<(me>>1&7)||!(me>>4&1)||me>>5>=oe.Ja||!xe||!d?d=0:(R&&(R[0]=xe),L&&(L[0]=d),d=1))}if(!d||(R=R[0],Te=Te[0],pe&&($[0]!=R||ee[0]!=Te)))return 3;F!=null&&(F[0]=oe,F.offset=v-F.w,e(4294967286>v-F.w),e(F.offset==F.ha-x));break}return te==0||te==7&&pe&&F==null?(I!=null&&(I[0]|=oe.na!=null&&0<oe.na.length),A!=null&&(A[0]=R),C!=null&&(C[0]=Te),0):te}function ru(d,v,x){var A=v.width,C=v.height,I=0,R=0,L=A,F=C;if(v.Da=d!=null&&0<d.Da,v.Da&&(L=d.cd,F=d.bd,I=d.v,R=d.j,11>x||(I&=-2,R&=-2),0>I||0>R||0>=L||0>=F||I+L>A||R+F>C))return 0;if(v.v=I,v.j=R,v.va=I+L,v.o=R+F,v.U=L,v.T=F,v.da=d!=null&&0<d.da,v.da){if(!qe(L,F,x=[d.ib],I=[d.hb]))return 0;v.ib=x[0],v.hb=I[0]}return v.ob=d!=null&&d.ob,v.Kb=d==null||!d.Sd,v.da&&(v.ob=v.ib<3*A/4&&v.hb<3*C/4,v.Kb=0),1}function iu(d){if(d==null)return 2;if(11>d.S){var v=d.f.RGBA;v.fb+=(d.height-1)*v.A,v.A=-v.A}else v=d.f.kb,d=d.height,v.O+=(d-1)*v.fa,v.fa=-v.fa,v.N+=(d-1>>1)*v.Ab,v.Ab=-v.Ab,v.W+=(d-1>>1)*v.Db,v.Db=-v.Db,v.F!=null&&(v.J+=(d-1)*v.lb,v.lb=-v.lb);return 0}function _a(d,v,x,A){if(A==null||0>=d||0>=v)return 2;if(x!=null){if(x.Da){var C=x.cd,I=x.bd,R=-2&x.v,L=-2&x.j;if(0>R||0>L||0>=C||0>=I||R+C>d||L+I>v)return 2;d=C,v=I}if(x.da){if(!qe(d,v,C=[x.ib],I=[x.hb]))return 2;d=C[0],v=I[0]}}A.width=d,A.height=v;e:{var F=A.width,$=A.height;if(d=A.S,0>=F||0>=$||!(d>=Jc&&13>d))d=2;else{if(0>=A.Rd&&A.sd==null){R=I=C=v=0;var ee=(L=F*Uv[d])*$;if(11>d||(I=($+1)/2*(v=(F+1)/2),d==12&&(R=(C=F)*$)),($=s(ee+2*I+R))==null){d=1;break e}A.sd=$,11>d?((F=A.f.RGBA).eb=$,F.fb=0,F.A=L,F.size=ee):((F=A.f.kb).y=$,F.O=0,F.fa=L,F.Fd=ee,F.f=$,F.N=0+ee,F.Ab=v,F.Cd=I,F.ea=$,F.W=0+ee+I,F.Db=v,F.Ed=I,d==12&&(F.F=$,F.J=0+ee+2*I),F.Tc=R,F.lb=C)}if(v=1,C=A.S,I=A.width,R=A.height,C>=Jc&&13>C)if(11>C)d=A.f.RGBA,v&=(L=Math.abs(d.A))*(R-1)+I<=d.size,v&=L>=I*Uv[C],v&=d.eb!=null;else{d=A.f.kb,L=(I+1)/2,ee=(R+1)/2,F=Math.abs(d.fa),$=Math.abs(d.Ab);var pe=Math.abs(d.Db),me=Math.abs(d.lb),oe=me*(R-1)+I;v&=F*(R-1)+I<=d.Fd,v&=$*(ee-1)+L<=d.Cd,v=(v&=pe*(ee-1)+L<=d.Ed)&F>=I&$>=L&pe>=L,v&=d.y!=null,v&=d.f!=null,v&=d.ea!=null,C==12&&(v&=me>=I,v&=oe<=d.Tc,v&=d.F!=null)}else v=0;d=v?0:2}}return d!=0||x!=null&&x.fd&&(d=iu(A)),d}var Ln=64,Sa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Na=24,Aa=32,su=8,cr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Se("Predictor0","PredictorAdd0"),B.Predictor0=function(){return 4278190080},B.Predictor1=function(d){return d},B.Predictor2=function(d,v,x){return v[x+0]},B.Predictor3=function(d,v,x){return v[x+1]},B.Predictor4=function(d,v,x){return v[x-1]},B.Predictor5=function(d,v,x){return Le(Le(d,v[x+1]),v[x+0])},B.Predictor6=function(d,v,x){return Le(d,v[x-1])},B.Predictor7=function(d,v,x){return Le(d,v[x+0])},B.Predictor8=function(d,v,x){return Le(v[x-1],v[x+0])},B.Predictor9=function(d,v,x){return Le(v[x+0],v[x+1])},B.Predictor10=function(d,v,x){return Le(Le(d,v[x-1]),Le(v[x+0],v[x+1]))},B.Predictor11=function(d,v,x){var A=v[x+0];return 0>=ot(A>>24&255,d>>24&255,(v=v[x-1])>>24&255)+ot(A>>16&255,d>>16&255,v>>16&255)+ot(A>>8&255,d>>8&255,v>>8&255)+ot(255&A,255&d,255&v)?A:d},B.Predictor12=function(d,v,x){var A=v[x+0];return(Ge((d>>24&255)+(A>>24&255)-((v=v[x-1])>>24&255))<<24|Ge((d>>16&255)+(A>>16&255)-(v>>16&255))<<16|Ge((d>>8&255)+(A>>8&255)-(v>>8&255))<<8|Ge((255&d)+(255&A)-(255&v)))>>>0},B.Predictor13=function(d,v,x){var A=v[x-1];return(Ze((d=Le(d,v[x+0]))>>24&255,A>>24&255)<<24|Ze(d>>16&255,A>>16&255)<<16|Ze(d>>8&255,A>>8&255)<<8|Ze(d>>0&255,A>>0&255))>>>0};var dp=B.PredictorAdd0;B.PredictorAdd1=at,Se("Predictor2","PredictorAdd2"),Se("Predictor3","PredictorAdd3"),Se("Predictor4","PredictorAdd4"),Se("Predictor5","PredictorAdd5"),Se("Predictor6","PredictorAdd6"),Se("Predictor7","PredictorAdd7"),Se("Predictor8","PredictorAdd8"),Se("Predictor9","PredictorAdd9"),Se("Predictor10","PredictorAdd10"),Se("Predictor11","PredictorAdd11"),Se("Predictor12","PredictorAdd12"),Se("Predictor13","PredictorAdd13");var ou=B.PredictorAdd2;Re("ColorIndexInverseTransform","MapARGB","32b",function(d){return d>>8&255},function(d){return d}),Re("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(d){return d},function(d){return d>>8&255});var Vc,qr=B.ColorIndexInverseTransform,Ea=B.MapARGB,$c=B.VP8LColorIndexInverseTransformAlpha,Hc=B.MapAlpha,ks=B.VP8LPredictorsAdd=[];ks.length=16,(B.VP8LPredictors=[]).length=16,(B.VP8LPredictorsAdd_C=[]).length=16,(B.VP8LPredictors_C=[]).length=16;var Ao,dr,Zn,Ps,rs,is,Ta,ss,an,au,er,Vr,Ca,zc,lu,Eo,To,Is,Co,ka,ko,Rs,uu,$r,Hr,Ot,jt,ln,_n=s(511),os=s(2041),cu=s(225),Pa=s(767),Gc=0,fp=os,Wc=cu,Tr=Pa,zr=_n,Jc=0,Kc=1,Cv=2,Yc=3,Xc=4,hp=5,kv=6,pp=7,mp=8,Qc=9,gp=10,XS=[2,3,7],QS=[3,3,11],Pv=[280,256,256,256,40],ZS=[0,1,1,1,0],eN=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],tN=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],nN=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],rN=8,vp=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],yp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],du=null,iN=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],sN=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Iv=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],oN=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],aN=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],lN=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],uN=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ls=[],ci=[],as=[],cN=1,Rv=2,Ms=[],Gr=[];_e("UpsampleRgbLinePair",bt,3),_e("UpsampleBgrLinePair",Gt,3),_e("UpsampleRgbaLinePair",ui,4),_e("UpsampleBgraLinePair",An,4),_e("UpsampleArgbLinePair",qn,4),_e("UpsampleRgba4444LinePair",pn,2),_e("UpsampleRgb565LinePair",Zt,2);var dN=B.UpsampleRgbLinePair,fN=B.UpsampleBgrLinePair,Lv=B.UpsampleRgbaLinePair,Mv=B.UpsampleBgraLinePair,Dv=B.UpsampleArgbLinePair,Fv=B.UpsampleRgba4444LinePair,hN=B.UpsampleRgb565LinePair,Zc=16,ed=1<<Zc-1,fu=-227,wp=482,pN=6,Ov=0,mN=s(256),gN=s(256),vN=s(256),yN=s(256),wN=s(wp-fu),xN=s(wp-fu);ji("YuvToRgbRow",bt,3),ji("YuvToBgrRow",Gt,3),ji("YuvToRgbaRow",ui,4),ji("YuvToBgraRow",An,4),ji("YuvToArgbRow",qn,4),ji("YuvToRgba4444Row",pn,2),ji("YuvToRgb565Row",Zt,2);var jv=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],td=[0,2,8],bN=[8,7,6,4,4,2,2,2,1,1,1,1],_N=1;this.WebPDecodeRGBA=function(d,v,x,A,C){var I=Kc,R=new wa,L=new ni;R.ba=L,L.S=I,L.width=[L.width],L.height=[L.height];var F=L.width,$=L.height,ee=new Zi;if(ee==null||d==null)var pe=2;else e(ee!=null),pe=ba(d,v,x,ee.width,ee.height,ee.Pd,ee.Qd,ee.format,null);if(pe!=0?F=0:(F!=null&&(F[0]=ee.width[0]),$!=null&&($[0]=ee.height[0]),F=1),F){L.width=L.width[0],L.height=L.height[0],A!=null&&(A[0]=L.width),C!=null&&(C[0]=L.height);e:{if(A=new fa,(C=new Xl).data=d,C.w=v,C.ha=x,C.kd=1,v=[0],e(C!=null),((d=ba(C.data,C.w,C.ha,null,null,null,v,null,C))==0||d==7)&&v[0]&&(d=4),(v=d)==0){if(e(R!=null),A.data=C.data,A.w=C.w+C.offset,A.ha=C.ha-C.offset,A.put=Ii,A.ac=Rn,A.bc=Ri,A.ma=R,C.xa){if((d=Br())==null){R=1;break e}if(function(me,oe){var Te=[0],xe=[0],te=[0];t:for(;;){if(me==null)return 0;if(oe==null)return me.a=2,0;if(me.l=oe,me.a=0,X(me.m,oe.data,oe.w,oe.ha),!nt(me.m,Te,xe,te)){me.a=3;break t}if(me.xb=Rv,oe.width=Te[0],oe.height=xe[0],!Di(Te[0],xe[0],1,me,null))break t;return 1}return e(me.a!=0),0}(d,A)){if(A=(v=_a(A.width,A.height,R.Oa,R.ba))==0){t:{A=d;n:for(;;){if(A==null){A=0;break t}if(e(A.s.yc!=null),e(A.s.Ya!=null),e(0<A.s.Wb),e((x=A.l)!=null),e((C=x.ma)!=null),A.xb!=0){if(A.ca=C.ba,A.tb=C.tb,e(A.ca!=null),!ru(C.Oa,x,Yc)){A.a=2;break n}if(!xo(A,x.width)||x.da)break n;if((x.da||We(A.ca.S))&&de(),11>A.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),A.ca.f.kb.F!=null&&de()),A.Pb&&0<A.s.ua&&A.s.vb.X==null&&!Qe(A.s.vb,A.s.Wa.Xa)){A.a=1;break n}A.xb=0}if(!oi(A,A.V,A.Ba,A.c,A.i,x.o,oa))break n;C.Dc=A.Ma,A=1;break t}e(A.a!=0),A=0}A=!A}A&&(v=d.a)}else v=d.a}else{if((d=new Gh)==null){R=1;break e}if(d.Fa=C.na,d.P=C.P,d.qc=C.Sa,Ec(d,A)){if((v=_a(A.width,A.height,R.Oa,R.ba))==0){if(d.Aa=0,x=R.Oa,e((C=d)!=null),x!=null){if(0<(F=0>(F=x.Md)?0:100<F?255:255*F/100)){for($=ee=0;4>$;++$)12>(pe=C.pb[$]).lc&&(pe.ia=F*bN[0>pe.lc?0:pe.lc]>>3),ee|=pe.ia;ee&&(alert("todo:VP8InitRandom"),C.ia=1)}C.Ga=x.Id,100<C.Ga?C.Ga=100:0>C.Ga&&(C.Ga=0)}Wh(d,A)||(v=d.a)}}else v=d.a}v==0&&R.Oa!=null&&R.Oa.fd&&(v=iu(R.ba))}R=v}I=R!=0?null:11>I?L.f.RGBA.eb:L.f.kb.y}else I=null;return I};var Uv=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(B,W){for(var ne="",D=0;D<4;D++)ne+=String.fromCharCode(B[W++]);return ne}function f(B,W){return(B[W+0]<<0|B[W+1]<<8|B[W+2]<<16)>>>0}function p(B,W){return(B[W+0]<<0|B[W+1]<<8|B[W+2]<<16|B[W+3]<<24)>>>0}new l;var m=[0],g=[0],S=[],_=new l,E=t,b=function(B,W){var ne={},D=0,j=!1,O=0,V=0;if(ne.frames=[],!function(q,z,Q,re){for(var ce=0;ce<re;ce++)if(q[z+ce]!=Q.charCodeAt(ce))return!0;return!1}(B,W,"RIFF",4)){var he,le;for(p(B,W+=4),W+=8;W<B.length;){var we=u(B,W),X=p(B,W+=4);W+=4;var ae=X+(1&X);switch(we){case"VP8 ":case"VP8L":ne.frames[D]===void 0&&(ne.frames[D]={}),(P=ne.frames[D]).src_off=j?V:W-8,P.src_size=O+X+8,D++,j&&(j=!1,O=0,V=0);break;case"VP8X":(P=ne.header={}).feature_flags=B[W];var fe=W+4;P.canvas_width=1+f(B,fe),fe+=3,P.canvas_height=1+f(B,fe),fe+=3;break;case"ALPH":j=!0,O=ae+8,V=W-8;break;case"ANIM":(P=ne.header).bgcolor=p(B,W),fe=W+4,P.loop_count=(he=B)[(le=fe)+0]<<0|he[le+1]<<8,fe+=2;break;case"ANMF":var Ce,P;(P=ne.frames[D]={}).offset_x=2*f(B,W),W+=3,P.offset_y=2*f(B,W),W+=3,P.width=1+f(B,W),W+=3,P.height=1+f(B,W),W+=3,P.duration=f(B,W),W+=3,Ce=B[W++],P.dispose=1&Ce,P.blend=Ce>>1&1}we!="ANMF"&&(W+=ae)}return ne}}(E,0);b.response=E,b.rgbaoutput=!0,b.dataurl=!1;var N=b.header?b.header:null,T=b.frames?b.frames:null;if(N){N.loop_counter=N.loop_count,m=[N.canvas_height],g=[N.canvas_width];for(var M=0;M<T.length&&T[M].blend!=0;M++);}var U=T[0],Y=_.WebPDecodeRGBA(E,U.src_off,U.src_size,g,m);U.rgba=Y,U.imgwidth=g[0],U.imgheight=m[0];for(var H=0;H<g[0]*m[0]*4;H++)S[H]=Y[H];return this.width=g,this.height=m,this.data=S,this}(function(t){var e=function(){return typeof tg=="function"},n=function(m,g,S,_){var E=4,b=o;switch(_){case t.image_compression.FAST:E=1,b=s;break;case t.image_compression.MEDIUM:E=6,b=a;break;case t.image_compression.SLOW:E=9,b=l}m=r(m,g,S,b);var N=tg(m,{level:E});return t.__addimage__.arrayBufferToBinaryString(N)},r=function(m,g,S,_){for(var E,b,N,T=m.length/g,M=new Uint8Array(m.length+T),U=f(),Y=0;Y<T;Y+=1){if(N=Y*g,E=m.subarray(N,N+g),_)M.set(_(E,S,b),N+Y);else{for(var H,B=U.length,W=[];H<B;H+=1)W[H]=U[H](E,S,b);var ne=p(W.concat());M.set(W[ne],N+Y)}b=E}return M},i=function(m){var g=Array.apply([],m);return g.unshift(0),g},s=function(m,g){var S,_=[],E=m.length;_[0]=1;for(var b=0;b<E;b+=1)S=m[b-g]||0,_[b+1]=m[b]-S+256&255;return _},o=function(m,g,S){var _,E=[],b=m.length;E[0]=2;for(var N=0;N<b;N+=1)_=S&&S[N]||0,E[N+1]=m[N]-_+256&255;return E},a=function(m,g,S){var _,E,b=[],N=m.length;b[0]=3;for(var T=0;T<N;T+=1)_=m[T-g]||0,E=S&&S[T]||0,b[T+1]=m[T]+256-(_+E>>>1)&255;return b},l=function(m,g,S){var _,E,b,N,T=[],M=m.length;T[0]=4;for(var U=0;U<M;U+=1)_=m[U-g]||0,E=S&&S[U]||0,b=S&&S[U-g]||0,N=u(_,E,b),T[U+1]=m[U]-N+256&255;return T},u=function(m,g,S){if(m===g&&g===S)return m;var _=Math.abs(g-S),E=Math.abs(m-S),b=Math.abs(m+g-S-S);return _<=E&&_<=b?m:E<=b?g:S},f=function(){return[i,s,o,a,l]},p=function(m){var g=m.map(function(S){return S.reduce(function(_,E){return _+Math.abs(E)},0)});return g.indexOf(Math.min.apply(null,g))};t.processPNG=function(m,g,S,_){var E,b,N,T,M,U,Y,H,B,W,ne,D,j,O,V,he=this.decode.FLATE_DECODE,le="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(N=new oM(m)).imgData,b=N.bits,E=N.colorSpace,M=N.colors,[4,6].indexOf(N.colorType)!==-1){if(N.bits===8){B=(H=N.pixelBitlength==32?new Uint32Array(N.decodePixels().buffer):N.pixelBitlength==16?new Uint16Array(N.decodePixels().buffer):new Uint8Array(N.decodePixels().buffer)).length,ne=new Uint8Array(B*N.colors),W=new Uint8Array(B);var we,X=N.pixelBitlength-N.bits;for(O=0,V=0;O<B;O++){for(j=H[O],we=0;we<X;)ne[V++]=j>>>we&255,we+=N.bits;W[O]=j>>>we&255}}if(N.bits===16){B=(H=new Uint32Array(N.decodePixels().buffer)).length,ne=new Uint8Array(B*(32/N.pixelBitlength)*N.colors),W=new Uint8Array(B*(32/N.pixelBitlength)),D=N.colors>1,O=0,V=0;for(var ae=0;O<B;)j=H[O++],ne[V++]=j>>>0&255,D&&(ne[V++]=j>>>16&255,j=H[O++],ne[V++]=j>>>0&255),W[ae++]=j>>>16&255;b=8}_!==t.image_compression.NONE&&e()?(m=n(ne,N.width*N.colors,N.colors,_),Y=n(W,N.width,1,_)):(m=ne,Y=W,he=void 0)}if(N.colorType===3&&(E=this.color_spaces.INDEXED,U=N.palette,N.transparency.indexed)){var fe=N.transparency.indexed,Ce=0;for(O=0,B=fe.length;O<B;++O)Ce+=fe[O];if((Ce/=255)===B-1&&fe.indexOf(0)!==-1)T=[fe.indexOf(0)];else if(Ce!==B){for(H=N.decodePixels(),W=new Uint8Array(H.length),O=0,B=H.length;O<B;O++)W[O]=fe[H[O]];Y=n(W,N.width,1)}}var P=function(q){var z;switch(q){case t.image_compression.FAST:z=11;break;case t.image_compression.MEDIUM:z=13;break;case t.image_compression.SLOW:z=14;break;default:z=12}return z}(_);return he===this.decode.FLATE_DECODE&&(le="/Predictor "+P+" "),le+="/Colors "+M+" /BitsPerComponent "+b+" /Columns "+N.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(Y&&this.__addimage__.isArrayBuffer(Y)||this.__addimage__.isArrayBufferView(Y))&&(Y=this.__addimage__.arrayBufferToBinaryString(Y)),{alias:S,data:m,index:g,filter:he,decodeParameters:le,transparency:T,palette:U,sMask:Y,predictor:P,width:N.width,height:N.height,bitsPerComponent:b,colorSpace:E}}}})(it.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new aM(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:o,height:a},f=new b0(100).encode(u,100);return t.processJPEG.call(this,f,n,r,i)},t.processGIF87A=t.processGIF89A}(it.API),pi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},pi.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Dt.log("bit decode error:"+n)}},pi.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},pi.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,u=this.palette[a];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},pi.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},pi.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,u=s>>15?255:0,f=r*this.width*4+4*i;this.data[f]=l,this.data[f+1]=a,this.data[f+2]=o,this.data[f+3]=u}this.pos+=t}},pi.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,u=(o>>11)/e*255|0,f=i*this.width*4+4*s;this.data[f]=u,this.data[f+1]=l,this.data[f+2]=a,this.data[f+3]=255}this.pos+=t}},pi.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},pi.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},pi.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new pi(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new b0(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(it.API),D5.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new D5(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new b0(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(it.API),it.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,u=0;u<i;u+=4){var f=r[u],p=r[u+1],m=r[u+2],g=r[u+3];s[a++]=f,s[a++]=p,s[a++]=m,o[l++]=g}var S=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:S,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},it.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Va=it.API,Gd=Va.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,f=u.fof?u.fof:1,p=e.doKerning!==!1,m=0,g=t.length,S=0,_=a[0]||l,E=[];for(n=0;n<g;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?E.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(m=p&&It(u[r])==="object"&&!isNaN(parseInt(u[r][S],10))?u[r][S]/f:0,E.push((a[r]||_)/l+m)),S=r;return E},I5=Va.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Va.processArabic&&(t=Va.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:Gd.apply(this,arguments).reduce(function(s,o){return s+o},0)},R5=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},L5=function(t,e,n){n||(n={});var r,i,s,o,a,l,u,f=[],p=[f],m=n.textIndent||0,g=0,S=0,_=t.split(" "),E=Gd.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?_[0].length+2:n.lineIndent||0){var b=Array(l).join(" "),N=[];_.map(function(M){(M=M.split(/\s*\n/)).length>1?N=N.concat(M.map(function(U,Y){return(Y&&U.length?`
`:"")+U})):N.push(M[0])}),_=N,l=I5.apply(this,[b,n])}for(s=0,o=_.length;s<o;s++){var T=0;if(r=_[s],l&&r[0]==`
`&&(r=r.substr(1),T=1),m+g+(S=(i=Gd.apply(this,[r,n])).reduce(function(M,U){return M+U},0))>e||T){if(S>e){for(a=R5.apply(this,[r,i,e-(m+g),e]),f.push(a.shift()),f=[a.pop()];a.length;)p.push([a.shift()]);S=i.slice(r.length-(f[0]?f[0].length:0)).reduce(function(M,U){return M+U},0)}else f=[r];p.push(f),m=S+l,g=E}else f.push(r),m+=g+S,g=E}return u=l?function(M,U){return(U?b:"")+M.join(" ")}:function(M){return M.join(" ")},p.map(u)},Va.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var p=this.internal.getFont(f.fontName,f.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,u=[];for(a=0,l=r.length;a<l;a++)u=u.concat(L5.apply(this,[r[a],o,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=t.__fontmetrics__.compress=function(p){var m,g,S,_,E=["{"];for(var b in p){if(m=p[b],isNaN(parseInt(b,10))?g="'"+b+"'":(b=parseInt(b,10),g=(g=s(b).slice(2)).slice(0,-1)+r[g.slice(-1)]),typeof m=="number")m<0?(S=s(m).slice(3),_="-"):(S=s(m).slice(2),_=""),S=_+S.slice(0,-1)+r[S.slice(-1)];else{if(It(m)!=="object")throw new Error("Don't know what to do with value type "+It(m)+".");S=o(m)}E.push(g+S)}return E.push("}"),E.join("")},a=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,g,S,_,E={},b=1,N=E,T=[],M="",U="",Y=p.length-1,H=1;H<Y;H+=1)(_=p[H])=="'"?m?(S=m.join(""),m=void 0):m=[]:m?m.push(_):_=="{"?(T.push([N,S]),N={},S=void 0):_=="}"?((g=T.pop())[0][g[1]]=N,S=void 0,N=g[0]):_=="-"?b=-1:S===void 0?n.hasOwnProperty(_)?(M+=n[_],S=parseInt(M,16)*b,b=1,M=""):M+=_:n.hasOwnProperty(_)?(U+=n[_],N[S]=parseInt(U,16)*b,b=1,S=void 0,U=""):U+=_;return E},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},f={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var m=p.font,g=f.Unicode[m.postScriptName];g&&(m.metadata.Unicode={},m.metadata.Unicode.widths=g.widths,m.metadata.Unicode.kerning=g.kerning);var S=u.Unicode[m.postScriptName];S&&(m.metadata.Unicode.encoding=S,m.encoding=S.codePages[0])}])}(it.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Wu(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(it),function(t){function e(){return(st.canvg?Promise.resolve(st.canvg):Ym(()=>import("./index.es-DZ3MN8n8.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}it.API.addSvgAsImage=function(n,r,i,s,o,a,l,u){if(isNaN(r)||isNaN(i))throw Dt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Dt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=s,f.height=o;var p=f.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,f.width,f.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(S){return S.fromString(p,n,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(S){return S.render(m)}).then(function(){g.addImage(f.toDataURL("image/jpeg",1),r,i,s,o,l,u)})}}(),it.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},it.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],u=0,f=0,p=0;function m(S,_){var E,b=!1;for(E=0;E<S.length;E+=1)S[E]===_&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=a.length;for(p=0;p<g;p+=1)n[a[p]].value=n[a[p]].defaultValue,n[a[p]].explicitSet=!1}if(It(t)==="object"){for(i in t)if(s=t[i],m(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&m(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(f=0;f<s[u].length;f+=1)typeof s[u][f]!="number"&&(r=!1);r===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var S,_=[];for(S in n)n[S].explicitSet===!0&&(n[S].type==="name"?_.push("/"+S+" /"+n[S].value):_.push("/"+S+" "+n[S].value));_.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+_.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(it.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,u=["","0","00","000","0000"],f=[""],p=0,m=s.length;p<m;++p){if(a=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(p),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return f.join("");a=a.toString(16),f.push(u[4-a.length],a)}return f.join("")},r=function(s){var o,a,l,u,f,p,m;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,m=(a=Object.keys(s).sort(function(g,S){return g-S})).length;p<m;p++)o=a[p],l.length>=100&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+u+">"));return l.length&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,f=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,m=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),g="",S=0;S<m.length;S++)g+=String.fromCharCode(m[S]);var _=u();f({data:g,addLength1:!0,objectId:_}),l("endobj");var E=u();f({data:r(a.metadata.toUnicode),addLength1:!0,objectId:E}),l("endobj");var b=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Wa(a.fontName)),l("/FontFile2 "+_+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var N=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+Wa(a.fontName)),l("/FontDescriptor "+b+" 0 R"),l("/W "+t.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+E+" 0 R"),l("/BaseFont /"+Wa(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+N+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,f=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,m="",g=0;g<p.length;g++)m+=String.fromCharCode(p[g]);var S=u();f({data:m,addLength1:!0,objectId:S}),l("endobj");var _=u();f({data:r(a.metadata.toUnicode),addLength1:!0,objectId:_}),l("endobj");var E=u();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+S+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Wa(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=u();for(var b=0;b<a.metadata.hmtx.widths.length;b++)a.metadata.hmtx.widths[b]=parseInt(a.metadata.hmtx.widths[b]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+_+" 0 R/BaseFont/"+Wa(a.fontName)+"/FontDescriptor "+E+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,u=s.y,f=s.options||{},p=s.mutex||{},m=p.pdfEscape,g=p.activeFontKey,S=p.fonts,_=g,E="",b=0,N="",T=S[_].encoding;if(S[_].encoding!=="Identity-H")return{text:a,x:l,y:u,options:f,mutex:p};for(N=a,_=g,Array.isArray(a)&&(N=a[0]),b=0;b<N.length;b+=1)S[_].metadata.hasOwnProperty("cmap")&&(o=S[_].metadata.cmap.unicode.codeMap[N[b].charCodeAt(0)]),o||N[b].charCodeAt(0)<256&&S[_].metadata.hasOwnProperty("Unicode")?E+=N[b]:E+="";var M="";return parseInt(_.slice(1))<14||T==="WinAnsiEncoding"?M=m(E,_).split("").map(function(U){return U.charCodeAt(0).toString(16)}).join(""):T==="Identity-H"&&(M=n(E,S[_])),p.isHex=!0,{text:M,x:l,y:u,options:f,mutex:p}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?a.push([i(Object.assign({},l,{text:o[u][0]})).text,o[u][1],o[u][2]]):a.push(i(Object.assign({},l,{text:o[u]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(it),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(it.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,u,f,p=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],S={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},_={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},E=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),N=!1,T=0;this.__bidiEngine__={};var M=function(D){var j=D.charCodeAt(),O=j>>8,V=_[O];return V!==void 0?p[256*V+(255&j)]:O===252||O===253?"AL":b.test(O)?"L":O===8?"R":"N"},U=function(D){for(var j,O=0;O<D.length;O++){if((j=M(D.charAt(O)))==="L")return!1;if(j==="R")return!0}return!1},Y=function(D,j,O,V){var he,le,we,X,ae=j[V];switch(ae){case"L":case"R":N=!1;break;case"N":case"AN":break;case"EN":N&&(ae="AN");break;case"AL":N=!0,ae="R";break;case"WS":ae="N";break;case"CS":V<1||V+1>=j.length||(he=O[V-1])!=="EN"&&he!=="AN"||(le=j[V+1])!=="EN"&&le!=="AN"?ae="N":N&&(le="AN"),ae=le===he?le:"N";break;case"ES":ae=(he=V>0?O[V-1]:"B")==="EN"&&V+1<j.length&&j[V+1]==="EN"?"EN":"N";break;case"ET":if(V>0&&O[V-1]==="EN"){ae="EN";break}if(N){ae="N";break}for(we=V+1,X=j.length;we<X&&j[we]==="ET";)we++;ae=we<X&&j[we]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(X=j.length,we=V+1;we<X&&j[we]==="NSM";)we++;if(we<X){var fe=D[V],Ce=fe>=1425&&fe<=2303||fe===64286;if(he=j[we],Ce&&(he==="R"||he==="AL")){ae="R";break}}}ae=V<1||(he=j[V-1])==="B"?"N":O[V-1];break;case"B":N=!1,i=!0,ae=T;break;case"S":s=!0,ae="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":N=!1;break;case"BN":ae="N"}return ae},H=function(D,j,O){var V=D.split("");return O&&B(V,O,{hiLevel:T}),V.reverse(),j&&j.reverse(),V.join("")},B=function(D,j,O){var V,he,le,we,X,ae=-1,fe=D.length,Ce=0,P=[],q=T?g:m,z=[];for(N=!1,i=!1,s=!1,he=0;he<fe;he++)z[he]=M(D[he]);for(le=0;le<fe;le++){if(X=Ce,P[le]=Y(D,z,P,le),V=240&(Ce=q[X][S[P[le]]]),Ce&=15,j[le]=we=q[Ce][5],V>0)if(V===16){for(he=ae;he<le;he++)j[he]=1;ae=-1}else ae=-1;if(q[Ce][6])ae===-1&&(ae=le);else if(ae>-1){for(he=ae;he<le;he++)j[he]=we;ae=-1}z[le]==="B"&&(j[le]=0),O.hiLevel|=we}s&&function(Q,re,ce){for(var ve=0;ve<ce;ve++)if(Q[ve]==="S"){re[ve]=T;for(var ye=ve-1;ye>=0&&Q[ye]==="WS";ye--)re[ye]=T}}(z,j,fe)},W=function(D,j,O,V,he){if(!(he.hiLevel<D)){if(D===1&&T===1&&!i)return j.reverse(),void(O&&O.reverse());for(var le,we,X,ae,fe=j.length,Ce=0;Ce<fe;){if(V[Ce]>=D){for(X=Ce+1;X<fe&&V[X]>=D;)X++;for(ae=Ce,we=X-1;ae<we;ae++,we--)le=j[ae],j[ae]=j[we],j[we]=le,O&&(le=O[ae],O[ae]=O[we],O[we]=le);Ce=X}Ce++}}},ne=function(D,j,O){var V=D.split(""),he={hiLevel:T};return O||(O=[]),B(V,O,he),function(le,we,X){if(X.hiLevel!==0&&f)for(var ae,fe=0;fe<le.length;fe++)we[fe]===1&&(ae=E.indexOf(le[fe]))>=0&&(le[fe]=E[ae+1])}(V,O,he),W(2,V,j,O,he),W(1,V,j,O,he),V.join("")};return this.__bidiEngine__.doBidiReorder=function(D,j,O){if(function(he,le){if(le)for(var we=0;we<he.length;we++)le[we]=we;a===void 0&&(a=U(he)),u===void 0&&(u=U(he))}(D,j),o||!l||u)if(o&&l&&a^u)T=a?1:0,D=H(D,j,O);else if(!o&&l&&u)T=a?1:0,D=ne(D,j,O),D=H(D,j);else if(!o||a||l||u){if(o&&!l&&a^u)D=H(D,j),a?(T=0,D=ne(D,j,O)):(T=1,D=ne(D,j,O),D=H(D,j));else if(o&&a&&!l&&u)T=1,D=ne(D,j,O),D=H(D,j);else if(!o&&!l&&a^u){var V=f;a?(T=1,D=ne(D,j,O),T=0,f=!1,D=ne(D,j,O),f=V):(T=0,D=ne(D,j,O),D=H(D,j),T=1,f=!1,D=ne(D,j,O),f=V,D=H(D,j))}}else T=0,D=ne(D,j,O);else T=a?1:0,D=ne(D,j,O);return D},this.__bidiEngine__.setOptions=function(D){D&&(o=D.isInputVisual,l=D.isOutputVisual,a=D.isInputRtl,u=D.isOutputRtl,f=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(it),it.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new ho(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new _M(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new lM(this.contents),this.head=new cM(this),this.name=new mM(this),this.cmap=new HS(this),this.toUnicode={},this.hhea=new dM(this),this.maxp=new gM(this),this.hmtx=new vM(this),this.post=new hM(this),this.os2=new fM(this),this.loca=new bM(this),this.glyf=new yM(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,u;for(u=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Pi,ho=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),lM=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,u,f,p,m,g,S,_;for(_ in g=Object.keys(n).length,l=Math.log(2),p=16*Math.floor(Math.log(g)/l),o=Math.floor(p/l),f=16*g-p,(i=new ho).writeInt(this.scalarType),i.writeShort(g),i.writeShort(p),i.writeShort(o),i.writeShort(f),s=16*g,u=i.pos+s,a=null,S=[],n)for(m=n[_],i.writeString(_),i.writeInt(t(m)),i.writeInt(u),i.writeInt(m.length),S=S.concat(m),_==="head"&&(a=u),u+=m.length;u%4;)S.push(0),u++;return i.write(S),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=zS.call(n);n.length%4;)n.push(0);for(s=new ho(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),uM={}.hasOwnProperty,Qi=function(t,e){for(var n in e)uM.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Pi=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var cM=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qi(e,Pi),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new ho).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),F5=function(){function t(e,n){var r,i,s,o,a,l,u,f,p,m,g,S,_,E,b,N,T;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(g=e.readUInt16(),m=g/2,e.pos+=6,s=function(){var M,U;for(U=[],l=M=0;0<=m?M<m:M>m;l=0<=m?++M:--M)U.push(e.readUInt16());return U}(),e.pos+=2,_=function(){var M,U;for(U=[],l=M=0;0<=m?M<m:M>m;l=0<=m?++M:--M)U.push(e.readUInt16());return U}(),u=function(){var M,U;for(U=[],l=M=0;0<=m?M<m:M>m;l=0<=m?++M:--M)U.push(e.readUInt16());return U}(),f=function(){var M,U;for(U=[],l=M=0;0<=m?M<m:M>m;l=0<=m?++M:--M)U.push(e.readUInt16());return U}(),i=(this.length-e.pos+this.offset)/2,a=function(){var M,U;for(U=[],l=M=0;0<=i?M<i:M>i;l=0<=i?++M:--M)U.push(e.readUInt16());return U}(),l=b=0,T=s.length;b<T;l=++b)for(E=s[l],r=N=S=_[l];S<=E?N<=E:N>=E;r=S<=E?++N:--N)f[l]===0?o=r+u[l]:(o=a[f[l]/2+(r-S)-(m-l)]||0)!==0&&(o+=u[l]),this.codeMap[r]=65535&o}e.pos=p}return t.encode=function(e,n){var r,i,s,o,a,l,u,f,p,m,g,S,_,E,b,N,T,M,U,Y,H,B,W,ne,D,j,O,V,he,le,we,X,ae,fe,Ce,P,q,z,Q,re,ce,ve,ye,De,Ie,je;switch(V=new ho,o=Object.keys(e).sort(function(Oe,Qe){return Oe-Qe}),n){case"macroman":for(_=0,E=function(){var Oe=[];for(S=0;S<256;++S)Oe.push(0);return Oe}(),N={0:0},s={},he=0,ae=o.length;he<ae;he++)N[ye=e[i=o[he]]]==null&&(N[ye]=++_),s[i]={old:e[i],new:N[e[i]]},E[i]=N[e[i]];return V.writeUInt16(1),V.writeUInt16(0),V.writeUInt32(12),V.writeUInt16(0),V.writeUInt16(262),V.writeUInt16(0),V.write(E),{charMap:s,subtable:V.data,maxGlyphID:_+1};case"unicode":for(j=[],p=[],T=0,N={},r={},b=u=null,le=0,fe=o.length;le<fe;le++)N[U=e[i=o[le]]]==null&&(N[U]=++T),r[i]={old:U,new:N[U]},a=N[U]-i,b!=null&&a===u||(b&&p.push(b),j.push(i),u=a),b=i;for(b&&p.push(b),p.push(65535),j.push(65535),ne=2*(W=j.length),B=2*Math.pow(Math.log(W)/Math.LN2,2),m=Math.log(B/2)/Math.LN2,H=2*W-B,l=[],Y=[],g=[],S=we=0,Ce=j.length;we<Ce;S=++we){if(D=j[S],f=p[S],D===65535){l.push(0),Y.push(0);break}if(D-(O=r[D].new)>=32768)for(l.push(0),Y.push(2*(g.length+W-S)),i=X=D;D<=f?X<=f:X>=f;i=D<=f?++X:--X)g.push(r[i].new);else l.push(O-D),Y.push(0)}for(V.writeUInt16(3),V.writeUInt16(1),V.writeUInt32(12),V.writeUInt16(4),V.writeUInt16(16+8*W+2*g.length),V.writeUInt16(0),V.writeUInt16(ne),V.writeUInt16(B),V.writeUInt16(m),V.writeUInt16(H),ce=0,P=p.length;ce<P;ce++)i=p[ce],V.writeUInt16(i);for(V.writeUInt16(0),ve=0,q=j.length;ve<q;ve++)i=j[ve],V.writeUInt16(i);for(De=0,z=l.length;De<z;De++)a=l[De],V.writeUInt16(a);for(Ie=0,Q=Y.length;Ie<Q;Ie++)M=Y[Ie],V.writeUInt16(M);for(je=0,re=g.length;je<re;je++)_=g[je],V.writeUInt16(_);return{charMap:r,subtable:V.data,maxGlyphID:T+1}}},t}(),HS=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qi(e,Pi),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new F5(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=F5.encode(n,r),(s=new ho).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),dM=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qi(e,Pi),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),fM=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qi(e,Pi),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),hM=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qi(e,Pi),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,u;for(u=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)u.push(n.readUInt32());return u}).call(this)}},e}(),pM=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},mM=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qi(e,Pi),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,u,f,p,m,g;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(u={},o=p=0,m=i.length;p<m;o=++p)s=i[o],n.pos=s.offset,f=n.readString(s.length),a=new pM(f,s),u[g=s.nameID]==null&&(u[g]=[]),u[s.nameID].push(a);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),gM=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qi(e,Pi),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),vM=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qi(e,Pi),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,u;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,p;for(p=[],r=f=0;0<=s?f<s:f>s;r=0<=s?++f:--f)p.push(n.readInt16());return p}(),this.widths=(function(){var f,p,m,g;for(g=[],f=0,p=(m=this.metrics).length;f<p;f++)o=m[f],g.push(o.advance);return g}).call(this),i=this.widths[this.widths.length-1],u=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),zS=[].slice,yM=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qi(e,Pi),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,u,f,p,m;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new ho(r.read(s))).readShort(),f=l.readShort(),m=l.readShort(),u=l.readShort(),p=l.readShort(),this.cache[n]=a===-1?new xM(l,f,m,u,p):new wM(l,a,f,m,u,p),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,u;for(a=[],o=[],l=0,u=r.length;l<u;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),wM=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),xM=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new ho(zS.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),bM=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Qi(e,Pi),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],u=this.offsets[a+1]-l;u>0&&(s+=u)}for(var f=new Array(4*i.length),p=0;p<i.length;++p)f[4*p+3]=255&i[p],f[4*p+2]=(65280&i[p])>>8,f[4*p+1]=(16711680&i[p])>>16,f[4*p]=(4278190080&i[p])>>24;return f},e}(),_M=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,u,f,p,m,g,S,_,E,b;for(i in r=HS.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),g={0:0},b=r.charMap)g[(l=b[i]).old]=l.new;for(S in m=r.maxGlyphID,o)S in g||(g[S]=m++);return f=function(N){var T,M;for(T in M={},N)M[N[T]]=T;return M}(g),p=Object.keys(f).sort(function(N,T){return N-T}),_=function(){var N,T,M;for(M=[],N=0,T=p.length;N<T;N++)a=p[N],M.push(f[a]);return M}(),s=this.font.glyf.encode(o,_,g),u=this.font.loca.encode(s.offsets,_),E={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(E["OS/2"]=this.font.os2.raw()),this.font.directory.encode(E)},t}();it.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,u;for(u=[],a=0,l=n.length;a<l;a++)r=n[a],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();const _0=31,S0=59,N0=131,SM="Equal Housing Lender. Guild Mortgage is an Equal Housing Lender. NMLS #3274. This letter is not a commitment to lend. All loans are subject to underwriting approval and credit terms. Additional restrictions may apply.",qi={name:"John Creager",title:"Loan Officer",nmls:"NMLS #2098333",phone:"(801) 589-0502",email:"jcreager@guildmortgage.net",company:"Guild Mortgage"};function NM(t){if(!t)return"Borrower";const e=t.trim().split(/\s+/);return e[e.length-1]||"Borrower"}function O5(t){return`$${t.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}`}function AM(t,e,n){return n&&n.trim()?n.trim():typeof t=="number"&&typeof e=="number"&&t>0?`${Math.max(0,(t-e)/t*100).toFixed(1)}%`:""}function j5(t){return t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}async function U5(t){try{const n=await(await fetch(t)).blob();return new Promise((r,i)=>{const s=new FileReader;s.onloadend=()=>r(s.result),s.onerror=i,s.readAsDataURL(n)})}catch(e){return console.error("Error loading image:",e),""}}async function EM(t){const{buyer1:e,buyer2:n="",purchasePrice:r,loanAmount:i,downPayment:s,loanType:o,letterDate:a=new Date,status:l="Pre-Approval",validDays:u=60,notes:f=""}=t,p=new Date(a);p.setDate(p.getDate()+u);const m=typeof r=="number"?O5(r):r||"",g=typeof i=="number"?O5(i):i||"",S=AM(r,i,s),_=new it({orientation:"portrait",unit:"in",format:"letter"}),E=.75,b=.75,N=.5,T=8.5,M=T-E-b;let U=N;const Y=await U5("/SE96398_logo_orig.png"),H=await U5("/john_creager_guild.png");Y&&_.addImage(Y,"PNG",E,U,2.6,1);const B=T-b-1.1;H&&_.addImage(H,"PNG",B,U,1.1,1.1),_.setFont("helvetica","bold"),_.setFontSize(10);let W=U+1.25;_.text(qi.name,T-b,W,{align:"right"}),W+=.19,_.setFont("helvetica","normal"),_.setFontSize(9),_.text("Loan Officer",T-b,W,{align:"right"}),W+=.18,_.text(qi.nmls,T-b,W,{align:"right"}),W+=.18,_.text(qi.phone,T-b,W,{align:"right"}),W+=.18,_.text(qi.email,T-b,W,{align:"right"}),U+=2.15,_.setDrawColor(_0,S0,N0),_.setLineWidth(.055),_.line(E,U,T-b,U),U+=.42,_.setTextColor(_0,S0,N0),_.setFont("helvetica","bold"),_.setFontSize(24),_.text("Pre-Approval Letter",E,U),U+=.32,_.setTextColor(0,0,0),_.setFont("helvetica","normal"),_.setFontSize(12),_.text(`Date: ${j5(a)}`,E,U),U+=.48;const D=`Congratulations ${e+(n?` & ${n}`:"")}! Based on the information provided and a review of your documentation, you have been ${l.toLowerCase()} for the home purchase outlined below.`;_.setFontSize(12);const j=_.splitTextToSize(D,M);_.text(j,E,U),U+=j.length*.22,U+=.45;const O=[["Purchase Price",m],["Loan Amount",g],["Down Payment",S],["Loan Type",o||""],["Valid Through",j5(p)]],V=2.2,he=4.8,le=.46;O.forEach((Ce,P)=>{const q=U+P*le;_.setFillColor(_0,S0,N0),_.rect(E,q,V,le,"F"),P%2===0?_.setFillColor(246,246,246):_.setFillColor(255,255,255),_.rect(E+V,q,he,le,"F"),_.setDrawColor(210,210,210),_.setLineWidth(.004),_.rect(E,q,V+he,le,"S"),_.setTextColor(255,255,255),_.setFont("helvetica","bold"),_.setFontSize(12),_.text(Ce[0],E+.13,q+.3),_.setTextColor(0,0,0),_.setFont("helvetica","normal"),_.setFontSize(12),_.text(Ce[1],E+V+.13,q+.3)}),U+=O.length*le,U+=.48,_.setTextColor(0,0,0),_.setFont("helvetica","normal"),_.setFontSize(11);const X=_.splitTextToSize("This pre-approval is based on current market conditions and the information and documentation provided. Rate is floating and subject to change until locked. This letter is typically valid for 60 days from the date shown above, subject to satisfactory appraisal, title, and final underwriting approval.",M);if(_.text(X,E,U),U+=X.length*.18,f){U+=.35,_.setFont("helvetica","bold"),_.setFontSize(11);const Ce="Notes: ";_.text(Ce,E,U);const P=_.getTextWidth(Ce);_.setFont("helvetica","normal");const q=_.splitTextToSize(f,M-P);_.text(q[0],E+P,U);for(let z=1;z<q.length;z++)U+=.18,_.text(q[z],E,U);U+=.18}U+=.5,_.setFont("helvetica","normal"),_.setFontSize(11),[qi.name,qi.title,qi.nmls,qi.company,qi.phone,qi.email].forEach(Ce=>{_.text(Ce,E,U),U+=.19}),U+=.35,_.setDrawColor(190,190,190),_.setLineWidth(.012),_.line(E,U,T-b,U),U+=.16,_.setTextColor(110,110,110),_.setFont("helvetica","normal"),_.setFontSize(8);const fe=_.splitTextToSize(SM,M);return _.text(fe,E,U),_}async function B5(t){const e=await EM(t),r=`${NM(t.buyer1)} - Pre-Approval Letter.pdf`,i=e.output("blob");return{pdfUrl:URL.createObjectURL(i),filename:r}}const GS=He.createContext(void 0),TM=({children:t})=>{const[e,n]=He.useState([]),r=s=>{const o=Math.random().toString(36).substring(7),a={...s,id:o};n(l=>[...l,a]),setTimeout(()=>{i(o)},s.duration||3e3)},i=s=>{n(o=>o.filter(a=>a.id!==s))};return y.jsx(GS.Provider,{value:{toasts:e,addToast:r,removeToast:i},children:t})},WS=()=>{const t=He.useContext(GS);if(!t)throw new Error("useToast must be used within ToastProvider");return t};function CM(t,e=500){const[n,r]=He.useState(t);return He.useEffect(()=>{const i=setTimeout(()=>{r(t)},e);return()=>{clearTimeout(i)}},[t,e]),n}const kM=({errors:t,onDismiss:e})=>{if(t.length===0)return null;const n=t.filter(i=>i.severity==="error").length,r=t.filter(i=>i.severity==="warning").length;return y.jsxs("div",{className:"space-y-3 mb-6 animate-fadeIn",children:[n>0&&y.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4 shadow-sm",children:[y.jsxs("div",{className:"flex items-start justify-between mb-3",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Bf,{className:"w-5 h-5 text-red-600 shrink-0"}),y.jsxs("h4",{className:"font-bold text-red-900",children:[n," Error",n>1?"s":""," Found"]})]}),e&&y.jsx("button",{onClick:e,className:"text-red-400 hover:text-red-600 transition-colors",children:y.jsx(Vf,{size:18})})]}),y.jsx("ul",{className:"space-y-2",children:t.filter(i=>i.severity==="error").map((i,s)=>y.jsxs("li",{className:"flex items-start gap-2 text-sm text-red-800",children:[y.jsx("span",{className:"text-red-500 mt-0.5",children:""}),y.jsx("span",{className:"flex-1",children:i.message})]},s))})]}),r>0&&y.jsxs("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-xl p-4 shadow-sm",children:[y.jsxs("div",{className:"flex items-start justify-between mb-3",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Sh,{className:"w-5 h-5 text-amber-600 shrink-0"}),y.jsxs("h4",{className:"font-bold text-amber-900",children:[r," Warning",r>1?"s":""]})]}),e&&y.jsx("button",{onClick:e,className:"text-amber-400 hover:text-amber-600 transition-colors",children:y.jsx(Vf,{size:18})})]}),y.jsx("ul",{className:"space-y-2",children:t.filter(i=>i.severity==="warning").map((i,s)=>y.jsxs("li",{className:"flex items-start gap-2 text-sm text-amber-800",children:[y.jsx("span",{className:"text-amber-500 mt-0.5",children:""}),y.jsx("span",{className:"flex-1",children:i.message})]},s))})]})]})},Wt="flex items-center w-full bg-white border border-slate-200 rounded-lg shadow-sm focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500 transition-all overflow-hidden h-10 group",pr="flex items-center justify-center h-full px-3 bg-slate-50 border-r border-slate-200 text-slate-400 text-sm font-semibold text-center min-w-[2.5rem] group-focus-within:bg-indigo-50 group-focus-within:text-indigo-600 group-focus-within:border-indigo-100 transition-colors",zs="flex items-center justify-center h-full px-3 bg-slate-50 border-l border-slate-200 text-slate-400 text-sm font-semibold text-center min-w-[2.5rem] group-focus-within:bg-indigo-50 group-focus-within:text-indigo-600 group-focus-within:border-indigo-100 transition-colors",tn="block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5 ml-0.5",PM=({value:t,onChange:e,isFixed:n,onToggle:r})=>y.jsxs("div",{className:Wt,children:[y.jsx("button",{onClick:r,className:"h-full px-3 bg-slate-50 border-r border-slate-200 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 transition-colors",title:"Toggle Unit",children:y.jsx(eb,{size:14})}),n?y.jsx(nn,{value:t||0,onChangeValue:e,className:"w-full h-full px-4 text-right text-sm text-slate-900 font-medium"}):y.jsx(_i,{value:t||0,onChange:e,precision:3,className:"w-full h-full px-4 text-right text-sm text-slate-900 font-medium",placeholder:"0.00"}),!n&&y.jsx("div",{className:zs,children:"%"}),n&&y.jsx("div",{className:zs,children:"$"})]}),IM=({initialScenario:t,onSave:e,onBack:n,validationThresholds:r=Hi})=>{var Ge,Ze,ot,at,vt;const i={...t,transactionType:t.transactionType||"Purchase"},[s,o]=He.useState(i),[a,l]=He.useState(Fy(t)),[u,f]=He.useState("loan"),{addToast:p}=WS(),m=CM(s,300),[g,S]=He.useState([]),[_,E]=He.useState(""),[b,N]=He.useState(!1),[T,M]=He.useState(!1),[U,Y]=He.useState(!1),[H,B]=He.useState(!1),[W,ne]=He.useState(!1),[D,j]=He.useState(!1),[O,V]=He.useState(null),[he,le]=He.useState(""),[we,X]=He.useState(""),[ae,fe]=He.useState([]),Ce=He.useRef(null);He.useEffect(()=>{let K=[...s.closingCosts],ie=!1;const Re=["origination","lender-credit"];K.some(We=>Re.includes(We.id))&&(K=K.filter(We=>!Re.includes(We.id)),ie=!0);const lt=K.some(We=>We.id==="hoa-transfer"),xt=K.some(We=>We.id==="hoa-prepay"),Sr=K.some(We=>We.id==="discount-points"),Ct=K.some(We=>We.id==="misc-3"),Ft=K.some(We=>We.id==="misc-4"),Ur=K.some(We=>We.id==="misc-5");if(!lt){const We=jo.find(Nr=>Nr.id==="hoa-transfer");We&&K.push(We),ie=!0}if(!xt){const We=jo.find(Nr=>Nr.id==="hoa-prepay");We&&K.push(We),ie=!0}if(!Sr){const We=jo.find(Nr=>Nr.id==="discount-points");We&&K.push(We),ie=!0}Ct||(K.push(jo.find(We=>We.id==="misc-3")),ie=!0),Ft||(K.push(jo.find(We=>We.id==="misc-4")),ie=!0),Ur||(K.push(jo.find(We=>We.id==="misc-5")),ie=!0),s.income||(o(We=>({...We,income:{borrower1:0,borrower2:0,rental:0,other:0}})),ie=!1),s.debts||(o(We=>({...We,debts:{monthlyTotal:0}})),ie=!1),ie&&o(We=>({...We,closingCosts:K}))},[s.closingCosts.length,s.income,s.debts]),He.useEffect(()=>{const K=setTimeout(()=>{const ie=new Date().toISOString(),Re={...s,lastUpdated:ie};e(Re)},500);return()=>clearTimeout(K)},[s]),He.useEffect(()=>{const K=Fy(m);l(K);const ie=l3(m,K,void 0,void 0,r);S(ie)},[m,r]),He.useEffect(()=>{const K=Ce.current;K&&(K.style.height="auto",K.style.height=`${K.scrollHeight}px`)},[s.notes]);const P=He.useMemo(()=>{const K=s.closingCosts.filter(Ne=>Ne.id==="hoa-transfer"||Ne.id==="hoa-prepay"?s.hoaMonthly>0:!0),ie={};return K.forEach(Ne=>{const lt=Ne.category||"Other Fees";ie[lt]||(ie[lt]=[]),ie[lt].push(Ne)}),["Lender Fees","Third Party Fees","Title & Government","Escrows/Prepaids","Other Fees"].filter(Ne=>ie[Ne]).map(Ne=>({category:Ne,items:ie[Ne]}))},[s.closingCosts,s.hoaMonthly]),q=K=>{K.currentTarget.blur()},z=(K,ie)=>{o(Re=>{if(K==="purchasePrice"){const Ne=Number(ie);return{...Re,purchasePrice:Ne,downPaymentAmount:Ne*(Re.downPaymentPercent/100)}}if(K==="downPaymentPercent"){const Ne=Number(ie);return{...Re,downPaymentPercent:Ne,downPaymentAmount:Re.purchasePrice*(Ne/100)}}if(K==="downPaymentAmount"){const Ne=Number(ie);return{...Re,downPaymentAmount:Ne,downPaymentPercent:Re.purchasePrice>0?Ne/Re.purchasePrice*100:0}}if(K==="loanType"){let Ne=0;ie===Nt.FHA&&(Ne=1.75),ie===Nt.VA&&(Ne=2.15);const lt=ie===Nt.FHA||ie===Nt.VA;return{...Re,[K]:ie,ufmipRate:Ne,interestOnly:lt?!1:Re.interestOnly}}return K==="isAddressTBD"&&ie===!0?{...Re,[K]:ie,propertyAddress:""}:{...Re,[K]:ie}})},Q=(K,ie)=>{if(ie.trim()==="")z(K,0);else{const Re=parseFloat(ie);isNaN(Re)||z(K,Re)}},re=(K,ie)=>{o(Re=>{if(K==="dollars")return{...Re,manualMI:ie};{const Ne=a.totalLoanAmount*(ie/100)/12;return{...Re,manualMI:Ne}}})},ce=(K,ie)=>{o(Re=>{if(K==="amount"){const Ne=Re.purchasePrice>0?ie/Re.purchasePrice*100:0;return{...Re,dpa:{...Re.dpa,amount:ie,percent:Ne}}}else{const Ne=Re.purchasePrice*(ie/100);return{...Re,dpa:{...Re.dpa,amount:Ne,percent:ie}}}})},ve=(K,ie)=>{const Re=s.closingCosts.map(Ne=>Ne.id===K?{...Ne,amount:isNaN(ie)?0:ie}:Ne);o(Ne=>({...Ne,closingCosts:Re}))},ye=(K,ie)=>{const Re=ie.trim()===""?0:parseFloat(ie),Ne=s.closingCosts.map(lt=>lt.id===K?{...lt,days:isNaN(Re)?0:Re}:lt);o(lt=>({...lt,closingCosts:Ne}))},De=(K,ie)=>{const Re=ie.trim()===""?0:parseFloat(ie),Ne=s.closingCosts.map(lt=>lt.id===K?{...lt,months:isNaN(Re)?0:Re}:lt);o(lt=>({...lt,closingCosts:Ne}))},Ie=K=>{const ie=s.closingCosts.find(lt=>lt.id===K);if(!ie)return;let Re=0;ie.isFixed?a.totalLoanAmount>0&&(Re=ie.amount/a.totalLoanAmount*100):Re=a.totalLoanAmount*(ie.amount/100);const Ne=s.closingCosts.map(lt=>lt.id===K?{...lt,isFixed:!lt.isFixed,amount:Number(Re.toFixed(4))}:lt);o(lt=>({...lt,closingCosts:Ne}))},je=()=>{const K=s.lenderCreditsMode==="fixed";let ie=0;K?a.totalLoanAmount>0&&(ie=s.lenderCredits/a.totalLoanAmount*100):ie=a.totalLoanAmount*(s.lenderCredits/100),o(Re=>({...Re,lenderCreditsMode:K?"percent":"fixed",lenderCredits:Number(ie.toFixed(4))}))},Oe=()=>{let K={...s};if(!K.name||K.name.trim()==="New Scenario"||K.name.trim()===""){const ie=K.loanType===Nt.CONVENTIONAL?"Conv":K.loanType;K.name=`${ie} - ${K.downPaymentPercent}% Down`,o(K),e(K)}n()},Qe=()=>{const K=s.history.length>0?s.history[s.history.length-1]:null,ie=[];if(!K)ie.push("Initial scenario creation");else{const Re=K.snapshot,Ne=s;Re.purchasePrice!==Ne.purchasePrice&&ie.push(`Price: ${ue(Re.purchasePrice)} -> ${ue(Ne.purchasePrice)}`),Re.interestRate!==Ne.interestRate&&ie.push(`Rate: ${Re.interestRate}% -> ${Ne.interestRate}%`),ie.length===0&&ie.push("Minor adjustments")}fe(ie),X(""),Y(!0)},be=()=>{const K={id:crypto.randomUUID(),timestamp:new Date().toISOString(),note:we,changes:ae,snapshot:JSON.parse(JSON.stringify(s))};o(ie=>({...ie,history:[...ie.history,K]})),Y(!1),p({type:"success",message:"Version saved successfully!"})},J=async()=>{N(!0),E("");const K=await S8(s,a);E(K),N(!1)},qe=()=>{M(!0),_||J()},ge=K=>{confirm("Restore this version? Current unsaved changes will be lost.")&&(o(K.snapshot),B(!1))},ue=K=>Math.ceil(K).toLocaleString("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}),Se=K=>new Date(K).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"});a.netClosingCosts,a.cashToClose;const ke=a.maxConcessionsAllowed>0&&s.purchasePrice>0?a.maxConcessionsAllowed/s.purchasePrice*100:0,Le=a.sellerConcessionsPercent>ke;return y.jsxs("div",{className:"flex flex-col h-full bg-slate-50",children:[y.jsxs("header",{className:"desktop-only scenario-header-desktop bg-slate-950 border-b border-slate-800 px-6 py-4 flex items-center justify-between shrink-0 z-30 shadow-md relative print:hidden h-28",children:[y.jsxs("div",{className:"flex items-center gap-6 flex-1",children:[y.jsx("button",{onClick:Oe,className:"p-2.5 bg-slate-900 hover:bg-slate-800 rounded-full text-slate-400 hover:text-white transition-colors border border-slate-800",children:y.jsx(fT,{size:20})}),y.jsxs("div",{className:"flex items-center gap-6 w-full max-w-4xl",children:[y.jsxs("div",{className:"min-w-[150px]",children:[y.jsx("label",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest block mb-0.5",children:"Borrower"}),y.jsx("div",{className:"text-lg font-bold text-white tracking-tight truncate",children:s.clientName||"Client Name"})]}),y.jsx("div",{className:"h-8 w-px bg-slate-800"}),y.jsxs("div",{className:"flex-1",children:[y.jsx("label",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest block mb-0.5",children:"Scenario Name"}),y.jsx("input",{value:s.name,onChange:K=>z("name",K.target.value),className:"bg-transparent border-none p-0 text-base font-medium text-white placeholder-slate-600 w-full outline-none focus:ring-0",placeholder:"Scenario Name"})]}),y.jsx("div",{className:"h-8 w-px bg-slate-800"}),y.jsxs("div",{className:"min-w-[180px] text-right",children:[y.jsxs("div",{className:"flex items-center justify-end gap-1.5 text-xs text-indigo-400 font-medium mb-0.5",children:[y.jsx(qf,{size:12}),s.isAddressTBD?"TBD":s.propertyAddress||"No Address"]}),y.jsxs("div",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide",children:["Updated ",Se(s.lastUpdated)]})]})]})]}),y.jsxs("div",{className:"flex gap-3 pl-6 border-l border-slate-800 ml-6",children:[y.jsxs("button",{onClick:qe,className:"flex items-center gap-2 px-4 py-2 text-indigo-300 bg-indigo-900/30 hover:bg-indigo-900/50 rounded-lg transition-colors text-xs font-bold uppercase tracking-wide border border-indigo-500/30",children:[y.jsx(gT,{size:16})," AI Review"]}),y.jsxs("button",{onClick:()=>j(!0),className:"flex items-center gap-2 px-4 py-2 text-slate-300 bg-slate-900 hover:bg-slate-800 rounded-lg transition-colors text-xs font-bold uppercase tracking-wide border border-slate-700",children:[y.jsx(ST,{size:16})," Pre-Approval"]}),y.jsx("button",{onClick:()=>B(!0),className:"flex items-center gap-2 px-3 py-2 text-slate-500 hover:text-white hover:bg-slate-800 rounded-lg transition-colors",title:"History",children:y.jsx(AT,{size:20})}),y.jsxs("button",{onClick:Qe,className:"flex items-center gap-2 px-5 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-500 shadow-lg shadow-indigo-900/20 transition-all transform hover:-translate-y-0.5 text-xs font-bold uppercase tracking-wide",children:[y.jsx(nb,{size:16})," Log Update"]})]})]}),y.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col lg:flex-row print:hidden",children:[y.jsx("div",{className:"flex-1 overflow-y-auto p-4 scrollbar-hide",children:y.jsxs("div",{className:"max-w-3xl mx-auto space-y-4 pb-8",children:[y.jsxs("div",{className:"flex bg-white rounded-xl p-1.5 shadow-sm border border-slate-200 mb-6 sticky top-0 z-20",children:[y.jsx("button",{onClick:()=>f("loan"),className:`flex-1 py-2 px-4 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all ${u==="loan"?"bg-slate-900 text-white shadow-md":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:"Loan"}),y.jsx("button",{onClick:()=>f("costs"),className:`flex-1 py-2 px-4 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all ${u==="costs"?"bg-slate-900 text-white shadow-md":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:"Costs"}),y.jsx("button",{onClick:()=>f("advanced"),className:`flex-1 py-2 px-4 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all ${u==="advanced"?"bg-slate-900 text-white shadow-md":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:"Assistance"}),y.jsx("button",{onClick:()=>f("income"),className:`flex-1 py-2 px-4 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all ${u==="income"?"bg-slate-900 text-white shadow-md":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:"Income"})]}),u==="loan"&&y.jsxs(y.Fragment,{children:[y.jsx(kM,{errors:g}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-fadeIn",children:[y.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[y.jsxs("h3",{className:"flex items-center gap-2 text-slate-900 font-bold mb-4 text-sm uppercase tracking-wide border-b border-slate-100 pb-2",children:[y.jsx(vT,{size:16,className:"text-slate-400"})," Property Profile"]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-2 uppercase tracking-wide",children:"Transaction Type"}),y.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-lg",children:[y.jsx("button",{onClick:()=>z("transactionType","Purchase"),className:`flex-1 py-2 px-4 text-xs font-bold uppercase rounded-md transition-all ${s.transactionType==="Purchase"?"bg-white shadow text-indigo-700 ring-1 ring-black/5":"text-slate-500 hover:text-slate-700"}`,children:"Purchase"}),y.jsx("button",{onClick:()=>z("transactionType","Refinance"),className:`flex-1 py-2 px-4 text-xs font-bold uppercase rounded-md transition-all ${s.transactionType==="Refinance"?"bg-white shadow text-indigo-700 ring-1 ring-black/5":"text-slate-500 hover:text-slate-700"}`,children:"Refinance"})]})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[y.jsx("label",{className:tn,children:"Address"}),y.jsx(Au,{checked:s.isAddressTBD,onChange:K=>z("isAddressTBD",K),label:"TBD"})]}),y.jsxs("div",{className:Wt,children:[y.jsx("div",{className:pr,children:y.jsx(qf,{size:16,className:`${s.isAddressTBD?"text-slate-300":"text-slate-400"}`})}),y.jsx("input",{type:"text",value:s.isAddressTBD?"To Be Determined":s.propertyAddress,disabled:s.isAddressTBD,onChange:K=>z("propertyAddress",K.target.value),className:`w-full px-4 py-2 text-sm outline-none bg-transparent font-medium ${s.isAddressTBD?"text-slate-400 italic cursor-not-allowed":"text-slate-900"}`})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:tn,children:s.transactionType==="Purchase"?"Purchase Price":"Property Value"}),y.jsxs("div",{className:Wt,children:[y.jsx("div",{className:pr,children:"$"}),y.jsx(nn,{value:s.purchasePrice||0,onChangeValue:K=>z("purchasePrice",K),className:"h-full px-4 text-sm text-slate-900 font-medium"})]})]}),s.transactionType==="Purchase"?y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:tn,children:"Down Pmt ($)"}),y.jsxs("div",{className:Wt,children:[y.jsx("div",{className:pr,children:"$"}),y.jsx(nn,{value:s.downPaymentAmount||0,onChangeValue:K=>z("downPaymentAmount",K),className:"h-full px-4 text-sm text-slate-900 font-medium"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:tn,children:"Down Pmt (%)"}),y.jsxs("div",{className:Wt,children:[y.jsx(_i,{value:s.downPaymentPercent,onChange:K=>z("downPaymentPercent",K),step:"0.01",precision:2,className:"h-full pl-4 pr-4 text-sm text-slate-900 font-medium text-right"}),y.jsx("div",{className:zs,children:"%"})]})]})]}):y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:tn,children:"Cash Out ($)"}),y.jsxs("div",{className:Wt,children:[y.jsx("div",{className:pr,children:"$"}),y.jsx(nn,{value:s.downPaymentAmount||0,onChangeValue:K=>z("downPaymentAmount",K),className:"h-full px-4 text-sm text-slate-900 font-medium"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:tn,children:"Loan Amount"}),y.jsxs("div",{className:Wt,children:[y.jsx("div",{className:pr,children:"$"}),y.jsx(nn,{value:(s.purchasePrice||0)-(s.downPaymentAmount||0),onChangeValue:K=>{const ie=(s.purchasePrice||0)-K;z("downPaymentAmount",ie)},className:"h-full px-4 text-sm text-slate-900 font-medium"})]})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:tn,children:"Property Taxes (Yearly)"}),y.jsxs("div",{className:Wt,children:[y.jsx("div",{className:pr,children:"$"}),y.jsx(nn,{value:s.propertyTaxYearly||0,onChangeValue:K=>z("propertyTaxYearly",K),className:"h-full px-4 text-sm text-slate-900 font-medium"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:tn,children:"Insurance (Yearly)"}),y.jsxs("div",{className:Wt,children:[y.jsx("div",{className:pr,children:"$"}),y.jsx(nn,{value:s.homeInsuranceYearly||0,onChangeValue:K=>z("homeInsuranceYearly",K),className:"h-full px-4 text-sm text-slate-900 font-medium"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:tn,children:"HOA (Monthly)"}),y.jsxs("div",{className:Wt,children:[y.jsx("div",{className:pr,children:"$"}),y.jsx(nn,{value:s.hoaMonthly||0,onChangeValue:K=>z("hoaMonthly",K),className:"h-full px-4 text-sm text-slate-900 font-medium"})]})]})]})]}),y.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm h-fit",children:[y.jsxs("h3",{className:"flex items-center gap-2 text-slate-900 font-bold mb-4 text-sm uppercase tracking-wide border-b border-slate-100 pb-2",children:[y.jsx(cy,{size:16,className:"text-slate-400"})," Loan Details"]}),y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-2 uppercase tracking-wide",children:"Loan Type"}),y.jsx("div",{className:"flex bg-slate-100 p-1 rounded-lg",children:Object.values(Nt).map(K=>y.jsx("button",{onClick:()=>z("loanType",K),className:`flex-1 py-1.5 text-[10px] font-bold uppercase rounded-md transition-all ${s.loanType===K?"bg-white shadow text-indigo-700 ring-1 ring-black/5":"text-slate-500 hover:text-slate-700"}`,children:K===Nt.CONVENTIONAL?"Conv":K===Nt.JUMBO?"Jumbo":K},K))})]}),y.jsxs("div",{className:"mb-3",children:[y.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-2 uppercase tracking-wide",children:"Occupancy Type"}),y.jsx("div",{className:"flex bg-slate-100 p-1 rounded-lg",children:["Primary Residence","Second Home","Investment Property"].map(K=>y.jsx("button",{onClick:()=>z("occupancyType",K),className:`flex-1 py-2 px-2 text-[9px] font-bold uppercase rounded-md transition-all ${(s.occupancyType||"Primary Residence")===K?"bg-white shadow text-indigo-700 ring-1 ring-black/5":"text-slate-500 hover:text-slate-700"}`,children:K==="Primary Residence"?"Primary":K==="Second Home"?"2nd Home":"Investment"},K))})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-2 uppercase tracking-wide",children:"Number of Units"}),y.jsx("div",{className:"grid grid-cols-4 gap-2",children:[1,2,3,4].map(K=>y.jsx("button",{onClick:()=>z("numberOfUnits",K),className:`py-2.5 text-sm font-bold rounded-md transition-all ${(s.numberOfUnits||1)===K?"bg-indigo-600 text-white shadow-lg shadow-indigo-200":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:K},K))})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:tn,children:"Interest Rate"}),y.jsxs("div",{className:Wt,children:[y.jsx(_i,{value:s.interestRate,onChange:K=>z("interestRate",K),step:"0.001",precision:3,className:"h-full pl-4 pr-4 text-sm text-slate-900 text-right font-medium"}),y.jsx("div",{className:zs,children:"%"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:tn,children:"Term (Months)"}),y.jsx("div",{className:Wt,children:y.jsx("input",{type:"number",value:s.loanTermMonths||"",onChange:K=>Q("loanTermMonths",K.target.value),onWheel:q,className:"w-full px-4 py-2 text-sm outline-none bg-transparent text-slate-900 font-medium"})})]})]}),(s.loanType===Nt.CONVENTIONAL||s.loanType===Nt.JUMBO)&&y.jsx("div",{className:`p-4 rounded-lg border transition-all ${s.interestOnly?"bg-amber-50 border-amber-200":"bg-slate-50 border-slate-100"}`,children:y.jsx(Au,{checked:s.interestOnly,onChange:K=>z("interestOnly",K),label:"Interest Only Loan",warning:"Payment covers interest only."})}),s.loanType===Nt.FHA&&y.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[y.jsxs("div",{className:"flex justify-between items-center mb-3",children:[y.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider",children:"FHA Details"}),y.jsx("span",{className:"text-[10px] bg-white border border-slate-200 text-slate-700 px-2 py-0.5 rounded font-bold",children:a.ltv>95?"LTV > 95%":"LTV  95%"})]}),y.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 mb-2",children:[y.jsx("span",{children:"UFMIP (1.75%)"}),y.jsx("span",{className:"font-mono font-medium text-slate-900",children:ue(a.financedMIP)})]}),y.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600",children:[y.jsxs("span",{className:"flex items-center gap-1",children:["Monthly MIP ",y.jsxs("span",{className:"text-[10px] text-slate-400 font-bold",children:["(",a.miRatePercent.toFixed(2),"%)"]})]}),y.jsx("span",{className:"font-mono font-medium text-slate-900",children:ue(a.monthlyMI)})]})]}),s.loanType===Nt.VA&&y.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[y.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wider mb-3",children:"VA Details"}),y.jsx("label",{className:tn,children:"Funding Fee %"}),y.jsxs("div",{className:`${Wt} mb-4`,children:[y.jsx("input",{type:"number",step:"0.01",value:s.ufmipRate||"",onChange:K=>Q("ufmipRate",K.target.value),onWheel:q,className:"w-full pl-4 pr-4 text-sm text-right outline-none bg-transparent font-medium"}),y.jsx("div",{className:zs,children:"%"})]}),y.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600",children:[y.jsx("span",{children:"Financed Fee"}),y.jsx("span",{className:"font-mono font-medium text-slate-900",children:ue(a.financedMIP)})]})]}),s.loanType===Nt.CONVENTIONAL&&y.jsxs("div",{children:[y.jsx("label",{className:tn,children:"Manual MI Override"}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsxs("div",{className:Wt,children:[y.jsx("div",{className:pr,children:"$"}),y.jsx(nn,{value:a.monthlyMI,onChangeValue:K=>re("dollars",K),className:"h-full px-4 text-sm text-slate-900 font-medium"})]}),y.jsx("span",{className:"text-[9px] text-slate-400 mt-1 block font-bold uppercase tracking-wider ml-0.5",children:"Monthly"})]}),y.jsxs("div",{children:[y.jsxs("div",{className:Wt,children:[y.jsx(_i,{value:a.miRatePercent,onChange:K=>re("rate",K),step:"0.01",precision:3,className:"h-full pl-4 pr-4 text-sm text-slate-900 text-right font-medium"}),y.jsx("div",{className:zs,children:"%"})]}),y.jsx("span",{className:"text-[9px] text-slate-400 mt-1 block font-bold uppercase tracking-wider ml-0.5",children:"Annual Rate"})]})]})]})]}),y.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-100",children:[y.jsxs("div",{className:"flex justify-between items-end",children:[y.jsxs("div",{children:[y.jsx("span",{className:"block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-0.5",children:"Base Loan Amount"}),y.jsx("span",{className:"text-xs font-medium text-slate-500 font-mono",children:ue(a.baseLoanAmount)})]}),y.jsxs("div",{className:"text-right",children:[y.jsx("span",{className:"block text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-1",children:"Total Loan Amount"}),y.jsx("span",{className:"text-xl font-bold text-slate-900 tracking-tight",children:ue(a.totalLoanAmount)})]})]}),a.financedMIP>0&&y.jsxs("div",{className:"text-right text-[10px] text-slate-400 mt-1 font-medium",children:["Includes ",ue(a.financedMIP)," Financed Fee"]})]})]})]})]}),u==="costs"&&y.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm animate-fadeIn",children:[y.jsxs("h3",{className:"flex items-center gap-2 text-slate-900 font-bold mb-6 text-sm uppercase tracking-wide border-b border-slate-100 pb-3",children:[y.jsx(bT,{size:16,className:"text-slate-400"})," Closing Costs & Credits"]}),y.jsxs("div",{className:`mb-8 grid grid-cols-1 md:grid-cols-4 gap-4 ${s.transactionType==="Refinance"?"md:grid-cols-2":""}`,children:[s.transactionType==="Purchase"&&y.jsxs("div",{className:"col-span-1 bg-emerald-50/50 p-4 rounded-lg border border-emerald-100/60 h-28 flex flex-col justify-between",children:[y.jsx("label",{className:"block text-[10px] font-bold text-emerald-800 uppercase tracking-widest ml-0.5",children:"Earnest Money"}),y.jsxs("div",{className:"flex items-center w-full bg-white border border-emerald-200 rounded-lg shadow-sm h-10 overflow-hidden mt-auto",children:[y.jsx("div",{className:"flex items-center justify-center h-full px-3 bg-emerald-50 border-r border-emerald-100 text-emerald-600 text-xs font-bold",children:"$"}),y.jsx(nn,{value:s.earnestMoney||0,onChangeValue:K=>z("earnestMoney",K),className:"h-full px-4 text-sm text-emerald-900 font-medium"})]})]}),s.transactionType==="Purchase"&&y.jsxs("div",{className:"col-span-1 md:col-span-2 bg-indigo-50/50 p-4 rounded-lg border border-indigo-100/60 h-28 flex flex-col justify-between",children:[y.jsxs("div",{className:"flex justify-between items-start",children:[y.jsx("label",{className:"block text-[10px] font-bold text-indigo-800 uppercase tracking-widest ml-0.5",children:"Seller Concessions"}),y.jsx("button",{onClick:()=>o(K=>({...K,showSellerConcessions:!K.showSellerConcessions})),className:`w-8 h-4 rounded-full flex items-center transition-colors px-1 ${s.showSellerConcessions?"bg-indigo-600":"bg-slate-300"}`,title:"Toggle",children:y.jsx("div",{className:`w-2.5 h-2.5 bg-white rounded-full shadow-sm transform transition-transform ${s.showSellerConcessions?"translate-x-3.5":""}`})})]}),s.showSellerConcessions?y.jsxs("div",{className:"flex gap-4 items-end mt-auto",children:[y.jsxs("div",{className:"flex items-center w-40 bg-white border border-indigo-200 rounded-lg shadow-sm h-10 overflow-hidden shrink-0",children:[y.jsx("div",{className:"flex items-center justify-center h-full px-3 bg-indigo-50 border-r border-indigo-100 text-indigo-600 text-xs font-bold",children:"$"}),y.jsx(nn,{value:s.sellerConcessions||0,onChangeValue:K=>z("sellerConcessions",K),className:"h-full px-4 text-sm text-indigo-900 font-medium"})]}),y.jsxs("div",{className:"flex-1 pb-1",children:[y.jsxs("div",{className:"flex justify-between items-end mb-1",children:[y.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-wider ${Le?"text-red-600":"text-indigo-400"}`,children:[a.sellerConcessionsPercent.toFixed(2),"% Used"]}),y.jsxs("span",{className:`text-[10px] font-bold uppercase tracking-wider ${Le?"text-red-600":"text-indigo-300"}`,children:["Max ",ke.toFixed(1),"% / ",ue(a.maxConcessionsAllowed)]})]}),y.jsx("div",{className:"h-1.5 w-full bg-indigo-200/50 rounded-full overflow-hidden",children:y.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${Le?"bg-red-500":"bg-indigo-500"}`,style:{width:`${Math.min(a.sellerConcessionsPercent/ke*100,100)}%`}})})]})]}):y.jsx("div",{className:"h-10 mt-auto w-full bg-slate-200/20 rounded-lg border border-transparent flex items-center justify-center text-xs text-slate-400 italic font-medium",children:"Disabled"})]}),y.jsxs("div",{className:"col-span-1 bg-slate-100/50 p-4 rounded-lg border border-slate-200 h-28 flex flex-col justify-between",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest ml-0.5",children:"Lender Credit"}),y.jsx("button",{onClick:()=>o(K=>({...K,showLenderCredits:!K.showLenderCredits})),className:`w-8 h-4 rounded-full flex items-center transition-colors px-1 ${s.showLenderCredits?"bg-indigo-600":"bg-slate-300"}`,title:"Toggle",children:y.jsx("div",{className:`w-2.5 h-2.5 bg-white rounded-full shadow-sm transform transition-transform ${s.showLenderCredits?"translate-x-3.5":""}`})})]}),y.jsx("div",{className:"h-10 mt-auto flex items-center",children:s.showLenderCredits?y.jsx(PM,{value:s.lenderCredits,onChange:K=>o(ie=>({...ie,lenderCredits:K})),isFixed:s.lenderCreditsMode==="fixed",onToggle:je}):y.jsx("div",{className:"h-full w-full bg-slate-200/20 rounded-lg border border-transparent flex items-center justify-center text-xs text-slate-400 italic font-medium",children:"Disabled"})})]})]}),((Ge=a.warnings)==null?void 0:Ge.excessConcessions)&&y.jsxs("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-100 rounded-lg flex items-start gap-3",children:[y.jsx(Sh,{size:16,className:"text-amber-600 shrink-0 mt-0.5"}),y.jsxs("div",{children:[y.jsx("p",{className:"text-xs font-bold text-amber-800 uppercase tracking-wide",children:"Excess Concessions Warning"}),a.unusedCredits>0&&y.jsxs("p",{className:"text-xs text-amber-700 mt-1",children:["You have ",ue(a.unusedCredits)," in unused credits that exceeds total closing costs."]})]})]}),y.jsx("div",{className:"space-y-8",children:P.map(K=>y.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[y.jsx("div",{className:"bg-slate-50 px-4 py-2 border-b border-slate-200",children:y.jsx("h4",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:K.category})}),y.jsx("div",{className:"divide-y divide-slate-100",children:K.items.map(ie=>y.jsxs("div",{className:"flex items-center gap-4 py-3 px-4 hover:bg-slate-50 transition-colors group",children:[y.jsx("label",{className:"flex-1 text-sm font-medium text-slate-700 group-hover:text-slate-900",children:ie.name}),ie.id==="prepaid-interest"?y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsxs("div",{className:"flex items-center w-24 h-10 bg-white border border-slate-200 rounded-lg overflow-hidden focus-within:ring-1 focus-within:ring-indigo-500",children:[y.jsx("input",{type:"number",value:ie.days??0,onChange:Re=>ye(ie.id,Re.target.value),onWheel:q,className:"w-full pl-3 pr-5 text-right text-sm outline-none bg-transparent font-medium"}),y.jsx("span",{className:"px-3 text-slate-400 text-xs font-bold bg-slate-50 h-full flex items-center border-l border-slate-200",children:"d"})]}),y.jsx("div",{className:"min-w-[5rem] text-right font-mono text-sm text-slate-600 font-medium",children:ue(a.totalLoanAmount*(s.interestRate/100)/365*(ie.days||0))})]}):ie.id==="prepaid-insurance"||ie.id==="tax-reserves"||ie.id==="insurance-reserves"||ie.id==="hoa-prepay"?y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsxs("div",{className:"flex items-center w-24 h-10 bg-white border border-slate-200 rounded-lg overflow-hidden focus-within:ring-1 focus-within:ring-indigo-500",children:[y.jsx("input",{type:"number",value:ie.months??0,onChange:Re=>De(ie.id,Re.target.value),onWheel:q,className:"w-full pl-3 pr-5 text-right text-sm outline-none bg-transparent font-medium"}),y.jsx("span",{className:"px-3 text-slate-400 text-xs font-bold bg-slate-50 h-full flex items-center border-l border-slate-200",children:"mo"})]}),y.jsxs("div",{className:"min-w-[5rem] text-right font-mono text-sm text-slate-600 font-medium",children:[ie.id==="prepaid-insurance"&&ue(s.homeInsuranceYearly/12*(ie.months||0)),ie.id==="tax-reserves"&&ue(s.propertyTaxYearly/12*(ie.months||0)),ie.id==="insurance-reserves"&&ue(s.homeInsuranceYearly/12*(ie.months||0)),ie.id==="hoa-prepay"&&ue(s.hoaMonthly*(ie.months||0))]})]}):y.jsx("div",{className:"flex items-center gap-3",children:y.jsxs("div",{className:"flex items-center w-48 h-10 bg-white border border-slate-200 rounded-lg overflow-hidden focus-within:ring-1 focus-within:ring-indigo-500 transition-all",children:[ie.isFixed?y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"flex items-center justify-center h-full px-3 bg-slate-50 border-r border-slate-200 text-slate-400 text-xs font-bold min-w-[2.5rem]",children:"$"}),y.jsx(nn,{value:ie.amount,onChangeValue:Re=>ve(ie.id,Re),className:"w-full px-3 pr-5 text-right text-sm text-slate-900 font-medium"})]}):y.jsxs(y.Fragment,{children:[y.jsx(_i,{value:ie.amount,onChange:Re=>ve(ie.id,Re),className:"w-full pl-3 pr-5 text-right text-sm outline-none bg-transparent font-medium",precision:3}),y.jsx("div",{className:"flex items-center justify-center h-full px-3 bg-slate-50 border-l border-slate-200 text-slate-400 text-xs font-bold min-w-[2.5rem]",children:"%"})]}),y.jsx("button",{onClick:()=>Ie(ie.id),className:"h-full px-2 border-l border-slate-200 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 transition-colors",title:"Toggle Unit",children:y.jsx(eb,{size:14})})]})})]},ie.id))})]},K.category))}),y.jsxs("div",{className:"mt-8 bg-slate-50 rounded-xl p-6 border border-slate-200",children:[y.jsx("h4",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-4",children:"Closing Costs Summary"}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{className:"flex justify-between items-center text-sm",children:[y.jsx("span",{className:"text-slate-600 font-medium",children:"Total Closing Costs"}),y.jsx("span",{className:"font-bold text-slate-900",children:ue(a.totalClosingCosts)})]}),(a.sellerConcessionsAmount>0||a.lenderCreditsAmount>0)&&y.jsxs("div",{className:"flex justify-between items-center text-sm",children:[y.jsx("span",{className:"text-emerald-600 font-medium",children:"Total Credits (Seller & Lender)"}),y.jsxs("span",{className:"font-bold text-emerald-600",children:["-",ue(a.sellerConcessionsAmount+a.lenderCreditsAmount)]})]}),y.jsxs("div",{className:"pt-3 border-t border-slate-200 flex justify-between items-end",children:[y.jsx("span",{className:"text-xs font-bold text-slate-700 uppercase tracking-wide",children:"Net Closing Costs"}),y.jsx("span",{className:"text-2xl font-black text-slate-900 tracking-tight",children:ue(a.netClosingCosts)})]})]})]})]}),u==="advanced"&&y.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[y.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[y.jsxs("div",{className:"flex justify-between items-start mb-6 border-b border-slate-100 pb-3",children:[y.jsxs("h3",{className:"flex items-center gap-2 text-slate-900 font-bold text-sm uppercase tracking-wide",children:[y.jsx(FT,{size:16,className:"text-slate-400"})," Temporary Buydown"]}),y.jsx(Au,{checked:s.buydown.active,onChange:K=>o(ie=>({...ie,buydown:{...ie.buydown,active:K}})),label:"Enable Buydown"})]}),y.jsxs("div",{className:`space-y-5 transition-all ${s.buydown.active?"":"opacity-50 pointer-events-none"}`,children:[y.jsxs("div",{children:[y.jsx("label",{className:tn,children:"Buydown Type"}),y.jsx("div",{className:"flex bg-slate-100 p-1 rounded-lg",children:["2-1","1-0","1-1","3-2-1"].map(K=>y.jsx("button",{onClick:()=>o(ie=>({...ie,buydown:{...ie.buydown,type:K}})),className:`flex-1 py-1.5 text-xs font-bold uppercase rounded-md transition-all ${s.buydown.type===K?"bg-white shadow text-indigo-700 ring-1 ring-black/5":"text-slate-500 hover:text-slate-700"}`,children:K},K))})]}),s.buydown.active&&a.buydownSchedule&&y.jsx("div",{className:"bg-slate-50 rounded-lg border border-slate-200 overflow-hidden",children:y.jsxs("table",{className:"w-full text-sm",children:[y.jsx("thead",{children:y.jsxs("tr",{className:"bg-slate-100 border-b border-slate-200 text-[10px] font-bold text-slate-500 uppercase tracking-wider text-left",children:[y.jsx("th",{className:"py-2 px-4",children:"Year"}),y.jsx("th",{className:"py-2 px-4",children:"Rate"}),y.jsx("th",{className:"py-2 px-4 text-right",children:"Payment"}),y.jsx("th",{className:"py-2 px-4 text-right",children:"Subsidy"})]})}),y.jsx("tbody",{className:"divide-y divide-slate-100",children:a.buydownSchedule.map(K=>y.jsxs("tr",{children:[y.jsxs("td",{className:"py-2 px-4 font-medium text-slate-700",children:["Year ",K.year]}),y.jsxs("td",{className:"py-2 px-4 font-bold text-indigo-600",children:[K.rate.toFixed(3),"%"]}),y.jsx("td",{className:"py-2 px-4 text-right font-medium text-slate-900",children:ue(K.fullPayment)}),y.jsxs("td",{className:"py-2 px-4 text-right font-mono text-emerald-600",children:[ue(K.subsidy),"/mo"]})]},K.year))}),y.jsx("tfoot",{className:"bg-emerald-50/50 border-t border-emerald-100",children:y.jsxs("tr",{children:[y.jsx("td",{colSpan:3,className:"py-2 px-4 text-[10px] font-bold text-emerald-800 uppercase tracking-wider",children:"Total Subsidy Cost"}),y.jsx("td",{className:"py-2 px-4 text-right font-bold text-emerald-700",children:ue(a.buydownCost)})]})})]})})]})]}),y.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm",children:[y.jsxs("div",{className:"flex justify-between items-start mb-6 border-b border-slate-100 pb-3",children:[y.jsxs("h3",{className:"flex items-center gap-2 text-slate-900 font-bold text-sm uppercase tracking-wide",children:[y.jsx(jT,{size:16,className:"text-slate-400"})," Down Payment Assistance"]}),y.jsx(Au,{checked:s.dpa.active,onChange:K=>o(ie=>({...ie,dpa:{...ie.dpa,active:K}})),label:"Enable DPA"})]}),y.jsxs("div",{className:`space-y-5 transition-all ${s.dpa.active?"":"opacity-50 pointer-events-none"}`,children:[y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:tn,children:"Assistance Amount ($)"}),y.jsxs("div",{className:Wt,children:[y.jsx("div",{className:pr,children:"$"}),y.jsx(nn,{value:s.dpa.amount||0,onChangeValue:K=>ce("amount",K),className:"h-full px-4 text-sm text-slate-900 font-medium"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:tn,children:"Assistance Amount (%)"}),y.jsxs("div",{className:Wt,children:[y.jsx(_i,{value:s.dpa.percent||0,onChange:K=>ce("percent",K),className:"h-full pl-4 pr-4 text-right text-sm text-slate-900 font-medium"}),y.jsx("div",{className:zs,children:"%"})]})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:tn,children:"Interest Rate"}),y.jsxs("div",{className:Wt,children:[y.jsx(_i,{value:s.dpa.rate||0,onChange:K=>o(ie=>({...ie,dpa:{...ie.dpa,rate:K}})),step:"0.125",precision:3,className:"h-full pl-4 pr-4 text-right text-sm text-slate-900 font-medium"}),y.jsx("div",{className:zs,children:"%"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:tn,children:"Term (Months)"}),y.jsx("div",{className:Wt,children:y.jsx("input",{type:"number",value:s.dpa.termMonths||"",onChange:K=>o(ie=>({...ie,dpa:{...ie.dpa,termMonths:parseFloat(K.target.value)}})),onWheel:q,className:"w-full px-4 py-2 text-sm outline-none bg-transparent font-medium"})})]})]}),y.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200",children:[y.jsx(Au,{checked:s.dpa.isDeferred,onChange:K=>o(ie=>({...ie,dpa:{...ie.dpa,isDeferred:K}})),label:"Deferred Payment (Silent Second)"}),!s.dpa.isDeferred&&y.jsxs("div",{className:"mt-3 flex justify-between items-center text-sm",children:[y.jsx("span",{className:"text-slate-500 font-medium",children:"Monthly DPA Payment"}),y.jsx("span",{className:"font-mono font-bold text-slate-900",children:ue(a.monthlyDPAPayment)})]})]})]})]})]}),u==="income"&&y.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm animate-fadeIn",children:[y.jsxs("h3",{className:"flex items-center gap-2 text-slate-900 font-bold mb-6 text-sm uppercase tracking-wide border-b border-slate-100 pb-3",children:[y.jsx(tb,{size:16,className:"text-slate-400"})," Income & Eligibility"]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[y.jsxs("div",{className:"space-y-4",children:[y.jsx("h4",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-2",children:"Monthly Income"}),y.jsxs("div",{children:[y.jsx("label",{className:tn,children:"Borrower 1 Income"}),y.jsxs("div",{className:Wt,children:[y.jsx("div",{className:pr,children:"$"}),y.jsx(nn,{value:((Ze=s.income)==null?void 0:Ze.borrower1)||0,onChangeValue:K=>o(ie=>({...ie,income:{...ie.income,borrower1:K}})),className:"h-full px-4 text-sm text-slate-900 font-medium"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:tn,children:"Borrower 2 Income"}),y.jsxs("div",{className:Wt,children:[y.jsx("div",{className:pr,children:"$"}),y.jsx(nn,{value:((ot=s.income)==null?void 0:ot.borrower2)||0,onChangeValue:K=>o(ie=>({...ie,income:{...ie.income,borrower2:K}})),className:"h-full px-4 text-sm text-slate-900 font-medium"})]})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex justify-between items-end mb-1.5",children:[y.jsx("label",{className:tn,children:"Rental Income / ADU"}),y.jsxs("span",{className:"text-[10px] font-bold text-emerald-600 bg-emerald-50 px-1.5 py-0.5 rounded border border-emerald-100",children:["Used: ",ue(a.income.effectiveRental)]})]}),y.jsxs("div",{className:Wt,children:[y.jsx("div",{className:pr,children:"$"}),y.jsx(nn,{value:((at=s.income)==null?void 0:at.rental)||0,onChangeValue:K=>o(ie=>({...ie,income:{...ie.income,rental:K}})),className:"h-full px-4 text-sm text-slate-900 font-medium"})]}),y.jsx("p",{className:"text-[10px] text-slate-400 mt-1 italic",children:"75% vacancy factor applied automatically"})]})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsx("h4",{className:"text-[10px] font-bold text-red-500 uppercase tracking-widest mb-2",children:"Monthly Debts"}),y.jsxs("div",{children:[y.jsx("label",{className:tn,children:"Total Monthly Liabilities"}),y.jsxs("div",{className:Wt,children:[y.jsx("div",{className:pr,children:"$"}),y.jsx(nn,{value:((vt=s.debts)==null?void 0:vt.monthlyTotal)||0,onChangeValue:K=>o(ie=>({...ie,debts:{...ie.debts,monthlyTotal:K}})),className:"h-full px-4 text-sm text-slate-900 font-medium"})]}),y.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"Credit cards, auto loans, student loans, etc."})]}),y.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 mt-6",children:[y.jsx("h5",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-3",children:"DTI Ratios"}),y.jsxs("div",{className:"space-y-2",children:[y.jsxs("div",{className:"flex justify-between text-sm",children:[y.jsx("span",{className:"text-slate-600",children:"Front-End (Housing)"}),y.jsxs("span",{className:`font-bold ${a.dti.frontEnd>47?"text-red-600":"text-slate-900"}`,children:[a.dti.frontEnd.toFixed(2),"%"]})]}),y.jsxs("div",{className:"flex justify-between text-sm",children:[y.jsx("span",{className:"text-slate-600",children:"Back-End (Total)"}),y.jsxs("span",{className:`font-bold ${a.dti.backEnd>50?"text-red-600":"text-slate-900"}`,children:[a.dti.backEnd.toFixed(2),"%"]})]})]})]})]})]}),y.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-100",children:[y.jsxs("h3",{className:"flex items-center gap-2 text-slate-900 font-bold mb-6 text-sm uppercase tracking-wide",children:[y.jsx(cy,{size:16,className:"text-slate-400"})," Qualification Breakdown"]}),y.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[y.jsxs("div",{className:`p-5 rounded-xl border ${a.mathBreakdown.convPass?"bg-emerald-50/50 border-emerald-100":"bg-red-50/50 border-red-100"}`,children:[y.jsx("h4",{className:`text-xs font-bold uppercase tracking-widest mb-3 ${a.mathBreakdown.convPass?"text-emerald-800":"text-red-800"}`,children:"Conventional Analysis"}),y.jsx("div",{className:"space-y-1.5 font-mono text-xs text-slate-600",children:a.mathBreakdown.conv.map((K,ie)=>y.jsxs("div",{className:"flex gap-2",children:[y.jsx("span",{className:"opacity-50 select-none",children:""}),y.jsx("span",{children:K})]},ie))})]}),y.jsxs("div",{className:`p-5 rounded-xl border ${a.mathBreakdown.fhaPass?"bg-emerald-50/50 border-emerald-100":"bg-red-50/50 border-red-100"}`,children:[y.jsx("h4",{className:`text-xs font-bold uppercase tracking-widest mb-3 ${a.mathBreakdown.fhaPass?"text-emerald-800":"text-red-800"}`,children:"FHA Analysis"}),y.jsx("div",{className:"space-y-1.5 font-mono text-xs text-slate-600",children:a.mathBreakdown.fha.map((K,ie)=>y.jsxs("div",{className:"flex gap-2",children:[y.jsx("span",{className:"opacity-50 select-none",children:""}),y.jsx("span",{children:K})]},ie))})]})]})]})]})]})}),y.jsx("div",{className:"w-full lg:w-[380px] bg-white border-l border-slate-200 overflow-y-auto print:w-full print:border-none",children:y.jsxs("div",{className:"p-4 space-y-4",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1",children:"Total Monthly Payment"}),y.jsxs("div",{className:"flex justify-between items-end",children:[y.jsx("div",{className:"text-5xl font-black text-emerald-600 tracking-tight leading-none",children:ue(a.totalMonthlyPayment)}),y.jsxs("div",{className:"flex flex-col items-end gap-1.5 mb-1.5",children:[y.jsxs("div",{className:`flex items-center gap-2 text-xs font-bold px-2 py-1 rounded bg-slate-50 border ${a.dti.frontEnd>47?"text-red-600 border-red-100":"text-emerald-600 border-emerald-100"}`,children:[y.jsx("span",{className:"text-slate-400 uppercase text-[9px] font-semibold",children:"FE"}),y.jsxs("span",{children:[a.dti.frontEnd.toFixed(1),"%"]})]}),y.jsxs("div",{className:`flex items-center gap-2 text-xs font-bold px-2 py-1 rounded bg-slate-50 border ${a.dti.backEnd>50?"text-red-600 border-red-100":"text-emerald-600 border-emerald-100"}`,children:[y.jsx("span",{className:"text-slate-400 uppercase text-[9px] font-semibold",children:"BE"}),y.jsxs("span",{children:[a.dti.backEnd.toFixed(1),"%"]})]})]})]}),s.buydown.active&&y.jsx("div",{className:"text-sm font-medium text-slate-400 mt-1 line-through decoration-slate-300",children:ue(a.baseMonthlyPayment)}),y.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-100/50 space-y-2",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"Total Loan Amount"}),y.jsx("span",{className:"text-sm font-bold text-slate-600 font-mono",children:ue(a.totalLoanAmount)})]}),s.transactionType==="Refinance"?y.jsx("div",{className:"bg-indigo-50 rounded-lg p-3 border border-indigo-100",children:y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("span",{className:"text-[10px] font-bold text-indigo-700 uppercase tracking-wider",children:"Loan-to-Value (LTV)"}),y.jsxs("span",{className:"text-lg font-black text-indigo-600",children:[a.ltv.toFixed(2),"%"]})]})}):y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"LTV"}),y.jsxs("span",{className:"text-sm font-bold text-slate-600 font-mono",children:[a.ltv.toFixed(2),"%"]})]})]})]}),y.jsxs("div",{className:"border-t border-slate-100 pt-4",children:[y.jsx("h3",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-3",children:"Monthly Breakdown"}),y.jsxs("div",{className:"space-y-2 text-base",children:[y.jsxs("div",{className:"flex justify-between items-center text-slate-600",children:[y.jsx("span",{children:"Principal & Interest"}),y.jsx("span",{className:"font-bold text-slate-900",children:ue(a.monthlyPrincipalAndInterest)})]}),y.jsxs("div",{className:"flex justify-between items-center text-slate-600",children:[y.jsx("span",{children:"Property Taxes"}),y.jsx("span",{className:"font-bold text-slate-900",children:ue(a.monthlyTax)})]}),y.jsxs("div",{className:"flex justify-between items-center text-slate-600",children:[y.jsx("span",{children:"Home Insurance"}),y.jsx("span",{className:"font-bold text-slate-900",children:ue(a.monthlyInsurance)})]}),y.jsxs("div",{className:"flex justify-between items-center text-slate-600",children:[y.jsx("span",{children:"Mortgage Insurance"}),y.jsx("span",{className:"font-bold text-slate-900",children:ue(a.monthlyMI)})]}),y.jsxs("div",{className:"flex justify-between items-center text-slate-600",children:[y.jsx("span",{children:"HOA Dues"}),y.jsx("span",{className:"font-bold text-slate-900",children:ue(a.monthlyHOA)})]}),s.dpa.active&&!s.dpa.isDeferred&&y.jsxs("div",{className:"flex justify-between items-center text-indigo-600 border-t border-indigo-50 pt-2 mt-2",children:[y.jsx("span",{children:"DPA Loan (2nd)"}),y.jsx("span",{className:"font-bold",children:ue(a.monthlyDPAPayment)})]}),s.buydown.active&&y.jsxs("div",{className:"flex justify-between items-center text-emerald-600 border-t border-emerald-50 pt-2 mt-2",children:[y.jsx("span",{children:"Buydown Subsidy (Yr 1)"}),y.jsxs("span",{className:"font-bold",children:["-",ue(a.baseMonthlyPayment-a.totalMonthlyPayment)]})]})]})]}),y.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-200 shadow-sm mt-4",children:[y.jsx("h3",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-3",children:s.transactionType==="Purchase"?"Cash to Close Statement":"Cash Required Statement"}),y.jsxs("div",{className:"space-y-2 mb-3 text-sm",children:[y.jsxs("div",{className:"flex justify-between text-slate-600",children:[y.jsx("span",{children:s.transactionType==="Purchase"?"Down Payment":"Cash Out"}),y.jsx("span",{className:"font-bold text-slate-900",children:ue(a.downPaymentRequired)})]}),y.jsxs("div",{className:"flex justify-between text-slate-600",children:[y.jsx("span",{children:"Closing Costs (Net)"}),y.jsx("span",{className:"font-bold text-slate-900",children:ue(a.netClosingCosts)})]}),s.dpa.active&&y.jsxs("div",{className:"flex justify-between text-emerald-600",children:[y.jsx("span",{children:"DPA Funding"}),y.jsxs("span",{className:"font-bold",children:["-",ue(s.dpa.amount)]})]})]}),s.transactionType==="Purchase"&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"border-t border-slate-300 pt-2 mb-3 flex justify-between items-center",children:[y.jsx("span",{className:"text-xs font-bold text-slate-600 uppercase",children:"Subtotal"}),y.jsx("span",{className:"text-lg font-bold text-slate-900",children:ue(a.downPaymentRequired+a.netClosingCosts-(s.dpa.active?s.dpa.amount:0))})]}),y.jsx("div",{className:"mb-4",children:y.jsxs("div",{className:"flex justify-between text-emerald-600 text-sm",children:[y.jsx("span",{children:"Earnest Money"}),y.jsxs("span",{className:"font-bold",children:["-",ue(a.earnestMoney)]})]})})]}),y.jsxs("div",{className:"border-t border-slate-200 pt-3 flex justify-between items-end",children:[y.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Cash Required"}),y.jsx("span",{className:`text-3xl font-black tracking-tight ${a.cashToClose<0?"text-emerald-600":"text-slate-900"}`,children:ue(a.cashToClose)})]}),a.cashToClose<0&&y.jsx("div",{className:"text-right text-[10px] font-bold text-emerald-600 mt-1 uppercase tracking-wider",children:"Refund to Borrower"})]})]})}),y.jsx("div",{className:"w-full lg:w-[320px] bg-slate-50 border-l border-slate-200 overflow-y-auto print:hidden",children:y.jsxs("div",{className:"p-4",children:[y.jsxs("h3",{className:"flex items-center gap-2 text-slate-900 font-bold mb-4 text-sm uppercase tracking-wide",children:[y.jsx("svg",{className:"w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Notes"]}),y.jsx("textarea",{ref:Ce,value:s.notes||"",onChange:K=>{z("notes",K.target.value)},placeholder:`Add notes about this scenario...

 Client preferences
 Property details
 Follow-up items
 Special considerations`,className:"w-full min-h-[150px] p-4 text-sm text-slate-700 bg-white border border-slate-200 rounded-lg resize-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all overflow-hidden",style:{maxHeight:"calc(100vh - 200px)",overflowY:"auto"}}),y.jsx("p",{className:"text-[10px] text-slate-400 mt-2 italic",children:"Auto-saves as you type"})]})})]}),y.jsxs("footer",{className:"bg-white border-t border-slate-200 py-3 px-8 flex justify-between items-center shrink-0",children:[y.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-semibold",children:"MortgagePro  2025"}),y.jsx("p",{className:"text-[10px] text-slate-300 font-medium",children:"v1.0.5"})]}),y.jsx(hs,{isOpen:T,onClose:()=>M(!1),title:"AI Scenario Analysis",maxWidth:"max-w-2xl",children:b?y.jsxs("div",{className:"py-12 flex flex-col items-center justify-center text-slate-400 gap-4",children:[y.jsx("div",{className:"w-8 h-8 border-2 border-indigo-600 border-t-transparent rounded-full animate-spin"}),y.jsx("p",{className:"text-xs font-bold uppercase tracking-widest animate-pulse",children:"Analyzing Loan Structure..."})]}):y.jsxs("div",{className:"prose prose-sm prose-slate max-w-none",children:[_.split(`
`).map((K,ie)=>y.jsx("p",{className:`mb-2 ${K.startsWith("**")?"font-bold text-slate-800":""}`,children:K.replace(/\*\*/g,"")},ie)),y.jsx("div",{className:"mt-8 pt-4 border-t border-slate-100 text-[10px] text-slate-400 font-medium text-center",children:"AI analysis is for informational purposes only and does not constitute a formal underwriting decision."})]})}),y.jsx(hs,{isOpen:H,onClose:()=>B(!1),title:"Scenario History",maxWidth:"max-w-xl",children:y.jsx("div",{className:"space-y-4",children:s.history.length===0?y.jsx("p",{className:"text-center text-slate-400 italic py-8",children:"No history recorded yet."}):s.history.slice().reverse().map(K=>y.jsxs("div",{className:"border border-slate-100 rounded-lg p-4 hover:bg-slate-50 transition-colors flex justify-between items-start group",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx(wT,{size:14,className:"text-indigo-500"}),y.jsx("span",{className:"text-xs font-bold text-slate-700",children:Se(K.timestamp)})]}),y.jsx("p",{className:"text-sm font-medium text-slate-900 mb-2",children:K.note||"Update"}),y.jsx("ul",{className:"text-xs text-slate-500 space-y-0.5 list-disc pl-4",children:K.changes.map((ie,Re)=>y.jsx("li",{children:ie},Re))})]}),y.jsx("button",{onClick:()=>ge(K),className:"opacity-0 group-hover:opacity-100 px-3 py-1 bg-white border border-slate-200 shadow-sm rounded text-xs font-bold text-indigo-600 hover:text-indigo-800 transition-all",children:"Restore"})]},K.id))})}),y.jsx(hs,{isOpen:U,onClose:()=>Y(!1),title:"Log Update",maxWidth:"max-w-md",children:y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-100",children:[y.jsx("h4",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2",children:"Detected Changes"}),y.jsx("ul",{className:"text-xs text-slate-600 space-y-1 list-disc pl-4",children:ae.map((K,ie)=>y.jsx("li",{children:K},ie))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1.5",children:"Note (Optional)"}),y.jsx("textarea",{value:we,onChange:K=>X(K.target.value),className:"w-full border border-slate-200 rounded-lg p-3 text-sm focus:ring-1 focus:ring-indigo-500 outline-none min-h-[80px]",placeholder:"e.g. Updated interest rate based on today's pricing..."})]}),y.jsx("button",{onClick:be,className:"w-full h-10 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-lg shadow-md transition-colors text-xs uppercase tracking-wide",children:"Save Version"})]})}),y.jsx(hs,{isOpen:D,onClose:()=>j(!1),title:"Pre-Approval Letter Options",children:y.jsxs("div",{className:"space-y-6",children:[y.jsx("p",{className:"text-sm text-slate-600",children:"Choose how to generate the pre-approval letter:"}),y.jsx("button",{onClick:async()=>{try{const K={buyer1:s.clientName,buyer2:"",purchasePrice:"TBD",loanAmount:"TBD",downPayment:`${s.downPaymentPercent}%`,loanType:s.loanType,letterDate:new Date,status:"Pre-Approval",validDays:60,notes:""},{pdfUrl:ie,filename:Re}=await B5(K);V(ie),le(Re),j(!1),ne(!0)}catch(K){console.error("Error generating PDF preview:",K),alert("Error generating pre-approval letter. Please try again.")}},className:"w-full p-6 bg-white border-2 border-slate-200 rounded-xl hover:border-indigo-500 hover:shadow-lg transition-all text-left group",children:y.jsxs("div",{className:"flex items-start gap-4",children:[y.jsx("div",{className:"w-12 h-12 rounded-lg bg-slate-100 group-hover:bg-indigo-100 flex items-center justify-center shrink-0 transition-colors",children:y.jsx("svg",{className:"w-6 h-6 text-slate-600 group-hover:text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),y.jsxs("div",{className:"flex-1",children:[y.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2 group-hover:text-indigo-600 transition-colors",children:"Purchase Price TBD"}),y.jsxs("p",{className:"text-sm text-slate-600 mb-3",children:['Generate letter without specific purchase price or loan amount. Shows "TBD" with down payment percentage (',s.downPaymentPercent,"%) from scenario."]}),y.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold text-slate-500",children:[y.jsx("span",{className:"bg-slate-100 px-2 py-1 rounded",children:"Purchase Price: TBD"}),y.jsx("span",{className:"bg-slate-100 px-2 py-1 rounded",children:"Loan Amount: TBD"}),y.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-2 py-1 rounded",children:["Down Payment: ",s.downPaymentPercent,"%"]})]})]})]})}),y.jsx("button",{onClick:async()=>{try{const K={buyer1:s.clientName,buyer2:"",purchasePrice:s.purchasePrice,loanAmount:s.purchasePrice-s.downPaymentAmount,downPayment:`${s.downPaymentPercent}%`,loanType:s.loanType,letterDate:new Date,status:"Pre-Approval",validDays:60,notes:""},{pdfUrl:ie,filename:Re}=await B5(K);V(ie),le(Re),j(!1),ne(!0)}catch(K){console.error("Error generating PDF preview:",K),alert("Error generating pre-approval letter. Please try again.")}},className:"w-full p-6 bg-white border-2 border-slate-200 rounded-xl hover:border-indigo-500 hover:shadow-lg transition-all text-left group",children:y.jsxs("div",{className:"flex items-start gap-4",children:[y.jsx("div",{className:"w-12 h-12 rounded-lg bg-slate-100 group-hover:bg-indigo-100 flex items-center justify-center shrink-0 transition-colors",children:y.jsx("svg",{className:"w-6 h-6 text-slate-600 group-hover:text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),y.jsxs("div",{className:"flex-1",children:[y.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2 group-hover:text-indigo-600 transition-colors",children:"Use Scenario Values"}),y.jsx("p",{className:"text-sm text-slate-600 mb-3",children:"Generate letter with exact values from current scenario. Shows specific purchase price and loan amount."}),y.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold text-slate-500",children:[y.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-2 py-1 rounded",children:["Purchase: ",ue(s.purchasePrice)]}),y.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-2 py-1 rounded",children:["Loan: ",ue(s.purchasePrice-s.downPaymentAmount)]}),y.jsxs("span",{className:"bg-slate-100 px-2 py-1 rounded",children:["Down: ",s.downPaymentPercent,"%"]})]})]})]})})]})}),y.jsx(hs,{isOpen:W,onClose:()=>{ne(!1),O&&(URL.revokeObjectURL(O),V(null))},title:"Pre-Approval Letter Preview",maxWidth:"max-w-6xl",noPadding:!0,children:y.jsxs("div",{className:"flex flex-col h-[85vh]",children:[y.jsx("div",{className:"flex-1 bg-slate-100 overflow-hidden",children:O&&y.jsx("iframe",{src:O,className:"w-full h-full border-0",title:"Pre-Approval Letter Preview"})}),y.jsxs("div",{className:"bg-white border-t border-slate-200 p-4 flex justify-end gap-3 shrink-0",children:[y.jsx("button",{onClick:()=>{ne(!1),O&&(URL.revokeObjectURL(O),V(null))},className:"px-4 py-2 rounded-lg border border-slate-200 text-slate-600 font-bold text-xs uppercase hover:bg-slate-50 transition-colors",children:"Close"}),y.jsxs("button",{onClick:()=>{if(O){const K=document.createElement("a");K.href=O,K.download=he,K.click()}},className:"px-6 py-2 rounded-lg bg-indigo-600 text-white font-bold text-xs uppercase hover:bg-indigo-500 shadow-lg shadow-indigo-200 transition-all flex items-center gap-2",children:[y.jsx(_T,{size:16})," Download PDF"]})]})]})})]})},RM=()=>{const[t,e]=He.useState(""),[n,r]=He.useState(""),[i,s]=He.useState(!1),[o,a]=He.useState("signin"),[l,u]=He.useState(null),[f,p]=He.useState(null),m=async g=>{g.preventDefault(),s(!0),u(null),p(null);try{if(o==="signup"){const{error:S}=await Yi.auth.signUp({email:t,password:n});if(S)throw S;p("Check your email for the confirmation link!")}else{const{error:S}=await Yi.auth.signInWithPassword({email:t,password:n});if(S)throw S}}catch(S){u(S.message)}finally{s(!1)}};return co()?y.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 relative overflow-hidden",children:[y.jsx("div",{className:"absolute top-0 left-0 w-full h-1/2 bg-slate-900 z-0"}),y.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-indigo-600/20 rounded-full blur-3xl z-0"}),y.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-2xl relative z-10 overflow-hidden border border-slate-200",children:[y.jsxs("div",{className:"bg-slate-950 p-8 text-center border-b border-slate-800",children:[y.jsx("div",{className:"w-12 h-12 bg-indigo-600 rounded-lg flex items-center justify-center shadow-lg shadow-indigo-500/30 mx-auto mb-4",children:y.jsx(fy,{size:24,className:"text-white"})}),y.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"MortgagePro Cloud"}),y.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Secure Workspace Access"})]}),y.jsxs("div",{className:"p-8",children:[l&&y.jsxs("div",{className:"mb-6 bg-red-50 text-red-600 p-3 rounded-lg text-xs font-bold border border-red-100 flex items-center gap-2",children:[y.jsx(Bf,{size:16})," ",l]}),f&&y.jsxs("div",{className:"mb-6 bg-emerald-50 text-emerald-600 p-3 rounded-lg text-xs font-bold border border-emerald-100 flex items-center gap-2",children:[y.jsx(fy,{size:16})," ",f]}),y.jsxs("form",{onSubmit:m,className:"space-y-5",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5",children:"Email Address"}),y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:y.jsx(PT,{size:16,className:"text-slate-400 group-focus-within:text-indigo-500 transition-colors"})}),y.jsx("input",{type:"email",required:!0,value:t,onChange:g=>e(g.target.value),className:"w-full pl-10 pr-4 h-11 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all font-medium text-slate-900 placeholder-slate-400",placeholder:"name@company.com"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5",children:"Password"}),y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:y.jsx(CT,{size:16,className:"text-slate-400 group-focus-within:text-indigo-500 transition-colors"})}),y.jsx("input",{type:"password",required:!0,minLength:6,value:n,onChange:g=>r(g.target.value),className:"w-full pl-10 pr-4 h-11 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all font-medium text-slate-900",placeholder:""})]})]}),y.jsx("button",{type:"submit",disabled:i,className:"w-full h-12 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-lg shadow-lg shadow-indigo-200 transition-all text-sm uppercase tracking-wide flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:i?y.jsx(rv,{size:18,className:"animate-spin"}):y.jsxs(y.Fragment,{children:[o==="signin"?"Sign In":"Create Account"," ",y.jsx(nv,{size:16})]})})]}),y.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-100 text-center",children:[y.jsx("p",{className:"text-xs text-slate-500 font-medium",children:o==="signin"?"Don't have an account?":"Already have an account?"}),y.jsx("button",{onClick:()=>{a(o==="signin"?"signup":"signin"),u(null),p(null)},className:"mt-2 text-indigo-600 font-bold text-xs uppercase tracking-wide hover:underline",children:o==="signin"?"Create an account":"Sign in to existing account"})]})]})]})]}):y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 p-6",children:y.jsxs("div",{className:"max-w-md w-full bg-white border border-slate-200 rounded-xl p-8 shadow-xl text-center",children:[y.jsx("div",{className:"w-16 h-16 bg-amber-50 text-amber-600 rounded-full flex items-center justify-center mx-auto mb-6 border border-amber-100",children:y.jsx(Bf,{size:32})}),y.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Supabase Not Configured"}),y.jsxs("p",{className:"text-sm text-slate-500 mb-6",children:["To enable the cloud login system, you need to create a project at ",y.jsx("strong",{children:"supabase.com"})," and add your ",y.jsx("code",{children:"VITE_SUPABASE_URL"})," and ",y.jsx("code",{children:"VITE_SUPABASE_ANON_KEY"})," to your environment variables."]}),y.jsxs("div",{className:"text-xs bg-slate-900 text-slate-300 p-4 rounded-lg text-left font-mono overflow-x-auto",children:["VITE_SUPABASE_URL=https://xyz.supabase.co",y.jsx("br",{}),"VITE_SUPABASE_ANON_KEY=eyJh..."]})]})})},JS="mortgage_pro_scenarios",Bh=()=>{try{const t=localStorage.getItem(JS);return t?JSON.parse(t):[]}catch(t){return console.error("Local storage error:",t),[]}},Tv=t=>{localStorage.setItem(JS,JSON.stringify(t))},LM=async()=>{if(!co()){const r=Bh();return r.sort((i,s)=>new Date(s.lastUpdated).getTime()-new Date(i.lastUpdated).getTime()),{data:r,error:null}}const{data:t,error:e}=await Yi.from("scenarios").select("content").order("last_updated",{ascending:!1});return e?(console.error("Supabase Load Error:",e),{data:[],error:e}):{data:t.map(r=>r.content),error:null}},A0=async t=>{if(!co()){const r=Bh(),i=r.findIndex(s=>s.id===t.id);return i>=0?r[i]=t:r.push(t),Tv(r),{error:null}}const{data:{user:e}}=await Yi.auth.getUser();if(!e)return{error:"No user logged in"};const{error:n}=await Yi.from("scenarios").upsert({id:t.id,user_id:e.id,client_name:t.clientName,name:t.name,last_updated:t.lastUpdated,content:t});return{error:n}},MM=async t=>{if(!co()){const r=Bh().filter(i=>i.id!==t);return Tv(r),{error:null}}const{error:e}=await Yi.from("scenarios").delete().eq("id",t);return{error:e}},DM=async t=>{if(!co()){const r=Bh().filter(i=>i.clientName!==t);return Tv(r),{error:null}}const{error:e}=await Yi.from("scenarios").delete().eq("client_name",t);return{error:e}},FM=({toast:t,onClose:e})=>{const n={success:y.jsx(nb,{className:"w-5 h-5"}),error:y.jsx(Bf,{className:"w-5 h-5"}),warning:y.jsx(Sh,{className:"w-5 h-5"}),info:y.jsx(TT,{className:"w-5 h-5"})},r={success:"bg-emerald-50 border-emerald-200 text-emerald-800",error:"bg-red-50 border-red-200 text-red-800",warning:"bg-amber-50 border-amber-200 text-amber-800",info:"bg-blue-50 border-blue-200 text-blue-800"};return y.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-lg border-2 shadow-lg ${r[t.type]} animate-slideIn`,children:[y.jsx("div",{className:"shrink-0",children:n[t.type]}),y.jsx("p",{className:"flex-1 text-sm font-medium",children:t.message}),y.jsx("button",{onClick:()=>e(t.id),className:"shrink-0 hover:opacity-70 transition-opacity",children:y.jsx(Vf,{className:"w-4 h-4"})})]})},OM=()=>{const{toasts:t,removeToast:e}=WS();return t.length===0?null:y.jsx("div",{className:"fixed top-4 right-4 z-50 flex flex-col gap-2 max-w-sm w-full pointer-events-none",children:y.jsx("div",{className:"pointer-events-auto space-y-2",children:t.map(n=>y.jsx(FM,{toast:n,onClose:e},n.id))})})},jM=()=>{var j;const[t,e]=He.useState(null),[n,r]=He.useState(!0),[i,s]=He.useState("dashboard"),[o,a]=He.useState(Pr),[l,u]=He.useState([]),[f,p]=He.useState(!1),[m,g]=He.useState(()=>{const O=localStorage.getItem("mortgage_defaults"),V={purchasePrice:Pr.purchasePrice,downPaymentPercent:Pr.downPaymentPercent,interestRate:Pr.interestRate,loanTermMonths:Pr.loanTermMonths,propertyTaxYearly:Pr.propertyTaxYearly,homeInsuranceYearly:Pr.homeInsuranceYearly,hoaMonthly:Pr.hoaMonthly,loanType:Pr.loanType,creditScore:Pr.creditScore};return O?{...V,...JSON.parse(O)}:V}),[S,_]=He.useState(!1),[E,b]=He.useState({clientName:"",address:"",isTBD:!0,transactionType:"Purchase"});He.useEffect(()=>{if(!co()){r(!1);return}Yi.auth.getSession().then(({data:{session:V}})=>{e(V),r(!1)});const{data:{subscription:O}}=Yi.auth.onAuthStateChange((V,he)=>{e(he)});return()=>O.unsubscribe()},[]),He.useEffect(()=>{n||N()},[t,n]);const N=async()=>{p(!0);const{data:O}=await LM(),V=O.map(he=>({...he,transactionType:he.transactionType||"Purchase"}));u(V),p(!1)},T=async()=>{await Yi.auth.signOut(),u([])},M=O=>{g(O),localStorage.setItem("mortgage_defaults",JSON.stringify(O))},U=O=>{b({clientName:O||"",address:"",isTBD:!0,transactionType:"Purchase"}),_(!0)},Y=async()=>{if(!E.clientName)return;const O=new Date().toISOString(),V={...Pr,...m,downPaymentAmount:m.purchasePrice*(m.downPaymentPercent/100),id:crypto.randomUUID(),dateCreated:O,lastUpdated:O,name:"New Scenario",clientName:E.clientName,transactionType:E.transactionType,propertyAddress:E.isTBD?"":E.address,isAddressTBD:E.isTBD};u(he=>[V,...he]),a(V),await A0(V),s("builder"),_(!1)},H=O=>{a(O),s("builder")},B=async O=>{u(V=>V.find(le=>le.id===O.id)?V.map(le=>le.id===O.id?O:le):[O,...V]),await A0(O)},W=async O=>{u(V=>V.filter(he=>he.id!==O)),await MM(O)},ne=async O=>{u(V=>V.filter(he=>he.clientName!==O)),await DM(O)},D=async O=>{const V=l.find(we=>we.id===O);if(!V)return;const he=new Date().toISOString(),le={...JSON.parse(JSON.stringify(V)),id:crypto.randomUUID(),name:`Copy of ${V.name}`,dateCreated:he,lastUpdated:he,history:[]};u(we=>[le,...we]),await A0(le)};return n?y.jsx("div",{className:"h-screen w-screen bg-slate-950 flex items-center justify-center",children:y.jsx(rv,{className:"text-indigo-500 animate-spin",size:32})}):co()&&!t?y.jsx(RM,{}):y.jsx(TM,{children:y.jsxs("div",{className:"font-sans text-slate-900 relative bg-slate-50 h-screen w-screen overflow-hidden",children:[i==="dashboard"?y.jsx(u3,{scenarios:l,onCreateNew:U,onSelect:H,onDelete:W,onDeleteClient:ne,onDuplicate:D,initialClient:o==null?void 0:o.clientName,userDefaults:m,onUpdateDefaults:M,onLogout:T,onSync:()=>N(),isSyncing:f,userEmail:(j=t==null?void 0:t.user)==null?void 0:j.email}):y.jsx(IM,{initialScenario:o,onSave:B,onBack:()=>s("dashboard"),validationThresholds:m.validationThresholds}),y.jsx(hs,{isOpen:S,onClose:()=>_(!1),title:"Start New Scenario",subtitle:"Enter client details to begin analysis",maxWidth:"max-w-md",children:y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-1.5 ml-0.5",children:"Borrower Name"}),y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:y.jsx(OT,{size:16,className:"text-slate-400 group-focus-within:text-indigo-500 transition-colors"})}),y.jsx("input",{id:"clientNameInput",type:"text",list:"existing-clients",autoFocus:!0,value:E.clientName,onChange:O=>b(V=>({...V,clientName:O.target.value})),className:"w-full pl-9 pr-4 h-10 bg-white border border-slate-200 rounded-lg text-sm text-slate-900 placeholder-slate-400 focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all shadow-sm",placeholder:"e.g. John Doe"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest mb-2 ml-0.5",children:"Transaction Type"}),y.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-lg",children:[y.jsx("button",{onClick:()=>b(O=>({...O,transactionType:"Purchase"})),className:`flex-1 py-2 px-4 text-xs font-bold uppercase rounded-md transition-all ${E.transactionType==="Purchase"?"bg-white shadow text-indigo-700 ring-1 ring-black/5":"text-slate-500 hover:text-slate-700"}`,children:"Purchase"}),y.jsx("button",{onClick:()=>b(O=>({...O,transactionType:"Refinance"})),className:`flex-1 py-2 px-4 text-xs font-bold uppercase rounded-md transition-all ${E.transactionType==="Refinance"?"bg-white shadow text-indigo-700 ring-1 ring-black/5":"text-slate-500 hover:text-slate-700"}`,children:"Refinance"})]})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex justify-between items-center mb-1.5 ml-0.5",children:[y.jsx("label",{className:"block text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Property Address"}),y.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group select-none",children:[y.jsx("div",{className:`w-3.5 h-3.5 rounded border flex items-center justify-center transition-all ${E.isTBD?"bg-indigo-600 border-indigo-600":"border-slate-300 bg-white group-hover:border-slate-400"}`,children:E.isTBD&&y.jsx(rb,{size:10,className:"text-white",strokeWidth:3})}),y.jsx("input",{type:"checkbox",className:"hidden",checked:E.isTBD,onChange:O=>b(V=>({...V,isTBD:O.target.checked}))}),y.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider transition-colors ${E.isTBD?"text-indigo-600":"text-slate-400 group-hover:text-slate-600"}`,children:"TBD"})]})]}),y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:y.jsx(qf,{size:16,className:`transition-colors ${E.isTBD?"text-slate-300":"text-slate-400 group-focus-within:text-indigo-500"}`})}),y.jsx("input",{type:"text",value:E.isTBD?"":E.address,disabled:E.isTBD,onChange:O=>b(V=>({...V,address:O.target.value})),className:`w-full pl-9 pr-4 h-10 border rounded-lg text-sm placeholder-slate-400 focus:outline-none transition-all shadow-sm ${E.isTBD?"bg-slate-50 border-slate-200 text-slate-400 cursor-not-allowed placeholder-slate-300":"bg-white border-slate-200 text-slate-900 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500"}`,placeholder:E.isTBD?"No Address Required":"123 Main St, City, State"})]})]}),y.jsxs("div",{className:"pt-4 flex gap-3",children:[y.jsx("button",{onClick:()=>_(!1),className:"flex-1 h-10 text-slate-600 hover:bg-slate-50 border border-slate-200 rounded-lg font-bold transition-all text-xs uppercase tracking-wide",children:"Cancel"}),y.jsxs("button",{onClick:Y,disabled:!E.clientName,className:"flex-1 h-10 rounded-lg font-bold shadow-lg transition-all text-xs uppercase tracking-wide flex items-center justify-center gap-2 disabled:bg-slate-200 disabled:text-slate-400 disabled:shadow-none disabled:cursor-not-allowed bg-emerald-600 hover:bg-emerald-500 text-white shadow-emerald-900/20",children:["Create Scenario ",y.jsx(nv,{size:14})]})]})]})}),y.jsx(OM,{})]})})},KS=(t,e,n)=>{const r=document.getElementById("root");r&&(r.innerHTML===""||r.innerHTML.includes("Application Error"))&&(r.innerHTML=`
      <div style="padding: 2rem; font-family: system-ui, sans-serif; max-width: 600px; margin: 0 auto; background: white;">
        <h2 style="color: #ef4444; margin-bottom: 1rem; font-size: 1.5rem; font-weight: bold;">${t}</h2>
        <p style="color: #374151; line-height: 1.5; margin-bottom: 1rem;">The application failed to start properly.</p>
        <div style="background: #f3f4f6; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; border: 1px solid #e5e7eb;">
          <code style="color: #dc2626; font-size: 0.875rem; font-family: monospace;">${e}</code>
        </div>
        ${n?`<p style="color: #6b7280; font-size: 0.75rem; margin-top: 1rem;">Source: ${n}</p>`:""}
        <button onclick="window.location.reload()" style="margin-top: 1.5rem; background: #2563eb; color: white; border: none; padding: 0.5rem 1rem; border-radius: 0.375rem; cursor: pointer; font-weight: bold;">Reload Application</button>
      </div>
    `)};window.addEventListener("error",t=>{KS("Application Crash",t.message,`${t.filename}:${t.lineno}`)});window.addEventListener("unhandledrejection",t=>{KS("Unhandled Promise Rejection",t.reason)});const YS=document.getElementById("root");if(!YS)throw new Error("Could not find root element to mount to");const UM=E0.createRoot(YS);UM.render(y.jsx(YN.StrictMode,{children:y.jsx(jM,{})}));export{It as _,Da as c,q5 as g};
